<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title>MySQL服务器的启动和关闭_mysql教程_IDC笔记</title>
    <meta name="keywords" content="PHP,PHP笔记,PHP教程" />
    <meta name="description" content="这篇文章主要为大家详细介绍了MySQL服务器的启动和关闭，具有一定的参考价值，可以用来参考一下。

对此感兴趣的朋友，看看idc笔记做的技术笔记！本章的说明只用于UNIX系统。如果正" />
    <meta content="Responsive admin theme build on top of Bootstrap 4" name="description" />
    <meta content="idcnote.com" name="author" />
    <link rel="shortcut icon" href="/skin1/images/favicon.ico">
    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="/skin1/css/morris.css">
    <link href="/skin1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/metismenu.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/icons.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/style.css" rel="stylesheet" type="text/css">
<link href="/SyntaxHighlighter/shCoreDefault.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/SyntaxHighlighter/shCore.js"></script>
<script type="text/javascript">
 SyntaxHighlighter.all();
</script>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
</head>
<body>
<!-- Begin page -->
		<div id="wrapper">
			<!-- Top Bar Start -->
			<div class="topbar">
				<!-- LOGO -->
				<div class="topbar-left">
					<a href="/" class="logo">
						<span class="logo-light">
                            <i class="mdi mdi-camera-control"></i>IDC笔记
                        </span>
						<span class="logo-sm">
                            <i class="mdi mdi-camera-control"></i>
                        </span>
					</a>
				</div>
				<nav class="navbar-custom">
					<ul class="navbar-right list-inline float-right mb-0">
						<!--<li class="dropdown notification-list list-inline-item d-none d-md-inline-block">
							<a class="nav-link waves-effect" href="#" id="btn-fullscreen">
								<i class="mdi mdi-arrow-expand-all noti-icon"></i>
							</a>
						</li>
						<li class="dropdown notification-list list-inline-item">
							<div class="dropdown notification-list nav-pro-img">
								<a class="dropdown-toggle nav-link arrow-none nav-user" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
									<img src="/skin1/picture/user-4.jpg" alt="user" class="rounded-circle">
								</a>
								<div class="dropdown-menu dropdown-menu-right profile-dropdown ">
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-account-circle"></i> Profile</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-wallet"></i> Wallet</a>
									<a class="dropdown-item d-block" href="#">
										<span class="badge badge-success float-right">11</span>
										<i class="mdi mdi-settings"></i> Settings</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-lock-open-outline"></i> Lock screen</a>
									<div class="dropdown-divider"></div>
									<a class="dropdown-item text-danger" href="#">
										<i class="mdi mdi-power text-danger"></i> Logout</a>
								</div>
							</div>
						</li>
						-->
					</ul>
					<ul class="list-inline menu-left mb-0">
						<li class="float-left">
							<button class="button-menu-mobile open-left waves-effect">
                            <i class="mdi mdi-menu"></i>
                        </button>
						</li>
						<li class="d-none d-md-inline-block">
							<form role="search" class="app-search">
								<div class="form-group mb-0">
									<input type="text" class="form-control" placeholder="Search..">
									<button type="submit"><i class="fa fa-search"></i></button>
								</div>
							</form>
						</li>
					</ul>
				</nav>
			</div>
<!-- ========== Left Sidebar Start ========== -->
<div class="left side-menu">
    <div class="slimscroll-menu" id="remove-scroll">
    <!--- Sidemenu -->
    <div id="sidebar-menu">
    <!-- Left Menu Start -->
    <ul class="metismenu" id="side-menu">
			<li>
	    <a href="/mysql/biji/" class="waves-effect">
		    <i class="icon-share"></i>
		    <span>数据库笔记
		       	<span class="float-right menu-arrow">
		       	<i class="mdi mdi-chevron-right"></i>
		       	</span>
		    </span>
	    </a>
	</li>
	</ul>
</div>
<!-- Sidebar -->
<div class="clearfix"></div>
</div>
<!-- Sidebar -left -->
</div>
<!-- Left Sidebar End -->
<!-- Start right Content here -->
<div class="content-page">
	<div class="content">
		<div class="container-fluid">
			<div class="page-title-box">
				<div class="row align-items-center">
					<div class="col-sm-6">
						<h1 class="page-title">MySQL服务器的启动和关闭</h1>
					</div>
                    <div class="panel-title">
                        2022-11-12 09:21:15                    </div>
				</div>
				<!-- end row -->
			</div>
			<!-- end page-title -->
			<!-- START ROW -->
			<div class="panel panel-forbid">
				<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>内容摘要</div>
			    <div class="panel-content">
			    <span>这篇文章主要为大家详细介绍了MySQL服务器的启动和关闭，具有一定的参考价值，可以用来参考一下。

对此感兴趣的朋友，看看idc笔记做的技术笔记！本章的说明只用于UNIX系统。如果正</span>                                     
		    	</div>
			    <div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>文章正文</div>
			    <div class="panel-content">
			    <span><p>这篇文章主要为大家详细介绍了MySQL服务器的启动和关闭，具有一定的参考价值，可以用来参考一下。</p>

<p>对此感兴趣的朋友，看看idc笔记做的技术笔记！</p>本章的说明只用于UNIX系统。如果正在运行Windows系统，可以跳过本章，因为附录A&ldquo;获得和安装软件&rdquo;一节中包含了所有需要的启动和关闭命令。调用本章给出的命令为了简洁，在大多数情况中，诸如mysqladmin、mysqldump等程序在本章中没有给出任何-h、-u或-p选项。笔者假定您将会用连接服务器所需的任何选项调用这些程序。用无特权的用户账号运行MySQL服务器在讨论如何启动服务器之前，考虑一下在服务器启动时应该运行哪个账号。服务器可以手工和自动启动。如果手工启动，则服务器以UNIX用户身份运行（您恰好作为该用户进行了注册）。即，如果笔者以paul进行注册并启动服务器，则它将以paul身份运行。如果用su命令将用户切换到root然后启动服务器，则服务器以root身份运行。但是，大多数时候可能都不会采用手工启动服务器。您很可能将安排服务器在系统引导时作为标准启动过程的一部分自动地运行。在UNIX中，该启动过程由系统以UNIX的root用户的身份执行，该过程中启动的任何进程都用root的权限运行。应该紧记MySQL服务器启动过程的两个目标：要服务器以某些非root的用户身份启动。通常，除非进程真的需要root访问权而mysql办不到，否则应限制任何进程的能力。要服务器始终以同一个用户的身份运行。服务器有时作为一个用户运行而有时又作为另一个用户运行时会产生矛盾。这将导致文件和目录以不同的所有权在该数据下被创建，甚至引起服务器不能访问数据库或表。以同一个用户的身份一致地运行服务器可以避免该问题。为了以标准的、非特权的用户身份运行数据库，可按如下步骤执行该过程：1)选择用于运行服务器的账号。mysqld可以以任何用户身份运行，但是很明显，它只为MySQL活动创建了一个单独的账号。您也可以为MySQL专门指定一个组。笔者将调用的这些用户和组的名字命名为mysqladm和mysqlgrp。如果您使用了其他的名字，则在本书中有mysqladm和mysqlgrp的地方替换它们如果您在自己的账号下安装了MySQL并且系统中没有特定的管理权限，则您可以在自己的ID用户下运行服务器。在这种情况下，应使用您自己的注册名和组名替代mysqladm和mysqlgrp。如果您利用RPM文件在RedHatLinux下安装了MySQL，则该安装程序将在mysql名下自动创建了一个账号。应使用该名字替换mysqladm。2)如果必要的话，可用系统常用的账号创建过程（account-creation）来创建服务器账号。这需要以root身份进行操作。3)关闭服务器（如果它在运行）。4)修改数据目录以及任何子目录和文件的所有权，使mysqladm用户拥有它们。例如，如果数据目录是/usr/local/var，则可按以下设置mysqladm用户的所有权：#cd/usr/local/var移动到数据目录#chown-rmysqladmin.mysqlgrp设置所有目录和文件的所有权5)修改数据目录以及任何子目录和文件的许可权，使得只有mysqladm用户能够访问它们。设置该方式以避免其他人员访问是一种好得安全预防措施。如果数据目录是/usr/local/var，则可通过mysqladm用户按下列操作设置应具有的一切（您需要以root身份运行这些命令）：#cd/usr/local/var移动到数据目录#chmod-Rgo-rwx使所有一切只对mysqladm可访问在设置数据目录及其内容的所有权和方式时，观察符号连接。您需要跟踪符号连接并修改所指向的文件或目录的所有权和方式。如果这些连接文件所定位的目录不属于您，则这样做可能会引起麻烦，因此您必须是root用户。在完成前述过程后，应确保无论是作为mysqladm还是作为root用户注册都始终启动服务器。在后者中，要确保指定了--user=mysqladm的选项，使服务器可以将其用户ID切换到mysqladm（该选项在系统启动过程中也可使用）。--user选项被增加到MySQL3.22的mysql中。如果您的版本比MySQL3.22旧，则在启动服务器并作为root用户运行时，可以使用su命令指示系统在指定账号下运行服务器。您需要阅读有关su的人工页，因为作为一个指定用户运行命令的语法被改变了。启动服务器的方法如果您已经确定了用来运行服务器的账号，则可以选择安排怎样启动服务器。可以从命令行手工运行，或在系统启动过程中自动运行服务器。有三种启动服务器的主要方法：直接调用mysqld。这或许是最小的命令方法。除了说明mysqld--help是一个有用的命令（用它可以查找您可利用其他启动方法使用的选项）外，笔者不打算进一步讨论它。调用safe_mysqld脚本。safe_mysqld试图确定服务器程序和数据目录的位置，然后利用反映这些位置的选项调用服务器。safe_mysqld将服务器的标准错误输出重定向到数据目录的错误文件中，并以记录的形式出现。在启动服务器后，safe_mysqld还监控服务器，并在其死机时重新启动。safe_mysqld通常用于UNIX的BSD风格的版本。如果您曾经作为root或在系统启动程序中启动safe_mysqld，则错误日志将由root拥有。如果您试着以非特权的用户身份调用safe_mysqld，则可能引起&ldquo;所有权被拒绝&rdquo;的错误。删除该错误文件再试一次。调用mysql.server脚本。通过运行safe_mysqld.mysql.server，该脚本启动服务器。该脚本建议在使用SystemV启动/关闭系统的系统中使用。这个系统包括几个包含在机器登录或退出一个特定运行级时被调用的脚本的目录。它可以利用start或stop参数进行调用，以指明希望启动还是关闭服务器。safe_mysqld脚本被安装在MySQL安装目录的bin目录下，或者在MySQL源程序分发包的scripts目录中。mysql.server脚本安装在MySQL安装目录的share/mysql目录下，或者在MySQL源程序分发包的support-files目录中。如果要使用它，应将其拷贝到合适的启动目录中。对于BSD风格的系统，在/etc目录中有几个文件相对应，它们在引导期间开始服务。这些文件的名字通常以&lsquo;rc&#39;开始，因此很可能会有一个名为rc.local（或类似的名字）的文件来启动本地的安装服务。在这样的系统中，您可能要按如下方法添加一些行到rc.local文件中以启动服务器（如果路径与您系统中的不同，可将其修改成safe_mysqld）：if(-x/usr/local/bin/safe_mysqld);then/usr/local/bin/safe_mysqld&amp;fi对于SystemV风格的系统，可以通过将其放置在/etc下的合适的启动目录中来安装mysql.server。如果您运行Linux并从RPM文件中安装了MySQL，那么这此操作可能已经完成了。否则，应该在主启动脚本目录中安装该脚本，并在合适的运行级目录中设置对它的连接。您还可使该脚本仅对root用户可执行。启动文件目录的布局随系统而变化，因此将需要全面检查来弄清系统是怎样组织它们的。例如，在LinuxPPC中，这些目录为/etc/rc.d/init.d和/etc/rc.d/rc3.d。应该按如下方法安装该脚本：#cpmysql.server/etc/rc.d/init.d#cd/etc/init.d#chmod500mysql.server#cd/etc/rc.d/rc3.d#In-s../init.d/mysql.serverS99mysql在Solaris中，主脚本目录为/etc/init.d，运行级目录为/etc/rc2.d，因此上述命令将替换为：#cpmysql.server/etc/init.d#cd/etc/init.d#chmod500mysql.server#cd/etc/rc2.d#In-s../init.d/mysql.servers99mysql在系统启动期间，S99mysql脚本利用start参数自动调用。如果您拥有chkconfig命令（它在Linux中很常用），则可用其帮助安装mysql.server脚本来代替手工运行上述的命令。1.指定启动选项在启动服务器时，如果想要指定附加的启动选项，可用两种方法进行操作。您可以修改所使用的启动脚本（safe_mysqld或mysql.server），并在调用服务器的命令行中直接指定这些选项。您还可以在选项文件中指定选项。笔者建议，如果可能的话，应在全局选项文件中指定服务器选项。通常该文件的位置是UNIX中的/etc/my.cnf和Windows中的c:my.cnf（有关使用选项文件的细节，请参阅附录E）。某些种类的信息不能作为服务器的选项指定。为了这些选项，您可能需要修改safe_mysqld。例如，如果服务器不能正确地拾取GMT中的本地时区（localtimezone）和返回时间值，可以设置TZ环境变量以给该变量一个提示。如果用safe_mysqld或mysql.server启动服务器，可以将时区设置增加到safe_mysqld中。找到启动服务器的命令行，并在该行之前增加下列命令：TZ=US/CentralexportTZ这个命令将TZ设置为USCentral时区。您需要使用合适位置的时区。该语法是Solaris的，您的系统可能会有所不同。例如，设置TZ变量的另一个常用语法为：TZ=CST6CDTexportTZ如果修改了启动脚本，当下次安装MySQL时（如，升级到更新的版本），将失去这些修改，除非在之前将该启动脚本拷贝到了其他地方。在安装新的版本之后，将您的脚本与新安装的脚本进行比较，以便看看重新建立还需要做什么改动。2.在启动期间检查表除了在系统引导时安排服务器的启动外，您还可以安装一个脚本来运行mysamchk和isamchk，以便在服务器启动前对表进行检查。您可能打算在服务器崩溃后重新启动，但表可能已经毁坏了。在服务器启动前检查这些表是发现问题的好办法。第13章包含了有关编写和安装这种脚本的细节。关闭服务器要想手工关闭服务器，可使用mysqladmin：%mysqladminshutdown要想自动关闭服务器，您不需要做特别的操作。BSD系统通常会通过给进程发送一个TERM信号来关闭服务。进程或者对其作出反应，或者被随便地取消。当mysqld接收到信号时，它会通过终止来响应。对于利用mysql.server启动服务器的SystemV-风格的系统，该关闭进程将调用带有stop参数的脚本来指示服务器进行关闭──当然，这是在假定您已经安装了mysql.server的情况下进行的。在不连接时收回服务器的控制在某些环境中，由于不能连接到服务器，您需要用手工重新启动它。当然，这有点荒谬，因为一般是通过连接到服务器然后告知服务器终止来手工关闭服务器的。那么这种情况是怎样出现的？首先，MySQL的root口令可能得到了一个您不知道的值。这种情况可能是在修改口令时发生的─例如，如果在输入新的口令值时碰巧键入了一个不可见的控制字符。还有可能就是完全忘记了口令。其次，对于localhost的连接通常是通过UNIX域的套接字文件进行的，它一般为/tmp/mysql.sock。如果该套接字文件被删除了，则本地客户机将不能进行连接。如果系统偶尔运行了一个删除/tmp中的临时文件的cron作业，这种情况就可能会发生。如果因为失去套接字文件而不能进行连接，可以通过重新启动服务器简单地进行恢复，因为服务器在启动期间重新建立了该文件。这里应知道的是，不能用该套接字建立连接（因为它已经不存在）而必须建立TCP/IP连接。例如，如果服务器的主机是pit-viper.snake.net，则可以按如下方法进行连接：%mysqladmin-p-uroot-hpit-viper.snake.netshutdown如果此套接字文件被cron作业删除，则问题将复发，直到您修改cron作业或使用另一个套接字文件为止。您可以用全局选项文件指定另一个套接字文件。例如，如果数据目录为/usr/local/var，则可通过将以下行添加到/etc/my.cnf中来移动套接字文件到那里：[mysqld]socket=/usr/local/var/mysql.sock[client]socket=/usr/local/var/mysql.sock路径名是为服务器和客户机程序二者所指定的，以便它们能使用相同的套接字文件。如果只对服务器设置路径名，客户机程序将仍然在旧的位置上查找套接字文件。在做出这个修改后应重新启动服务器，使它在新的位置创建套接字文件。如果由于您忘记了root的口令或将其修改为一个您不知道的值而不能进行连接，则需要收回服务器的控制以便重新设置口令：关闭服务器。如果您以root用户的身份在服务器主机上进行登录，可用kill命令终止服务器。通过使用ps命令或通过查看服务器的PID文件（通常放在数据目录中）能找出服务器的ID进程。最好先试着用标准的kill命令取消服务器，该命令将一个TERM信号发送到服务器上，以查看服务器是否通过关闭信号来响应。也就是说，表和日志将被适当地刷新。如果服务器被堵塞并且没有响应正常的终止信号，可使用kill-9强制终止它。这是最后的一个方法，因为可能存在未刷新的更改，并且要承担非一致状态下将表保留下来的风险。如果用kill-9终止服务器，应确保在重新启动服务器之前利用myisamchk和isamchk对表进行检查（参见第13章）用--skip-grant-tables选项重新启动服务器。该操作告诉服务器不要使用授权的表检查连接。这允许您作为root用户不用输入口令即可进行连接。在连接之后，修改root的口令。告诉服务器再利用mysqladminflush-privileges使用授权表启动。如果您的mysqladmin版本不识别flush-privileges，试着进行重新加载。

<p>注：关于MySQL服务器的启动和关闭的内容就先介绍到这里，更多相关文章的可以留意</span>                                     
		    	</div>
		    	<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>代码注释</div>
			    <div class="panel-content">
			    <span></span>                                     
		    	</div>
			</div>

			<!-- END ROW -->
			<div class="newsPage">
				<div class="newsPageTurn">
				    <span><a>上一篇</a><a href='/mysql/biji/969.html'>MySQL 编码设置命令</a><a>下一篇</a><a href='/mysql/biji/971.html'>MySQL 没有完全卸载将导致其安装不成功</a></span>
				</div>
			</div>
		</div>


<div id="author-box">
    <h3>作者：喵哥笔记</h3>
        <div class="author-info">
            <div class="author-avatar">
                <img src="/skin1/picture/01.jpg" alt="IDC笔记" class="avatar" width="64" height="64">
            </div>
        <div class="author-description">
            <p>学的不仅是技术，更是梦想！</p>
            <ul class="author-social follows nb">
            	<li>
                    <a target="_blank" href="/" title="IDC笔记">IDC笔记</a>
                </li>
            </ul>
        </div>
        <div class="clear"></div>
    </div>
</div>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
<!-- container-fluid -->
	</div>
<!-- content -->
	<footer class="footer">
	© 2020 IDC笔记 <i class="mdi mdi-heart text-danger"></i>. | 备案号：<a href="https://beian.miit.gov.cn/">辽ICP备18000516号</a>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?674585fbbd2294d3faf910f668ea91b4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

	</footer>
</div>

</div>
<!-- END wrapper -->
<!-- jQuery  -->
<script src="/skin1/js/jquery.min.js"></script>
<script src="/skin1/js/bootstrap.bundle.min.js"></script>
<script src="/skin1/js/metismenu.min.js"></script>
<script src="/skin1/js/jquery.slimscroll.js"></script>
<script src="/skin1/js/waves.min.js"></script>
<!--Morris Chart-->
<script src="/skin1/js/morris.min.js"></script>
<script src="/skin1/js/raphael.min.js"></script>
<script src="/skin1/js/dashboard.init.js"></script>
<script src="/skin1/js/app.js"></script>
<script src="/foot.js"></script>
</body>
</html>