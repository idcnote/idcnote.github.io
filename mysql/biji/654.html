<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title>MySQL常用sql与命令之从入门到删库跑路的解决办法_mysql教程_IDC笔记</title>
    <meta name="keywords" content="PHP,PHP笔记,PHP教程" />
    <meta name="description" content="这篇文章主要为大家详细介绍了MySQL常用sql与命令之从入门到删库跑路的简单示例，具有一定的参考价值，可以用来参考一下。

感兴趣的小伙伴，下面一起跟随512笔记的小玲来看看吧！" />
    <meta content="Responsive admin theme build on top of Bootstrap 4" name="description" />
    <meta content="idcnote.com" name="author" />
    <link rel="shortcut icon" href="/skin1/images/favicon.ico">
    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="/skin1/css/morris.css">
    <link href="/skin1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/metismenu.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/icons.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/style.css" rel="stylesheet" type="text/css">
<link href="/SyntaxHighlighter/shCoreDefault.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/SyntaxHighlighter/shCore.js"></script>
<script type="text/javascript">
 SyntaxHighlighter.all();
</script>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
</head>
<body>
<!-- Begin page -->
		<div id="wrapper">
			<!-- Top Bar Start -->
			<div class="topbar">
				<!-- LOGO -->
				<div class="topbar-left">
					<a href="/" class="logo">
						<span class="logo-light">
                            <i class="mdi mdi-camera-control"></i>IDC笔记
                        </span>
						<span class="logo-sm">
                            <i class="mdi mdi-camera-control"></i>
                        </span>
					</a>
				</div>
				<nav class="navbar-custom">
					<ul class="navbar-right list-inline float-right mb-0">
						<!--<li class="dropdown notification-list list-inline-item d-none d-md-inline-block">
							<a class="nav-link waves-effect" href="#" id="btn-fullscreen">
								<i class="mdi mdi-arrow-expand-all noti-icon"></i>
							</a>
						</li>
						<li class="dropdown notification-list list-inline-item">
							<div class="dropdown notification-list nav-pro-img">
								<a class="dropdown-toggle nav-link arrow-none nav-user" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
									<img src="/skin1/picture/user-4.jpg" alt="user" class="rounded-circle">
								</a>
								<div class="dropdown-menu dropdown-menu-right profile-dropdown ">
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-account-circle"></i> Profile</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-wallet"></i> Wallet</a>
									<a class="dropdown-item d-block" href="#">
										<span class="badge badge-success float-right">11</span>
										<i class="mdi mdi-settings"></i> Settings</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-lock-open-outline"></i> Lock screen</a>
									<div class="dropdown-divider"></div>
									<a class="dropdown-item text-danger" href="#">
										<i class="mdi mdi-power text-danger"></i> Logout</a>
								</div>
							</div>
						</li>
						-->
					</ul>
					<ul class="list-inline menu-left mb-0">
						<li class="float-left">
							<button class="button-menu-mobile open-left waves-effect">
                            <i class="mdi mdi-menu"></i>
                        </button>
						</li>
						<li class="d-none d-md-inline-block">
							<form role="search" class="app-search">
								<div class="form-group mb-0">
									<input type="text" class="form-control" placeholder="Search..">
									<button type="submit"><i class="fa fa-search"></i></button>
								</div>
							</form>
						</li>
					</ul>
				</nav>
			</div>
<!-- ========== Left Sidebar Start ========== -->
<div class="left side-menu">
    <div class="slimscroll-menu" id="remove-scroll">
    <!--- Sidemenu -->
    <div id="sidebar-menu">
    <!-- Left Menu Start -->
    <ul class="metismenu" id="side-menu">
			<li>
	    <a href="/mysql/biji/" class="waves-effect">
		    <i class="icon-share"></i>
		    <span>数据库笔记
		       	<span class="float-right menu-arrow">
		       	<i class="mdi mdi-chevron-right"></i>
		       	</span>
		    </span>
	    </a>
	</li>
	</ul>
</div>
<!-- Sidebar -->
<div class="clearfix"></div>
</div>
<!-- Sidebar -left -->
</div>
<!-- Left Sidebar End -->
<!-- Start right Content here -->
<div class="content-page">
	<div class="content">
		<div class="container-fluid">
			<div class="page-title-box">
				<div class="row align-items-center">
					<div class="col-sm-6">
						<h1 class="page-title">MySQL常用sql与命令之从入门到删库跑路的解决办法</h1>
					</div>
                    <div class="panel-title">
                        2022-11-12 09:18:10                    </div>
				</div>
				<!-- end row -->
			</div>
			<!-- end page-title -->
			<!-- START ROW -->
			<div class="panel panel-forbid">
				<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>内容摘要</div>
			    <div class="panel-content">
			    <span>这篇文章主要为大家详细介绍了MySQL常用sql与命令之从入门到删库跑路的简单示例，具有一定的参考价值，可以用来参考一下。

感兴趣的小伙伴，下面一起跟随512笔记的小玲来看看吧！</span>                                     
		    	</div>
			    <div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>文章正文</div>
			    <div class="panel-content">
			    <span><p>这篇文章主要为大家详细介绍了MySQL常用sql与命令之从入门到删库跑路的简单示例，具有一定的参考价值，可以用来参考一下。</p>

<p>感兴趣的小伙伴，下面一起跟随数据库教程的小编来看看吧！</p>
<div id="navCategory">
<h5 class="catalogue">目录</h5>
<ul class="first_class_ul">
	<li>启动与停止</li>
	<li>数据库相关操作</li>
	<li>数据库表相关操作
	<ul class="second_class_ul">
		<li>约束相关</li>
		<li>默认约束</li>
	</ul></li>
	<li>数据库查询进阶
	<ul class="second_class_ul">
	</ul></li>
	<li>SQL的四种连接查询
	<ul class="second_class_ul">
		<li>内连接</li>
		<li>外连接</li>
		<li>要点梳理</li>
	</ul></li>
	<li>mysql的事务
	<ul class="second_class_ul">
		<li>关于事务</li>
		<li>事务控制</li>
	</ul></li>
	<li>数据库的三大范式
	<ul class="second_class_ul">
		<li>第一范式</li>
		<li>第二范式</li>
		<li>第三范式</li>
	</ul></li>
</ul>
<p class="maodian"></p>
<h2>启动与停止</h2>
<p>启动mysql服务</p>
<blockquote>
<p>sudo /usr/local/mysql/support-files/mysql.server start</p></blockquote>
<p>停止mysql服务</p>
<blockquote>
<p>sudo /usr/local/mysql/support-files/mysql.server stop</p></blockquote>
<p>重启mysql服务</p>
<blockquote>
<p>sudo /usr/local/mysql/support-files/mysql.server restart</p></blockquote>
<p>进入mysql目录文件</p>
<blockquote>
<p>cd /usr/local/mysql/support-files</p></blockquote>
<p>进入mysql命令行</p>
<blockquote>
<p>/usr/local/MySQL/bin/mysql -uroot -p12345678</p></blockquote>
<p>退出数据库</p>
<blockquote>
<p>exit;</p></blockquote>
<p class="maodian"></p>
<h2>数据库相关操作</h2>
<p>查询所有数据库</p>
<blockquote>
<p>show databases;</p></blockquote>
<p>选择(使用)数据库</p>
<blockquote>
<p>use mybatis;</p></blockquote>
<p>查询当前正在使用的数据库名称</p>
<blockquote>
<p>select database();</p></blockquote>
<p>创建数据库</p>
<blockquote>
<p>create database 数据库名称;</p></blockquote>
<p>创建数据库,判断不存在,再创建: <code>create database if not exists 数据库名;</code></p>
<p>删除数据库</p>
<blockquote>
<p>drop database 数据库名称;</p></blockquote>
<p>判断数据库存在，存在再删除:<code>drop database if exists 数据库名称;</code></p>
<p class="maodian"></p>
<h2>数据库表相关操作</h2>
<p>创建数据库表</p>
<p>代码如下：</p>
<pre>
<code>
create table 表名(
	列名1 数据类型1,
	列名2 数据类型2,
	....
	列名n 数据类型n
	);</code></pre>
<p>MySQL常用sql与命令之从入门到删库跑路</p>
<p>复制表</p>
<blockquote>
<p>create table 表名 like 被复制的表名;</p></blockquote>
<p>查看某个数据库中的所有的数据表</p>
<blockquote>
<p>show tables;</p></blockquote>
<p>查看数据表的结构</p>
<blockquote>
<p>desc pet;或describe pet;</p></blockquote>
<p>修改表名</p>
<blockquote>
<p>alter table 表名 rename to 新的表名;</p></blockquote>
<p>修改表的字符集</p>
<blockquote>
<p>alter table 表名 character set 字符集名称;</p></blockquote>
<p>添加一列</p>
<blockquote>
<p>alter table 表名 add 列名 数据类型;</p></blockquote>
<p>删除列</p>
<blockquote>
<p>alter table 表名 drop 列名;</p></blockquote>
<p>删除表</p>
<blockquote>
<p>drop table 表名;或drop table if exists 表名 ;</p></blockquote>
<p>添加数据</p>
<blockquote>
<p>insert into 表名(列名1,列名2,...列名n) values(值1,值2,...值n);</p></blockquote>
<p>其中列名和值要一一对应。如果表名后，不定义列名，则默认给所有列添加值,如:insert into 表名 values(值1,值2,...值n);除了数字类型，其他类型需要使用引号(单双都可以)引起来.</p>
<p>删除数据</p>
<blockquote>
<p>delete from 表名 where 条件</p></blockquote>
<p>其中:如果不加条件，则删除表中所有记录。如果要删除所有记录, 使用delete from 表名;一般不推荐使用。这种操作有多少条记录就会执行多少次删除操作.</p>
<blockquote>
<p>TRUNCATE TABLE 表名;推荐使用，效率更高 先删除表，然后再创建一张一样的表.</p></blockquote>
<p>修改数据</p>
<blockquote>
<p>update 表名 set 列名1 = 值1, 列名2 = 值2,... where 条件;如果不加任何条件，则会将表中所有记录全部修改.</p></blockquote>
<p>代码如下：</p>
<pre>
<code>
insert into user2 values (1,'李四','123'); // 增
delete from pet where ower = 'disn'; //删
update pet set name = '后裔' where ower = 'dfn'; //改</code></pre>
<p>MySQL常用sql与命令之从入门到删库跑路</p>
<p>查询数据</p>
<p>代码如下：</p>
<pre>
<code>
①&gt; 、&lt; 、&lt;= 、&gt;= 、= 、&lt;&gt;	
②BETWEEN...AND	
③ IN( 集合)	
④LIKE 模糊查询	
⑤_单个任意字符
⑥%多个任意字符
⑦IS NULL 
⑧and 或 &amp;&amp;
⑨or 或 || 
⑩not 或 !
查询条件应用举例:
SELECT * FROM user WHERE age &gt;= 18;
SELECT * FROM user WHERE age &gt;= 18 AND age &lt;=36;
SELECT * FROM user WHERE age BETWEEN 40 AND 70;
SELECT * FROM user WHERE age IN (6,18,37);
// 关于NULL
SELECT * FROM user WHERE height = NULL; 错误,因为null值不能使用=或（!=) 判断
SELECT * FROM user WHERE height IS NULL;(正确)
SELECT * FROM user WHERE height IS NOT NULL;(正确)
// 查询姓陈的有哪些？&lt; like&gt;
SELECT * FROM user WHERE NAME LIKE '陈%';
// 查询姓名第二个字是新的人
SELECT * FROM user WHERE NAME LIKE "_新%";
// 查询姓名是三个字的人
SELECT * FROM user WHERE NAME LIKE '___';
// 查询姓名中包含狗的人
SELECT * FROM user WHERE NAME LIKE '%狗%';
</code></pre>
<p>MySQL常用sql与命令之从入门到删库跑路</p>
<p class="maodian"></p>
<h3>约束相关</h3>
<p>主键约束 (primary key)</p>
<p>能够唯一确定一张表中的的一条记录,我们通过给某个字段添加约束, 可以使得这个字段不重复且不为空.</p>
<p>代码如下：</p>
<pre>
<code>
 create table user (
	id int primary key auto_increment, // 在创建表时，添加主键约束，并且完成主键自增	
	name varchar(20)
 );
-- 联合主键: 由多个字段联合组成的主键, 只要联合的主键加起来不重复就可以.联合主键中的任何一个字段都不能为空.
create table user2 (
 	id int,
 	name varchar(20),
 	password varchar(20),
 	primary key(id, name)
);

</code></pre>
<p>MySQL常用sql与命令之从入门到删库跑路</p>
<p>表创建完成后:</p>
<p>添加主键.如:</p>
<p>①alter table user add primary key(id);</p>
<p>②alter table user modify id int primary key;</p>
<p>删除主键:<code>alter table user drop primary key;</code></p>
<p>唯一约束：unique 约束修饰的字段的值不可以重复.</p>
<p>代码如下：</p>
<pre>
<code>
 create table user1 (
 	id int primary key auto_increment,
 	phone_num varchar(20) unique
 	 );
 create table user2 (
 	id int primary key auto_increment,
 	name varchar(20),
 	unique(id, name) // 表示两个字段在一起不重复就可以
 	 );
 	 
</code></pre>
<p>MySQL常用sql与命令之从入门到删库跑路</p>
<p>也可以在表创建完成后, 通过<code>alter table user3 add unique(phone_num);</code>或<code>alter table user3 modify phone_num varchar(20) unique;</code>来添加unique约束.删除unique约束:<code>alter table user3 drop index phone_num;</code></p>
<p>非空约束：not null 修饰的字段不能为空NULL</p>
<p>代码如下：</p>
<pre>
<code>
create table user3 (
	id int primary key auto_increment,
	name varchar(20) not null
	);
</code></pre>
<p>MySQL常用sql与命令之从入门到删库跑路</p>
<p>删除非空约束:<code>alter table user3 modify name varchar(20);</code></p>
<p class="maodian"></p>
<h3>默认约束</h3>
<p>当我们插入字段值时候,如果对应的字段没有插入值,则会使用默认值.如果传入了值,则不会使用默认值.</p>
<p>代码如下：</p>
<pre>
<code>
create table user4(
	id int primary key auto_increment,
	age int default 18,
	name varchar(20) not null
	);
</code></pre>
<p>MySQL常用sql与命令之从入门到删库跑路</p>
<p>外键约束：foreign key</p>
<p>代码如下：</p>
<pre>
<code>
create table 表名(
....
外键列
constraint 外键名称 foreign key (外键列名称) references 主表名称(主表列名称)
);
// 班级
create table classes(
	id int primary key,
	name varchar(20)
	);	
// 学生表
create table student (
		id	int primary key,
		name varchar(20),
		class_id int,
		foreign key(class_id) references classes(id)
		);
		
</code></pre>
<p>MySQL常用sql与命令之从入门到删库跑路</p>
<p class="maodian"></p>
<h2>数据库查询进阶</h2>
<p>代码如下：</p>
<pre>
<code>
查询所有记录

例如:查询student表中的所有记录.

select * from student;

查询指定字段

例如:查询student中的sname,ssex,class.

select sname,ssex,class from student;

查询教师表中所有的单位即不重复的depart列. &lt;排除重复distinct&gt;

select distinct depart from teacher;

查询score表中成绩在60到80之间的所有记录 &lt;查询区间 between…and…&gt;

select * from score where degree between 60 and 80;
select * from score where degree &gt; 60 and degree &lt; 80;

查询score表中成绩为85,86或88的记录

select * from score where degree in(85, 86, 88);

查询student表中'95031'班或性别为'女'的同学记录. &lt;or 表示或者&gt;

select *from student where class = '95031' or sex = '女';

以class降序查询student表的所有记录 &lt;降序:desc, 升序asc,默认升序(省略)&gt;.

select * from student order by class desc;

以cno升序,degree降序查询score表的所有记录

select * from score order by cno asc,degree desc;

查询"95031'班的学生人数 &lt;统计 count&gt;

select count(*) from student where class = '95031';
查询score表中最高分的学生学号和课程号(子查询)

select sno, cno from score where degree = (select max(degree) from score );其中:select max(degree) from score 先查出最高分.

select sno,cno degree from score order by degree desc limit 0,1;其中:limit第一个数字表示从多少开始,第二个表示多少条.当有多个相同最高分时,容易出bug,不推荐使用这种方式查询.

查询每门课的平均成绩

select cno, avg(degree) from score group by cno;

查询score表中至少有2名学生选修的并以3开头的课程的平均分数.

select cno, avg(degree) from score group by cno having count(cno) &gt;= 2 and cno like '3%';

查询分数大于70, 小于90的sno列.

select sno, degree from score where degree between 70 and 90;
查询所有学生的sname, cno和degree列.
select sname, cno, degree from student, score where student.sno = score.sno;
查询所有学生的sno,cname和degree列
select sno,cname,degree from course ,score where course.cno = score.cno;
查询"95031"班学生每门课的平均分.
select cno, avg(degree) from score where sno in (select sno from student where class = '95031') group by cno;
查询选修"3-105"课程的成绩高于"109"号同学"3-105"成绩的所有同学的记录.
select * from score where cno = '3-105' and degree &gt; (select degree from score where sno = '109' and cno = '3-105');
查询成绩高于学号为"109", 课程号为"3-105"的成绩的所有记录
select * from score where degree &gt; (select degree from score where sno = '109' and cno = '3-105');
查询和学号为108,101的同学同年出生的所有的sno, sname, sbirthday
select *from student where year(sbirthday) in (select year(sbirthday) from student where sno in(108, 101));
查询"张旭"教师任课的学生成绩
select * from score where cno = ( select cno from course where tno = (select tno from teacher where tname = "张旭"));
查询选修某课程的同学人数多于5人的教师姓名.
select tname from teacher where tno = (select tno from course where cno = (select cno from score group by cno having count(*) &gt; 5));
查询存在有85分以上的成绩的课程的cno
select cno, degree from score where degree &gt; 85;
查询出"计算机系"教师所教课程的成绩表
select * from score where cno in (select cno from course where tno in (select tno from teacher where depart = "计算机系"));
查询选修编号为"3-105"课程且成绩至少高于选休息编号为"3-245"的同学的cno,sno和degree,并按degree从高到低次序排序.
any 至少一个.
</code></pre>
<p>MySQL常用sql与命令之从入门到删库跑路</p>
<p>代码如下：</p>
<pre>
<code>
select * from score where cno = '3-105' and degree &gt; any(select degree from score where cno = '3-245') order by degree desc;</code></pre>
<p>MySQL常用sql与命令之从入门到删库跑路</p>
<p>查询选修编号为&quot;3-105&quot;课程且成绩高于选休息编号为&quot;3-245&quot;的同学的cno,sno和degree,并按degree从高到低次序排序.all 表示所有</p>
<p>代码如下：</p>
<pre>
<code>
select * from score where cno = '3-105' and degree &gt; all(select degree from score where cno = '3-245') order by degree desc;</code></pre>
<p>MySQL常用sql与命令之从入门到删库跑路</p>
<p>查询所有教师和同学的name, sex和birthday</p>
<blockquote>
<p>select tname as name, tsex as sex, tbirthday as birthday from teacher union select sname, ssex, sbirthday from student;</p></blockquote>
<p>查询所有&quot;女&quot;教师和&quot;女&quot;同学的name,sex和birthday</p>
<blockquote>
<p>select tname as name, tsex as sex, tbirthday as birthday from teacher where tsex = &#39;女&#39; union select sname, ssex, sbirthday from student where ssex = &#39;女&#39;;</p></blockquote>
<p>查询成绩比该课程成绩低的同学的成绩表思路: 从a表查出对应的分数跟b表筛选出来的平均分作比较.</p>
<p>代码如下：</p>
<pre>
<code>
select * from score a where degree &lt; (select avg(degree) from score b where a.cno = b.cno);
表a
+-----+-------+--------+
| sno | cno | degree |
+-----+-------+--------+
| 101 | 3-105 | 91 |
| 102 | 3-105 | 92 |
| 103 | 3-105 | 92 |
| 103 | 3-245 | 86 |
| 103 | 6-166 | 85 |
| 104 | 3-105 | 81 |
| 105 | 3-105 | 88 |
| 105 | 3-245 | 75 |
| 105 | 6-166 | 79 |
| 109 | 3-105 | 76 |
| 109 | 3-245 | 68 |
| 109 | 6-166 | 81 |
+-----+-------+--------+
12 rows in set (0.00 sec) 

表b
| sno | cno | degree |
+-----+-------+--------+
| 101 | 3-105 | 91 |
| 102 | 3-105 | 92 |
| 103 | 3-105 | 92 |
| 103 | 3-245 | 86 |
| 103 | 6-166 | 85 |
| 104 | 3-105 | 81 |
| 105 | 3-105 | 88 |
| 105 | 3-245 | 75 |
| 105 | 6-166 | 79 |
| 109 | 3-105 | 76 |
| 109 | 3-245 | 68 |
| 109 | 6-166 | 81 |
+-----+-------+--------+
12 rows in set (0.00 sec) 

</code></pre>
<p>MySQL常用sql与命令之从入门到删库跑路</p>
<p>查询所有任课教师的tname和depart</p>
<blockquote>
<p>select tname, depart from teacher where tno in (select tno from course);</p></blockquote>
<p>查询至少有两名男生的班号</p>
<blockquote>
<p>select class from student where ssex= &#39;男&#39; group by class having count(*) &gt; 1</p></blockquote>
<p>查询student表中不姓&quot;王&quot;的同学记录</p>
<blockquote>
<p>select * from student where sname not like &#39;王%&#39;;</p></blockquote>
<p>查询student表中每个学生的姓名和年龄</p>
<blockquote>
<p>select sname, year(now()) - year(sbirthday) as &#39;年龄&#39; from student;</p></blockquote>
<p>查询student表中最大和最小的sbirthday日期值</p>
<blockquote>
<p>select max(sbirthday) as &#39;最大&#39;, min(sbirthday) as &#39;最小&#39; from student;</p></blockquote>
<p>以班号和年龄从大到小的顺序查询student表中的全部记录</p>
<blockquote>
<p>select * from student order by class desc, sbirthday;</p></blockquote>
<p>查询&quot;男&quot;教师及其所上的课程</p>
<blockquote>
<p>select * from course where tno in (select tno from teacher where tsex = &#39;男&#39;);</p></blockquote>
<p>查询最高分同学的sno, cno和degree列</p>
<blockquote>
<p>select * from score where degree = (select max(degree) from score);</p></blockquote>
<p>查询和李军同性别的所有同学的sname</p>
<blockquote>
<p>select sname from student where ssex = (select ssex from student where sname = &#39;李军&#39;);</p></blockquote>
<p>查询和李军同性别并同班 同学sname</p>
<blockquote>
<p>select sname from student where ssex = (select ssex from student where sname = &quot;李军&quot;) and class = (select class from student where sname = &#39;李军&#39;);</p></blockquote>
<p>查询所有选修&quot;计算机导论&quot;课程的&quot;男&quot;的成绩表</p>
<blockquote>
<p>select * from score where cno = (select cno from course where cname = &#39;计算机导论&#39;) and sno in(select sno from student where ssex = &#39;男&#39;);</p></blockquote>
<p class="maodian"></p>
<h2>SQL的四种连接查询</h2>
<p>代码如下：</p>
<pre>
<code>
分析用例的数据准备:
mysql&gt; select * from person;
+----+--------+--------+
| id | name | cardId |
+----+--------+--------+
| 1 | 张三 | 1 |
| 2 | 李四 | 3 |
| 3 | 王五 | 6 |
+----+--------+--------+
3 rows in set (0.00 sec)
mysql&gt; select * from card;
+------+-----------+
| id | name |
+------+-----------+
| 1 | 饭卡 |
| 2 | 建行卡 |
| 3 | 农行卡 |
| 4 | 工商卡 |
| 5 | 邮政卡 |
+------+-----------+
5 rows in set (0.00 sec)
</code></pre>
<p>MySQL常用sql与命令之从入门到删库跑路</p>
<p class="maodian"></p>
<h3>内连接</h3>
<p><code>inner join</code> 或者 <code>join</code>, 后面通常跟对一个<code>on</code>表示条件---- 内联查询: 就是两张表中的数据, 通过某个字段相等,查询出相关记录数据.&lt;当前表中的cardid与id相同.&gt;</p>
<p>代码如下：</p>
<pre>
<code>
select * from person inner join card on person.cardId = card.id;
+----+--------+--------+------+-----------+
| id | name | cardId | id | name |
+----+--------+--------+------+-----------+
| 1 | 张三 | 1 | 1 | 饭卡 |
| 2 | 李四 | 3 | 3 | 农行卡 |
+----+--------+--------+------+-----------+
2 rows in set (0.00 sec)

</code></pre>
<p>MySQL常用sql与命令之从入门到删库跑路</p>
<p class="maodian"></p>
<h3>外连接</h3>
<p>左外连接:左连接 <code>left join </code>或者 <code>left outer join</code>---- 左外连接, 会把左边表里面的所有数据取出来, 而右边表中的数据,如果有相等的,就显示出来, 如果没有, 则会补NULL.</p>
<p>代码如下：</p>
<pre>
<code>
select * from person left join card on person.cardId = card.id;

+----+--------+--------+------+-----------+
| id | name | cardId | id | name |
+----+--------+--------+------+-----------+
| 1 | 张三 | 1 | 1 | 饭卡 |
| 2 | 李四 | 3 | 3 | 农行卡 |
| 3 | 王五 | 6 | NULL | NULL |
+----+--------+--------+------+-----------+
3 rows in set (0.00 sec)

</code></pre>
<p>MySQL常用sql与命令之从入门到删库跑路</p>
<p>右外连接:右连接 <code>right join</code> 或者<code>right outer join</code></p>
<p>----右外连接, 会把右边表里面的所有数据取出来, 而左边表中的数据,如果有相等的,就显示出来, 如果没有, 则会补NULL.</p>
<p>代码如下：</p>
<pre>
<code>
select * from person right join card on person.cardId = card.id;

+------+--------+--------+------+-----------+
| id | name | cardId | id | name |
+------+--------+--------+------+-----------+
| 1 | 张三 | 1 | 1 | 饭卡 |
| 2 | 李四 | 3 | 3 | 农行卡 |
| NULL | NULL | NULL | 2 | 建行卡 |
| NULL | NULL | NULL | 4 | 工商卡 |
| NULL | NULL | NULL | 5 | 邮政卡 |
+------+--------+--------+------+-----------+
5 rows in set (0.01 sec)

</code></pre>
<p>MySQL常用sql与命令之从入门到删库跑路</p>
<p>全外连接:完全外连接 <code>full join</code> 或者<code>full outer join</code>&lt;mysql不支持full join&gt;</p>
<p>代码如下：</p>
<pre>
<code>
mysql&gt; select * from person full join card on person.cardId= card.id;
ERROR 1054 (42S22): Unknown column 'person.cardId' in 'on clause'
**** 解决mysql不支持full join的方法****
 &lt;左连接 + 右链接&gt; , 即通过union来连接左右连接. &lt;左连接 union 右链接&gt;.
eg:

select * from person left join card on person.cardId = card.id union select * from person right join card on person.cardId = card.id;

+------+--------+--------+------+-----------+
| id | name | cardId | id | name |
+------+--------+--------+------+-----------+
| 1 | 张三 | 1 | 1 | 饭卡 |
| 2 | 李四 | 3 | 3 | 农行卡 |
| 3 | 王五 | 6 | NULL | NULL |
| NULL | NULL | NULL | 2 | 建行卡 |
| NULL | NULL | NULL | 4 | 工商卡 |
| NULL | NULL | NULL | 5 | 邮政卡 |
+------+--------+--------+------+-----------+
6 rows in set (0.01 sec)

</code></pre>
<p>MySQL常用sql与命令之从入门到删库跑路</p>
<p class="maodian"></p>
<h3>要点梳理</h3>
<p>where 和 having 的区别？</p>
<blockquote>
<p>(1) having通常用在聚合函数前面，对聚合函数进行过滤,（MAX、MIN、COUNT、SUM).having通常和group by 一起连用，因为where不能加在group by的后面.(2) where 在分组之前进行限定，如果不满足条件，则不参与分组。having在分组之后进行限定，如果不满足结果，则不会被查询出来. where 后不可以跟聚合函数，having可以进行聚合函数的判断。</p></blockquote>
<p>代码如下：</p>
<pre>
<code>
MYSQL执行语句顺序，严格遵循次顺序，不能改变
select
from
where
group by
having
order by
</code></pre>
<p>MySQL常用sql与命令之从入门到删库跑路</p>
<p class="maodian"></p>
<h2>mysql的事务</h2>
<p class="maodian"></p>
<h3>关于事务</h3>
<p>mysql中, 事务其实是一个最小的不可分割的工作单元. 事务能够保证一个业务的完整性.</p>
<p>分析:</p>
<p>代码如下：</p>
<pre>
<code>
例如:
a --&gt; -100
update user set money = money - 100 where name = 'a';
b --&gt; +100
update user set money = money + 100 where name = 'b';
-- 实际程序中, 如果只有一条sql语句执行成功了,而另外一条没有执行成功?则会出现前后数据不一致的情况.
update user set money = money - 100 where name = 'a';
update user set money = money + 100 where name = 'b';
在多条sql语句,可能会有同时成功的要求,要么就同时失败.</code></pre>
<p>MySQL常用sql与命令之从入门到删库跑路</p>
<p class="maodian"></p>
<h3>事务控制</h3>
<p>(1)事务主要包含自动提交@@autocommit=1;,手动提交commit;和事务回滚rollback;.(2) mysql默认是开启事务的(自动提交).----当我们去执行一个sql语句的时候,效果会立即提现出来,且不能回滚.set autocommit = 0;设置mysql是否自动提交,&lt;0为否, 1为是.&gt;select @@autocommit;查看mysql的自动提交方式.commit; 手动提交.具体事务控制相关参照下面代码分析:</p>
<p>代码如下：</p>
<pre>
<code>
mysql&gt; select @@autocommit;
+--------------+
| @@autocommit |
+--------------+
|  1 |
+--------------+
1 row in set (0.00 sec)
// 建表
create database bank;
create table user (
	id int primary key,
 name varchar(20),
 money int
 );
// 首先在表中插入一条用户数据a.
insert into user values (1,'a',1000);
Query OK, 1 row affected (0.00 sec)
// 进行回滚操作.
mysql&gt; rollback;
Query OK, 0 rows affected (0.00 sec)
// 执行回滚后,查看数据表信息,发现即使调用了rollback,但插入的数据依然存在.说明当前不能回滚.
mysql&gt; select * from user;
+----+------+-------+
| id | name | money |
+----+------+-------+
| 1 | a | 1000 |
+----+------+-------+
1 row in set (0.00 sec)
// 可以通过设置msql的回滚自动提交为false.
set autocommit = 0;
Query OK, 0 rows affected (0.00 sec)
mysql&gt; select @@autocommit;
+--------------+
| @@autocommit |
+--------------+
|  0 |
+--------------+
1 row in set (0.00 sec)
// 也就说, 通过上面的set autocommit = 0;操作关闭了mysql的自动提交(commit).
*******再次插入数据:*******
insert into user values (2,'b',1000);
Query OK, 1 row affected (0.00 sec)
// 插入数据后查看表,用户2数据添加成功.
mysql&gt; select * from user;
+----+------+-------+
| id | name | money |
+----+------+-------+
| 1 | a | 1000 |
| 2 | b | 1000 |
+----+------+-------+
2 rows in set (0.00 sec)
// 执行回滚操作.
mysql&gt; rollback;
Query OK, 0 rows affected (0.00 sec)
// 回滚后再次查看表,发现刚才插入的数据已经被干掉了.
mysql&gt; select * from user;
+----+------+-------+
| id | name | money |
+----+------+-------+
| 1 | a | 1000 |
+----+------+-------+
1 row in set (0.01 sec)
**** 对于这种场景,如果想让用户b数据成功提交, 可以通过commit;命令执行手动提交操作.手动提交后,如果想再次通过rollback来撤销,则是不可以的.也就是说,事务一旦提交,执行的sql语句就不可以再撤销,也就是说事务一旦提交数据就会持久的产生效果.



</code></pre>
<p>MySQL常用sql与命令之从入门到删库跑路</p>
<p>(3)手动开启事务begin和start transaction都可以手动开启一个事务. 也就是说,当我们当前的mysql如果默认的是自动提交模式,则执行rollback进行事务回滚则是无效的. 但是可以通过begin和start transaction手动开启事务.</p>
<p>代码如下：</p>
<pre>
<code>
即:
 当前默认为自动提交模式,此时执行rollback无效.执行下面sql语句:
 start transaction;(或者begin;)
 update user set money = money - 100 where name = 'a';
 update user set money = money + 100 where name = 'b';
 执行完插入a,b用户数据后,再执行rollback,发现可以成功回滚事务.可以成功切换成手动开启事务的模式.若想使得插入的数据生效,也需要手动执行commit进行提交操作.
 事务开启之后,一旦commit提交,就不可以回滚,也就说,当前的这个事务在提交的时候就已经结束了.
 
</code></pre>
<p>MySQL常用sql与命令之从入门到删库跑路</p>
<p></p>
<h3>事务的四大特征</h3>
<p></p>
<p>A 原子性: 事务是最小的单元, 不可以在分割.C 一致性: 事务要求, 同一事务中的sql语句必须保证同时成功,同时失败.I 隔离性: 事务1 和事务2之间shi具有隔离性的.D 持久性: 事务一旦结束(commit,rollback),就不可以返回.事务的隔离性多个事务之间隔离的，相互独立的。但是如果多个事务操作同一批数据，则会引发一些问题，设置不同的隔离级别就可以解决这些问题.</p>
<p></p>
<h3>存在问题：</h3>
<p></p>
<p>(1) 脏读：一个事务，读取到另一个事务中没有提交的数据.(2)不可重复读(虚读)：在同一个事务中，两次读取到的数据不一样.(3)幻读：一个事务操作(DML)数据表中所有记录，另一个事务添加了一条数据，则第一个事务查询不到自己的修改.read uncommitted; 读未提交的&ndash;&gt;产生的问题：脏读、不可重复读、幻读.read committed; 读已经提交的&ndash;&gt;产生的问题：不可重复读、幻读repeatable read; 可以重复读&ndash;&gt;产生的问题：幻读serializable; 串行化&lt;性能特差&gt;</p>
<p>通常是隔离级别越高,性能越差.</p>
<p>(1)查看数据库的隔离级别mysql默认的隔离级别: REPEATABLE-READmysql8.0:系统级别的:select @@global.transaction_isolation;会话级别的:select @@transaction_isolation;mysql5.x:系统级别的:select @@global.tx_isolation;会话级别的:select @@tx_isolation;</p>
<p>代码如下：</p>
<pre>
<code>
mysql&gt; select @@global.transaction_isolation;
+--------------------------------+
| @@global.transaction_isolation |
+--------------------------------+
| REPEATABLE-READ  |
+--------------------------------+
1 row in set (0.00 sec)
</code></pre>
<p>MySQL常用sql与命令之从入门到删库跑路</p>
<p>(2)修改隔离级别set global tansaction isolation level read uncomitted;</p>
<p class="maodian"></p>
<h2>数据库的三大范式</h2>
<p class="maodian"></p>
<h3>第一范式</h3>
<p>数据表中的所有字段都是不可分割的原子项.初步可以理解为:字段值还可以继续拆分的,就不满足第一范式.比如某表中有一个address的字段,插入值为&quot;中国陕西省西安市碑林区柏树林11号&quot;.该字段值是可以继续拆分的,原则上就不满足第一范式.可以依次拆分为:国家/省/市/区/街道等等.当然,范式设计的越详细,对某些实际操作可能会更好.但不一定都是好处.&lt;比如对address字段来说,可能拆分开来永远都用不到这么详细的信息,可能就没有拆分的必要.&gt;</p>
<p class="maodian"></p>
<h3>第二范式</h3>
<p>必须是满足第一范式的前提下,第二范式要求,除主键外的每一列都必须完全依赖主键.如果要出现不完全依赖,只可能发生在联合主键的情况下.</p>
<p>代码如下：</p>
<pre>
<code>
例如:
create table myorder(
		product_id int,
		customer_id int,
		product_name varchar(20),
		customer_name varchar(20),
		primary key(product_id, customer_id
	);
	当前表中, 除主键以外的其他列, 只依赖于主键的部分字段.则不满足第二范式,通常需要拆表.
create table myorder(
		order_id int primary key,
		product_id int,
		customer_id int
	);
create table product (
		id int primary key,
		name varchar(20)
	);
create table customer(
		id int primary key,
		name varchar(20)
		);
拆分成三个表后,满足第二范式.
</code></pre>
<p>MySQL常用sql与命令之从入门到删库跑路</p>
<p class="maodian"></p>
<h3>第三范式</h3>
<p>必须先满足第二范式.除开主键列的其他列之间不能有传递依赖关系.</p>
<p>附件</p>
<p>查询语句所涉及的sql语句</p>
<p>代码如下：</p>
<pre>
<code>
create table student(
	sno varchar(20) primary key,
	sname varchar(20) not null,
	ssex varchar(20) not null,
	sbrithday datetime,
	class varchar(20)
	);

create table student(
	sno varchar(20) primary key,
	sname varchar(20) not null,
	ssex varchar(10) not null,
	sbirthday datetime,
	class varchar(20)
)

create table teacher(
	tno varchar(20) primary key,
	tname varchar(20) not null,
	tsex varchar(20) not null,
	tbirthday datetime,
	prof varchar(20) not null,
	depart varchar(20) not null
	);

create table course(
	cno varchar(20) primary key,
	cname varchar(20) not null,
	tno varchar(20) not null,
	foreign key(tno) references teacher(tno)
	);

create table score(
	sno varchar(20) not null,
	degree decimal,
	primary key (sno, cno),
	foreign key (sno) references student(sno),
	foreign key (cno) references course(cno)
	);

insert into student values ('101','曾华','男','1977-09-01','95033');
insert into student values ('102','匡明','男','1975-10-02','95031');
insert into student values ('103','王丽','女','1976-01-23','95033');
insert into student values ('104','李军','男','1976-02-20','95033');
insert into student values ('105','王芳','女','1975-02-10','95031');
insert into student values ('106','陆君','男','1974-06-03','95031');
insert into student values ('107','王尼玛','男','1976-02-20','95033');
insert into student values ('108','张全蛋','男','1975-02-10','95031');
insert into student values ('109','赵铁柱','男','1974-06-03','95031');

insert into teacher values ('804','李成','男','1958-12-02','副教授','计算机系');
insert into teacher values ('856','张旭','男','1969-03-12','讲师','电子工程系');
insert into teacher values ('825','王萍','女','1972-05-05','助教','计算机系');
insert into teacher values ('831','刘冰','女','1977-08-14','助教','电子工程系');

insert into course values ('3-105','计算机导论', '825');
insert into course values ('3-245','操作系统', '804');
insert into course values ('6-166','数字电路', '856');
insert into course values ('9-888','高等数学', '831');
 
insert into score values('103','3-245','86');
insert into score values('105','3-245','75');
insert into score values('109','3-245','68');
insert into score values('103','3-105','92');
insert into score values('105','3-105','88');
insert into score values('109','3-105','76');
insert into score values('103','3-105','64');
insert into score values('105','6-166','79');
insert into score values('109','6-166','81');


create table person(
	id int primary key auto_increment,
	name varchar(20),
	cardId int
);

create table card (
	id int,
	name varchar(20)
);

insert into card values (1,'饭卡');
insert into card values (2,'建行卡');
insert into card values (3,'农行卡');
insert into card values (4,'工商卡');
insert into card values (5,'邮政卡');

insert into person values (1,'张三',1);
insert into person values (2,'李四',3);
insert into person values (3,'王五',6);



</code></pre>
<p>MySQL常用sql与命令之从入门到删库跑路</p>
<p>到此这篇关于mysql常用sql与命令之从入门到删库跑路的文章就介绍到这了,更多相关mysql 入门内容请搜索512笔记以前的文章或继续浏览下面的相关文章希望大家以后多多支持512笔记！</p></div>

<p>注：关于MySQL常用sql与命令之从入门到删库跑路的简单示例的内容就先介绍到这里，更多相关文章的可以留意</span>                                     
		    	</div>
		    	<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>代码注释</div>
			    <div class="panel-content">
			    <span></span>                                     
		    	</div>
			</div>

			<!-- END ROW -->
			<div class="newsPage">
				<div class="newsPageTurn">
				    <span><a>上一篇</a><a href='/mysql/biji/653.html'>MySQL 创建主键,外键和复合主键的语句</a><a>下一篇</a><a href='/mysql/biji/655.html'>MySQL 慢查询日志的解决办法</a></span>
				</div>
			</div>
		</div>


<div id="author-box">
    <h3>作者：喵哥笔记</h3>
        <div class="author-info">
            <div class="author-avatar">
                <img src="/skin1/picture/01.jpg" alt="IDC笔记" class="avatar" width="64" height="64">
            </div>
        <div class="author-description">
            <p>学的不仅是技术，更是梦想！</p>
            <ul class="author-social follows nb">
            	<li>
                    <a target="_blank" href="/" title="IDC笔记">IDC笔记</a>
                </li>
            </ul>
        </div>
        <div class="clear"></div>
    </div>
</div>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
<!-- container-fluid -->
	</div>
<!-- content -->
	<footer class="footer">
	© 2020 IDC笔记 <i class="mdi mdi-heart text-danger"></i>. | 备案号：<a href="https://beian.miit.gov.cn/">辽ICP备18000516号</a>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?674585fbbd2294d3faf910f668ea91b4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

	</footer>
</div>

</div>
<!-- END wrapper -->
<!-- jQuery  -->
<script src="/skin1/js/jquery.min.js"></script>
<script src="/skin1/js/bootstrap.bundle.min.js"></script>
<script src="/skin1/js/metismenu.min.js"></script>
<script src="/skin1/js/jquery.slimscroll.js"></script>
<script src="/skin1/js/waves.min.js"></script>
<!--Morris Chart-->
<script src="/skin1/js/morris.min.js"></script>
<script src="/skin1/js/raphael.min.js"></script>
<script src="/skin1/js/dashboard.init.js"></script>
<script src="/skin1/js/app.js"></script>
<script src="/foot.js"></script>
</body>
</html>