<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title>SQL Server建库、建表、建约束的解决办法_mysql教程_IDC笔记</title>
    <meta name="keywords" content="PHP,PHP笔记,PHP教程" />
    <meta name="description" content="这篇文章主要为大家详细介绍了SQL Server建库、建表、建约束的简单示例，具有一定的参考价值，可以用来参考一下。

对此感兴趣的朋友，看看idc笔记做的技术笔记！
下面给大家分享下" />
    <meta content="Responsive admin theme build on top of Bootstrap 4" name="description" />
    <meta content="idcnote.com" name="author" />
    <link rel="shortcut icon" href="/skin1/images/favicon.ico">
    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="/skin1/css/morris.css">
    <link href="/skin1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/metismenu.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/icons.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/style.css" rel="stylesheet" type="text/css">
<link href="/SyntaxHighlighter/shCoreDefault.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/SyntaxHighlighter/shCore.js"></script>
<script type="text/javascript">
 SyntaxHighlighter.all();
</script>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
</head>
<body>
<!-- Begin page -->
		<div id="wrapper">
			<!-- Top Bar Start -->
			<div class="topbar">
				<!-- LOGO -->
				<div class="topbar-left">
					<a href="/" class="logo">
						<span class="logo-light">
                            <i class="mdi mdi-camera-control"></i>IDC笔记
                        </span>
						<span class="logo-sm">
                            <i class="mdi mdi-camera-control"></i>
                        </span>
					</a>
				</div>
				<nav class="navbar-custom">
					<ul class="navbar-right list-inline float-right mb-0">
						<!--<li class="dropdown notification-list list-inline-item d-none d-md-inline-block">
							<a class="nav-link waves-effect" href="#" id="btn-fullscreen">
								<i class="mdi mdi-arrow-expand-all noti-icon"></i>
							</a>
						</li>
						<li class="dropdown notification-list list-inline-item">
							<div class="dropdown notification-list nav-pro-img">
								<a class="dropdown-toggle nav-link arrow-none nav-user" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
									<img src="/skin1/picture/user-4.jpg" alt="user" class="rounded-circle">
								</a>
								<div class="dropdown-menu dropdown-menu-right profile-dropdown ">
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-account-circle"></i> Profile</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-wallet"></i> Wallet</a>
									<a class="dropdown-item d-block" href="#">
										<span class="badge badge-success float-right">11</span>
										<i class="mdi mdi-settings"></i> Settings</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-lock-open-outline"></i> Lock screen</a>
									<div class="dropdown-divider"></div>
									<a class="dropdown-item text-danger" href="#">
										<i class="mdi mdi-power text-danger"></i> Logout</a>
								</div>
							</div>
						</li>
						-->
					</ul>
					<ul class="list-inline menu-left mb-0">
						<li class="float-left">
							<button class="button-menu-mobile open-left waves-effect">
                            <i class="mdi mdi-menu"></i>
                        </button>
						</li>
						<li class="d-none d-md-inline-block">
							<form role="search" class="app-search">
								<div class="form-group mb-0">
									<input type="text" class="form-control" placeholder="Search..">
									<button type="submit"><i class="fa fa-search"></i></button>
								</div>
							</form>
						</li>
					</ul>
				</nav>
			</div>
<!-- ========== Left Sidebar Start ========== -->
<div class="left side-menu">
    <div class="slimscroll-menu" id="remove-scroll">
    <!--- Sidemenu -->
    <div id="sidebar-menu">
    <!-- Left Menu Start -->
    <ul class="metismenu" id="side-menu">
			<li>
	    <a href="/mysql/biji/" class="waves-effect">
		    <i class="icon-share"></i>
		    <span>数据库笔记
		       	<span class="float-right menu-arrow">
		       	<i class="mdi mdi-chevron-right"></i>
		       	</span>
		    </span>
	    </a>
	</li>
	</ul>
</div>
<!-- Sidebar -->
<div class="clearfix"></div>
</div>
<!-- Sidebar -left -->
</div>
<!-- Left Sidebar End -->
<!-- Start right Content here -->
<div class="content-page">
	<div class="content">
		<div class="container-fluid">
			<div class="page-title-box">
				<div class="row align-items-center">
					<div class="col-sm-6">
						<h1 class="page-title">SQL Server建库、建表、建约束的解决办法</h1>
					</div>
                    <div class="panel-title">
                        2022-11-12 09:39:31                    </div>
				</div>
				<!-- end row -->
			</div>
			<!-- end page-title -->
			<!-- START ROW -->
			<div class="panel panel-forbid">
				<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>内容摘要</div>
			    <div class="panel-content">
			    <span>这篇文章主要为大家详细介绍了SQL Server建库、建表、建约束的简单示例，具有一定的参考价值，可以用来参考一下。

对此感兴趣的朋友，看看idc笔记做的技术笔记！
下面给大家分享下</span>                                     
		    	</div>
			    <div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>文章正文</div>
			    <div class="panel-content">
			    <span><p>这篇文章主要为大家详细介绍了SQL Server建库、建表、建约束的简单示例，具有一定的参考价值，可以用来参考一下。</p>

<p>对此感兴趣的朋友，看看idc笔记做的技术笔记！</p>
<p>下面给大家分享下sql server建库、建表、建约束技巧，下文介绍有文字有代码。</p>
<p></p>
<h3>--创建School数据库之前：首先判断数据库是否存在，若存在则删除后再创建，若不存在则创建----exists关键字:括号里边能查询到数据则返回&lsquo;true&#39; 否则返回&lsquo;false&#39;</h3>
<p></p>
<p>代码如下：</p>
<pre>
<code>
if exists(select * from sysdatabases where name = 'School')
--exists返回‘true'则执行删除数据库操作--
drop database School

--exists返回‘false'则表明数据库不存在，直接创建 
create database School
on primary
(
--主数据库文件--
name = 'School', --主数据文件逻辑名
fileName = 'D:\project\School.mdf', --主数据文件物理逻辑名
size = 5MB, --初始值大小
maxsize = 100MB, --最大大小
filegrowth = 15% --数据文件增长量
)
log on
(
--日志文件--
name = 'School_log',
filename = 'D:\project\School_log.ldf',
size = 2MB,
filegrowth = 1MB
)
go

</code></pre>
<p></p>
<h3>----------------------------------------使用T-SQL创建employee数据库------------------------------------</h3>
<p></p>
<p>代码如下：</p>
<pre>
<code>
create database employee
on primary
(
--主要数据文件--
name = 'employee1',
filename = 'D:\project\employee1.mdf',
size = 10MB,
filegrowth = 10%
),
(
--次要数据文件--
name = 'employee2',
filename = 'D:\project\employee2.ndf',
size = 20MB,
maxsize = 100MB,
filegrowth = 1MB
)
log on
(
--第一个日志文件--
name = 'employee_log1',
filename = 'D:\project\employee_log1.ldf',
size = 10MB,
filegrowth = 1MB
),
(
--第二个日志文件--
name = 'employee_log2',
filename = 'D:\project\employee_log2.ldf',
size = 10MB,
maxsize = 50MB,
filegrowth = 1MB
)
</code></pre>
<p></p>
<h3>---------------------------------查询已存在的数据库信息---------------------------</h3>
<p></p>
<p>代码如下：</p>
<pre>
<code>
select * from sysdatabases</code></pre>
<p></p>
<h3>---------------------------------删除数据库------------------------------------</h3>
<p>代码如下:</p>
<pre>

<code>
drop database School

</code></pre>
<p></p>
<p></p>
<h3>---------------------------------创建Student数据库表----------------------------</h3>
<p>代码如下:</p>
<pre>

<code>
--1、选择操作的数据库--

use School

go

</code></pre>
<p></p>
<p></p>
<h3>--判断表是否存在--</h3>
<p>代码如下:</p>
<pre>

<code>
if exists(select * from sysobjects where name = &#39;Student&#39;)

drop table Student 

</code></pre>
<p></p>
<p></p>
<h3>--2、创建表---</h3>
<p></p>
<p>代码如下：</p>
<pre>
<code>
create table Student
(
--具体的列名 数据类型 列的特征(是否为空)--
StudentNo int identity(2,1) not null,
LoginPwd nvarchar(20) not null,
StudentName nvarchar(20) not null,
Sex int not null,
GradeId int not null,
phone nvarchar(50) not null,
BornDate datetime not null,
Address nvarchar(255),
Email nvarchar(50),
IDENTITYcard varchar(18)
)
go
</code></pre>
<p></p>
<h3>---查看所有数据库对象(数据库表)---</h3>
<p>代码如下:</p>
<pre>

<code>
select * from sysobjects

drop table Student

</code></pre>
<p></p>
<p></p>
<h3>----------------------创建subject课程表-------------------</h3>
<p>代码如下:</p>
<pre>

<code>
-----1、判断表是否存在；若存在则删除再创建，若不存在则直接创建--------

if exists(select * from sysobjects where name = &#39;subject&#39;)

drop table subject



use School

go



---创建subject课程表--

create table subject

(

SubjectNo int not null identity(1,1),

SubjectName nvarchar(50),

ClassHour int,

GradeID int

)

</code></pre>
<p></p>
<p></p>
<h3>----------------------------------------创建Result成绩表-------------------</h3>
<p>代码如下:</p>
<pre>

<code>
-----1、判断表是否存在；若存在则删除再创建，若不存在则直接创建--------

if exists(select * from sysobjects where name = &#39;Result&#39;)

drop table Result

use School

go

</code></pre>
<p></p>
<p></p>
<h3>---创建Result成绩表--</h3>
<p>代码如下:</p>
<pre>

<code>
create table Result

(

StudentNo int not null,

SubjectNo int not null,

ExamDate Datetime not null,

StudentResult int not null

)

</code></pre>
<p></p>
<p></p>
<h3>-----------------------------------------创建Grande年级表-------------------</h3>
<p>代码如下:</p>
<pre>

<code>
-----1、判断表是否存在；若存在则删除再创建，若不存在则直接创建--------

if exists(select * from sysobjects where name = &#39;Grade&#39;)

drop table Grade

use School

go

</code></pre>
<p></p>
<p></p>
<h3>---创建Grande年级表--</h3>
<p>代码如下:</p>
<pre>

<code>
create table Grade

(

GradeId int not null,

GrandeName nvarchar(50)

)

</code></pre>
<p></p>
<p></p>
<h3>-----------------------------------------T-SQL添加约束-------------------------</h3>
<p>代码如下:</p>
<pre>

<code>
--给StudentNo添加主键约束---

alter table Student

add constraint pk_StuNo primary key(StudentNo)

</code></pre>
<p></p>
<p></p>
<h3>--给身份证添加唯一约束--</h3>
<p>代码如下:</p>
<pre>

<code>
alter table Student

add constraint uq_StuIdcard unique(IDENTITYcard)

</code></pre>
<p></p>
<p></p>
<h3>---给地址address添加默认约束--</h3>
<p>代码如下:</p>
<pre>

<code>
alter table Student

add constraint df_stuaddress default(&#39;地址不详&#39;) for Address

</code></pre>
<p></p>
<p></p>
<h3>---删除地址address默认约束---</h3>
<p>代码如下:</p>
<pre>

<code>
alter table Student

drop constraint df_stuaddress

</code></pre>
<p></p>
<p><strong>----------出生日期添加检查约束--------</strong></p>
<p><strong>代码如下:</strong></p>
<pre>
<strong>

<code>
alter table Student

add constraint ck_stuBorndate check(Borndate &gt; &#39;1980-01-01&#39;)

</code></strong></pre>
<p></p>
<p></p>
<h3><strong>---------与Grand（年级表）建立主外键关系--------</strong></h3>
<p></p>
<p></p>
<h3><strong>--1、添加Grade主键(操作Grade)---</strong></h3>
<p><strong>代码如下:</strong></p>
<pre>
<strong>

<code>
alter table Grade

add constraint pk_graid primary key(GradeId)

</code></strong></pre>
<p></p>
<p></p>
<h3><strong>--2、添加Grade外键(操作Student)--</strong></h3>
<p><strong>代码如下:</strong></p>
<pre>
<strong>

<code>
alter table Student

add constraint fk_stuGradeID foreign key(GradeId) references Grade(GradeId)

</code></strong></pre>
<p></p>
<p><strong>-------------------给subject课程表添加约束-----------------------</strong></p>
<p></p>
<p><strong>代码如下:</strong></p>
<pre>
<strong>

<code>
----给subjectNo列添加主键约束------

alter table subject

add constraint pk_SubID primary key(SubjectNo)

</code></strong></pre>
<p></p>
<p></p>
<h3><strong>------给课程名称subjectName添加非空约束；-----</strong></h3>
<p><strong>代码如下:</strong></p>
<pre>
<strong>

<code>
-----with nocheck：已经存在数据不通过check约束-------

alter table subject with nocheck

add constraint ck_subName check(SubjectName is not null)

</code></strong></pre>
<p></p>
<p></p>
<h3><strong>-----学时必须大于0-----</strong></h3>
<p><strong>代码如下:</strong></p>
<pre>
<strong>

<code>
alter table subject with nocheck

add constraint ck_ClassHour check(ClassHour &gt; 0)

</code></strong></pre>
<p></p>
<p></p>
<h3><strong>-----与Grade年级表添加主外键约束----</strong></h3>
<p><strong>代码如下:</strong></p>
<pre>
<strong>

<code>
alter table subject with nocheck

add constraint fk_GradeID foreign key(GradeID)

references Grade(GradeID)

</code></strong></pre>
<p></p>
<p><strong><strong>----------给result成绩表添加约束------------</strong></strong></p>
<p></p>
<h3><strong><strong>-------添加多个约束---------</strong></strong></h3>
<p><strong><strong>代码如下:</strong></strong></p>
<pre>
<strong><strong>

<code>
alter table Result

add 

constraint pk_No_subID_date primary key(StudentNo,SubjectNo,ExamDate),

constraint df_examdate default(getdate()) for ExamDate,

constraint ck_StudentResult check(StudentResult between 0 and 100),

constraint fk_StuNo foreign key(StudentNo) references Student(StudentNo),

constraint fk_subNo foreign key(SubjectNo) references Subject(SubjectNo)

</code></strong></strong></pre>
<p></p>
<p></p>
<h3><strong><strong>--删除多个约束--</strong></strong></h3>
<p><strong><strong>代码如下:</strong></strong></p>
<pre>
<strong><strong>

<code>
alter table Result

drop constraint pk_No_subID_date,fk_subNo,fk_StuNo,ck_StudentResult,df_examdate

</code></strong></strong></pre>
<p></p>
<p></p>
<h3><strong><strong>--------更改列的数据类型----------</strong></strong></h3>
<p><strong><strong>代码如下:</strong></strong></p>
<pre>
<strong><strong>

<code>
alter table Result

alter column StudentResult int

</code></strong></strong></pre>
<p></p>
<p><strong><strong>以上就是本文全部内容，希望大家喜欢。</strong></strong></p>

<p>注：关于SQL Server建库、建表、建约束的简单示例的内容就先介绍到这里，更多相关文章的可以留意</span>                                     
		    	</div>
		    	<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>代码注释</div>
			    <div class="panel-content">
			    <span></span>                                     
		    	</div>
			</div>

			<!-- END ROW -->
			<div class="newsPage">
				<div class="newsPageTurn">
				    <span><a>上一篇</a><a href='/mysql/biji/2670.html'>SQL Server基数估计计算预估行数的解决办法</a><a>下一篇</a><a href='/mysql/biji/2672.html'>SQL Server Alwayson添加监听器失败的解决方法</a></span>
				</div>
			</div>
		</div>


<div id="author-box">
    <h3>作者：喵哥笔记</h3>
        <div class="author-info">
            <div class="author-avatar">
                <img src="/skin1/picture/01.jpg" alt="IDC笔记" class="avatar" width="64" height="64">
            </div>
        <div class="author-description">
            <p>学的不仅是技术，更是梦想！</p>
            <ul class="author-social follows nb">
            	<li>
                    <a target="_blank" href="/" title="IDC笔记">IDC笔记</a>
                </li>
            </ul>
        </div>
        <div class="clear"></div>
    </div>
</div>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
<!-- container-fluid -->
	</div>
<!-- content -->
	<footer class="footer">
	© 2020 IDC笔记 <i class="mdi mdi-heart text-danger"></i>. | 备案号：<a href="https://beian.miit.gov.cn/">辽ICP备18000516号</a>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?674585fbbd2294d3faf910f668ea91b4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

	</footer>
</div>

</div>
<!-- END wrapper -->
<!-- jQuery  -->
<script src="/skin1/js/jquery.min.js"></script>
<script src="/skin1/js/bootstrap.bundle.min.js"></script>
<script src="/skin1/js/metismenu.min.js"></script>
<script src="/skin1/js/jquery.slimscroll.js"></script>
<script src="/skin1/js/waves.min.js"></script>
<!--Morris Chart-->
<script src="/skin1/js/morris.min.js"></script>
<script src="/skin1/js/raphael.min.js"></script>
<script src="/skin1/js/dashboard.init.js"></script>
<script src="/skin1/js/app.js"></script>
<script src="/foot.js"></script>
</body>
</html>