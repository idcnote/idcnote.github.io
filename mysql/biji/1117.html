<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title>MySQL使用大全 从基础到存储过程_mysql教程_IDC笔记</title>
    <meta name="keywords" content="PHP,PHP笔记,PHP教程" />
    <meta name="description" content="这篇文章主要为大家详细介绍了MySQL使用大全 从基础到存储过程，具有一定的参考价值，可以用来参考一下。

对此感兴趣的朋友，看看idc笔记做的技术笔记！平常习惯了phpmyadmin等其" />
    <meta content="Responsive admin theme build on top of Bootstrap 4" name="description" />
    <meta content="idcnote.com" name="author" />
    <link rel="shortcut icon" href="/skin1/images/favicon.ico">
    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="/skin1/css/morris.css">
    <link href="/skin1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/metismenu.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/icons.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/style.css" rel="stylesheet" type="text/css">
<link href="/SyntaxHighlighter/shCoreDefault.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/SyntaxHighlighter/shCore.js"></script>
<script type="text/javascript">
 SyntaxHighlighter.all();
</script>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
</head>
<body>
<!-- Begin page -->
		<div id="wrapper">
			<!-- Top Bar Start -->
			<div class="topbar">
				<!-- LOGO -->
				<div class="topbar-left">
					<a href="/" class="logo">
						<span class="logo-light">
                            <i class="mdi mdi-camera-control"></i>IDC笔记
                        </span>
						<span class="logo-sm">
                            <i class="mdi mdi-camera-control"></i>
                        </span>
					</a>
				</div>
				<nav class="navbar-custom">
					<ul class="navbar-right list-inline float-right mb-0">
						<!--<li class="dropdown notification-list list-inline-item d-none d-md-inline-block">
							<a class="nav-link waves-effect" href="#" id="btn-fullscreen">
								<i class="mdi mdi-arrow-expand-all noti-icon"></i>
							</a>
						</li>
						<li class="dropdown notification-list list-inline-item">
							<div class="dropdown notification-list nav-pro-img">
								<a class="dropdown-toggle nav-link arrow-none nav-user" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
									<img src="/skin1/picture/user-4.jpg" alt="user" class="rounded-circle">
								</a>
								<div class="dropdown-menu dropdown-menu-right profile-dropdown ">
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-account-circle"></i> Profile</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-wallet"></i> Wallet</a>
									<a class="dropdown-item d-block" href="#">
										<span class="badge badge-success float-right">11</span>
										<i class="mdi mdi-settings"></i> Settings</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-lock-open-outline"></i> Lock screen</a>
									<div class="dropdown-divider"></div>
									<a class="dropdown-item text-danger" href="#">
										<i class="mdi mdi-power text-danger"></i> Logout</a>
								</div>
							</div>
						</li>
						-->
					</ul>
					<ul class="list-inline menu-left mb-0">
						<li class="float-left">
							<button class="button-menu-mobile open-left waves-effect">
                            <i class="mdi mdi-menu"></i>
                        </button>
						</li>
						<li class="d-none d-md-inline-block">
							<form role="search" class="app-search">
								<div class="form-group mb-0">
									<input type="text" class="form-control" placeholder="Search..">
									<button type="submit"><i class="fa fa-search"></i></button>
								</div>
							</form>
						</li>
					</ul>
				</nav>
			</div>
<!-- ========== Left Sidebar Start ========== -->
<div class="left side-menu">
    <div class="slimscroll-menu" id="remove-scroll">
    <!--- Sidemenu -->
    <div id="sidebar-menu">
    <!-- Left Menu Start -->
    <ul class="metismenu" id="side-menu">
			<li>
	    <a href="/mysql/biji/" class="waves-effect">
		    <i class="icon-share"></i>
		    <span>数据库笔记
		       	<span class="float-right menu-arrow">
		       	<i class="mdi mdi-chevron-right"></i>
		       	</span>
		    </span>
	    </a>
	</li>
	</ul>
</div>
<!-- Sidebar -->
<div class="clearfix"></div>
</div>
<!-- Sidebar -left -->
</div>
<!-- Left Sidebar End -->
<!-- Start right Content here -->
<div class="content-page">
	<div class="content">
		<div class="container-fluid">
			<div class="page-title-box">
				<div class="row align-items-center">
					<div class="col-sm-6">
						<h1 class="page-title">MySQL使用大全 从基础到存储过程</h1>
					</div>
                    <div class="panel-title">
                        2022-11-12 09:22:41                    </div>
				</div>
				<!-- end row -->
			</div>
			<!-- end page-title -->
			<!-- START ROW -->
			<div class="panel panel-forbid">
				<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>内容摘要</div>
			    <div class="panel-content">
			    <span>这篇文章主要为大家详细介绍了MySQL使用大全 从基础到存储过程，具有一定的参考价值，可以用来参考一下。

对此感兴趣的朋友，看看idc笔记做的技术笔记！平常习惯了phpmyadmin等其</span>                                     
		    	</div>
			    <div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>文章正文</div>
			    <div class="panel-content">
			    <span><p>这篇文章主要为大家详细介绍了MySQL使用大全 从基础到存储过程，具有一定的参考价值，可以用来参考一下。</p>

<p>对此感兴趣的朋友，看看idc笔记做的技术笔记！</p>平常习惯了phpmyadmin等其他工具的的朋友有的根本就不会命令，如果让你笔试去面试我看你怎么办，所以，学习一下还是非常有用的，也可以知道你通过GUI工具的时候工具到底做了什么。Mysql用处很广，是php最佳拍档，Java中使用也很方便。　　　　我是通过Windows 7 操作的，所以打开运行-输入cmd吧，然后输入mysql -hlocalhost -uroot -p;回车后就可以输入密码了，这里可以*号显示，当然也可以和-p连写的，这就是登录mysql。修改密码mysqladmin -uroot -pold password new;这里的root是用户名 new是你的新密码。退出是什么命令，曾有人问我，我说你直接点X好了，不过命令是quit;退出到cmd环境，退出cmd环境命令是exit;接着就是操作mysql的增删改查，常称为CURD操作。
<p>代码如下:</p>
<pre>
<code> 
#登录数据库 
mysql -hlocalhost -uroot -p; 
#修改密码 
mysqladmin -uroot -pold password new; 


#显示数据库 
show databases; 
#显示数据表 
show tables; 
#选择数据库 
use examples; 
#创建数据库并设置编码utf-8 多语言 
create database `examples` default character set utf8 collate utf8_general_ci; 
#删除数据库 
drop database examples; 
#创建表 
create table test( 
id int(10) unsigned zerofill not null auto_increment, 
email varchar(40) not null, 
ip varchar(15) not null, 
state int(10) not null default &#39;-1&#39;, 
primary key (id) 
)engine=InnoDB; 
#显示表结构 
describe 
#删除表 
drop table test； 
#重命名表 
alter table test_old rename test_new; 
#添加列 
alter table test add cn int(4) not null; 
#修改列 
alter table test change id id1 varchar(10) not null; 
#删除列 
alter table test drop cn; 
#创建索引 
alter table test add index (cn,id); 
#删除索引 
alter table test drop index cn 
#插入数据 
insert into test (id,email,ip,state) values(2,&#39;qq@qq.com&#39;,&#39;127.0.0.1&#39;,&#39;0&#39;); 
#删除数据 
delete from test where id = 1; 
#修改数据 
update test set id=&#39;1&#39;,email=&#39;q@qq.com&#39; where id=1; 
#查数据 
select * from test; #取所有数据 
select * from test limit 0,2; #取前两条数据 
select * from test email like &#39;%qq%&#39; #查含有qq字符 _表示一个 %表示多个 
select * from test order by id asc;#降序desc 
select * from test id not in(&#39;2&#39;,&#39;3&#39;);#id不含2,3或者去掉not表示含有 
select * from test timer between 1 and 10;#数据在1,10之间 

#---------------------------表连接知识------------------------------ 
#等值连接又叫内链接 inner join 只返回两个表中连接字段相等的行 
select * from A inner join B on A.id = B.id; #写法1 
select * from A,B where A.id = B.id; #写法2 
select a.id,a.title from A a inner join B b on a.id=b.id and a.id=1;#写法3 表的临时名称 
select a.id as ID,a.title as 标题 from A inner join B on A.id=B.id;#添加as字句 

#左连接又叫外连接 left join 返回左表中所有记录和右表中连接字段相等的记录 
select * from A left join B on A.id = B.id; 

select * from A left join (B,C,D) on (B.i1=A.i1 and C.i2=A.i2 and D.i3 = A.i3);#复杂连接 

#右连接又叫外连接 right join 返回右表中所有记录和左表中连接字段相等的记录 
select * from A right join B on A.id = B.id; 

#完整外部链接 full join 返回左右表中所有数据 
select * from A full join B on A.id = B.id; 

#交叉连接 没有where字句 返回卡迪尔积 
select * from A cross join B; 
-------------------------表连接结束------------------------------------------------------------ 
-----------------索引创建------------------------------------------------ 
show index from A #查看索引 
alter table A add primary key(id) #主键索引 
alter table A add unique(name) #唯一索引 
alter table A add index name(name) #普通索引 
alter table A add fulltext(name) #全文索引 
alter table A add index name(id,name) #多列索引 

#常用函数 
abs(-1)#绝对值 
pi()#pi值 
sqrt(2)#平方根 
mod(-5,3)#取余-2 
ceil(10.6)#进位+1 结果11 ceil(10.0)结果10 
floor(10.6)#取整 10 
round(2.5)#四舍五入到整数 结果3 
round(2.5,2)#保留两位小数 结果2.50 
truncate(2.5234,3)#取小数后3位不四舍五入 2.523 
sign(-2);#符号函数 返回-1 0还是0 正数返回1 
pow(2,3),exp(2);#2的3次幂 或e的2次幂 
log(2),log10(2);#求对数 
radians(180),degrees(0.618);#角度弧度转换 
sin(0.5),asin(0.5)#正弦和反正弦 类似cos acos tan atan 
length(&#39;hi&#39;)#计算字符长度 
concat(&#39;1&#39;,1,&#39;hi&#39;)#合并字符串 
insert(&#39;12345&#39;,1,0,&#39;7890&#39;);#从开头第1个字符开始到0个结束，替换成后边字符串，0表示在最前边插入 
ucase(&#39;a&#39;),lcase(&#39;A&#39;)#转成大写和小写 
left(&#39;abcd&#39;,2),right(&#39;abcd&#39;,2);#返回前两个字符和后两个字符 
ltrim(&#39; 0 &#39;),rtrim(&#39; 0 &#39;),trim(&#39; 0 &#39;)#删除空格 
replace(&#39;1234567890&#39;,&#39;345678&#39;,&#39;0&#39;);#替换输出12090 
substring(&#39;12345&#39;,1,2)#取字符 输出12 1是位置 2是长度 
instr(&#39;1234&#39;,&#39;234&#39;);#取得234位置是2 
reverse(&#39;1234&#39;);#反序输出4321 
current()#返回日期 
curtime()#返回时间 
now()#返回日期时间 
month(now())#当前月份 monthname 英文月份 
dayname(now())#星期英文 dayofweek()1是星期天 weekday()1是星期二 
week(now())#本年第多少周 
dayofyear(now()),dayofmonth(now())#今天是本年第多少天 今天是本月第多少天 
year(now()),month(now()),day(now()),hour(now()),minute(now()),second(now())#返回年月日 时分秒 
time_to_sec(now()),sec_to_time(3600*8);#转换时间为秒和还原 
version()#mysql版本 
database()#当前连接的数据库 没有为null 
user()#获取用户名 
md5(&#39;a&#39;)#加密字符串 
ascii(&#39;a&#39;)#ascii值97 
bin(100),hex(100),oct(100)#返回二进制 十六进制 八进制 
conv(10001,2,8);#各种进制相互转换 
rand()#生成0到1之间随机数 
sleep(0.02)#暂停秒数 

数据库优化 
.开启缓存，尽量使用php函数而不是mysql 
. explain select 语句可以知道性能 
.一行数据使用 limit 1； 
.为搜索字段重建索引 比如关键字 标签 
.表连接join保证字段类型相同并且有其索引 
.随机查询使用php $r = mysql_query(&quot;SELECT count(*) FROM user&quot;); 
$d = mysql_fetch_row($r); 
$rand = mt_rand(0,$d[0] - 1); 
$r = mysql_query(&quot;SELECT username FROM user LIMIT $rand, 1&quot;); 
.避免使用select * 应该使用具体字段 
.每张表都是用id主键，并且是unsigned int 
.对于取值有限而固定使用enum类型，如性别 国家 名族 部门 状态 
.尽可能使用not null ip存储使用int(4),使用ip 转化函数ip2long()相互long2ip() 
.delete和insert语句会锁表，所以可以采用分拆语句操作 
while(1){操作语句;usleep(2000);} 
.选择正确的存储引擎；MyISAM适合大量查询 写操作多用InnoDB支持事务 

#存储过程 
#存储程序 
delimiter #定义存储程序 
create procedure getversion(out params varchar(20)) #params是传出参数 in传进 out传出 inout传回 
begin 
select version() into params; #版本信息赋值params 
end 
call getversion(@a); #调用存储过程 
select @a; 
delimiter #定义存储函数 
create function display(w varchar(20)) returns varchar(20) 
begin 
return concat(&#39;hello&#39;,w); 
end 
select display(&#39;world&#39;); 

drop procedure if exists spName; #删除一个存储过程 
alter function spName [];#修改一个存储过程 
show create procedure spName;#显示存储过程信息 
declare varName type default value;#声明局部变量 
#if语句 
if 条件 then 语句 
elseif 条件 then 语句 
else 语句 
end if 
#case语句 
case 条件 
when 条件 then 语句 
when 条件 then 语句 
else 语句 
end case 
#loop语句 
fn:loop 
语句 
end loop fn; 
leave fn #退出循环 
#while语句 
fn：while 条件 do 
语句 
end while fn 


#mysql使用帮助资料 
? contents; #列出帮助类型 
? data types;#列出数据类型 
？ int;#列出具体类型 
? show;#show语句 
? create table;# 
#常见表的比较 
Myisam BDB Memory InnoDB Archive 
存储限制 no no yes 64T no 
事物安全 支持 支持 
锁机制 表锁 页锁 表锁 行锁 行锁 
全文索引 支持 
外键支持 支持 
myisam frm存储表定义 MYD存储数据 MYI存储索引 
InnoDB 用于事务处理 
char 和 varchar保存和索引都不相同 
浮点数float(10,2) 定点数decimal(10,2) 
长度一定下，浮点数表示更大数据范围，缺点是引起精度丢失，货币等使用定点数存储 
索引适合于where字句或者连接字句列 
对于唯一值使用唯一索引 

添加新用户 grant select,insert,update,delete on *.* to Yoby@localhost identified by &#39;mysql&#39;; 
# *.* 数据库名.表名，限制登录某一个数据库 test.* localhost是本地主机 网络可以使用 &#39;%&#39;代替所有主机 &#39;mysql&#39;是密码 Yoby是用户名 所有权限可以用 all代替 
查看用户权限 show grants for &#39;root&#39;@&#39;localhost&#39;; 
移除权限 revoke all on *.* from root@localhost; 
group by id 分组 
having 限制字句 
select1 union select2 联合查询有重复去掉保留一行 
select2 union all select2 所有行合并到结果集中去 
</code></pre>这是一份最完整的mysql笔记，需要的可以复制保存了！(原创 Yoby)

<p>注：关于MySQL使用大全 从基础到存储过程的内容就先介绍到这里，更多相关文章的可以留意</span>                                     
		    	</div>
		    	<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>代码注释</div>
			    <div class="panel-content">
			    <span></span>                                     
		    	</div>
			</div>

			<!-- END ROW -->
			<div class="newsPage">
				<div class="newsPageTurn">
				    <span><a>上一篇</a><a href='/mysql/biji/1116.html'>MySQL删除数据Delete与Truncate语句使用比较</a><a>下一篇</a><a href='/mysql/biji/1118.html'>MySQL 主从数据库同步(centos篇)</a></span>
				</div>
			</div>
		</div>


<div id="author-box">
    <h3>作者：喵哥笔记</h3>
        <div class="author-info">
            <div class="author-avatar">
                <img src="/skin1/picture/01.jpg" alt="IDC笔记" class="avatar" width="64" height="64">
            </div>
        <div class="author-description">
            <p>学的不仅是技术，更是梦想！</p>
            <ul class="author-social follows nb">
            	<li>
                    <a target="_blank" href="/" title="IDC笔记">IDC笔记</a>
                </li>
            </ul>
        </div>
        <div class="clear"></div>
    </div>
</div>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
<!-- container-fluid -->
	</div>
<!-- content -->
	<footer class="footer">
	© 2020 IDC笔记 <i class="mdi mdi-heart text-danger"></i>. | 备案号：<a href="https://beian.miit.gov.cn/">辽ICP备18000516号</a>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?674585fbbd2294d3faf910f668ea91b4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

	</footer>
</div>

</div>
<!-- END wrapper -->
<!-- jQuery  -->
<script src="/skin1/js/jquery.min.js"></script>
<script src="/skin1/js/bootstrap.bundle.min.js"></script>
<script src="/skin1/js/metismenu.min.js"></script>
<script src="/skin1/js/jquery.slimscroll.js"></script>
<script src="/skin1/js/waves.min.js"></script>
<!--Morris Chart-->
<script src="/skin1/js/morris.min.js"></script>
<script src="/skin1/js/raphael.min.js"></script>
<script src="/skin1/js/dashboard.init.js"></script>
<script src="/skin1/js/app.js"></script>
<script src="/foot.js"></script>
</body>
</html>