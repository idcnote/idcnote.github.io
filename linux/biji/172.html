<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title>docker系列(二)常用命令篇_IDC笔记</title>
    <meta name="keywords" content=",Linux常用命令" />
    <meta name="description" content="以下操作均基于docker服务已经启动了一、帮助命令1、docker version（了解）  //查看docker版本相关信息等2、docker info     （了解）  //查看docker相关信息 比如当前有多少个容" />
    <meta content="idcnote.com" name="author" />
    <link rel="shortcut icon" href="/skin1/images/favicon.ico">
    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="/skin1/css/morris.css">
    <link href="/skin1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/metismenu.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/icons.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/style.css" rel="stylesheet" type="text/css">
<link href="/SyntaxHighlighter/shCoreDefault.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/SyntaxHighlighter/shCore.js"></script>
<script type="text/javascript">
 SyntaxHighlighter.all();
</script>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
</head>
<body>
<!-- Begin page -->
		<div id="wrapper">
			<!-- Top Bar Start -->
			<div class="topbar">
				<!-- LOGO -->
				<div class="topbar-left">
					<a href="/" class="logo">
						<span class="logo-light">
                            <i class="mdi mdi-camera-control"></i>IDC笔记
                        </span>
						<span class="logo-sm">
                            <i class="mdi mdi-camera-control"></i>
                        </span>
					</a>
				</div>
				<nav class="navbar-custom">
					<ul class="navbar-right list-inline float-right mb-0">
						<!--<li class="dropdown notification-list list-inline-item d-none d-md-inline-block">
							<a class="nav-link waves-effect" href="#" id="btn-fullscreen">
								<i class="mdi mdi-arrow-expand-all noti-icon"></i>
							</a>
						</li>
						<li class="dropdown notification-list list-inline-item">
							<div class="dropdown notification-list nav-pro-img">
								<a class="dropdown-toggle nav-link arrow-none nav-user" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
									<img src="/skin1/picture/user-4.jpg" alt="user" class="rounded-circle">
								</a>
								<div class="dropdown-menu dropdown-menu-right profile-dropdown ">
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-account-circle"></i> Profile</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-wallet"></i> Wallet</a>
									<a class="dropdown-item d-block" href="#">
										<span class="badge badge-success float-right">11</span>
										<i class="mdi mdi-settings"></i> Settings</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-lock-open-outline"></i> Lock screen</a>
									<div class="dropdown-divider"></div>
									<a class="dropdown-item text-danger" href="#">
										<i class="mdi mdi-power text-danger"></i> Logout</a>
								</div>
							</div>
						</li>
						-->
					</ul>
					<ul class="list-inline menu-left mb-0">
						<li class="float-left">
							<button class="button-menu-mobile open-left waves-effect">
                            <i class="mdi mdi-menu"></i>
                        </button>
						</li>
						<li class="d-none d-md-inline-block">
							<form role="search" class="app-search">
								<div class="form-group mb-0">
									<input type="text" class="form-control" placeholder="Search..">
									<button type="submit"><i class="fa fa-search"></i></button>
								</div>
							</form>
						</li>
					</ul>
				</nav>
			</div>
<!-- ========== Left Sidebar Start ========== -->
<div class="left side-menu">
    <div class="slimscroll-menu" id="remove-scroll">
    <!--- Sidemenu -->
    <div id="sidebar-menu">
    <!-- Left Menu Start -->
    <ul class="metismenu" id="side-menu">
            <li>
        <a href="javascript:void(0);" class="waves-effect">
            <i class="icon-share"></i>
            <span> Linux命令大全            <span class="float-right menu-arrow">
            <i class="mdi mdi-chevron-right"></i>
            </span> 
            </span>
        </a>
        <ul class="submenu">
             <li><a href="/linux/linux/1.html">Linux常用命令(手册)大全</a></li><li><a href="/linux/linux/2.html">Linux命令格式</a></li>        </ul>
    </li>
        <li>
        <a href="javascript:void(0);" class="waves-effect">
            <i class="icon-share"></i>
            <span> 系统管理与维护命令            <span class="float-right menu-arrow">
            <i class="mdi mdi-chevron-right"></i>
            </span> 
            </span>
        </a>
        <ul class="submenu">
             <li><a href="/linux/system/3.html">Linux ls命令:显示指定工作目录下的内容</a></li><li><a href="/linux/system/4.html">Linux pwd命令:显示当前工作目录</a></li><li><a href="/linux/system/5.html">Linux cd命令:切换工作目录</a></li><li><a href="/linux/system/6.html">Linux date命令:显示或设置系统时间</a></li><li><a href="/linux/system/7.html">Linux su命令:切换用户</a></li><li><a href="/linux/system/9.html">Linux man命令:查看帮助信息</a></li><li><a href="/linux/system/8.html">Linux clear命令:清除屏幕</a></li><li><a href="/linux/system/11.html">Linux whoami命令:显示目前登录用户名</a></li><li><a href="/linux/system/10.html">Linux who命令:显示目前登录用户信息</a></li><li><a href="/linux/system/13.html">Linux ps命令:显示进程状态</a></li><li><a href="/linux/system/12.html">Linux free命令:显示系统内存状态</a></li><li><a href="/linux/system/15.html">Linux help命令:显示帮助信息</a></li><li><a href="/linux/system/14.html">Linux top命令:查看系统活跃进程</a></li><li><a href="/linux/system/18.html">Linux shutdown命令:关机或重启</a></li><li><a href="/linux/system/17.html">Linux halt命令:关闭系统</a></li>        </ul>
    </li>
        <li>
        <a href="javascript:void(0);" class="waves-effect">
            <i class="icon-share"></i>
            <span> 文件管理与编辑命令            <span class="float-right menu-arrow">
            <i class="mdi mdi-chevron-right"></i>
            </span> 
            </span>
        </a>
        <ul class="submenu">
             <li><a href="/linux/file/27.html">Linux mkdir命令:创建目录</a></li><li><a href="/linux/file/29.html">Linux cat命令:连接文件并打印到标准输出设备上</a></li><li><a href="/linux/file/28.html">Linux more命令:显示文本文件内容</a></li><li><a href="/linux/file/30.html">Linux grep命令:检索文件内容</a></li><li><a href="/linux/file/31.html">Linux rm命令:删除文件或目录</a></li><li><a href="/linux/file/32.html">Linux touch命令:修改文件的时间</a></li><li><a href="/linux/file/34.html">Linux cp命令:复制文件或目录</a></li><li><a href="/linux/file/33.html">Linux ln命令:创建链接</a></li><li><a href="/linux/file/35.html">Linux find命令:查找文件</a></li><li><a href="/linux/file/37.html">Linux mv命令:移动或重命名文件或目录</a></li><li><a href="/linux/file/36.html">Linux split命令:分割文件</a></li><li><a href="/linux/file/40.html">Linux head命令:查看文件前几行</a></li><li><a href="/linux/file/39.html">Linux less命令:分页显示文件内容</a></li><li><a href="/linux/file/38.html">Linux vi/vim命令:文本编辑器</a></li><li><a href="/linux/file/42.html">Linux wc命令:统计字节数、字数、行数</a></li>        </ul>
    </li>
        <li>
        <a href="javascript:void(0);" class="waves-effect">
            <i class="icon-share"></i>
            <span> 压缩与解压命令            <span class="float-right menu-arrow">
            <i class="mdi mdi-chevron-right"></i>
            </span> 
            </span>
        </a>
        <ul class="submenu">
             <li><a href="/linux/compression/55.html">Linux unzip命令:解压文件或目录</a></li><li><a href="/linux/compression/54.html">Linux zip命令:压缩文件或目录</a></li><li><a href="/linux/compression/56.html">Linux tar命令:归档工具</a></li>        </ul>
    </li>
        <li>
        <a href="javascript:void(0);" class="waves-effect">
            <i class="icon-share"></i>
            <span> 磁盘管理与维护命令            <span class="float-right menu-arrow">
            <i class="mdi mdi-chevron-right"></i>
            </span> 
            </span>
        </a>
        <ul class="submenu">
             <li><a href="/linux/disk/57.html">Linux df命令:显示磁盘空间使用情况</a></li><li><a href="/linux/disk/59.html">Linux quota命令:显示磁盘已使用的空间与限制</a></li><li><a href="/linux/disk/58.html">Linux mount命令:挂载文件系统</a></li><li><a href="/linux/disk/62.html">Linux ip命令:执行网络管理任务</a></li>        </ul>
    </li>
        <li>
        <a href="javascript:void(0);" class="waves-effect">
            <i class="icon-share"></i>
            <span> 网络设置与维护命令            <span class="float-right menu-arrow">
            <i class="mdi mdi-chevron-right"></i>
            </span> 
            </span>
        </a>
        <ul class="submenu">
             <li><a href="/linux/network/61.html">Linux netstat命令:显示网络状态</a></li><li><a href="/linux/network/60.html">Linux ifconfig命令:配置或显示网络接口信息</a></li><li><a href="/linux/network/63.html">Linux ping命令:测试主机间网络连通性</a></li><li><a href="/linux/network/65.html">Linux finger命令:查找并显示用户信息</a></li><li><a href="/linux/network/64.html">Linux wall命令:发送广播</a></li><li><a href="/linux/network/67.html">Linux rlogin命令:远端登入</a></li><li><a href="/linux/network/66.html">Linux rcp命令:远程文件复制</a></li>        </ul>
    </li>
        <li>
        <a href="/linux/biji/" class="waves-effect">
            <i class="icon-share"></i>
            <span>Linux笔记
                <span class="float-right menu-arrow">
                <i class="mdi mdi-chevron-right"></i>
                </span>
            </span>
        </a>
    </li>
    </ul>
</div>
<!-- Sidebar -->
<div class="clearfix"></div>
</div>
</div>
<div class="content-page">
    <div class="content">
        <div class="container-fluid">
            <div class="page-title-box">
                <div class="row align-items-center">
                    <div class="col-sm-6">
                        <h1 class="page-title">docker系列(二)常用命令篇</h1>
                    </div>
                </div>
                <!-- end row -->
            </div>
            <!-- end page-title -->
            <!-- START ROW -->
            <div class="panel panel-forbid">
                <div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>内容摘要</div>
                <div class="panel-content">
                <span>以下操作均基于docker服务已经启动了一、帮助命令1、docker version（了解）  //查看docker版本相关信息等2、docker info     （了解）  //查看docker相关信息 比如当前有多少个容</span>                                     
                </div>
                <div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>文章正文</div>
                <div class="panel-content">
                <span><p><span style="color: rgb(255, 0, 0);">以下操作均基于docker服务已经启动了</span></p><h2>一、帮助命令</h2><p>1、docker version（了解）&nbsp; //查看docker版本相关信息等</p><p>2、docker info&nbsp; &nbsp; &nbsp;（了解）&nbsp; //查看docker相关信息 比如当前有多少个容器，多少个镜像，存储的驱动位置等</p><p>3、docker --help <span style="color: rgb(0, 0, 0);">（</span><span style="color: rgb(255, 0, 0);">重点<span style="color: rgb(0, 0, 0);">）</span></span>&nbsp; //查看docker的更多使用帮助</p><h2 style="white-space: normal;">二、镜像命令<span style="color: rgb(0, 0, 0);">（</span><span style="color: rgb(255, 0, 0);">重点<span style="color: rgb(0, 0, 0);">）</span></span></h2><p><strong>1、docker images&nbsp;（<span style="white-space: normal;">列出本地主机上的镜像</span>）</strong></p><p>示例：</p><p>docker images&nbsp; &nbsp; //列出本地主机上的所有镜像</p><p>docker images nginx&nbsp; //只查询nginx的镜像</p><p><img src="/d/file/p/20221029/1562246825377815.png" title="1562246825377815.png" _src="/d/file/p/20221029/1562246825377815.png" alt="30.png"/></p><p><strong><span style="white-space: nowrap;">各个选项说明:</span></strong></p><p><span style="white-space: nowrap;">REPOSITORY：表示镜像的仓库源</span></p><p><span style="white-space: nowrap;">TAG：镜像的标签</span></p><p><span style="white-space: nowrap;">IMAGE ID：镜像ID</span></p><p><span style="white-space: nowrap;">CREATED：镜像创建时间</span></p><p><span style="white-space: nowrap;">VIRTUAL SIZE：镜像大小</span></p><p><span style="white-space: nowrap;"><br/></span></p><p>同一仓库源可以有多个TAG，代表这个仓库源的不同个版本，我们使用 REPOSITORY:TAG 来定义不同的镜像。如果你不指定一个镜像的版本标签，例如你只使用 ubuntu，docker将默认使用ubuntu:latest镜像（latest表示是最新的）</p><p><br/></p><p><strong>OPTIONS选项说明：</strong></p><p>-a :列出本地所有的镜像（含中间映像层）<strong><br/></strong></p><p>-q :只显示镜像ID</p><p>--digests :显示镜像的摘要信息</p><p>--no-trunc :显示完整的镜像信息</p><p><br/></p><p><strong>OPTIONS简单使用示例：</strong></p><p>docker images -a</p><p><span style="white-space: normal;">docker images -q</span></p><p><span style="white-space: normal;">docker images -qa&nbsp; //也可以加多个选项，活学活用</span></p><p><span style="white-space: normal;"><br/></span></p><p><strong><span style="white-space: normal;">2、docker search 某个XXX镜像名字<span style="white-space: normal;">（查找搜索某个xxx镜像）</span></span></strong></p><p><span style="white-space: normal;">示例：<span style="white-space: normal;">docker search nginx ||&nbsp;<span style="white-space: normal;">docker search -s 100 nginx || 其它命令等</span></span></span></p><p><img src="/d/file/p/20221029/1562292418936944.png" title="1562292418936944.png" _src="/d/file/p/20221029/1562292418936944.png" alt="30.png"/></p><p style="white-space: normal;"><strong><span style="white-space: nowrap;">各个选项说明:</span></strong></p><p style="white-space: normal;"><span style="white-space: nowrap;">NAME：镜像名称</span></p><p style="white-space: normal;"><span style="white-space: nowrap;">DESCRIPTION：镜像描述</span></p><p style="white-space: normal;"><span style="white-space: nowrap;">STARS：镜像的收藏（点赞）数</span></p><p style="white-space: normal;"><span style="white-space: nowrap;">OFFICIAL：官方版镜像</span></p><p style="white-space: normal;"><span style="white-space: nowrap;">AUTOMATED：自动构建、自动组装的意思</span></p><p style="white-space: normal;"><span style="white-space: nowrap;"><br/></span></p><p>注意：docker search是从https://hub.docker.com这上面查找，不是从你设置的镜像仓库查找，拉取镜像(docker&nbsp;pull )的时候才是从你设置的镜像仓库源拉取</p><p><span style="white-space: normal;"><br/></span></p><p><strong><span style="white-space: normal;"></span></strong></p><p style="white-space: normal;"><strong>OPTIONS选项说明：</strong></p><p style="white-space: normal;">-s : 列出收藏数不小于指定值的镜像<strong><br/></strong></p><p style="white-space: normal;">--no-trunc : 显示完整的镜像描述</p><p style="white-space: normal;">--automated : 只列出 automated build类型的镜像</p><p style="white-space: normal;"><br/></p><p><strong><span style="white-space: normal;"><strong style="white-space: normal;">3、docker pull 镜像名字[:TAG]<strong style="white-space: normal;">（下载拉取某个镜像）</strong></strong></span></strong><br/></p><p><span style="white-space: normal;">示例：docker pull nginx&nbsp; 等价于 docker pull nginx:latest （如果不写版本号，就会自动下载最新版本也就是latest版本的镜像）</span></p><p><span style="white-space: normal;">拉取指定版本（比如：1.16的版本）的nginx镜像：docker pull nginx:1.16</span></p><p><span style="white-space: normal;"><br/></span></p><p><span style="white-space: normal;"><strong style="white-space: normal;"><strong>4、docker rmi 某个XXX镜像名字ID<strong>（删除某个镜像）</strong></strong></strong></span></p><p><span style="white-space: normal;">示例：</span></p><p><span style="white-space: normal;">docker rmi hello-world&nbsp;<span style="white-space: normal;">等价于&nbsp;<span style="white-space: normal;">docker rmi hello-world</span>:latest<span style="white-space: normal;">（如果不写版本号，就会自动删除最新版本也就是latest版本的镜像）</span></span></span></p><p><span style="white-space: normal;"><img src="/d/file/p/20221029/1562303729964168.png" title="1562303729964168.png" _src="/d/file/p/20221029/1562303729964168.png" alt="31.png"/></span></p><p><span style="white-space: normal;">如果删除镜像的时候报了以上错误，说明后台正在有程序使用这个hello-world容器，如果要删除需要加-f选项来强制删除</span></p><p><span style="white-space: normal;">docker rmi -f hello-world&nbsp; //强制删除hello-world镜像</span></p><p><span style="white-space: normal;"><br/></span></p><p><span style="white-space: normal;">其它相关删除命令（注意都带了-f选项）：</span></p><p><span style="white-space: normal;">docker rmi&nbsp; -f 镜像ID&nbsp; &nbsp;//删除单个镜像</span></p><p><span style="white-space: normal;">docker rmi -f 镜像名1:TAG 镜像名2:TAG&nbsp; //删除多个镜像</span></p><p><span style="white-space: normal;">docker rmi -f $(docker images -qa)&nbsp; &nbsp;//删除全部镜像&nbsp; 这里的<span style="white-space: normal;">$(docker images -qa)相当于编程语言中的表达式</span></span></p><h2><span style="white-space: normal;">&nbsp;三、容器命令（<span style="color: rgb(255, 0, 0);">重点<span style="color: rgb(0, 0, 0);">）</span></span>&nbsp;</span></h2><p><span style="white-space: normal; color: rgb(255, 0, 0);">有镜像才能创建容器，这是根本前提（下载一个CentOS镜像来进行容器相关命令操作）</span><span style="white-space: normal;">，截图如下：</span></p><p><span style="white-space: normal;"><img src="/d/file/p/20221029/1562325126903225.png" title="1562325126903225.png" _src="/d/file/p/20221029/1562325126903225.png" alt="30.png"/></span></p><p><span style="white-space: normal;"><br/></span></p><p><strong><span style="white-space: normal;">1、docker run [OPTIONS] <span style="white-space: normal; color: rgb(255, 0, 0);">IMAGE</span> [COMMAND] [ARG...]（新建并启动容器）</span></strong></p><p><strong><span style="white-space: normal;"><br/></span></strong></p><p><strong><span style="white-space: normal;"></span></strong></p><p style="white-space: normal;"><strong>OPTIONS选项说明：</strong></p><p style="white-space: normal;">--name=&quot;容器新名字&quot;:&nbsp; 为容器指定一个名称；</p><p style="margin: 5px 0px; color: rgb(0, 0, 0); font-family: sans-serif; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;">--ip：为容器设置一个固定的ip；</p><p style="margin: 5px 0px; color: rgb(0, 0, 0); font-family: sans-serif; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;">--net：指定网络模式；</p><p style="white-space: normal;">-d：后台运行容器，并返回容器ID，即：启动守护式容器；</p><p style="white-space: normal;"><span style="color: rgb(255, 0, 0);">-i：以交互模式运行容器，通常与 -t 同时使用；</span></p><p><span style="white-space: nowrap; color: rgb(255, 0, 0);">-t：为容器重新分配一个伪输入终端，通常与 -i 同时使用；</span></p><p><span style="white-space: nowrap;">-P： 随机端口映射；</span></p><p><span style="white-space: nowrap;"></span></p><p><span style="white-space: nowrap;">-p：指定端口映射，有以下四种格式：</span></p><p><span style="white-space: nowrap;">&nbsp; &nbsp; &nbsp; ip:hostPort:containerPort</span></p><p><span style="white-space: nowrap;">&nbsp; &nbsp; &nbsp; ip::containerPort</span></p><p><span style="white-space: nowrap;">&nbsp; &nbsp; &nbsp; <span style="white-space: nowrap; color: rgb(255, 0, 0);">hostPort:containerPort</span></span></p><p><span style="white-space: nowrap;">&nbsp; &nbsp; &nbsp; containerPort</span></p><p><span style="white-space: nowrap;"><br/></span></p><p><span style="white-space: nowrap;">示例如下：</span></p><p><span style="white-space: nowrap;"><img src="/d/file/p/20221029/1562329984508575.png" title="1562329984508575.png" _src="/d/file/p/20221029/1562329984508575.png" alt="31.png"/></span></p><p><span style="white-space: normal;">上面截图中的docker run -it ee2526f4865b是以镜像ID来生成容器，也可以用镜像名字来生成容器 如：docker run -it centos</span><br/></p><p><span style="white-space: normal; color: rgb(255, 0, 0);">这种方式是以交互模式启动一个容器,在容器内执行/bin/bash命令</span></p><p><strong><span style="color: rgb(255, 0, 0);"><span style="color: rgb(0, 0, 0);"><br/></span></span></strong></p><p><strong><span style="color: rgb(255, 0, 0);"><span style="color: rgb(0, 0, 0);">②、docker run -d 镜像名或镜像ID（<strong>启动守护式容器）</strong></span></span></strong><br/></p><p><strong><span style="color: rgb(255, 0, 0);"><span style="color: rgb(0, 0, 0);"><strong><br/></strong></span></span></strong></p><p><span style="color: rgb(255, 0, 0);"><span style="color: rgb(0, 0, 0);">示例截图：</span></span></p><p><span style="color: rgb(255, 0, 0);"><span style="color: rgb(0, 0, 0);"><img src="/d/file/p/20221029/1562384867322031.png" title="1562384867322031.png" _src="/d/file/p/20221029/1562384867322031.png" alt="30.png"/></span></span></p><p><span style="color: rgb(255, 0, 0);"><span style="color: rgb(0, 0, 0);">问题：然后docker ps -a 进行查看, <span style="color: rgb(0, 112, 192);">会发现容器已经退出</span>，很重要的要说明的一点: <span style="color: rgb(255, 0, 0);">docker容器后台运行,就必须有一个前台进程</span>。容器运行的命令如果不是那些<span style="color: rgb(255, 0, 0);">一直挂起的命令</span>（比如运行top，tail），就是会自动退出的。这个是docker的机制问题，比如你的web容器，我们以nginx为例，正常情况下，我们配置启动服务只需要启动响应的service即可。例如：</span></span></p><p><span style="color: rgb(255, 0, 0);"><span style="color: rgb(0, 0, 0);">service nginx start</span></span></p><p><span style="color: rgb(255, 0, 0);"><span style="color: rgb(0, 0, 0);">但是这样做，nginx为后台进程模式运行，就导致docker前台没有运行的应用，这样的容器后台启动后，会立即自杀因为他觉得他没事可做了。所以，最佳的解决方案是，将你要运行的程序以前台进程的形式运行。</span></span></p><p><span style="color: rgb(255, 0, 0);"><span style="color: rgb(0, 0, 0);"><br/></span></span></p><p><span style="color: rgb(255, 0, 0);"><span style="color: rgb(0, 0, 0);">举个不退出的栗子：docker run -d centos /bin/sh -c &quot;while true;do echo hello wzyl;sleep 2;done&quot;&nbsp;&nbsp;&nbsp;&nbsp;//以守护模式启动docker里面的centos系统，并在里面借助shell编程命令，每隔两秒钟在控制台循环打印<span style="white-space: normal;">wzyl，然后使用docker ps命令，会看到这次我们的容器并没有自动退出，因为这样前台会一直有一个响应，即使你以后台模式启动容器，docker也不会自动关闭。如果看不懂这个，也可以看下面的“以后台方式运行启动tomcat”的示例，这种方式也不会退出，这两个原理是一样的</span></span></span></p><p><span style="color: rgb(255, 0, 0);"><span style="color: rgb(0, 0, 0);"><span style="white-space: normal;"><br/></span></span></span></p><p><strong><span style="color: rgb(255, 0, 0);"><span style="color: rgb(0, 0, 0);"><span style="white-space: normal;">③、上面OPTIONS选项中的-p和-P选项的端口映射示例说明（以tomcat镜像举例）</span></span></span></strong></p><p><strong><span style="color: rgb(255, 0, 0);"><span style="color: rgb(0, 0, 0);"><span style="white-space: normal;"><br/></span></span></span></strong></p><p>拉取一个tomcat镜像</p><p>docker pull tomcat</p><p><br/></p><p>小p的用法示例：</p><p>docker run -it -p 8989:8080 tomcat //8989是对外提供的端口，8080是tomcat默认的端口，用ip:8989访问实际访问的是8080端口，只是浏览器url地址栏显示的是8989端口</p><p><br/></p><p>示例截图如下：</p><p><img src="/d/file/p/20221029/1562410763543153.png" title="1562410763543153.png" _src="/d/file/p/20221029/1562410763543153.png" alt="21.png"/></p><p>截图中可以看到浏览器成功访问到了docker里面的tomcat web服务器，如果你没有访问到，可以查看你的云服务器是否有安全组之类的规则设置，如果有请在安全组设置里面开放8989端口（这里换成你自己实际设置的端口）</p><p><br/></p><p><span style="white-space: normal;">大p（大写字母的P）的用法示例：</span></p><p><span style="color: rgb(255, 0, 0);"><span style="color: rgb(0, 0, 0);"><span style="white-space: normal;">docker run -it -P tomcat&nbsp; //docker会为我们随机生成一个端口号，可以用docker ps查看一下，就可以看到随机生成的端口号</span></span></span></p><p><span style="color: rgb(255, 0, 0);"><span style="color: rgb(0, 0, 0);"><span style="white-space: normal;"><br/></span></span></span></p><p><span style="color: rgb(255, 0, 0);"><span style="color: rgb(0, 0, 0);"><span style="white-space: normal;"><span style="white-space: normal;">示例截图如下：</span></span></span></span></p><p><span style="color: rgb(255, 0, 0);"><span style="color: rgb(0, 0, 0);"><span style="white-space: normal;"><span style="white-space: normal;"><img src="/d/file/p/20221029/1562411250173500.png" title="1562411250173500.png" _src="/d/file/p/20221029/1562411250173500.png" alt="22.png"/></span></span></span></span></p><p><span style="color: rgb(255, 0, 0);"><span style="color: rgb(0, 0, 0);"><span style="white-space: normal;"><br/></span></span></span></p><p><span style="color: rgb(255, 0, 0);"><span style="color: rgb(0, 0, 0);"><span style="white-space: normal;"><img src="/d/file/p/20221029/1562411268339389.png" title="1562411268339389.png" _src="/d/file/p/20221029/1562411268339389.png" alt="23.png"/></span></span></span></p><p><br/></p><p>以后台方式运行启动tomcat：</p><p>docker run -d -p 6666:8080 tomcat</p><p><br/></p><p>示例截图：</p><p><img src="/d/file/p/20221029/1562415172965418.png" title="1562415172965418.png" _src="/d/file/p/20221029/1562415172965418.png" alt="20.png"/></p><p><strong><span style="white-space: normal;"><br/></span></strong><strong style="white-space: normal;">2、docker ps [OPTIONS]（列出当前所有正在运行的容器）</strong></p><p><strong style="white-space: normal;"><br/></strong></p><p><strong style="white-space: normal;"></strong></p><p style="white-space: normal;"><strong>OPTIONS说明（常用）：</strong></p><p style="white-space: normal;">-a ：列出当前所有正在运行的容器+历史上运行过的</p><p><span style="white-space: normal;">-l ：显示最近创建的容器</span></p><p>-n：显示最近n个创建的容器&nbsp; &nbsp;示例：docker ps -n 3 //查看上3次运行过的容器</p><p>-q ：静默模式 只显示容器编号</p><p>--no-trunc：不截断输出</p><p><span style="white-space: normal;"><br/></span></p><p><span style="white-space: normal;">示例截图：</span></p><p><span style="white-space: normal;"><img src="/d/file/p/20221029/1562335402811468.png" title="1562335402811468.png" _src="/d/file/p/20221029/1562335402811468.png" alt="32.png"/></span><br/></p><p><br/></p><p><strong style="white-space: normal;">3、退出容器</strong></p><p><strong style="white-space: normal;"><br/></strong></p><p>两种退出方式</p><p>①、exit&nbsp;&nbsp;&nbsp;&nbsp;//容器停止退出</p><p>②、ctrl+P+Q（ctrl+p+q大小写都可以）&nbsp; &nbsp; //容器不停止退出</p><p><br/></p><p><strong>4、启动容器</strong></p><p>docker start 容器ID或者容器名&nbsp;&nbsp;</p><p><br/></p><p><strong style="white-space: normal;">5、重启容器</strong></p><p>docker restart 容器ID或者容器名</p><p><br/></p><p style="white-space: normal;"><strong>6、停止容器（温柔的慢慢的停止容器，相当于正常操作来关闭计算机）</strong></p><p style="white-space: normal;">docker stop 容器ID或者容器名</p><p style="white-space: normal;"><br/></p><p style="white-space: normal;"><strong>7、强制停止容器<strong style="white-space: normal;">（粗暴停止容器，相当于直接把计算机的电源给拔掉）</strong></strong></p><p style="white-space: normal;">docker kill 容器ID或者容器名</p><p style="white-space: normal;"><br/></p><p style="white-space: normal;"><strong>8、删除已停止的容器</strong></p><p style="white-space: normal;">①、删除单个容器</p><p style="white-space: normal;">docker rm 容器ID</p><p style="white-space: normal;"><br/></p><p style="white-space: normal;">②、一次性删除多个容器（注意下面第一个加了-f选项）：</p><p style="white-space: normal;">docker rm -f $(docker ps -a -q)&nbsp; 或者这样写也可以&nbsp;<span style="white-space: normal;">docker rm -f $(docker ps -aq)</span></p><p style="white-space: normal;"><br/></p><p style="white-space: normal;">docker ps -a -q | xargs docker rm&nbsp; //<span style="white-space: normal;">xargs是Linux的可变参数 | 是Linux中的管道符号，这里的意思就是左边docker查询出的结果集传递给右边的xargs docker rm来达到删除目的的操作，类似于sql中的where id in(id1,id2,id3......)</span></p><p style="white-space: normal;"><span style="white-space: normal;"><br/></span></p><p style="white-space: normal;"><span style="white-space: normal;"><strong style="white-space: normal;">9、docker logs -f -t --tail 容器ID（查看容器日志）</strong></span></p><p style="white-space: normal;"><span style="white-space: normal;"><strong style="white-space: normal;"><br/></strong></span></p><p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 25.6px; color: rgb(51, 51, 51); font-family: Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;tohoma,sans-serif&quot;; white-space: normal; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-weight: 700;">说明：</span></p><p>-t 是加入时间戳</p><p>-f 跟随最新的日志打印</p><p>--tail 数字 显示最后多少条（tail是Linux的）</p><p style="white-space: normal;"><br/></p><p style="white-space: normal;">示例：&nbsp;</p><p style="white-space: normal;">docker logs 6ed070829fcd&nbsp; //打印容器所有日志</p><p style="white-space: normal;">docker logs -t 6ed070829fcd&nbsp; //打印容器所有日志（含日期时间）</p><p style="white-space: normal;"><span style="white-space: normal;"><strong style="white-space: normal;"></strong></span></p><p>docker logs -t -f 6ed070829fcd&nbsp; //打印容器所有日志（-f表示在控制台不停地追加日志，这样可以持续的看日志）</p><p style="white-space: normal;">docker logs -t -f --tail 3 6ed070829fcd&nbsp; //<span style="white-space: normal;">打印容器所有日志（<span style="white-space: normal;">--tail</span>只看倒数的3行日志）</span></p><p style="white-space: normal;"><span style="white-space: normal;"><strong style="white-space: normal;"><br/></strong></span></p><p style="white-space: normal;"><span style="white-space: normal;"><strong style="white-space: normal;"><strong style="white-space: normal;">10、docker top 容器ID（查看容器内运行的进程）</strong></strong></span></p><p style="white-space: normal;"><span style="white-space: normal;"><br/></span></p><p style="white-space: normal;"><span style="white-space: normal;">示例：</span></p><p style="white-space: normal;"><span style="white-space: normal;">docker top 6ed070829fcd</span></p><p style="white-space: normal;"><span style="white-space: normal;"><br/></span></p><p style="white-space: normal;"><span style="white-space: normal;"><strong style="white-space: normal;">11、docker inspect 容器ID（查看容器内部细节）</strong></span></p><p style="white-space: normal;"><span style="white-space: normal;"><strong style="white-space: normal;"><br/></strong></span></p><p style="white-space: normal;">示例：</p><p style="white-space: normal;">docker inspect 6ed070829fcd</p><p style="white-space: normal;"><br/></p><p style="white-space: normal;">注意：docker镜像是一层套一层的概念，整个容器是以一个json串的形式，嵌套的形式来展示容器内部的全部结构细节<br/></p><p style="white-space: normal;"><br/></p><p style="white-space: normal;"><strong style="white-space: normal;">12、进入正在运行的容器并以命令行交互（主要有2个命令）</strong></p><p style="white-space: normal;"><strong style="white-space: normal;"><br/></strong></p><p style="white-space: normal;">①、docker exec -it 容器ID bashShell&nbsp; &nbsp;</p><p style="white-space: normal;">示例：</p><p style="white-space: normal;">docker exec -it 6a7ca4834465 ls -l /tmp&nbsp; //直接在宿主机中拿到结果，并不会进入到容器内部中<span style="white-space: normal;"></span></p><p style="white-space: normal;">docker exec -it 6a7ca4834465 /bin/bash //进入到容器内部</p><p style="white-space: normal;"><span style="white-space: normal;"><br/></span></p><p style="white-space: normal;"><span style="white-space: normal;">②、</span><span style="white-space: normal;">重新进入：docker attach 容器ID&nbsp; &nbsp;&nbsp;</span></p><p style="white-space: normal;"><span style="white-space: normal;">示例：docker attach 6a7ca4834465 //进入到容器内部</span></p><p style="white-space: normal;"><span style="white-space: normal;"><br/></span></p><p style="white-space: normal;"><span style="white-space: normal;">上述两个区别：</span></p><p style="white-space: normal;"><span style="white-space: normal;">attach直接进入容器启动命令的终端，不会启动新的进程</span></p><p style="white-space: normal;"><span style="white-space: normal;">exec是在容器中打开新的终端，并且可以启动新的进程，从上述的命令示例中可以看到，exec的功能更加强大</span></p><p style="white-space: normal;"><span style="white-space: normal;"><br/></span></p><p style="white-space: normal;"><span style="white-space: normal;"><strong style="white-space: normal;">13、docker cp&nbsp; 容器ID:容器内路径 目的主机路径（从容器内拷贝文件到主机上）</strong></span></p><p style="white-space: normal;"><span style="white-space: normal;"><strong style="white-space: normal;"><br/></strong></span></p><p style="white-space: normal;">示例：</p><p style="white-space: normal;">docker cp 6a7ca4834465:/tmp/test.log&nbsp; /tmp&nbsp; //将<span style="white-space: normal;">6a7ca4834465容器中的/tmp/test.log文件拷贝到宿主机中的/tmp目录</span></p><p style="white-space: normal;"><span style="white-space: normal;"><br/></span></p><p style="white-space: normal;"><span style="white-space: normal;"></span></p><h2 style="white-space: normal;">四、小总结</h2><p><img src="/d/file/p/20221029/1562391262169127.png" title="1562391262169127.png" _src="/d/file/p/20221029/1562391262169127.png" alt="下载.png"/></p><p>attach&nbsp; &nbsp; Attach to a running container # 当前 shell 下 attach 连接指定运行镜像</p><p>build&nbsp; &nbsp; &nbsp;Build an image from a Dockerfile&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # 通过 Dockerfile 定制镜像</p><p>commit&nbsp; &nbsp; Create a new image from a container changes&nbsp; &nbsp;# 提交当前容器为新的镜像</p><p style="white-space: normal;"><span style="white-space: normal;"></span>cp&nbsp; &nbsp; &nbsp; &nbsp; Copy files/folders from the containers filesystem to the host path&nbsp; &nbsp;#从容器中拷贝指定文件或者目录到宿主机中</p><p>create&nbsp; &nbsp; Create a new container&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # 创建一个新的容器，同 run，但不启动容器</p><p>diff&nbsp; &nbsp; &nbsp; Inspect changes on a container&#39;s filesystem&nbsp; &nbsp;# 查看 docker 容器变化</p><p>events&nbsp; &nbsp; Get real time events from the server&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # 从 docker 服务获取容器实时事件</p><p>exec&nbsp; &nbsp; &nbsp; Run a command in an existing container&nbsp; &nbsp; &nbsp; &nbsp; # 在已存在的容器上运行命令</p><p>export&nbsp; &nbsp; Stream the contents of a container as a tar archive&nbsp; &nbsp;# 导出容器的内容流作为一个 tar 归档文件[对应import]</p><p>history&nbsp; &nbsp;Show the history of an image&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # 展示一个镜像形成历史</p><p>images&nbsp; &nbsp; List images&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# 列出系统当前镜像</p><p>import&nbsp; &nbsp; Create a new filesystem image from the contents of a tarball # 从tar包中的内容创建一个新的文件系统映像[对应export]</p><p><br/></p><p>info&nbsp; &nbsp; &nbsp; Display system-wide information&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# 显示系统相关信息</p><p>inspect&nbsp; &nbsp;Return low-level information on a container&nbsp; &nbsp;# 查看容器详细信息</p><p>kill&nbsp; &nbsp; &nbsp; Kill a running container&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # kill 指定 docker 容器</p><p>load&nbsp; &nbsp; &nbsp; Load an image from a tar archive&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # 从一个 tar 包中加载一个镜像[对应 save]</p><p>login&nbsp; &nbsp; &nbsp;Register or Login to the docker registry server&nbsp; &nbsp; # 注册或者登陆一个 docker 源服务器</p><p>logout&nbsp; &nbsp; Log out from a Docker registry server&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # 从当前 Docker registry 退出</p><p>logs&nbsp; &nbsp; &nbsp; Fetch the logs of a container&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# 输出当前容器日志信息</p><p>port&nbsp; &nbsp; &nbsp; Lookup the public-facing port which is NAT-ed to PRIVATE_PORT&nbsp; &nbsp; # 查看映射端口对应的容器内部源端口</p><p>pause&nbsp; &nbsp; &nbsp;Pause all processes within a container&nbsp; &nbsp; &nbsp; &nbsp; # 暂停容器</p><p>ps&nbsp; &nbsp; &nbsp; &nbsp; List containers&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# 列出容器列表</p><p><br/></p><p>pull&nbsp; &nbsp; &nbsp; Pull an image or a repository from the docker registry server&nbsp; &nbsp;# 从docker镜像源服务器拉取指定镜像或者库镜像</p><p><br/></p><p>push&nbsp; &nbsp; &nbsp; Push an image or a repository to the docker registry server&nbsp; &nbsp; # 推送指定镜像或者库镜像至docker源服务器</p><p>restart&nbsp; &nbsp;Restart a running container&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# 重启运行的容器</p><p>rm&nbsp; &nbsp; &nbsp; &nbsp; Remove one or more containers&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# 移除一个或者多个容器</p><p><br/></p><p>rmi&nbsp; &nbsp; &nbsp; &nbsp;Remove one or more images&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# 移除一个或多个镜像[无容器使用该镜像才可删除，否则需删除相关容器才可继续或 -f 强制删除]</p><p><br/></p><p>run&nbsp; &nbsp; &nbsp; &nbsp;Run a command in a new container&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # 创建一个新的容器并运行一个命令</p><p>save&nbsp; &nbsp; &nbsp; Save an image to a tar archive&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # 保存一个镜像为一个 tar 包[对应 load]</p><p>search&nbsp; &nbsp; Search for an image on the Docker Hub&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# 在 docker hub 中搜索镜像</p><p>start&nbsp; &nbsp; &nbsp;Start a stopped containers&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # 启动容器</p><p>stop&nbsp; &nbsp; &nbsp; Stop a running containers&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# 停止容器</p><p>tag&nbsp; &nbsp; &nbsp; &nbsp;Tag an image into a repository&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # 给源中镜像打标签</p><p>top&nbsp; &nbsp; &nbsp; &nbsp;Lookup the running processes of a container&nbsp; &nbsp;# 查看容器中运行的进程信息</p><p>unpause&nbsp; &nbsp;Unpause a paused container&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # 取消暂停容器</p><p>version&nbsp; &nbsp;Show the docker version information&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# 查看 docker 版本号</p><p>wait&nbsp; &nbsp; &nbsp; Block until a container stops, then print its exit code&nbsp; &nbsp;# 截取容器停止时的退出状态值</p><p><br/></p><p><br/></p>					
                                                                                                        
                                                </div>
                                                <!-- .entry-wrapper --></span>                                     
                </div>
                <div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>代码注释</div>
                <div class="panel-content">
                <span>[!--zhushi--]</span>                                     
                </div>

            </div>

            <!-- END ROW -->
            <div class="newsPage">
                <div class="newsPageTurn">
                    <span><a>上一篇</a><a href='/linux/biji/171.html'>【linux命令】Linux 正则表达式详解</a><a>下一篇</a><a href='/linux/biji/173.html'>【linux命令】【分享】推荐一个linux入门学习的书、网站或教程</a></span>
                </div>
            </div>
        </div>


<div id="author-box">
    <h3>作者：喵哥笔记</h3>
        <div class="author-info">
            <div class="author-avatar">
                <img src="/skin1/picture/01.jpg" alt="IDC笔记" class="avatar" width="64" height="64">
            </div>
        <div class="author-description">
            <p>学的不仅是技术，更是梦想！</p>
            <ul class="author-social follows nb">
                <li>
                    <a target="_blank" href="/" title="IDC笔记">IDC笔记</a>
                </li>
            </ul>
        </div>
        <div class="clear"></div>
    </div>
</div>
<!-- container-fluid -->
    </div>
<!-- content -->
    <footer class="footer">
    © 2020 IDC笔记 <i class="mdi mdi-heart text-danger"></i>. | 备案号：<a href="https://beian.miit.gov.cn/">辽ICP备18000516号</a>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?674585fbbd2294d3faf910f668ea91b4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

    </footer>
</div>
</div>
<!-- END wrapper -->
<!-- jQuery  -->
<script src="/skin1/js/jquery.min.js"></script>
<script src="/skin1/js/bootstrap.bundle.min.js"></script>
<script src="/skin1/js/metismenu.min.js"></script>
<script src="/skin1/js/jquery.slimscroll.js"></script>
<script src="/skin1/js/waves.min.js"></script>
<!--Morris Chart-->
<script src="/skin1/js/morris.min.js"></script>
<script src="/skin1/js/raphael.min.js"></script>
<script src="/skin1/js/dashboard.init.js"></script>
<script src="/skin1/js/app.js"></script>
<script src="/foot.js"></script>
</body>
</html>