<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title>深入PHP数据加密详解_PHP教程_IDC笔记</title>
    <meta name="keywords" content="PHP,PHP笔记,PHP教程" />
    <meta name="description" content="数据加密在我们生活中的地位已经越来越重要了，尤其是考虑到在网络上发生的大量 交易和传输的大量数据。如果对于采用安全措施有兴趣的话，也一定会有兴趣了解PHP提供的一系列安" />
    <meta content="Responsive admin theme build on top of Bootstrap 4" name="description" />
    <meta content="idcnote.com" name="author" />
    <link rel="shortcut icon" href="/skin1/images/favicon.ico">
    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="/skin1/css/morris.css">
    <link href="/skin1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/metismenu.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/icons.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/style.css" rel="stylesheet" type="text/css">
<link href="/SyntaxHighlighter/shCoreDefault.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/SyntaxHighlighter/shCore.js"></script>
<script type="text/javascript">
 SyntaxHighlighter.all();
</script>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
</head>
<body>
<!-- Begin page -->
		<div id="wrapper">
			<!-- Top Bar Start -->
			<div class="topbar">
				<!-- LOGO -->
				<div class="topbar-left">
					<a href="/" class="logo">
						<span class="logo-light">
                            <i class="mdi mdi-camera-control"></i>IDC笔记
                        </span>
						<span class="logo-sm">
                            <i class="mdi mdi-camera-control"></i>
                        </span>
					</a>
				</div>
				<nav class="navbar-custom">
					<ul class="navbar-right list-inline float-right mb-0">
						<!--<li class="dropdown notification-list list-inline-item d-none d-md-inline-block">
							<a class="nav-link waves-effect" href="#" id="btn-fullscreen">
								<i class="mdi mdi-arrow-expand-all noti-icon"></i>
							</a>
						</li>
						<li class="dropdown notification-list list-inline-item">
							<div class="dropdown notification-list nav-pro-img">
								<a class="dropdown-toggle nav-link arrow-none nav-user" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
									<img src="/skin1/picture/user-4.jpg" alt="user" class="rounded-circle">
								</a>
								<div class="dropdown-menu dropdown-menu-right profile-dropdown ">
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-account-circle"></i> Profile</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-wallet"></i> Wallet</a>
									<a class="dropdown-item d-block" href="#">
										<span class="badge badge-success float-right">11</span>
										<i class="mdi mdi-settings"></i> Settings</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-lock-open-outline"></i> Lock screen</a>
									<div class="dropdown-divider"></div>
									<a class="dropdown-item text-danger" href="#">
										<i class="mdi mdi-power text-danger"></i> Logout</a>
								</div>
							</div>
						</li>
						-->
					</ul>
					<ul class="list-inline menu-left mb-0">
						<li class="float-left">
							<button class="button-menu-mobile open-left waves-effect">
                            <i class="mdi mdi-menu"></i>
                        </button>
						</li>
						<li class="d-none d-md-inline-block">
							<form role="search" class="app-search">
								<div class="form-group mb-0">
									<input type="text" class="form-control" placeholder="Search..">
									<button type="submit"><i class="fa fa-search"></i></button>
								</div>
							</form>
						</li>
					</ul>
				</nav>
			</div>
<!-- ========== Left Sidebar Start ========== -->
<div class="left side-menu">
    <div class="slimscroll-menu" id="remove-scroll">
    <!--- Sidemenu -->
    <div id="sidebar-menu">
    <!-- Left Menu Start -->
    <ul class="metismenu" id="side-menu">
			<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP简介			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jianjie/1.html">PHP简介</a></li><li><a href="/php/jianjie/2.html">PHP用途</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP基本语法			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yufa/3.html">分离HTML</a></li><li><a href="/php/yufa/4.html">指令分隔符</a></li><li><a href="/php/yufa/5.html">PHP注释</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类型			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpleixing/6.html">PHP类型简介</a></li><li><a href="/php/phpleixing/7.html">PHP类型之布尔类型</a></li><li><a href="/php/phpleixing/8.html">PHP类型之整型</a></li><li><a href="/php/phpleixing/9.html">PHP类型之浮点型</a></li><li><a href="/php/phpleixing/10.html">PHP类型之字符串</a></li><li><a href="/php/phpleixing/11.html">PHP类型之数组</a></li><li><a href="/php/phpleixing/12.html">PHP类型之对象</a></li><li><a href="/php/phpleixing/13.html">PHP类型之资源类型</a></li><li><a href="/php/phpleixing/14.html">PHP类型之NULL</a></li><li><a href="/php/phpleixing/15.html">PHP类型之伪类型</a></li><li><a href="/php/phpleixing/16.html">PHP类型之类型判别</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP变量			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbianliang/17.html">PHP变量之基础</a></li><li><a href="/php/phpbianliang/18.html">PHP变量之预定义变量</a></li><li><a href="/php/phpbianliang/19.html">PHP变量之变量范围</a></li><li><a href="/php/phpbianliang/20.html">PHP变量之可变变量</a></li><li><a href="/php/phpbianliang/21.html">PHP变量之外部变量</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP运算符			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yunsuanfu/22.html">PHP运算符优先级</a></li><li><a href="/php/yunsuanfu/23.html">算术运算符</a></li><li><a href="/php/yunsuanfu/24.html">赋值运算符</a></li><li><a href="/php/yunsuanfu/25.html">位运算符</a></li><li><a href="/php/yunsuanfu/26.html">比较运算符</a></li><li><a href="/php/yunsuanfu/27.html">错误控制运算符</a></li><li><a href="/php/yunsuanfu/28.html">执行运算符</a></li><li><a href="/php/yunsuanfu/29.html">递增/递减运算符</a></li><li><a href="/php/yunsuanfu/30.html">逻辑运算符</a></li><li><a href="/php/yunsuanfu/31.html">字符串运算符</a></li><li><a href="/php/yunsuanfu/32.html">数组运算符</a></li><li><a href="/php/yunsuanfu/33.html">类型运算符</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP控制结构			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jiegou/34.html">PHP控制结构之if</a></li><li><a href="/php/jiegou/35.html">PHP控制结构之else</a></li><li><a href="/php/jiegou/36.html">PHP控制结构之elseif/else if</a></li><li><a href="/php/jiegou/37.html">PHP控制结构之替代语法</a></li><li><a href="/php/jiegou/38.html">PHP控制结构之while</a></li><li><a href="/php/jiegou/39.html">PHP控制结构之do-while</a></li><li><a href="/php/jiegou/40.html">PHP控制结构之for</a></li><li><a href="/php/jiegou/41.html">PHP控制结构之foreach</a></li><li><a href="/php/jiegou/42.html">PHP控制结构之break</a></li><li><a href="/php/jiegou/43.html">PHP控制结构之continue</a></li><li><a href="/php/jiegou/44.html">PHP控制结构之switch</a></li><li><a href="/php/jiegou/45.html">PHP控制结构之declare</a></li><li><a href="/php/jiegou/46.html">PHP控制结构之return</a></li><li><a href="/php/jiegou/47.html">PHP控制结构之require</a></li><li><a href="/php/jiegou/48.html">PHP控制结构之include</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/hanshu/52.html">用户自定义函数</a></li><li><a href="/php/hanshu/53.html">函数的参数</a></li><li><a href="/php/hanshu/54.html">返回值</a></li><li><a href="/php/hanshu/55.html">可变函数</a></li><li><a href="/php/hanshu/56.html">内部（内置）函数</a></li><li><a href="/php/hanshu/57.html">匿名函数</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类与对象			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpduixiang/58.html">类与对象前言</a></li><li><a href="/php/phpduixiang/59.html">基本概念</a></li><li><a href="/php/phpduixiang/60.html">属性</a></li><li><a href="/php/phpduixiang/61.html">类常量</a></li><li><a href="/php/phpduixiang/62.html">自动加载对象</a></li><li><a href="/php/phpduixiang/63.html">构造函数和析构函数</a></li><li><a href="/php/phpduixiang/64.html">访问控制</a></li><li><a href="/php/phpduixiang/65.html">对象继承</a></li><li><a href="/php/phpduixiang/66.html">Static关键字</a></li><li><a href="/php/phpduixiang/67.html">抽象类</a></li><li><a href="/php/phpduixiang/68.html">接口</a></li><li><a href="/php/phpduixiang/69.html">Traits</a></li><li><a href="/php/phpduixiang/70.html">重载</a></li><li><a href="/php/phpduixiang/71.html">对象迭代</a></li><li><a href="/php/phpduixiang/72.html">设计模式</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP异常处理			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yichang/81.html">异常处理</a></li><li><a href="/php/yichang/82.html">扩展PHP内置的异常处理类</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数库按分类			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpku/83.html">数组</a></li><li><a href="/php/phpku/84.html">Classes/Objects</a></li><li><a href="/php/phpku/85.html">Date/Time</a></li><li><a href="/php/phpku/86.html">Directories</a></li><li><a href="/php/phpku/87.html">错误处理</a></li><li><a href="/php/phpku/88.html">Program execution</a></li><li><a href="/php/phpku/89.html">Filesystem</a></li><li><a href="/php/phpku/90.html">Filter</a></li><li><a href="/php/phpku/91.html">Function Handling</a></li><li><a href="/php/phpku/92.html">PHP 选项/信息</a></li><li><a href="/php/phpku/93.html">Mail</a></li><li><a href="/php/phpku/94.html">Math</a></li><li><a href="/php/phpku/95.html">Misc.</a></li><li><a href="/php/phpku/96.html">Network</a></li><li><a href="/php/phpku/97.html">输出控制</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> php基础			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbiji/108377.html"></a></li><li><a href="/php/phpbiji/108376.html"></a></li><li><a href="/php/phpbiji/108380.html"></a></li><li><a href="/php/phpbiji/108379.html"></a></li><li><a href="/php/phpbiji/108378.html"></a></li><li><a href="/php/phpbiji/108381.html"></a></li><li><a href="/php/phpbiji/108382.html"></a></li><li><a href="/php/phpbiji/108384.html"></a></li><li><a href="/php/phpbiji/108383.html"></a></li><li><a href="/php/phpbiji/108385.html"></a></li><li><a href="/php/phpbiji/108386.html"></a></li><li><a href="/php/phpbiji/108388.html"></a></li><li><a href="/php/phpbiji/108387.html"></a></li><li><a href="/php/phpbiji/108389.html"></a></li><li><a href="/php/phpbiji/108391.html"></a></li>		</ul>
	</li>
		<li>
	    <a href="/php/biji/" class="waves-effect">
		    <i class="icon-share"></i>
		    <span>PHP笔记
		       	<span class="float-right menu-arrow">
		       	<i class="mdi mdi-chevron-right"></i>
		       	</span>
		    </span>
	    </a>
	</li>
	</ul>
</div>
<!-- Sidebar -->
<div class="clearfix"></div>
</div>
<!-- Sidebar -left -->
</div>
<!-- Left Sidebar End -->
<!-- Start right Content here -->
<div class="content-page">
	<div class="content">
		<div class="container-fluid">
			<div class="page-title-box">
				<div class="row align-items-center">
					<div class="col-sm-6">
						<h1 class="page-title">深入PHP数据加密详解</h1>
					</div>
				</div>
				<!-- end row -->
			</div>
			<!-- end page-title -->
			<!-- START ROW -->
			<div class="panel panel-forbid">
				<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>内容摘要</div>
			    <div class="panel-content">
			    <span>数据加密在我们生活中的地位已经越来越重要了，尤其是考虑到在网络上发生的大量 交易和传输的大量数据。如果对于采用安全措施有兴趣的话，也一定会有兴趣了解PHP提供的一系列安</span>                                     
		    	</div>
			    <div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>文章正文</div>
			    <div class="panel-content">
			    <span><P>数据加密在我们生活中的地位已经越来越重要了，尤其是考虑到在网络上发生的大量 交易和传输的大量数据。如果对于采用安全措施有兴趣的话，也一定会有兴趣了解PHP提供的一系列安全功能。在本篇文章中，我们将介绍这些 功能，提供一些基本的用法，以便你能够为自己的应用软件中增加安全功能。 </P>
<P><STRONG><FONT style="COLOR: #ff0000">预备知识<BR></FONT></STRONG>在详细介绍PHP的安全功能之 前，我们需要花点时间来向没有接触过这方面内容的读者介绍一些有关密码学的基本知识，如果对密码学的基本概念已经非常熟悉，就可以跳 过去这一部分。 <br><br>密码学可以通俗地被描述为对加/解密的研究和实验，加密是将易懂的资料转换为不易懂资料的过程，解密 则是将不易懂的资料转换为原来易懂资料的过程。不易懂的资料被称作密码，易懂的资料被称作明码。 <BR>数据的加/解密都需 要一定的算法，这些算法可以非常地简单，如著名的凯撒码，但当前的加密算法要相对复杂得多，其中一些利用现有的方法甚至是无法破译的 。 </P>
<P><STRONG><FONT style="COLOR: #ff0000">PHP的加密功能<BR></FONT></STRONG>只要有一点使用非Windows平台经验的人可能对crypt()也相当熟悉，这一函数完成被称作单向加密 的功能，它可以加密一些明码，但不能够将密码转换为原来的明码。尽管从表面上来看这似乎是一个没有什么用处的功能，但它的确被广泛用 来保证系统密码的完整性。因为，单向加密的口令一旦落入第三方人的手里，由于不能被还原为明文，因此也没有什么大用处。在验证用户输 入的口令时，用户的输入采用的也是单向算法，如果输入与存储的经加密后的口令相匹配，则输入的口信一定是正确的。<br><br>PHP同样提供了使用其crypt()函数完成单向加密功能的可能性。我将在这里简要地介绍该函数： <BR><FONT style="COLOR: #ff0000">string crypt (string input_string [, string salt])</FONT> <BR>其中的input_string参数是需要加密的字符串，第二个可选的salt是一个位字串，它能够影响 加密的暗码，进一步地排除被称作预计算攻击的可能性。缺省情况下，PHP使用一个2个字符的DES干扰串，如果你的系统使用的是MD5（我将在 以后介绍MD5算法），它会使用一个12个字符的干扰串。顺便说一下，可以通过执行下面的命令发现系统将要使用的干扰串的长度： <BR><FONT style="COLOR: #ff0000">print "My system salt size is: ". CRYPT_SALT_LENGTH; <BR></FONT>系统也可能支持其他的加密算法。crypt()支持四 种算法，下面是它支持的算法和相应的salt参数的长度： </P>
<P><STRONG><FONT style="COLOR: #ff0000">算法 Salt长度 <BR></FONT></STRONG>CRYPT_STD_DES 2-character (Default) <BR>CRYPT_EXT_DES 9-character <BR>CRYPT_MD5 12-character beginning with $ <BR>CRYPT_BLOWFISH 16-character beginning with $ <BR>用crypt()实现用户身份验证 <BR>作为crypt()函数的一个例子，考虑这样一种情况，你希望创建一段PHP脚本程序限 制对一个目录的访问，只允许能够提供正确的用户名和口令的用户访问这一目录。我将把资料存储在我喜欢的数据库MySQL的一个表中。<BR><STRONG>下面我 们以创建这个被称作members的表开始我们的例子： <BR></STRONG>mysql&gt;CREATE TABLE members ( <BR>-&gt;username CHAR(14) NOT NULL, <BR>-&gt;password CHAR(32) NOT NULL, <BR>-&gt;PRIMARY KEY(username) <BR>-&gt;); <BR>然后，我们假定下面的数据已经存储在该表中： <BR><STRONG>用户名 密码 <BR></STRONG>clark keloD1C377lKE <BR>bruce ba1T7vnz9AWgk <BR>peter paLUvRWsRLZ4U <BR>这些加密的口令对应的明码分别是kent、banner和parker。注意一下每个口令的前二个字母， 这是因为我使用了下面的代码，根据口令的前二个字母创建干扰串的： <BR>$enteredPassword. <BR>$salt = substr($enteredPassword, 0, 2); <BR>$userPswd = crypt($enteredPassword, $salt); <BR>// $userPswd然后就和用户名一起存储在MySQL 中 <BR>我将使用Apache的口令-应答认证配置提示用户输入用户名和口令，一个鲜为人知的有关PHP的信息是，它可以把Apache 的口令-应答系统输入的用户名和口令识别为$PHP_AUTH_USER和$PHP_AUTH_PW，我将在身份验证脚本中用到这二个变量。花一些时间仔细阅读下 面的脚本，多注意一下其中的解释，以便更好地理解下面的代码： <BR>crypt()和Apache的口令-应答验证系统的应用 <BR>$host = "localhost"; <BR>$user = "zorro"; <BR>$pswd = "hell odolly"; <BR>$db = "users"; <BR>// Set authorization to False <BR>$authorization = 0; <BR>// Verify that user has entered username and password <BR>if (isset($PHP_AUTH_USER) &&isset($PHP_AUTH_PW)) : <BR>mysql_pconnect($host, $user, $pswd) or die("Can't connect to MySQL <BR>server!"); <BR>mysql_select_db($db) or die("Can't select database!"); <BR>// Perform the encryption <BR>$salt = substr($PHP_AUTH_PW, 0, 2); <BR>$encrypted_pswd = crypt($PHP_AUTH_PW, $salt); <BR>// Build the query <BR>$query = "SELECT username FROM members WHERE <BR>username = '$PHP_AUTH_USER' AND <BR>password = '$encrypted_pswd'"; <BR>// Execute the query <BR>if (mysql_numrows(mysql_query($query)) == 1) : <BR>$authorization = 1; <BR>endif; <BR>endif; <BR>// confirm authorization <BR>if (! $authorization) : <BR>header('WWW-Authenticate: Basic realm="Private"'); <BR>header('HTTP/1.0 401 Unauthorized'); <BR>print "You are unauthorized to enter this area."; <BR>exit; <BR>else : <BR>print "This is the secret data!"; <BR>endif; <BR>&gt; <BR>上面就是一个核实用户访问权限的简单身份验证系统。在使用crypt()保护重要的机密资料时，记住在缺省状态下使用的 crypt()并不是最安全的，只能用在对安全性要求较低的系统中，如果需要较高的安全性能，就需要我在本篇文章的后面介绍的算法。 <BR>下面我将介绍另一个PHP支持的函数━━md5()，这一函数使用MD5散列算法，它有几种很有趣的用法值得一提： </P>
<P><STRONG><FONT style="COLOR: #ff0000">混编<BR></FONT></STRONG>一个混编函数可以将一个可变长度的信息变换为具有固定长度被混编过的输出，也被称作“信息文摘”。这是十分有用的，因为 一个固定长度的字符串可以用来检查文件的完整性和验证数字签名以及用户身份验证。由于它适合于PHP，PHP内置的md5()混编函数将把一个可 变长度的信息转换为128位（32个字符）的信息文摘。混编的一个有趣的特点是不能通过分析混编后的信息得到原来的明码，因为混编后的结果 与原来的明码内容没有依赖关系。 即便只改变一个字符串中的一个字符，也将使得MD5混编算法计算出二个截然不同的结果。我们首先来看下 表的内容及其相应的结果： <BR><STRONG>使用md5()混编字符串 <BR></STRONG>$msg = "This is some message that I just wrote"; <BR>$enc_msg = md5($msg); <BR>print "hash: $enc_msg "; <BR>&gt; <BR><STRONG>结果： <BR></STRONG>hash: 81ea092649ca32b5ba375e81d8f4972c <BR>注意，结果的长度为32个字符。再来看一下下面的表，其中的$msg的值有了一点 微小的变化： <BR>使用md5()对一个稍微变化的字符串进行混编 <BR>//注意，message中少了一个s <BR>$msg = "This is some mesage that I just wrote"; <BR>$enc_msg = md5($msg); <BR>print "hash2: $enc_msg <BR>"; <BR>&gt; <BR><STRONG>结果： <BR></STRONG>hash2: e86cf511bd5490d46d5cd61738c82c0c <BR>可以 发现，尽管二个结果的长度都是32个字符，但明文中一点微小的变化使得结果发生了很大的变化，因此，混编和md5()函数是检查数据中微小变 化的一个很好的工具。 <BR>尽管crypt()和md5()各有用处，但二者在功能上都受到一定的限制。在下面的部分中，我们将介绍 二个非常有用的被称作Mcrypt和Mhash的PHP扩展，将大大拓展PHP用户在加密方面的选择。 <BR>尽管我们在上面的小节中说明了 单向加密的重要性，但有时我们可能需要在加密后，再把密码数据还原成原来的数据，幸运的是，PHP通过Mcrypt扩展库的形式提供了这种可能 性。 <BR>Mcrypt <BR>Mcrypt 2.5.7 Unix | Win32 <BR>Mcrypt 2.4.7是一个功能强大的加密算法扩展库，它包括有22种算法 ，其中就包括下面的几种算法： <BR>Blowfish RC2 Safer-sk64 xtea <BR>Cast-256 RC4 Safer-sk128 <BR>DES RC4-iv Serpent <BR>Enigma Rijndael-128 Threeway <BR>Gost Rijndael-192 TripleDES <BR>LOKI97 Rijndael-256 Twofish <BR>PanamaSaferplus Wake </P>
<P><STRONG><FONT style="COLOR: #ff0000">安装： <BR></FONT></STRONG>在标准的PHP软件包中不包括Mcrypt，因此需要下载它，下载的地址为：ftp://argeas.cs-net.gr/pub/unix/mcrypt/。下载后，按照下面的方法进行编译，并把它扩充在PHP中： <BR>下载Mcrypt软件包。 <BR>gunzipmcrypt-x.x.x.tar.gz <BR>tar -xvfmcrypt-x.x.x.tar <BR>./configure --disable-posix-threads <BR>make <BR>make install <BR>cd to your PHP directory. <BR>./configure -with-mcrypt=[dir] [--other-configuration-directives] <BR>make <BR>make install <BR>当然了，根据你的 要求和PHP安装时与互联网服务器软件的关系，上面的过程可能需要作适当的修改。 </P>
<P><STRONG><FONT style="COLOR: #ff0000">使用Mcrypt <BR></FONT></STRONG>Mcrypt的优点不仅仅 在于其提供的加密算法较多，还在于它可以对数据进行加/解密处理，此外，它还提供了35种处理数据用的函数。尽管对这些函数进行详细介绍 已经超出了这篇文章的范围，我还是要就几个典型的函数作一下简要的介绍。 <br><br>首先，我将介绍如何使用Mcrypt扩展库对数 据进行加密，然后再介绍如何使用它进行解密。下面的代码对这一过程进行了演示，首先是对数据进行加密，然后在浏览器上显示加密后的数 据，并将加密后的数据还原为原来的字符串，将它显示在浏览器上。 <BR>使用Mcrypt对数据进行加、解密 <BR>// Designate string to be encrypted <BR>$string = "Applied Cryptography, by Bruce Schneier, is <BR>a wonderful cryptography reference."; <BR>// Encryption/decryption key <BR>$key = "Four score and twenty years ago"; <BR>// Encryption Algorithm <BR>$cipher_alg = MCRYPT_RIJNDAEL_128; <BR>// Create the initialization vector for added security. <BR>$iv = mcrypt_create_iv(mcrypt_get_iv_size($cipher_alg, <BR>MCRYPT_MODE_ECB), MCRYPT_RAND); <BR>// Output original string <BR>print "Original string: $string <BR>"; <BR>// Encrypt $string <BR>$encrypted_string = mcrypt_encrypt($cipher_alg, $key, <BR>$string, MCRYPT_MODE_CBC, $iv); <BR>// Convert to hexadecimal and output to browser <BR>print "Encrypted string: ".bin2hex($encrypted_string)."<BR>"; <BR>$decrypted_string = mcrypt_decrypt($cipher_alg, $key, <BR>$encrypted_string, MCRYPT_MODE_CBC, $iv); <BR>print "Decrypted string: $decrypted_string"; <BR>&gt; <BR>执行上面的脚本将会产生下面的输出： <BR>Original string: Applied Cryptography, by Bruce Schneier, is a wonderful cryptography reference. <BR>Encrypted string: 02a7c58b1ebd22a9523468694b091e60411cc4dea8652bb8072 34fa06bbfb20e71ecf525f29df58e28f3d9bf541f7ebcecf62b c89fde4d8e7ba1e6cc9ea24850478c11742f5cfa1d23fe22fe8 bfbab5e <BR>Decrypted string: Applied Cryptography, by Bruce Schneier, is a wonderful cryptography reference. <BR>上面的代码中二个最典型的函数是mcrypt_encrypt()和 mcrypt_decrypt()，它们的用途是显而易见的。我使用了“电报密码本”模式，Mcrypt提供了几种加密方式，由于每种加密方式都有可以影响 密码安全的特定字符，因此每种模式都需要了解。对于没有接触过密码系统的读者来说，可能对mcrypt_create_iv()函数更有兴趣，尽管对这 一函数进行彻底的解释已经超出了本篇文章的范围，但我仍然会提到它创建的初始化向量（hence, iv），这一向量可以使每条信息彼此独立。 尽管不是所有的模式都需要这一初始化变量，但如果在要求的模式中没有提供这一变量，PHP就会给出警告信息。 </P>
<P><STRONG><FONT style="COLOR: #ff0000">Mhash扩展库 <BR></FONT></STRONG>http://sourceforge.net/projects/mhash/<BR>0.8.3版的Mhash扩展库支持12种混编算法，仔细检查Mhash v.0.8.3的头文件mhash.h可以知道，它支持下面的混编算法： <BR>CRC32 HAVAL160 MD5 <BR>CRC32B HAVAL192 RIPEMD160 <BR>GOST HAVAL224 SHA1 <BR>HAVAL128 HAVAL256 TIGER </P>
<P><STRONG><FONT style="COLOR: #ff0000">安装 <BR></FONT></STRONG>象Mcrypt一 样，Mhash也没有包括在PHP软件包中，对于非Windows用户而言，下面是安装过程： <BR>下载Mhash扩展库 <BR>gunzipmhash-x.x.x.tar.gz <BR>tar -xvfmhash-x.x.x.tar <BR>./configure <BR>make <BR>make install <BR>cd <BR>./configure -with-mhash=[dir] [--other-configuration-directives] <BR>make <BR>make install <BR>象Mcrypt一样 ，根据PHP在互联网服务器软件上的安装方式，可能需要对Mhash进行其他的配置。 <BR>对于Windows用户而言， http://www.php4win.de中有一个很好的包括Mhash扩展库在内的PHP软件包。只要下载并进行解压缩，然后根据其中的readme.first文档中的指 令进行安装即可。 </P>
<P><STRONG><FONT style="COLOR: #ff0000">使用Mhash <BR></FONT></STRONG>对信息进行混编非常简单，看一下下面的例子： <BR>$hash_alg = MHASH_TIGER; <BR>$message = "These are the directions to the secret fort. Two steps left, three steps right, and cha chacha."; <BR>$hashed_message = mhash($hash_alg, $message); <BR>print "The hashed message is ". bin2hex($hashed_message); <BR>&gt; <BR>执行这一段脚本程序将得到下面的输出结果： <BR>The hashed message is 07a92a4db3a4177f19ec9034ae5400eb60d1a9fbb4ade461 <BR>在这里使用bin2hex()函数的目的是方便我们理解$hashed_message 的输出，这是因为混编的结果是二进制格式，为了能够将它转化为易于理解的格式，必须将它转换为十六进制格式。 <BR>需要 注意的是，混编是单向功能，其结果不依赖输入，因此可以公开显示这一信息。这一策略通常用于让用户比较下载文件和系统管理员提供的文 件，以确保文件的完整性。 <BR>Mhash还有其他一些有用的函数。例如，我需要输出一个Mhash支持的算法的名字，由于 Mhash支持的所有算法的名字都以MHASH_开头，因此，可以通过执行如下的代码完成这一任务： <BR>$hash_alg = MHASH_TIGER; <BR>print "This data has been hashed with the".mhash_get_hash_name($hashed_message)."hashing algorithm."; <BR>&gt; <BR><STRONG>得到的输出是： <BR></STRONG><FONT style="COLOR: #ff0000">This data has been hashed with the TIGER hashing algorithm. <BR></FONT>关于PHP和加密最后需要注意的一个问题 <BR>关于PHP和加密需要注意的最后的一个重要问题是在服务器和客户端之间传输的数据 在传输过程中是不安全的！PHP是一种服务器端技术，不能阻止数据在传输过程中泄密。因此，如果想实现一个完整的安全应用，建议选用 Apache-SSL或其他的安全服务器布置。 </P>
<P><STRONG><FONT style="COLOR: #ff0000">结论<BR></FONT></STRONG>这篇文章介绍了PHP最有用的功能之一━━数据加密，不仅讨论了PHP内置 的crypt() 和md5()加密函数，还讨论了用于数据加密的功能强大的扩展库━━Mcrypt和Mhash。在这篇文章最后，我需要指出的是，一个真正 安全的PHP应用还应该包括安全的服务器，由于PHP是一种服务器端的技术，因此，在数据由客户端向服务器端进行传输时，它不能保证数据的 安全。<BR></P>
<hr></span>                                     
		    	</div>
		    	<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>代码注释</div>
			    <div class="panel-content">
			    <span></span>                                     
		    	</div>

			</div>

			<!-- END ROW -->
			<div class="newsPage">
				<div class="newsPageTurn">
				    <span><a>上一篇</a><a href='/php/biji/86422.html'>使用HTML5 Canvas API中的clip()方法裁剪区域图像</a><a>下一篇</a><a href='/php/biji/86424.html'>Java 判断字符为中文实例代码(超管用)</a></span>
				</div>
			</div>
		</div>


<div id="author-box">
    <h3>作者：喵哥笔记</h3>
        <div class="author-info">
            <div class="author-avatar">
                <img src="/skin1/picture/01.jpg" alt="IDC笔记" class="avatar" width="64" height="64">
            </div>
        <div class="author-description">
            <p>学的不仅是技术，更是梦想！</p>
            <ul class="author-social follows nb">
            	<li>
                    <a target="_blank" href="/" title="IDC笔记">IDC笔记</a>
                </li>
            </ul>
        </div>
        <div class="clear"></div>
    </div>
</div>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
<!-- container-fluid -->
	</div>
<!-- content -->
	<footer class="footer">
	© 2020 IDC笔记 <i class="mdi mdi-heart text-danger"></i>. | 备案号：<a href="https://beian.miit.gov.cn/">辽ICP备18000516号</a>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?674585fbbd2294d3faf910f668ea91b4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

	</footer>
</div>

</div>
<!-- END wrapper -->
<!-- jQuery  -->
<script src="/skin1/js/jquery.min.js"></script>
<script src="/skin1/js/bootstrap.bundle.min.js"></script>
<script src="/skin1/js/metismenu.min.js"></script>
<script src="/skin1/js/jquery.slimscroll.js"></script>
<script src="/skin1/js/waves.min.js"></script>
<!--Morris Chart-->
<script src="/skin1/js/morris.min.js"></script>
<script src="/skin1/js/raphael.min.js"></script>
<script src="/skin1/js/dashboard.init.js"></script>
<script src="/skin1/js/app.js"></script>
<script src="/foot.js"></script>
</body>
</html>