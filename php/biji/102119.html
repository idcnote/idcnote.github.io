<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title>详解ASP.NET数据绑定操作中Repeater控件的用法_PHP教程_IDC笔记</title>
    <meta name="keywords" content="PHP,PHP笔记,PHP教程" />
    <meta name="description" content="一、绑定控件之Repeater<br />
<br />
.NET封装了多种数据绑定控件，诸如GridView、DataList等但该篇文章将会从Repeater入手，因为Repeater只提供了基本的数据绑定模板，没有内置其它分页等" />
    <meta content="Responsive admin theme build on top of Bootstrap 4" name="description" />
    <meta content="idcnote.com" name="author" />
    <link rel="shortcut icon" href="/skin1/images/favicon.ico">
    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="/skin1/css/morris.css">
    <link href="/skin1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/metismenu.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/icons.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/style.css" rel="stylesheet" type="text/css">
<link href="/SyntaxHighlighter/shCoreDefault.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/SyntaxHighlighter/shCore.js"></script>
<script type="text/javascript">
 SyntaxHighlighter.all();
</script>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
</head>
<body>
<!-- Begin page -->
		<div id="wrapper">
			<!-- Top Bar Start -->
			<div class="topbar">
				<!-- LOGO -->
				<div class="topbar-left">
					<a href="/" class="logo">
						<span class="logo-light">
                            <i class="mdi mdi-camera-control"></i>IDC笔记
                        </span>
						<span class="logo-sm">
                            <i class="mdi mdi-camera-control"></i>
                        </span>
					</a>
				</div>
				<nav class="navbar-custom">
					<ul class="navbar-right list-inline float-right mb-0">
						<!--<li class="dropdown notification-list list-inline-item d-none d-md-inline-block">
							<a class="nav-link waves-effect" href="#" id="btn-fullscreen">
								<i class="mdi mdi-arrow-expand-all noti-icon"></i>
							</a>
						</li>
						<li class="dropdown notification-list list-inline-item">
							<div class="dropdown notification-list nav-pro-img">
								<a class="dropdown-toggle nav-link arrow-none nav-user" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
									<img src="/skin1/picture/user-4.jpg" alt="user" class="rounded-circle">
								</a>
								<div class="dropdown-menu dropdown-menu-right profile-dropdown ">
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-account-circle"></i> Profile</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-wallet"></i> Wallet</a>
									<a class="dropdown-item d-block" href="#">
										<span class="badge badge-success float-right">11</span>
										<i class="mdi mdi-settings"></i> Settings</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-lock-open-outline"></i> Lock screen</a>
									<div class="dropdown-divider"></div>
									<a class="dropdown-item text-danger" href="#">
										<i class="mdi mdi-power text-danger"></i> Logout</a>
								</div>
							</div>
						</li>
						-->
					</ul>
					<ul class="list-inline menu-left mb-0">
						<li class="float-left">
							<button class="button-menu-mobile open-left waves-effect">
                            <i class="mdi mdi-menu"></i>
                        </button>
						</li>
						<li class="d-none d-md-inline-block">
							<form role="search" class="app-search">
								<div class="form-group mb-0">
									<input type="text" class="form-control" placeholder="Search..">
									<button type="submit"><i class="fa fa-search"></i></button>
								</div>
							</form>
						</li>
					</ul>
				</nav>
			</div>
<!-- ========== Left Sidebar Start ========== -->
<div class="left side-menu">
    <div class="slimscroll-menu" id="remove-scroll">
    <!--- Sidemenu -->
    <div id="sidebar-menu">
    <!-- Left Menu Start -->
    <ul class="metismenu" id="side-menu">
			<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP简介			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jianjie/1.html">PHP简介</a></li><li><a href="/php/jianjie/2.html">PHP用途</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP基本语法			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yufa/3.html">分离HTML</a></li><li><a href="/php/yufa/4.html">指令分隔符</a></li><li><a href="/php/yufa/5.html">PHP注释</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类型			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpleixing/6.html">PHP类型简介</a></li><li><a href="/php/phpleixing/7.html">PHP类型之布尔类型</a></li><li><a href="/php/phpleixing/8.html">PHP类型之整型</a></li><li><a href="/php/phpleixing/9.html">PHP类型之浮点型</a></li><li><a href="/php/phpleixing/10.html">PHP类型之字符串</a></li><li><a href="/php/phpleixing/11.html">PHP类型之数组</a></li><li><a href="/php/phpleixing/12.html">PHP类型之对象</a></li><li><a href="/php/phpleixing/13.html">PHP类型之资源类型</a></li><li><a href="/php/phpleixing/14.html">PHP类型之NULL</a></li><li><a href="/php/phpleixing/15.html">PHP类型之伪类型</a></li><li><a href="/php/phpleixing/16.html">PHP类型之类型判别</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP变量			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbianliang/17.html">PHP变量之基础</a></li><li><a href="/php/phpbianliang/18.html">PHP变量之预定义变量</a></li><li><a href="/php/phpbianliang/19.html">PHP变量之变量范围</a></li><li><a href="/php/phpbianliang/20.html">PHP变量之可变变量</a></li><li><a href="/php/phpbianliang/21.html">PHP变量之外部变量</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP运算符			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yunsuanfu/22.html">PHP运算符优先级</a></li><li><a href="/php/yunsuanfu/23.html">算术运算符</a></li><li><a href="/php/yunsuanfu/24.html">赋值运算符</a></li><li><a href="/php/yunsuanfu/25.html">位运算符</a></li><li><a href="/php/yunsuanfu/26.html">比较运算符</a></li><li><a href="/php/yunsuanfu/27.html">错误控制运算符</a></li><li><a href="/php/yunsuanfu/28.html">执行运算符</a></li><li><a href="/php/yunsuanfu/29.html">递增/递减运算符</a></li><li><a href="/php/yunsuanfu/30.html">逻辑运算符</a></li><li><a href="/php/yunsuanfu/31.html">字符串运算符</a></li><li><a href="/php/yunsuanfu/32.html">数组运算符</a></li><li><a href="/php/yunsuanfu/33.html">类型运算符</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP控制结构			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jiegou/34.html">PHP控制结构之if</a></li><li><a href="/php/jiegou/35.html">PHP控制结构之else</a></li><li><a href="/php/jiegou/36.html">PHP控制结构之elseif/else if</a></li><li><a href="/php/jiegou/37.html">PHP控制结构之替代语法</a></li><li><a href="/php/jiegou/38.html">PHP控制结构之while</a></li><li><a href="/php/jiegou/39.html">PHP控制结构之do-while</a></li><li><a href="/php/jiegou/40.html">PHP控制结构之for</a></li><li><a href="/php/jiegou/41.html">PHP控制结构之foreach</a></li><li><a href="/php/jiegou/42.html">PHP控制结构之break</a></li><li><a href="/php/jiegou/43.html">PHP控制结构之continue</a></li><li><a href="/php/jiegou/44.html">PHP控制结构之switch</a></li><li><a href="/php/jiegou/45.html">PHP控制结构之declare</a></li><li><a href="/php/jiegou/46.html">PHP控制结构之return</a></li><li><a href="/php/jiegou/47.html">PHP控制结构之require</a></li><li><a href="/php/jiegou/48.html">PHP控制结构之include</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/hanshu/52.html">用户自定义函数</a></li><li><a href="/php/hanshu/53.html">函数的参数</a></li><li><a href="/php/hanshu/54.html">返回值</a></li><li><a href="/php/hanshu/55.html">可变函数</a></li><li><a href="/php/hanshu/56.html">内部（内置）函数</a></li><li><a href="/php/hanshu/57.html">匿名函数</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类与对象			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpduixiang/58.html">类与对象前言</a></li><li><a href="/php/phpduixiang/59.html">基本概念</a></li><li><a href="/php/phpduixiang/60.html">属性</a></li><li><a href="/php/phpduixiang/61.html">类常量</a></li><li><a href="/php/phpduixiang/62.html">自动加载对象</a></li><li><a href="/php/phpduixiang/63.html">构造函数和析构函数</a></li><li><a href="/php/phpduixiang/64.html">访问控制</a></li><li><a href="/php/phpduixiang/65.html">对象继承</a></li><li><a href="/php/phpduixiang/66.html">Static关键字</a></li><li><a href="/php/phpduixiang/67.html">抽象类</a></li><li><a href="/php/phpduixiang/68.html">接口</a></li><li><a href="/php/phpduixiang/69.html">Traits</a></li><li><a href="/php/phpduixiang/70.html">重载</a></li><li><a href="/php/phpduixiang/71.html">对象迭代</a></li><li><a href="/php/phpduixiang/72.html">设计模式</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP异常处理			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yichang/81.html">异常处理</a></li><li><a href="/php/yichang/82.html">扩展PHP内置的异常处理类</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数库按分类			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpku/83.html">数组</a></li><li><a href="/php/phpku/84.html">Classes/Objects</a></li><li><a href="/php/phpku/85.html">Date/Time</a></li><li><a href="/php/phpku/86.html">Directories</a></li><li><a href="/php/phpku/87.html">错误处理</a></li><li><a href="/php/phpku/88.html">Program execution</a></li><li><a href="/php/phpku/89.html">Filesystem</a></li><li><a href="/php/phpku/90.html">Filter</a></li><li><a href="/php/phpku/91.html">Function Handling</a></li><li><a href="/php/phpku/92.html">PHP 选项/信息</a></li><li><a href="/php/phpku/93.html">Mail</a></li><li><a href="/php/phpku/94.html">Math</a></li><li><a href="/php/phpku/95.html">Misc.</a></li><li><a href="/php/phpku/96.html">Network</a></li><li><a href="/php/phpku/97.html">输出控制</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> php基础			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbiji/108377.html"></a></li><li><a href="/php/phpbiji/108376.html"></a></li><li><a href="/php/phpbiji/108380.html"></a></li><li><a href="/php/phpbiji/108379.html"></a></li><li><a href="/php/phpbiji/108378.html"></a></li><li><a href="/php/phpbiji/108381.html"></a></li><li><a href="/php/phpbiji/108382.html"></a></li><li><a href="/php/phpbiji/108384.html"></a></li><li><a href="/php/phpbiji/108383.html"></a></li><li><a href="/php/phpbiji/108385.html"></a></li><li><a href="/php/phpbiji/108386.html"></a></li><li><a href="/php/phpbiji/108388.html"></a></li><li><a href="/php/phpbiji/108387.html"></a></li><li><a href="/php/phpbiji/108389.html"></a></li><li><a href="/php/phpbiji/108391.html"></a></li>		</ul>
	</li>
		<li>
	    <a href="/php/biji/" class="waves-effect">
		    <i class="icon-share"></i>
		    <span>PHP笔记
		       	<span class="float-right menu-arrow">
		       	<i class="mdi mdi-chevron-right"></i>
		       	</span>
		    </span>
	    </a>
	</li>
	</ul>
</div>
<!-- Sidebar -->
<div class="clearfix"></div>
</div>
<!-- Sidebar -left -->
</div>
<!-- Left Sidebar End -->
<!-- Start right Content here -->
<div class="content-page">
	<div class="content">
		<div class="container-fluid">
			<div class="page-title-box">
				<div class="row align-items-center">
					<div class="col-sm-6">
						<h1 class="page-title">详解ASP.NET数据绑定操作中Repeater控件的用法</h1>
					</div>
				</div>
				<!-- end row -->
			</div>
			<!-- end page-title -->
			<!-- START ROW -->
			<div class="panel panel-forbid">
				<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>内容摘要</div>
			    <div class="panel-content">
			    <span>一、绑定控件之Repeater<br />
<br />
.NET封装了多种数据绑定控件，诸如GridView、DataList等但该篇文章将会从Repeater入手，因为Repeater只提供了基本的数据绑定模板，没有内置其它分页等</span>                                     
		    	</div>
			    <div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>文章正文</div>
			    <div class="panel-content">
			    <span><p></p>
<p><strong>一、绑定控件之Repeater<br />
</strong>.NET封装了多种数据绑定控件，诸如GridView、DataList等但该篇文章将会从Repeater入手，因为Repeater只提供了基本的数据绑定模板，没有内置其它分页等功能，所以它是最原始的数据绑定控件，只要能够熟练运用Repeater控件其它的绑定控件也就很简单了。<br />
<strong>1、Repeater简介<br />
</strong>Repeater 控件是基本模板化数据列表。 它不像GridView控件一样能够可视化的设计格式或样式，因此开发时在控件模板中必须显式声明所有格式、格式和样式标记。另外Repeater控件没有内置选择、排序、编辑、分页等功能，它只提供了基本的数据绑定，但是它为开发人员提供了ItemCommand 事件，该事件支持在控件中收发命令。<br />
想要绑定数据，模板是必不可少的，Repeater控件同样支持数据模板，而且还可以在模板中添加想要的标签，它主要用法如下图：<br />
</p>
<p></p>
<p>Note：每个 Repeater 控件必须定义 ItemTemplate。<br />
</p>
<p></p>
<p><strong>二、控件使用技巧<br />
</strong>上文讲解了Repeater基本的使用方法及它的一些基本特性，接下来做几个经典的示例来运用Repeater控件。<br />
<strong>1、数据绑定之删除、编辑</strong><br />
该示例将会使用Asp.net的前台和后台结合来实现显示数据，并能够编辑和删除数据。<br />
删除页面：<br />
</p>
<p></p>
<p>编辑页面：<br />
</p>
<p></p>
<p>前台代码：在单击编辑按钮后将会进入编辑页面，页面是由两个Panel控件来控制，通过传递ID号的方式判断显示的是编辑页面还是删除页面，另外前台代码通过设置控件的CommandArgument属性来传递后台所需要判断的id号。</p>
<div class="phpstudycode">
<pre class="brush:xml;">
&lt;body&gt; 
  &lt;form id="form1" runat="server"&gt; 
  &lt;div&gt; 
    &lt;asp:Repeater ID="userRepeat" runat="server" OnItemCommand="userRepeat_ItemCommand" OnItemDataBound="userRepeat_ItemDataBound"&gt; 
      &lt;HeaderTemplate&gt; 
        &lt;table border="1" style="width:1000px;text-align:center;border-collapse:collapse;"&gt; 
          &lt;thead style="background-color:red;"&gt; 
            &lt;tr&gt; 
              &lt;th&gt;ID&lt;/th&gt; 
              &lt;th&gt;内容&lt;/th&gt; 
              &lt;th&gt;操作&lt;/th&gt; 
            &lt;/tr&gt; 
          &lt;/thead&gt; 
      &lt;/HeaderTemplate&gt; 
      &lt;ItemTemplate&gt; 
        &lt;asp:Panel ID="plItem" runat="server"&gt; 
          &lt;tr&gt; 
            &lt;td&gt;&lt;asp:Label runat="server" ID="lblID" Text='&lt;%#Eval("id") %&gt;'&gt;&lt;/asp:Label&gt;&lt;/td&gt; 
            &lt;td&gt;&lt;%#Eval("name") %&gt;&lt;/td&gt; 
            &lt;td&gt; 
              &lt;asp:LinkButton ID="lbtEdit" CommandName="Edit" CommandArgument='&lt;%#Eval("id") %&gt;' runat="server"&gt;编辑&lt;/asp:LinkButton&gt; 
              &lt;asp:LinkButton ID="lbtDelete" CommandName="Delete" CommandArgument='&lt;%#Eval("id") %&gt;' runat="server"&gt;删除&lt;/asp:LinkButton&gt; 
            &lt;/td&gt; 
          &lt;/tr&gt; 
        &lt;/asp:Panel&gt; 
        &lt;asp:Panel ID="plEdit" runat="server"&gt; 
          &lt;tr&gt; 
            &lt;td&gt;&lt;asp:Label runat="server" ID="Label1" Text='&lt;%#Eval("id") %&gt;'&gt;&lt;/asp:Label&gt;&lt;/td&gt; 
            &lt;td&gt;&lt;asp:TextBox ID="txtName" runat="server" Text='&lt;%#Eval("name") %&gt;'&gt;&lt;/asp:TextBox&gt;&lt;/td&gt; 
            &lt;td&gt; 
              &lt;asp:LinkButton ID="lbtCancel" CommandName="Cancel" CommandArgument='&lt;%#Eval("id") %&gt;' runat="server"&gt;取消&lt;/asp:LinkButton&gt; 
              &lt;asp:LinkButton ID="lbtUpdate" CommandName="Update" CommandArgument='&lt;%#Eval("id") %&gt;' runat="server"&gt;更新&lt;/asp:LinkButton&gt; 
            &lt;/td&gt; 
          &lt;/tr&gt; 
        &lt;/asp:Panel&gt; 
      &lt;/ItemTemplate&gt; 
      &lt;FooterTemplate&gt; 
        &lt;/table&gt; 
      &lt;/FooterTemplate&gt; 
    &lt;/asp:Repeater&gt; 
  &lt;/div&gt; 
  &lt;/form&gt; 
&lt;/body&gt; 

</pre>
</div>
<p>后台代码：在后台代码中很重要的两个事件是ItemCommand和ItemDataBound，其中ItemCommand负责接收前台传进来的按钮命令，根据命令的参数来设置后台传递的id，并在ItemDataBound中来验证id判断切换显示Panel。</p>
<div class="phpstudycode">
<pre class="brush:csharp;">
using System; 
using System.Collections.Generic; 
using System.Data; 
using System.Data.SqlClient; 
using System.Web; 
using System.Web.UI; 
using System.Web.UI.WebControls; 
 
namespace WebApplication4 
{ 
  public partial class EditPage : System.Web.UI.Page 
  { 
    private int id = 0; //保存指定行操作所在的ID号 
    /// &lt;summary&gt; 
    /// 窗体加载时绑定数据 
    /// &lt;/summary&gt; 
    /// &lt;param name="sender"&gt;&lt;/param&gt; 
    /// &lt;param name="e"&gt;&lt;/param&gt; 
    protected void Page_Load(object sender, EventArgs e) 
    { 
      if (!Page.IsPostBack) 
      { 
        this.DataBindToRepeater();//将数据绑定到Repeater控件上 
      } 
    } 
 
    /// &lt;summary&gt; 
    /// 将数据源绑定Repeater控件上 
    /// &lt;/summary&gt; 
    private void DataBindToRepeater() { 
      //使用using语句进行数据库连接 
      using (SqlConnection sqlCon=new SqlConnection("server=.;database=MyBlog;uid=sa;pwd=1")) 
      { 
        sqlCon.Open(); //打开数据库连接 
 
        SqlCommand sqlcom = new SqlCommand();  //创建数据库命令对象 
        sqlcom.CommandText = "select * from match"; //为命令对象指定执行语句 
        sqlcom.Connection = sqlCon; //为命令对象指定连接对象 
 
        this.userRepeat.DataSource = sqlcom.ExecuteReader();  //为Repeater对象指定数据源 
        this.userRepeat.DataBind(); //绑定数据源 
      } 
    } 
 
    /// &lt;summary&gt; 
    /// Repeater控件命令事件 
    /// &lt;/summary&gt; 
    /// &lt;param name="source"&gt;&lt;/param&gt; 
    /// &lt;param name="e"&gt;&lt;/param&gt; 
    protected void userRepeat_ItemCommand(object source, RepeaterCommandEventArgs e) 
    { 
      //获取命令文本，判断发出的命令为何种类型，根据命令类型调用事件 
      if (e.CommandName=="Edit") //编辑命令 
      { 
        id = int.Parse(e.CommandArgument.ToString());  //获取命令ID号 
      } 
      else if (e.CommandName=="Cancel")  //取消更新命令 
      { 
        id = -1; 
      } 
      else if(e.CommandName=="Delete")  //删除行内容命令 
      { 
        id = int.Parse(e.CommandArgument.ToString());  //获取删除行的ID号 
        //删除选定的行，并重新指定绑定操作 
        this.DeleteRepeater(id); 
      } 
      else if (e.CommandName == "Update") //更新行内容命令 
      { 
        //获取更新行的内容和ID号 
        string strText = ((TextBox)e.Item.FindControl("txtName")).Text.Trim(); 
        int intId=int.Parse(((Label)e.Item.FindControl("lblID")).Text); 
        //更新Repeater控件的内容 
        this.UpdateRepeater(strText,intId); 
      } 
 
      //重新绑定控件上的内容 
      this.DataBindToRepeater(); 
    } 
 
    /// &lt;summary&gt; 
    /// 删除行内容 
    /// &lt;/summary&gt; 
    /// &lt;param name="intId"&gt;删除行所在内容的ID&lt;/param&gt; 
    private void DeleteRepeater(int intId) { 
      using (SqlConnection sqlCon = new SqlConnection("server=.;database=MyBlog;uid=sa;pwd=1")) 
      { 
        sqlCon.Open(); //打开数据库连接 
 
        SqlCommand sqlcom = new SqlCommand();  //创建数据库命令对象 
        sqlcom.CommandText = "delete from match where id=@id"; //为命令对象指定执行语句 
        sqlcom.Connection = sqlCon; //为命令对象指定连接对象 
 
        //创建参数集合,并向sqlcom中添加参数集合 
        SqlParameter sqlParam = new SqlParameter("@id", intId); 
        sqlcom.Parameters.Add(sqlParam); 
 
        sqlcom.ExecuteNonQuery();  //指定更新语句 
 
      } 
    } 
 
    /// &lt;summary&gt; 
    /// 更新Repeater控件中的内容 
    /// &lt;/summary&gt; 
    /// &lt;param name="strText"&gt;修改后的内容&lt;/param&gt; 
    /// &lt;param name="intId"&gt;内容所在行的ID号&lt;/param&gt; 
    private void UpdateRepeater(string strText,int intId) { 
      using (SqlConnection sqlCon = new SqlConnection("server=.;database=MyBlog;uid=sa;pwd=1")) 
      { 
        sqlCon.Open(); //打开数据库连接 
 
        SqlCommand sqlcom = new SqlCommand();  //创建数据库命令对象 
        sqlcom.CommandText = "update match set name=@str where id=@id"; //为命令对象指定执行语句 
        sqlcom.Connection = sqlCon; //为命令对象指定连接对象 
 
        //创建参数集合,并向sqlcom中添加参数集合 
        SqlParameter[] sqlParam = { new SqlParameter("@str", strText), new SqlParameter("@id", intId) }; 
        sqlcom.Parameters.AddRange(sqlParam); 
 
        sqlcom.ExecuteNonQuery();  //指定更新语句 
         
      } 
    } 
 
    /// &lt;summary&gt; 
    /// Repeater控件数据绑定时发生的事件 
    /// &lt;/summary&gt; 
    /// &lt;param name="sender"&gt;&lt;/param&gt; 
    /// &lt;param name="e"&gt;&lt;/param&gt; 
    protected void userRepeat_ItemDataBound(object sender, RepeaterItemEventArgs e) 
    { 
      //判断Repeater控件中的数据是否是绑定的数据源，如果是的话将会验证是否进行了编辑操作 
      //ListItemType 枚举表示在一个列表控件可以包括，例如 DataGrid、 DataList和 Repeater 控件的不同项目。  
      if (e.Item.ItemType==ListItemType.Item || e.Item.ItemType==ListItemType.AlternatingItem) 
      { 
        //获取绑定的数据源，这里要注意上面使用sqlReader的方法来绑定数据源，所以下面使用的DbDataRecord方法获取的 
        //如果绑定数据源是DataTable类型的使用下面的语句就会报错. 
        System.Data.Common.DbDataRecord record = (System.Data.Common.DbDataRecord)e.Item.DataItem; 
        //DataTable类型的数据源验证方式 
        //System.Data.DataRowView record = (DataRowView)e.Item.DataItem; 
 
        //判断数据源的id是否等于现在的id，如果相等的话证明现点击了编辑触发了userRepeat_ItemCommand事件 
        if (id == int.Parse(record["id"].ToString())) 
        { 
          ((Panel)e.Item.FindControl("plItem")).Visible = false; 
          ((Panel)e.Item.FindControl("plEdit")).Visible = true; 
        } 
        else 
        { 
          ((Panel)e.Item.FindControl("plItem")).Visible = true; 
          ((Panel)e.Item.FindControl("plEdit")).Visible = false; 
        } 
      } 
    } 
  } 
} 

</pre>
</div>
<p><strong>2、分页--PageDataSource<br />
</strong>前台代码：使用原始的html文本，并添加了一个Literal标签，用来动态添加并指定html标签。<br />
页面截图：<br />
</p>
<p></p>
<div class="phpstudycode">
<pre class="brush:xml;">
&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt; 
&lt;head runat="server"&gt; 
&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8"/&gt; 
  &lt;title&gt;&lt;/title&gt; 
  &lt;style type="text/css"&gt; 
 
    .pageBar 
    { 
      margin-top: 10px; 
    } 
    .pageBar a 
    { 
      color: #333; 
      font-size: 12px; 
      margin-right: 10px; 
      padding: 4px; 
      border: 1px solid #ccc; 
      text-decoration: none; 
    } 
  &lt;/style&gt; 
&lt;/head&gt; 
&lt;body&gt; 
  &lt;form id="form1" runat="server"&gt; 
  &lt;div&gt; 
     
    &lt;asp:Repeater ID="Repeater1" runat="server" &gt; 
      &lt;HeaderTemplate&gt; 
        &lt;table border="1" cellpadding="0" cellspacing="0" style="width:1006px;border-collapse:collapse; text-align:center;"&gt; 
          &lt;tr&gt; 
            &lt;th style="background-color:red"&gt;ID&lt;/th&gt; 
            &lt;th style="background-color:red"&gt;内容&lt;/th&gt; 
          &lt;/tr&gt; 
      &lt;/HeaderTemplate&gt; 
      &lt;ItemTemplate&gt; 
        &lt;tr&gt; 
          &lt;td&gt;&lt;asp:Label ID="lblId" runat="server" Text='&lt;%# DataBinder.Eval(Container.DataItem,"id") %&gt;' &gt;&lt;/asp:Label&gt;&lt;/td&gt; 
          &lt;td&gt;&lt;%# DataBinder.Eval(Container.DataItem,"name") %&gt;&lt;/td&gt; 
        &lt;/tr&gt; 
      &lt;/ItemTemplate&gt; 
      &lt;FooterTemplate&gt; 
        &lt;/table&gt; 
      &lt;/FooterTemplate&gt; 
    &lt;/asp:Repeater&gt; 
     
  &lt;/div&gt; 
  &lt;div class="pageBar"&gt; 
    &lt;asp:Literal ID="ltlPageBar" runat="server"&gt;&lt;/asp:Literal&gt; 
  &lt;/div&gt; 
  &lt;/form&gt; 
&lt;/body&gt; 
&lt;/html&gt; 

</pre>
</div>
<p>后台代码：Repeater控件的数据源是PagedDataSource对象，在页面加载时为该对象动态指定了分页的属性，并使用Literal标签来动态指定每个标签跳转页的链接。<br />
</p>
<div class="phpstudycode">
<pre class="brush:csharp;">
using System; 
using System.Collections.Generic; 
using System.Data; 
using System.Data.SqlClient; 
using System.Text; 
using System.Web; 
using System.Web.UI; 
using System.Web.UI.WebControls; 
 
namespace WebApplication4 
{ 
  public partial class PageDemo : System.Web.UI.Page 
  { 
    private string id = ""; 
    protected void Page_Load(object sender, EventArgs e) 
    { 
      if (!Page.IsPostBack) 
      { 
        //设置当前页的索引 
        int pageIndex = 1; 
        try 
        { 
          //获取当前索要跳转页的索引号 
          pageIndex = Convert.ToInt32(Request.QueryString["Page"]); 
          //如果是第0页将会跳转入第1页 
          if (pageIndex &lt;= 0) 
          { 
            pageIndex = 1; 
          } 
        } 
        catch 
        { 
          pageIndex = 1; 
        } 
 
        DataTable dt = this.GetDataTable(); //获取绑定的数据表 
 
        PagedDataSource pds = new PagedDataSource();  //创建分页数据源对象         
        pds.DataSource = dt.DefaultView;  //为数据源对象设置数据源 
        pds.AllowPaging = true; //对象允许分页 
        pds.PageSize = 2;  //设置对象每页显示的大小 
        pds.CurrentPageIndex = pageIndex - 1; //设置数据源的当前页 
 
        //向Repeater控件上绑定分页数据源控件 
        this.Repeater1.DataSource = pds; 
        this.Repeater1.DataBind(); 
 
        //使用Literal标签来动态指定每个标签跳转页的链接 
        ltlPageBar.Text = this.GetPageBar(pds); 
      } 
    } 
 
    /// &lt;summary&gt; 
    /// 获取每个标签上的跳转页的链接地址 
    /// &lt;/summary&gt; 
    /// &lt;param name="pds"&gt;分页数据源对象&lt;/param&gt; 
    /// &lt;returns&gt;分页操作按钮的html文本&lt;/returns&gt; 
    private string GetPageBar(PagedDataSource pds) 
    { 
      string pageBar = string.Empty; //声明页面标签文本 
      int currentPageIndex = pds.CurrentPageIndex + 1;  //获取当前页索引 
 
      //判断首页的链接页面 
      if (currentPageIndex == 1) //如果该页为第一页，则证明它为首页 
      { 
        pageBar += "&lt;a href=\"javascript:void(0)\"&gt;首页&lt;/a&gt;"; 
      } 
      else  
      { 
        //如果不是首页，首页链接的地址将会为1 
        pageBar += "&lt;a href=\"" + Request.CurrentExecutionFilePath + "&#63;Page=1\"&gt;首页&lt;/a&gt;"; 
      } 
 
      //判断上一页链接的地址 
      if ((currentPageIndex - 1) &lt; 1) //如果上一页小于1则链接到第一页 
      { 
        pageBar += "&lt;a href=\"javascript:void(0)\"&gt;上一页&lt;/a&gt;"; 
      } 
      else 
      { 
        //如果上一页地址不是1将会链接到上一页 
        pageBar += "&lt;a href=\"" + Request.CurrentExecutionFilePath + "&#63;Page=" + (currentPageIndex - 1) + "\"&gt;上一页&lt;/a&gt;"; 
      } 
 
      //指定下一页的链接地址 
      if ((currentPageIndex + 1) &gt; pds.PageCount) 
      { 
        //如果下一页的地址大于总页数，将会连接到首页 
        pageBar += "&lt;a href=\"javascript:void(0)\"&gt;下一页&lt;/a&gt;"; 
      } 
      else 
      { 
        //否则的话链接到下一页 
        pageBar += "&lt;a href=\"" + Request.CurrentExecutionFilePath + "&#63;Page=" + (currentPageIndex + 1) + "\"&gt;下一页&lt;/a&gt;"; 
      } 
 
      //指定末页的链接地址 
      if (currentPageIndex == pds.PageCount) 
      { 
        pageBar += "&lt;a href=\"javascript:void(0)\"&gt;末页&lt;/a&gt;"; 
      } 
      else 
      { 
        pageBar += "&lt;a href=\"" + Request.CurrentExecutionFilePath + "&#63;Page=" + pds.PageCount + "\"&gt;末页&lt;/a&gt;"; 
      } 
 
      return pageBar; //返回html文本 
    } 
 
    /// &lt;summary&gt; 
    /// 获取数据源，重新链接数据 
    /// &lt;/summary&gt; 
    /// &lt;returns&gt;DataTable，数据源&lt;/returns&gt; 
    private DataTable GetDataTable() 
    { 
      DataTable dt = new DataTable(); //创建数据库表 
      using (SqlConnection con = new SqlConnection("server=.;DataBase=MyBlog;uid=sa;pwd=1;")) 
      { 
 
        con.Open(); //打开数据库链接 
 
        SqlCommand sqlCom = new SqlCommand();  //声明并创建数据库命令集 
        StringBuilder sqlStr = new StringBuilder(); //声明sql语句 
        sqlStr.Append("select * from match");  //获取sql语句 
 
        sqlCom.CommandText = sqlStr.ToString(); //为sqlcommand对象指定sql语句 
 
        sqlCom.Connection = con;  //为sqlcommand对象指定链接对象 
        SqlDataAdapter sqlDa = new SqlDataAdapter(sqlCom); //声明数据库适配器 
        SqlCommandBuilder sqlBuilder = new SqlCommandBuilder(sqlDa); 
        sqlDa.Fill(dt); //填充表 
      } 
 
      return dt; 
    } 
 
  } 
} 
</pre>
</div>
<p><strong>结语<br />
</strong>文章主要介绍了Repeater控件的基本使用方法，并通过两个示例来更深一步的学习了Repeater控件的使用。虽然Repeater控件封装的操作较少，但它是最基础的数据绑定控件，另外可以通过使用其它控件来弥补Repeater控件的不足，如可以通过使用PagedataSource类来实现数据的分页。文章写到这里并没有结束，下篇文章将会着重讨论ListView。<br />
</p>
<hr></span>                                     
		    	</div>
		    	<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>代码注释</div>
			    <div class="panel-content">
			    <span></span>                                     
		    	</div>

			</div>

			<!-- END ROW -->
			<div class="newsPage">
				<div class="newsPageTurn">
				    <span><a>上一篇</a><a href='/php/biji/102118.html'>Win7旗舰版如何设置无线网络连接无线网上网</a><a>下一篇</a><a href='/php/biji/102120.html'>一个CSS字体的写法示例说明</a></span>
				</div>
			</div>
		</div>


<div id="author-box">
    <h3>作者：喵哥笔记</h3>
        <div class="author-info">
            <div class="author-avatar">
                <img src="/skin1/picture/01.jpg" alt="IDC笔记" class="avatar" width="64" height="64">
            </div>
        <div class="author-description">
            <p>学的不仅是技术，更是梦想！</p>
            <ul class="author-social follows nb">
            	<li>
                    <a target="_blank" href="/" title="IDC笔记">IDC笔记</a>
                </li>
            </ul>
        </div>
        <div class="clear"></div>
    </div>
</div>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
<!-- container-fluid -->
	</div>
<!-- content -->
	<footer class="footer">
	© 2020 IDC笔记 <i class="mdi mdi-heart text-danger"></i>. | 备案号：<a href="https://beian.miit.gov.cn/">辽ICP备18000516号</a>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?674585fbbd2294d3faf910f668ea91b4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

	</footer>
</div>

</div>
<!-- END wrapper -->
<!-- jQuery  -->
<script src="/skin1/js/jquery.min.js"></script>
<script src="/skin1/js/bootstrap.bundle.min.js"></script>
<script src="/skin1/js/metismenu.min.js"></script>
<script src="/skin1/js/jquery.slimscroll.js"></script>
<script src="/skin1/js/waves.min.js"></script>
<!--Morris Chart-->
<script src="/skin1/js/morris.min.js"></script>
<script src="/skin1/js/raphael.min.js"></script>
<script src="/skin1/js/dashboard.init.js"></script>
<script src="/skin1/js/app.js"></script>
<script src="/foot.js"></script>
</body>
</html>