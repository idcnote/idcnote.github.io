<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title>Apache 配置用法解析_PHP教程_IDC笔记</title>
    <meta name="keywords" content="PHP,PHP笔记,PHP教程" />
    <meta name="description" content="这篇文章主要为大家详细介绍了Apache 配置用法解析，具有一定的参考价值，可以用来参考一下。<br />
<br />
对此感兴趣的朋友，看看idc笔记做的技术笔记！<br />
Apache的配置<br />
Apache的配置由httpd.co" />
    <meta content="Responsive admin theme build on top of Bootstrap 4" name="description" />
    <meta content="idcnote.com" name="author" />
    <link rel="shortcut icon" href="/skin1/images/favicon.ico">
    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="/skin1/css/morris.css">
    <link href="/skin1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/metismenu.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/icons.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/style.css" rel="stylesheet" type="text/css">
<link href="/SyntaxHighlighter/shCoreDefault.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/SyntaxHighlighter/shCore.js"></script>
<script type="text/javascript">
 SyntaxHighlighter.all();
</script>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
</head>
<body>
<!-- Begin page -->
		<div id="wrapper">
			<!-- Top Bar Start -->
			<div class="topbar">
				<!-- LOGO -->
				<div class="topbar-left">
					<a href="/" class="logo">
						<span class="logo-light">
                            <i class="mdi mdi-camera-control"></i>IDC笔记
                        </span>
						<span class="logo-sm">
                            <i class="mdi mdi-camera-control"></i>
                        </span>
					</a>
				</div>
				<nav class="navbar-custom">
					<ul class="navbar-right list-inline float-right mb-0">
						<!--<li class="dropdown notification-list list-inline-item d-none d-md-inline-block">
							<a class="nav-link waves-effect" href="#" id="btn-fullscreen">
								<i class="mdi mdi-arrow-expand-all noti-icon"></i>
							</a>
						</li>
						<li class="dropdown notification-list list-inline-item">
							<div class="dropdown notification-list nav-pro-img">
								<a class="dropdown-toggle nav-link arrow-none nav-user" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
									<img src="/skin1/picture/user-4.jpg" alt="user" class="rounded-circle">
								</a>
								<div class="dropdown-menu dropdown-menu-right profile-dropdown ">
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-account-circle"></i> Profile</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-wallet"></i> Wallet</a>
									<a class="dropdown-item d-block" href="#">
										<span class="badge badge-success float-right">11</span>
										<i class="mdi mdi-settings"></i> Settings</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-lock-open-outline"></i> Lock screen</a>
									<div class="dropdown-divider"></div>
									<a class="dropdown-item text-danger" href="#">
										<i class="mdi mdi-power text-danger"></i> Logout</a>
								</div>
							</div>
						</li>
						-->
					</ul>
					<ul class="list-inline menu-left mb-0">
						<li class="float-left">
							<button class="button-menu-mobile open-left waves-effect">
                            <i class="mdi mdi-menu"></i>
                        </button>
						</li>
						<li class="d-none d-md-inline-block">
							<form role="search" class="app-search">
								<div class="form-group mb-0">
									<input type="text" class="form-control" placeholder="Search..">
									<button type="submit"><i class="fa fa-search"></i></button>
								</div>
							</form>
						</li>
					</ul>
				</nav>
			</div>
<!-- ========== Left Sidebar Start ========== -->
<div class="left side-menu">
    <div class="slimscroll-menu" id="remove-scroll">
    <!--- Sidemenu -->
    <div id="sidebar-menu">
    <!-- Left Menu Start -->
    <ul class="metismenu" id="side-menu">
			<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP简介			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jianjie/1.html">PHP简介</a></li><li><a href="/php/jianjie/2.html">PHP用途</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP基本语法			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yufa/3.html">分离HTML</a></li><li><a href="/php/yufa/4.html">指令分隔符</a></li><li><a href="/php/yufa/5.html">PHP注释</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类型			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpleixing/6.html">PHP类型简介</a></li><li><a href="/php/phpleixing/7.html">PHP类型之布尔类型</a></li><li><a href="/php/phpleixing/8.html">PHP类型之整型</a></li><li><a href="/php/phpleixing/9.html">PHP类型之浮点型</a></li><li><a href="/php/phpleixing/10.html">PHP类型之字符串</a></li><li><a href="/php/phpleixing/11.html">PHP类型之数组</a></li><li><a href="/php/phpleixing/12.html">PHP类型之对象</a></li><li><a href="/php/phpleixing/13.html">PHP类型之资源类型</a></li><li><a href="/php/phpleixing/14.html">PHP类型之NULL</a></li><li><a href="/php/phpleixing/15.html">PHP类型之伪类型</a></li><li><a href="/php/phpleixing/16.html">PHP类型之类型判别</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP变量			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbianliang/17.html">PHP变量之基础</a></li><li><a href="/php/phpbianliang/18.html">PHP变量之预定义变量</a></li><li><a href="/php/phpbianliang/19.html">PHP变量之变量范围</a></li><li><a href="/php/phpbianliang/20.html">PHP变量之可变变量</a></li><li><a href="/php/phpbianliang/21.html">PHP变量之外部变量</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP运算符			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yunsuanfu/22.html">PHP运算符优先级</a></li><li><a href="/php/yunsuanfu/23.html">算术运算符</a></li><li><a href="/php/yunsuanfu/24.html">赋值运算符</a></li><li><a href="/php/yunsuanfu/25.html">位运算符</a></li><li><a href="/php/yunsuanfu/26.html">比较运算符</a></li><li><a href="/php/yunsuanfu/27.html">错误控制运算符</a></li><li><a href="/php/yunsuanfu/28.html">执行运算符</a></li><li><a href="/php/yunsuanfu/29.html">递增/递减运算符</a></li><li><a href="/php/yunsuanfu/30.html">逻辑运算符</a></li><li><a href="/php/yunsuanfu/31.html">字符串运算符</a></li><li><a href="/php/yunsuanfu/32.html">数组运算符</a></li><li><a href="/php/yunsuanfu/33.html">类型运算符</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP控制结构			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jiegou/34.html">PHP控制结构之if</a></li><li><a href="/php/jiegou/35.html">PHP控制结构之else</a></li><li><a href="/php/jiegou/36.html">PHP控制结构之elseif/else if</a></li><li><a href="/php/jiegou/37.html">PHP控制结构之替代语法</a></li><li><a href="/php/jiegou/38.html">PHP控制结构之while</a></li><li><a href="/php/jiegou/39.html">PHP控制结构之do-while</a></li><li><a href="/php/jiegou/40.html">PHP控制结构之for</a></li><li><a href="/php/jiegou/41.html">PHP控制结构之foreach</a></li><li><a href="/php/jiegou/42.html">PHP控制结构之break</a></li><li><a href="/php/jiegou/43.html">PHP控制结构之continue</a></li><li><a href="/php/jiegou/44.html">PHP控制结构之switch</a></li><li><a href="/php/jiegou/45.html">PHP控制结构之declare</a></li><li><a href="/php/jiegou/46.html">PHP控制结构之return</a></li><li><a href="/php/jiegou/47.html">PHP控制结构之require</a></li><li><a href="/php/jiegou/48.html">PHP控制结构之include</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/hanshu/52.html">用户自定义函数</a></li><li><a href="/php/hanshu/53.html">函数的参数</a></li><li><a href="/php/hanshu/54.html">返回值</a></li><li><a href="/php/hanshu/55.html">可变函数</a></li><li><a href="/php/hanshu/56.html">内部（内置）函数</a></li><li><a href="/php/hanshu/57.html">匿名函数</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类与对象			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpduixiang/58.html">类与对象前言</a></li><li><a href="/php/phpduixiang/59.html">基本概念</a></li><li><a href="/php/phpduixiang/60.html">属性</a></li><li><a href="/php/phpduixiang/61.html">类常量</a></li><li><a href="/php/phpduixiang/62.html">自动加载对象</a></li><li><a href="/php/phpduixiang/63.html">构造函数和析构函数</a></li><li><a href="/php/phpduixiang/64.html">访问控制</a></li><li><a href="/php/phpduixiang/65.html">对象继承</a></li><li><a href="/php/phpduixiang/66.html">Static关键字</a></li><li><a href="/php/phpduixiang/67.html">抽象类</a></li><li><a href="/php/phpduixiang/68.html">接口</a></li><li><a href="/php/phpduixiang/69.html">Traits</a></li><li><a href="/php/phpduixiang/70.html">重载</a></li><li><a href="/php/phpduixiang/71.html">对象迭代</a></li><li><a href="/php/phpduixiang/72.html">设计模式</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP异常处理			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yichang/81.html">异常处理</a></li><li><a href="/php/yichang/82.html">扩展PHP内置的异常处理类</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数库按分类			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpku/83.html">数组</a></li><li><a href="/php/phpku/84.html">Classes/Objects</a></li><li><a href="/php/phpku/85.html">Date/Time</a></li><li><a href="/php/phpku/86.html">Directories</a></li><li><a href="/php/phpku/87.html">错误处理</a></li><li><a href="/php/phpku/88.html">Program execution</a></li><li><a href="/php/phpku/89.html">Filesystem</a></li><li><a href="/php/phpku/90.html">Filter</a></li><li><a href="/php/phpku/91.html">Function Handling</a></li><li><a href="/php/phpku/92.html">PHP 选项/信息</a></li><li><a href="/php/phpku/93.html">Mail</a></li><li><a href="/php/phpku/94.html">Math</a></li><li><a href="/php/phpku/95.html">Misc.</a></li><li><a href="/php/phpku/96.html">Network</a></li><li><a href="/php/phpku/97.html">输出控制</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> php基础			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbiji/122.html"></a></li><li><a href="/php/phpbiji/123.html"></a></li><li><a href="/php/phpbiji/124.html"></a></li><li><a href="/php/phpbiji/125.html"></a></li><li><a href="/php/phpbiji/126.html"></a></li><li><a href="/php/phpbiji/127.html"></a></li><li><a href="/php/phpbiji/128.html"></a></li><li><a href="/php/phpbiji/129.html"></a></li><li><a href="/php/phpbiji/130.html"></a></li><li><a href="/php/phpbiji/108377.html"></a></li><li><a href="/php/phpbiji/108376.html"></a></li><li><a href="/php/phpbiji/108380.html"></a></li><li><a href="/php/phpbiji/108379.html"></a></li><li><a href="/php/phpbiji/108378.html"></a></li><li><a href="/php/phpbiji/108381.html"></a></li>		</ul>
	</li>
		<li>
	    <a href="/php/biji/" class="waves-effect">
		    <i class="icon-share"></i>
		    <span>PHP笔记
		       	<span class="float-right menu-arrow">
		       	<i class="mdi mdi-chevron-right"></i>
		       	</span>
		    </span>
	    </a>
	</li>
	</ul>
</div>
<!-- Sidebar -->
<div class="clearfix"></div>
</div>
<!-- Sidebar -left -->
</div>
<!-- Left Sidebar End -->
<!-- Start right Content here -->
<div class="content-page">
	<div class="content">
		<div class="container-fluid">
			<div class="page-title-box">
				<div class="row align-items-center">
					<div class="col-sm-6">
						<h1 class="page-title">Apache 配置用法解析</h1>
					</div>
				</div>
				<!-- end row -->
			</div>
			<!-- end page-title -->
			<!-- START ROW -->
			<div class="panel panel-forbid">
				<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>内容摘要</div>
			    <div class="panel-content">
			    <span>这篇文章主要为大家详细介绍了Apache 配置用法解析，具有一定的参考价值，可以用来参考一下。<br />
<br />
对此感兴趣的朋友，看看idc笔记做的技术笔记！<br />
Apache的配置<br />
Apache的配置由httpd.co</span>                                     
		    	</div>
			    <div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>文章正文</div>
			    <div class="panel-content">
			    <span><p>这篇文章主要为大家详细介绍了Apache 配置用法解析，具有一定的参考价值，可以用来参考一下。</p>

<p>对此感兴趣的朋友，看看idc笔记做的技术笔记！</p>
<p>Apache的配置</p>
<p>Apache的配置由httpd.conf文件配置，因此下面的配置指令都是在httpd.conf文件中修改。主站点的配置(基本配置)</p>
<p></p>
<h3>(1) 基本配置:</h3>
<p></p>
<p>ServerRoot &quot;/mnt/software/apache2&quot; #你的apache软件安装的位置。其它指定的目录如果没有指定绝对路径，则目录是相对于该目录。</p>
<p>PidFile logs/httpd.pid #第一个httpd进程(所有其他进程的父进程)的进程号文件位置。</p>
<p>Listen 80 #服务器监听的端口号。</p>
<p>ServerName www.clusting.com:80 #主站点名称（网站的主机名）。ServerAdmin admin@clusting.com #管理员的邮件地址。DocumentRoot &quot;/mnt/web/clusting&quot; #主站点的网页存储位置。</p>
<p>以下是对主站点的目录进行访问控制：</p>
<p></p>
<p>代码如下:</p>
<pre>

<code>
&lt;Directory "/mnt/web/clusting"&gt; 

Options FollowSymLinks 

AllowOverride None 

Order allow,deny 

Allow from all 

&lt;/Directory&gt; 

</code></pre>
<p></p>
<p>在上面这段目录属性配置中，主要有下面的选项：</p>
<p>Options：配置在特定目录使用哪些特性，常用的值和基本含义如下：ExecCGI: 在该目录下允许执行CGI脚本。FollowSymLinks: 在该目录下允许文件系统使用符号连接。Indexes: 当用户访问该目录时，如果用户找不到DirectoryIndex指定的主页文件(例如index.html),则返回该目录下的文件列表给用户。SymLinksIfOwnerMatch: 当使用符号连接时，只有当符号连接的文件拥有者与实际文件的拥有者相同时才可以访问。</p>
<p>其它可用值和含义请参阅：http://www.clusting.com/Apache/ApacheManual/mod/core.html#options</p>
<p>AllowOverride：允许存在于.htaccess文件中的指令类型(.htaccess文件名是可以改变的，其文件名由AccessFileName指令决定)：None: 当AllowOverride被设置为None时。不搜索该目录下的.htaccess文件（可以减小服务器开销）。</p>
<p>All: 在.htaccess文件中可以使用所有的指令。</p>
<p>其他的可用值及含义(如：Options FileInfo AuthConfig Limit等)，请参看： http://www.clusting.com/Apache/ApacheManual/mod/core.html#AllowOverride</p>
<p>Order：控制在访问时Allow和Deny两个访问规则哪个优先：</p>
<p>Allow：允许访问的主机列表(可用域名或子网，例如：Allow from 192.168.0.0/16)。</p>
<p>Deny：拒绝访问的主机列表。</p>
<p>更详细的用法可参看：http://www.clusting.com/Apache/ApacheManual/mod/mod_access.html#order</p>
<p>DirectoryIndex index.html index.htm index.php #主页文件的设置（本例将主页文件设置为：index.html,index.htm和index.php）</p>
<p><strong>(2) 服务器的优化 (MPM: Multi-Processing Modules)apache2主要的优势就是对多处理器的支持更好，在编译时同过使用--with-mpm选项来决定apache2的工作模式。如果知道当前的apache2使用什么工作机制，可以通过httpd -l命令列出apache的所有模块，就可以知道其工作方式：</strong></p>
<p><strong>prefork：如果httpd -l列出prefork.c，则需要对下面的段进行配置：</strong></p>
<p><strong>&lt;IfModule prefork.c&gt;StartServers 5 #启动apache时启动的httpd进程个数。MinSpareServers 5 #服务器保持的最小空闲进程数。MaxSpareServers 10 #服务器保持的最大空闲进程数。MaxClients 150 #最大并发连接数。MaxRequestsPerChild 1000 #每个子进程被请求服务多少次后被kill掉。0表示不限制，推荐设置为1000。&lt;/IfModule&gt;</strong></p>
<p><strong>在该工作模式下，服务器启动后起动5个httpd进程(加父进程共6个，通过ps -ax|grep httpd命令可以看到)。当有用户连接时，apache会使用一个空闲进程为该连接服务，同时父进程会fork一个子进程。直到内存中的空闲进程达到MaxSpareServers。该模式是为了兼容一些旧版本的程序。我缺省编译时的选项。</strong></p>
<p><strong>worker：如果httpd -l列出worker.c，则需要对下面的段进行配置：</strong></p>
<p><strong>&lt;IfModule worker.c&gt;StartServers 2 #启动apache时启动的httpd进程个数。MaxClients 150 #最大并发连接数。MinSpareThreads 25 #服务器保持的最小空闲线程数。MaxSpareThreads 75 #服务器保持的最大空闲线程数。ThreadsPerChild 25 #每个子进程的产生的线程数。MaxRequestsPerChild 0 #每个子进程被请求服务多少次后被kill掉。0表示不限制，推荐设置为1000。&lt;/IfModule&gt;</strong></p>
<p><strong>该模式是由线程来监听客户的连接。当有新客户连接时，由其中的一个空闲线程接受连接。服务器在启动时启动两个进程，每个进程产生的线程数是固定的(ThreadsPerChild决定)，因此启动时有50个线程。当50个线程不够用时，服务器自动fork一个进程，再产生25个线程。</strong></p>
<p><strong>perchild：如果httpd -l列出perchild.c，则需要对下面的段进行配置：</strong></p>
<p><strong>&lt;IfModule perchild.c&gt;NumServers 5 #服务器启动时启动的子进程数StartThreads 5 #每个子进程启动时启动的线程数MinSpareThreads 5 #内存中的最小空闲线程数MaxSpareThreads 10 #最大空闲线程数MaxThreadsPerChild 2000 #每个线程最多被请求多少次后退出。0不受限制。MaxRequestsPerChild 10000 #每个子进程服务多少次后被重新fork。0表示不受限制。&lt;/IfModule&gt;</strong></p>
<p><strong>该模式下，子进程的数量是固定的，线程数不受限制。当客户端连接到服务器时，又空闲的线程提供服务。 如果空闲线程数不够，子进程自动产生线程来为新的连接服务。该模式用于多站点服务器。<strong>(3) HTTP返头回信息配置: </strong></strong></p>
<p><strong><strong>ServerTokens Prod #该参数设置http头部返回的apache版本信息，可用的值和含义如下：</strong></strong></p>
<p><strong><strong>Prod：仅软件名称，例如：apacheMajor：包括主版本号，例如：apache/2Minor：包括次版本号，例如：apache/2.0Min：仅apache的完整版本号，例如：apache/2.0.54OS：包括操作系统类型，例如：apache/2.0.54（Unix）Full：包括apache支持的模块及模块版本号，例如：Apache/2.0.54 (Unix) mod_ssl/2.0.54 OpenSSL/0.9.7gServerSignature Off #在页面产生错误时是否出现服务器版本信息。推荐设置为Off</strong></strong></p>
<p><strong><strong><strong>(4) 持久性连接设置 </strong></strong></strong></p>
<p><strong><strong><strong>KeepAlive On #开启持久性连接功能。即当客户端连接到服务器，下载完数据后仍然保持连接状态。</strong></strong></strong></p>
<p><strong><strong><strong>MaxKeepAliveRequests 100 #一个连接服务的最多请求次数。</strong></strong></strong></p>
<p><strong><strong><strong>KeepAliveTimeout 30 #持续连接多长时间，该连接没有再请求数据，则断开该连接。缺省为15秒。</strong></strong></strong></p>
<p><strong><strong><strong>别名设置对于不在DocumentRoot指定的目录内的页面，既可以使用符号连接，也可以使用别名。别名的设置如下：</strong></strong></strong></p>
<p><strong><strong><strong>Alias /download/ &quot;/var/www/download/&quot; #访问时可以输入:http://www.custing.com/download/</strong></strong></strong></p>
<p></p>
<p><strong><strong><strong>代码如下:</strong></strong></strong></p>
<pre>
<strong><strong><strong>

<code>
&lt;Directory &quot;/var/www/download&quot;&gt; #对该目录进行访问控制设置 

Options Indexes MultiViews 

AllowOverride AuthConfig 

Order allow,deny 

Allow from all 

&lt;/Directory&gt; 

</code></strong></strong></strong></pre>
<p></p>
<p></p>
<h3><strong><strong><strong>CGI设置 </strong></strong></strong></h3>
<p></p>
<p><strong><strong><strong>ScriptAlias /cgi-bin/ &quot;/mnt/software/apache2/cgi-bin/&quot; # 访问时可以：http://www.clusting.com/cgi-bin/ 。但是该目录下的CGI脚本文件要加可执行权限！</strong></strong></strong></p>
<p><strong><strong><strong>&lt;Directory &quot;/usr/local/apache2/cgi-bin&quot;&gt; #设置目录属性AllowOverride NoneOptions NoneOrder allow,denyAllow from all&lt;/Directory&gt;</strong></strong></strong></p>
<p><strong><strong><strong><strong>个人主页的设置 (public_html) </strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>UserDir public_html (间用户的主页存储在用户主目录下的public_html目录下 URL http://www.clusting.com/~bearzhang/file.html 将读取 /home/bearzhang/public_html/file.html 文件)chmod 755 /home/bearzhang #使其它用户能够读取该文件。UserDir /var/html (the URL http://www.clusting.com/~bearzhang/file.html 将读取 /var/html/bearzhang/file.html)UserDir /var/www/*/docs (the URL http://www.clusting.com/~bearzhang/file.html 将读取 /var/www/bearzhang/docs/file.html)</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>日志的设置</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>(1)错误日志的设置ErrorLog logs/error_log #日志的保存位置LogLevel warn #日志的级别</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>显示的格式日下：[Mon Oct 10 15:54:29 2005] [error] [client 192.168.10.22] access to /download/ failed, reason: user admin not allowed access</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>(2)访问日志设置</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>日志的缺省格式有如下几种：LogFormat &quot;%h %l %u %t &quot;%r&quot; %&gt;s %b &quot;%{Referer}i&quot; &quot;%{User-Agent}i&quot;&quot; combinedLogFormat &quot;%h %l %u %t &quot;%r&quot; %&gt;s %b&quot; common #common为日志格式名称LogFormat &quot;%{Referer}i -&gt; %U&quot; refererLogFormat &quot;%{User-agent}i&quot; agentCustomLog logs/access_log common</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>格式中的各个参数如下：</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>%h --客户端的ip地址或主机名%l --The 这是由客户端 identd 判断的RFC 1413身份，输出中的符号 &quot;-&quot; 表示此处信息无效。%u --由HTTP认证系统得到的访问该网页的客户名。有认证时才有效，输出中的符号 &quot;-&quot; 表示此处信息无效。%t --服务器完成对请求的处理时的时间。&quot;%r&quot; --引号中是客户发出的包含了许多有用信息的请求内容。%&gt;s --这个是服务器返回给客户端的状态码。%b --最后这项是返回给客户端的不包括响应头的字节数。&quot;%{Referer}i&quot; --此项指明了该请求是从被哪个网页提交过来的。&quot;%{User-Agent}i&quot; --此项是客户浏览器提供的浏览器识别信息。</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>下面是一段访问日志的实例：192.168.10.22 - bearzhang [10/Oct/2005:16:53:06 +0800] &quot;GET /download/ HTTP/1.1&quot; 200 1228192.168.10.22 - - [10/Oct/2005:16:53:06 +0800] &quot;GET /icons/blank.gif HTTP/1.1&quot; 304 -192.168.10.22 - - [10/Oct/2005:16:53:06 +0800] &quot;GET /icons/back.gif HTTP/1.1&quot; 304 -</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>各参数的详细解释，请参阅：http://www.clusting.com/Apache/ApacheManual/logs.html</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>用户认证的配置(1)in the httpd.conf:AccessFileName .htaccess.........Alias /download/ &quot;/var/www/download/&quot;&lt;Directory &quot;/var/www/download&quot;&gt;Options IndexesAllowOverride AuthConfig&lt;/Directory&gt;(2) create a password file:/usr/local/apache2/bin/htpasswd -c /var/httpuser/passwords bearzhang</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>(3)onfigure the server to request a password and tell the server which users are allowed access.vi /var/www/download/.htaccess:AuthType BasicAuthName &quot;Restricted Files&quot;AuthUserFile /var/httpuser/passwordsRequire user bearzhang#Require valid-user #all valid user</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>虚拟主机的配置(1)基于IP地址的虚拟主机配置Listen 80&lt;VirtualHost 172.20.30.40&gt;DocumentRoot /www/example1ServerName www.example1.com&lt;/VirtualHost&gt;&lt;VirtualHost 172.20.30.50&gt;DocumentRoot /www/example2ServerName www.example2.org&lt;/VirtualHost&gt;</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>(2) 基于IP和多端口的虚拟主机配置Listen 172.20.30.40:80Listen 172.20.30.40:8080Listen 172.20.30.50:80Listen 172.20.30.50:8080</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>&lt;VirtualHost 172.20.30.40:80&gt;DocumentRoot /www/example1-80ServerName www.example1.com&lt;/VirtualHost&gt;</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>&lt;VirtualHost 172.20.30.40:8080&gt;DocumentRoot /www/example1-8080ServerName www.example1.com&lt;/VirtualHost&gt;</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>&lt;VirtualHost 172.20.30.50:80&gt;DocumentRoot /www/example2-80ServerName www.example1.org&lt;/VirtualHost&gt;</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>&lt;VirtualHost 172.20.30.50:8080&gt;DocumentRoot /www/example2-8080ServerName www.example2.org&lt;/VirtualHost&gt;</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>(3)单个IP地址的服务器上基于域名的虚拟主机配置：# Ensure that Apache listens on port 80Listen 80</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong># Listen for virtual host requests on all IP addressesNameVirtualHost *:80</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>&lt;VirtualHost *:80&gt;DocumentRoot /www/example1ServerName www.example1.comServerAlias example1.com. *.example1.com# Other directives here&lt;/VirtualHost&gt;</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>&lt;VirtualHost *:80&gt;DocumentRoot /www/example2ServerName www.example2.org# Other directives here&lt;/VirtualHost&gt;</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>(4)在多个IP地址的服务器上配置基于域名的虚拟主机：Listen 80</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong># This is the &quot;main&quot; server running on 172.20.30.40ServerName server.domain.comDocumentRoot /www/mainserver</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong># This is the other addressNameVirtualHost 172.20.30.50</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>&lt;VirtualHost 172.20.30.50&gt;DocumentRoot /www/example1ServerName www.example1.com# Other directives here ...&lt;/VirtualHost&gt;</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>&lt;VirtualHost 172.20.30.50&gt;DocumentRoot /www/example2ServerName www.example2.org# Other directives here ...&lt;/VirtualHost&gt;</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>(5)在不同的端口上运行不同的站点(基于多端口的服务器上配置基于域名的虚拟主机)：Listen 80Listen 8080</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>NameVirtualHost 172.20.30.40:80NameVirtualHost 172.20.30.40:8080</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>&lt;VirtualHost 172.20.30.40:80&gt;ServerName www.example1.comDocumentRoot /www/domain-80&lt;/VirtualHost&gt;</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>&lt;VirtualHost 172.20.30.40:8080&gt;ServerName www.example1.comDocumentRoot /www/domain-8080&lt;/VirtualHost&gt;</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>&lt;VirtualHost 172.20.30.40:80&gt;ServerName www.example2.orgDocumentRoot /www/otherdomain-80&lt;/VirtualHost&gt;</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>&lt;VirtualHost 172.20.30.40:8080&gt;ServerName www.example2.orgDocumentRoot /www/otherdomain-8080&lt;/VirtualHost&gt;</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>(6)基于域名和基于IP的混合虚拟主机的配置:Listen 80</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>NameVirtualHost 172.20.30.40</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>&lt;VirtualHost 172.20.30.40&gt;DocumentRoot /www/example1ServerName www.example1.com&lt;/VirtualHost&gt;</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>&lt;VirtualHost 172.20.30.40&gt;DocumentRoot /www/example2ServerName www.example2.org&lt;/VirtualHost&gt;</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>&lt;VirtualHost 172.20.30.40&gt;DocumentRoot /www/example3ServerName www.example3.net&lt;/VirtualHost&gt;</strong></strong></strong></strong></p>
<p></p>
<p><strong><strong><strong><strong>SSL加密的配置</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>首先在配置之前先来了解一些基本概念：</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>证书的概念：首先要有一个根证书，然后用根证书来签发服务器证书和客户证书，一般理解：服务器证书和客户证书是平级关系。SSL必须安装服务器证书来认证。 因此：在此环境中，至少必须有三个证书：根证书，服务器证书，客户端证书。 在生成证书之前，一般会有一个私钥，同时用私钥生成证书请求，再利用证书服务器的根证来签发证书。</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>SSL所使用的证书可以自己生成，也可以通过一个商业性CA（如Verisign 或 Thawte）签署证书。</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>签发证书的问题：如果使用的是商业证书，具体的签署方法请查看相关销售商的说明；如果是知己签发的证书，可以使用openssl自带的CA.sh脚本工具。</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>如果不为单独的客户端签发证书，客户端证书可以不用生成，客户端与服务器端使用相同的证书。(1) conf/ssl.conf 配置文件中的主要参数配置如下：</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>Listen 443SSLPassPhraseDialog buildin#SSLPassPhraseDialog exec:/path/to/programSSLSessionCache dbm:/usr/local/apache2/logs/ssl_scacheSSLSessionCacheTimeout 300SSLMutex file:/usr/local/apache2/logs/ssl_mutex</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>&lt;VirtualHost _default_:443&gt;</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong># General setup for the virtual hostDocumentRoot &quot;/usr/local/apache2/htdocs&quot;ServerName www.example.com:443ServerAdmin you@example.comErrorLog /usr/local/apache2/logs/error_logTransferLog /usr/local/apache2/logs/access_log</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>SSLEngine onSSLCipherSuite ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP:+eNULL</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>SSLCertificateFile /usr/local/apache2/conf/ssl.crt/server.crtSSLCertificateKeyFile /usr/local/apache2/conf/ssl.key/server.keyCustomLog /usr/local/apache2/logs/ssl_request_log &quot;%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x &quot;%r&quot; %b&quot;</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>&lt;/VirtualHost&gt;</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>(2) 创建和使用自签署的证书：a.Create a RSA private key for your Apache server/usr/local/openssl/bin/openssl genrsa -des3 -out /usr/local/apache2/conf/ssl.key/server.key 1024</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>b. Create a Certificate Signing Request (CSR)/usr/local/openssl/bin/openssl req -new -key /usr/local/apache2/conf/ssl.key/server.key -out /usr/local/apache2/conf/ssl.key/server.csr</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>c. Create a self-signed CA Certificate (X509 structure) with the RSA key of the CA/usr/local/openssl/bin/openssl req -x509 -days 365 -key /usr/local/apache2/conf/ssl.key/server.key -in /usr/local/apache2/conf/ssl.key/server.csr -out /usr/local/apache2/conf/ssl.crt/server.crt</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>/usr/local/openssl/bin/openssl genrsa 1024 -out server.key/usr/local/openssl/bin/openssl req -new -key server.key -out server.csr/usr/local/openssl/bin/openssl req -x509 -days 365 -key server.key -in server.csr -out server.crt</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>(3) 创建自己的CA（认证证书），并使用该CA来签署服务器的证书。mkdir /CAcd /CAcp openssl-0.9.7g/apps/CA.sh /CA./CA.sh -newcaopenssl genrsa -des3 -out server.key 1024openssl req -new -key server.key -out server.csrcp server.csr newreq.pem./CA.sh -signcp newcert.pem /usr/local/apache2/conf/ssl.crt/server.crtcp server.key /usr/local/apache2/conf/ssl.key/</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>gzip配置：</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>LoadModule deflate_module modules/mod_deflate.so</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>SetOutputFilter DEFLATEAddOutputFilterByType DEFLATE text/html text/css text/plain text/xml application/x-javascript</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>访问控制：</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong> Order deny,allow Deny from all Allow from 192.168.0.0/8</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>流量控制：&lt;Location /a&gt; Bandwidth all 51200 MaxConnection all 30 BandWidthError 510&lt;/Location&gt;</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>设置proxy，将请求转发：</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong> ProxyRequests Off ProxyPass /a/ http://bwl.com/a/ ProxyPassReverse /a/ http://bwl.com/a/</strong></strong></strong></strong></p>
<p><strong><strong><strong><strong>VirtualHost配置实例：&lt;VirtualHost *&gt; ServerName a.bwl.com ServerAlias b.bwl.com DocumentRoot &quot;/search/a&quot; DirectoryIndex abc.html&lt;/VirtualHost&gt;</strong></strong></strong></strong></p>

<p>注：关于Apache 配置用法解析的内容就先介绍到这里，更多相关文章的可以留意</span>                                     
		    	</div>
		    	<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>代码注释</div>
			    <div class="panel-content">
			    <span></span>                                     
		    	</div>

			</div>

			<!-- END ROW -->
			<div class="newsPage">
				<div class="newsPageTurn">
				    <span><a>上一篇</a><a href='/php/biji/111335.html'>php addslashes和MySQL_real_escape_string的解决办法</a><a>下一篇</a><a href='/php/biji/111354.html'>MySQL From_unixtime及UNIX_TIMESTAMP及DATE_FORMAT日期函数示例</a></span>
				</div>
			</div>
		</div>


<div id="author-box">
    <h3>作者：喵哥笔记</h3>
        <div class="author-info">
            <div class="author-avatar">
                <img src="/skin1/picture/01.jpg" alt="IDC笔记" class="avatar" width="64" height="64">
            </div>
        <div class="author-description">
            <p>学的不仅是技术，更是梦想！</p>
            <ul class="author-social follows nb">
            	<li>
                    <a target="_blank" href="/" title="IDC笔记">IDC笔记</a>
                </li>
            </ul>
        </div>
        <div class="clear"></div>
    </div>
</div>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
<!-- container-fluid -->
	</div>
<!-- content -->
	<footer class="footer">
	© 2020 IDC笔记 <i class="mdi mdi-heart text-danger"></i>. | 备案号：<a href="https://beian.miit.gov.cn/">辽ICP备18000516号</a>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?674585fbbd2294d3faf910f668ea91b4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

	</footer>
</div>

</div>
<!-- END wrapper -->
<!-- jQuery  -->
<script src="/skin1/js/jquery.min.js"></script>
<script src="/skin1/js/bootstrap.bundle.min.js"></script>
<script src="/skin1/js/metismenu.min.js"></script>
<script src="/skin1/js/jquery.slimscroll.js"></script>
<script src="/skin1/js/waves.min.js"></script>
<!--Morris Chart-->
<script src="/skin1/js/morris.min.js"></script>
<script src="/skin1/js/raphael.min.js"></script>
<script src="/skin1/js/dashboard.init.js"></script>
<script src="/skin1/js/app.js"></script>
<script src="/foot.js"></script>
</body>
</html>