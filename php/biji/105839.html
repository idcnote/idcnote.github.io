<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title>ASP.NET中Cookie的使用方法_PHP教程_IDC笔记</title>
    <meta name="keywords" content="PHP,PHP笔记,PHP教程" />
    <meta name="description" content="Cookie 为 Web 应用程序保存用户相关信息提供了一种有用的方法。例如，当用户访问站点时，可以利用 Cookie 保存用户首选项或其他信息，这样，当用户下次再访问站点时，应用程序就可以" />
    <meta content="Responsive admin theme build on top of Bootstrap 4" name="description" />
    <meta content="idcnote.com" name="author" />
    <link rel="shortcut icon" href="/skin1/images/favicon.ico">
    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="/skin1/css/morris.css">
    <link href="/skin1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/metismenu.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/icons.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/style.css" rel="stylesheet" type="text/css">
<link href="/SyntaxHighlighter/shCoreDefault.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/SyntaxHighlighter/shCore.js"></script>
<script type="text/javascript">
 SyntaxHighlighter.all();
</script>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
</head>
<body>
<!-- Begin page -->
		<div id="wrapper">
			<!-- Top Bar Start -->
			<div class="topbar">
				<!-- LOGO -->
				<div class="topbar-left">
					<a href="/" class="logo">
						<span class="logo-light">
                            <i class="mdi mdi-camera-control"></i>IDC笔记
                        </span>
						<span class="logo-sm">
                            <i class="mdi mdi-camera-control"></i>
                        </span>
					</a>
				</div>
				<nav class="navbar-custom">
					<ul class="navbar-right list-inline float-right mb-0">
						<!--<li class="dropdown notification-list list-inline-item d-none d-md-inline-block">
							<a class="nav-link waves-effect" href="#" id="btn-fullscreen">
								<i class="mdi mdi-arrow-expand-all noti-icon"></i>
							</a>
						</li>
						<li class="dropdown notification-list list-inline-item">
							<div class="dropdown notification-list nav-pro-img">
								<a class="dropdown-toggle nav-link arrow-none nav-user" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
									<img src="/skin1/picture/user-4.jpg" alt="user" class="rounded-circle">
								</a>
								<div class="dropdown-menu dropdown-menu-right profile-dropdown ">
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-account-circle"></i> Profile</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-wallet"></i> Wallet</a>
									<a class="dropdown-item d-block" href="#">
										<span class="badge badge-success float-right">11</span>
										<i class="mdi mdi-settings"></i> Settings</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-lock-open-outline"></i> Lock screen</a>
									<div class="dropdown-divider"></div>
									<a class="dropdown-item text-danger" href="#">
										<i class="mdi mdi-power text-danger"></i> Logout</a>
								</div>
							</div>
						</li>
						-->
					</ul>
					<ul class="list-inline menu-left mb-0">
						<li class="float-left">
							<button class="button-menu-mobile open-left waves-effect">
                            <i class="mdi mdi-menu"></i>
                        </button>
						</li>
						<li class="d-none d-md-inline-block">
							<form role="search" class="app-search">
								<div class="form-group mb-0">
									<input type="text" class="form-control" placeholder="Search..">
									<button type="submit"><i class="fa fa-search"></i></button>
								</div>
							</form>
						</li>
					</ul>
				</nav>
			</div>
<!-- ========== Left Sidebar Start ========== -->
<div class="left side-menu">
    <div class="slimscroll-menu" id="remove-scroll">
    <!--- Sidemenu -->
    <div id="sidebar-menu">
    <!-- Left Menu Start -->
    <ul class="metismenu" id="side-menu">
			<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP简介			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jianjie/1.html">PHP简介</a></li><li><a href="/php/jianjie/2.html">PHP用途</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP基本语法			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yufa/3.html">分离HTML</a></li><li><a href="/php/yufa/4.html">指令分隔符</a></li><li><a href="/php/yufa/5.html">PHP注释</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类型			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpleixing/6.html">PHP类型简介</a></li><li><a href="/php/phpleixing/7.html">PHP类型之布尔类型</a></li><li><a href="/php/phpleixing/8.html">PHP类型之整型</a></li><li><a href="/php/phpleixing/9.html">PHP类型之浮点型</a></li><li><a href="/php/phpleixing/10.html">PHP类型之字符串</a></li><li><a href="/php/phpleixing/11.html">PHP类型之数组</a></li><li><a href="/php/phpleixing/12.html">PHP类型之对象</a></li><li><a href="/php/phpleixing/13.html">PHP类型之资源类型</a></li><li><a href="/php/phpleixing/14.html">PHP类型之NULL</a></li><li><a href="/php/phpleixing/15.html">PHP类型之伪类型</a></li><li><a href="/php/phpleixing/16.html">PHP类型之类型判别</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP变量			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbianliang/17.html">PHP变量之基础</a></li><li><a href="/php/phpbianliang/18.html">PHP变量之预定义变量</a></li><li><a href="/php/phpbianliang/19.html">PHP变量之变量范围</a></li><li><a href="/php/phpbianliang/20.html">PHP变量之可变变量</a></li><li><a href="/php/phpbianliang/21.html">PHP变量之外部变量</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP运算符			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yunsuanfu/22.html">PHP运算符优先级</a></li><li><a href="/php/yunsuanfu/23.html">算术运算符</a></li><li><a href="/php/yunsuanfu/24.html">赋值运算符</a></li><li><a href="/php/yunsuanfu/25.html">位运算符</a></li><li><a href="/php/yunsuanfu/26.html">比较运算符</a></li><li><a href="/php/yunsuanfu/27.html">错误控制运算符</a></li><li><a href="/php/yunsuanfu/28.html">执行运算符</a></li><li><a href="/php/yunsuanfu/29.html">递增/递减运算符</a></li><li><a href="/php/yunsuanfu/30.html">逻辑运算符</a></li><li><a href="/php/yunsuanfu/31.html">字符串运算符</a></li><li><a href="/php/yunsuanfu/32.html">数组运算符</a></li><li><a href="/php/yunsuanfu/33.html">类型运算符</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP控制结构			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jiegou/34.html">PHP控制结构之if</a></li><li><a href="/php/jiegou/35.html">PHP控制结构之else</a></li><li><a href="/php/jiegou/36.html">PHP控制结构之elseif/else if</a></li><li><a href="/php/jiegou/37.html">PHP控制结构之替代语法</a></li><li><a href="/php/jiegou/38.html">PHP控制结构之while</a></li><li><a href="/php/jiegou/39.html">PHP控制结构之do-while</a></li><li><a href="/php/jiegou/40.html">PHP控制结构之for</a></li><li><a href="/php/jiegou/41.html">PHP控制结构之foreach</a></li><li><a href="/php/jiegou/42.html">PHP控制结构之break</a></li><li><a href="/php/jiegou/43.html">PHP控制结构之continue</a></li><li><a href="/php/jiegou/44.html">PHP控制结构之switch</a></li><li><a href="/php/jiegou/45.html">PHP控制结构之declare</a></li><li><a href="/php/jiegou/46.html">PHP控制结构之return</a></li><li><a href="/php/jiegou/47.html">PHP控制结构之require</a></li><li><a href="/php/jiegou/48.html">PHP控制结构之include</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/hanshu/52.html">用户自定义函数</a></li><li><a href="/php/hanshu/53.html">函数的参数</a></li><li><a href="/php/hanshu/54.html">返回值</a></li><li><a href="/php/hanshu/55.html">可变函数</a></li><li><a href="/php/hanshu/56.html">内部（内置）函数</a></li><li><a href="/php/hanshu/57.html">匿名函数</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类与对象			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpduixiang/58.html">类与对象前言</a></li><li><a href="/php/phpduixiang/59.html">基本概念</a></li><li><a href="/php/phpduixiang/60.html">属性</a></li><li><a href="/php/phpduixiang/61.html">类常量</a></li><li><a href="/php/phpduixiang/62.html">自动加载对象</a></li><li><a href="/php/phpduixiang/63.html">构造函数和析构函数</a></li><li><a href="/php/phpduixiang/64.html">访问控制</a></li><li><a href="/php/phpduixiang/65.html">对象继承</a></li><li><a href="/php/phpduixiang/66.html">Static关键字</a></li><li><a href="/php/phpduixiang/67.html">抽象类</a></li><li><a href="/php/phpduixiang/68.html">接口</a></li><li><a href="/php/phpduixiang/69.html">Traits</a></li><li><a href="/php/phpduixiang/70.html">重载</a></li><li><a href="/php/phpduixiang/71.html">对象迭代</a></li><li><a href="/php/phpduixiang/72.html">设计模式</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP异常处理			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yichang/81.html">异常处理</a></li><li><a href="/php/yichang/82.html">扩展PHP内置的异常处理类</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数库按分类			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpku/83.html">数组</a></li><li><a href="/php/phpku/84.html">Classes/Objects</a></li><li><a href="/php/phpku/85.html">Date/Time</a></li><li><a href="/php/phpku/86.html">Directories</a></li><li><a href="/php/phpku/87.html">错误处理</a></li><li><a href="/php/phpku/88.html">Program execution</a></li><li><a href="/php/phpku/89.html">Filesystem</a></li><li><a href="/php/phpku/90.html">Filter</a></li><li><a href="/php/phpku/91.html">Function Handling</a></li><li><a href="/php/phpku/92.html">PHP 选项/信息</a></li><li><a href="/php/phpku/93.html">Mail</a></li><li><a href="/php/phpku/94.html">Math</a></li><li><a href="/php/phpku/95.html">Misc.</a></li><li><a href="/php/phpku/96.html">Network</a></li><li><a href="/php/phpku/97.html">输出控制</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> php基础			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbiji/108377.html"></a></li><li><a href="/php/phpbiji/108376.html"></a></li><li><a href="/php/phpbiji/108380.html"></a></li><li><a href="/php/phpbiji/108379.html"></a></li><li><a href="/php/phpbiji/108378.html"></a></li><li><a href="/php/phpbiji/108381.html"></a></li><li><a href="/php/phpbiji/108382.html"></a></li><li><a href="/php/phpbiji/108384.html"></a></li><li><a href="/php/phpbiji/108383.html"></a></li><li><a href="/php/phpbiji/108385.html"></a></li><li><a href="/php/phpbiji/108386.html"></a></li><li><a href="/php/phpbiji/108388.html"></a></li><li><a href="/php/phpbiji/108387.html"></a></li><li><a href="/php/phpbiji/108389.html"></a></li><li><a href="/php/phpbiji/108391.html"></a></li>		</ul>
	</li>
		<li>
	    <a href="/php/biji/" class="waves-effect">
		    <i class="icon-share"></i>
		    <span>PHP笔记
		       	<span class="float-right menu-arrow">
		       	<i class="mdi mdi-chevron-right"></i>
		       	</span>
		    </span>
	    </a>
	</li>
	</ul>
</div>
<!-- Sidebar -->
<div class="clearfix"></div>
</div>
<!-- Sidebar -left -->
</div>
<!-- Left Sidebar End -->
<!-- Start right Content here -->
<div class="content-page">
	<div class="content">
		<div class="container-fluid">
			<div class="page-title-box">
				<div class="row align-items-center">
					<div class="col-sm-6">
						<h1 class="page-title">ASP.NET中Cookie的使用方法</h1>
					</div>
				</div>
				<!-- end row -->
			</div>
			<!-- end page-title -->
			<!-- START ROW -->
			<div class="panel panel-forbid">
				<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>内容摘要</div>
			    <div class="panel-content">
			    <span>Cookie 为 Web 应用程序保存用户相关信息提供了一种有用的方法。例如，当用户访问站点时，可以利用 Cookie 保存用户首选项或其他信息，这样，当用户下次再访问站点时，应用程序就可以</span>                                     
		    	</div>
			    <div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>文章正文</div>
			    <div class="panel-content">
			    <span><p>Cookie 为 Web 应用程序保存用户相关信息提供了一种有用的方法。例如，当用户访问站点时，可以利用 Cookie 保存用户首选项或其他信息，这样，当用户下次再访问站点时，应用程序就可以检索以前保存的信息。</p>
<p>从技术上讲，Cookie是小段保存在客户端的数据（如果你安装的是XP，可以看一下&lt;安装Windows的盘&gt;:\Documents and Settings\&lt;用户名&gt;\Cookies文件夹）。用户访问网站的时候，网站会给用户一个包含过期时间的Cookie，浏览器收到Cookie后就存放在客户端的文件夹下。以后用户每次访问网站页面的时候，浏览器会根据网站的URL在本地Cookie文件夹内查找是否存在当前网站关联的Cookie，如果有的话就连同页面请求一起发送到服务器。</p>
<p><strong>一、关于Cookie的知识还需要了解以下几点。</strong></p>
<p>·Cookie只是一段字符串，并不能执行。<br />
·大多数浏览器规定Cookie大小不超过4K，每个站点能保存的Cookie不超过20个，所有站点保存的Cookie总和不超过300个。<br />
·除了Cookie外，几乎没有其他的方法在客户端的机器上写入数据（就连Cookie的写入操作也是浏览器进行的）。当然，连Cookie都可以通过浏览器安全配置来禁止。如果你使用IE浏览器，可以看一下“工具”→“Internet”选项→“隐私”一页。现在的大多数网站都利用Cookie来保存一些数据（比如你的ID），以便你下一次访问网站时能直接“继续”以前的配置，所以我还是建议你不要轻易关闭Cookie。</p>
<p>在使用Cookie时，必须意识到其固有的安全弱点。Cookie毕竟是存放于客户端的。因此，不要在Cookie中保存保密信息，如用户名、密码、信用卡号等。在Cookie中不要保存不应该由用户掌握的内容，也不要保存可能被其他窃取Cookie的人控制的内容。</p>
<p><strong>二、Cookie的使用</strong></p>
<p>下面，我们就来讨论如何保存、读取、删除和修改Cookie。首先在页面上添加4个按钮用来完成这4个操作。</p>
<p><div class="codetitle"><span><a style="CURSOR: pointer" data="50150" class="copybut" id="copybut50150" onclick="doCopy('code50150')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code50150"><br />
&lt;asp:Button ID="btn_SaveCookie" runat="server" OnClick="btn_SaveCookie_Click" Text="保存Cookie" /&gt;<br />
&lt;asp:Button ID="btn_ReadCookie" runat="server" Text="读取Cookie" OnClick="btn_ReadCookie_Click" /&gt;<br />
&lt;asp:Button ID="btn_ModifyCookie" runat="server" OnClick="btn_ModifyCookie_Click" Text="修改Cookie" /&gt;<br />
&lt;asp:Button ID="btn_DelCookie" runat="server" Text="删除Cookie" OnClick="btn_DelCookie_Click" /&gt;<br />
</div></p>
<p>保存Cookie的方法如下。</p>
<p><div class="codetitle"><span><a style="CURSOR: pointer" data="41864" class="copybut" id="copybut41864" onclick="doCopy('code41864')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code41864"><br />
protected void btn_SaveCookie_Click(object sender, EventArgs e)<br />
{<br />
&nbsp;&nbsp;&nbsp; HttpCookie SingleValueCookie = new HttpCookie("test1", "单值Cookie");<br />
&nbsp;&nbsp;&nbsp; SingleValueCookie.Expires = DateTime.Now.AddDays(1);<br />
&nbsp;&nbsp;&nbsp; Response.Cookies.Add(SingleValueCookie);<br />
&nbsp;&nbsp;&nbsp; HttpCookie MultiValueCookie = new HttpCookie("test2");<br />
&nbsp;&nbsp;&nbsp; MultiValueCookie.Values.Add("key1", "value1");<br />
&nbsp;&nbsp;&nbsp; MultiValueCookie.Values.Add("key2", "value2");<br />
&nbsp;&nbsp;&nbsp; MultiValueCookie.Expires = DateTime.Now.AddDays(1);<br />
&nbsp;&nbsp;&nbsp; Response.Cookies.Add(MultiValueCookie);<br />
}<br />
</div></p>
<p>我们可以看到，一个Cookie中允许保存单个值也可以保存多个值。HttpCookie类型表示一个Cookie，Expires属性用于修改Cookie的过期时间。对于单值Cookie，既可以直接在构造方法中指定值也可以使用Value属性指定值。对于多值Cookie，既可以使用Values属性的Add方法添加子键和值，也可以直接使用Values属性的索引设置子键和值。上面这段代码等价于下面这段代码。</p>
<p><div class="codetitle"><span><a style="CURSOR: pointer" data="19838" class="copybut" id="copybut19838" onclick="doCopy('code19838')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code19838"><br />
protected void btn_SaveCookie_Click(object sender, EventArgs e)<br />
{<br />
&nbsp;&nbsp;&nbsp; HttpCookie SingleValueCookie = new HttpCookie("test1");<br />
&nbsp;&nbsp;&nbsp; SingleValueCookie.Value = "单值Cookie";<br />
&nbsp;&nbsp;&nbsp; SingleValueCookie.Expires = DateTime.Now.AddDays(1);<br />
&nbsp;&nbsp;&nbsp; Response.Cookies.Add(SingleValueCookie);<br />
&nbsp;&nbsp;&nbsp; HttpCookie MultiValueCookie = new HttpCookie("test2");<br />
&nbsp;&nbsp;&nbsp; MultiValueCookie.Values["key1"] = "value1";<br />
&nbsp;&nbsp;&nbsp; MultiValueCookie.Values["key2"] = "value2";<br />
&nbsp;&nbsp;&nbsp; MultiValueCookie.Expires = DateTime.Now.AddDays(1);<br />
&nbsp;&nbsp;&nbsp; Response.Cookies.Add(MultiValueCookie);<br />
}<br />
</div></p>
<p>在添加完值以后，务必记得使用Response对象把Cookie重新返回给浏览器。我们的服务器不能直接在客户端机器上写Cookie，而是由浏览器完成这一工作，当然用户也可以设置是否允许浏览器读写Cookie。</p>
<p>下面是读取Cookie的操作。</p>
<p><div class="codetitle"><span><a style="CURSOR: pointer" data="59359" class="copybut" id="copybut59359" onclick="doCopy('code59359')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code59359"><br />
protected void btn_ReadCookie_Click(object sender, EventArgs e)<br />
{<br />
&nbsp;&nbsp;&nbsp; HttpCookie SingleValueCookie = Request.Cookies["test1"];<br />
&nbsp;&nbsp;&nbsp; if (SingleValueCookie != null)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Response.Write(string.Format("Key:{0} Value:{1} Expires:{2}&lt;br/&gt;", "test1", SingleValueCookie.Value, SingleValueCookie.Expires));<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;<br />
&nbsp;&nbsp;&nbsp; HttpCookie MultiValueCookie = Request.Cookies["test2"];<br />
&nbsp;&nbsp;&nbsp; if (MultiValueCookie!= null)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Response.Write(string.Format("Key:{0} Value:{1}&lt;br/&gt;", "test2", MultiValueCookie.Value));<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; foreach (string subkey in MultiValueCookie.Values.AllKeys)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Response.Write(string.Format("SubKey:{0} Value:{1} Expires:{2}&lt;br/&gt;", subkey, MultiValueCookie.Values[subkey], MultiValueCookie.Expires));<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</div></p>
<p>对于多值Cookie，我们通过遍历AllKeys属性返回的字符串数组获取所有子键Key，从而获得子键的值。要注意的是，在访问Cookie以前，需要检测一下Cookie是否存在。打开页面，先单击“保存Cookie”按钮，然后单击“读取Cookie”按钮，得到以下输出：</p>
<p>Key:test1 Value:单值Cookie Expires:0001-1-1 0:00:00<br />
Key:test2 Value:key1=value1&key2=value2<br />
SubKey:key1 Value:value1 Expires:0001-1-1 0:00:00<br />
SubKey:key2 Value:value2 Expires:0001-1-1 0:00:00</p>
<p>这里要说明以下几点。</p>
<p>·我们发现，所有Cookie的过期时间都不能正常显示。这是因为浏览器返回给服务器的Cookie是不包含过期时间的，而服务器返回给浏览器的Cookie是包含过期时间的。过期时间只对客户端浏览器有意义，对服务器来说没有什么意义。</p>
<p>·直接读取多值Cookie的Value，它会把所有子键和子键值都使用key=value方法显示，多个子键使用“&”连接（类似URL的方式）。</p>
<p>下面是删除Cookie的操作。</p>
<p><div class="codetitle"><span><a style="CURSOR: pointer" data="40796" class="copybut" id="copybut40796" onclick="doCopy('code40796')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code40796"><br />
protected void btn_DelCookie_Click(object sender, EventArgs e)<br />
{<br />
&nbsp;&nbsp;&nbsp; HttpCookie SingleValueCookie = Request.Cookies["test1"];<br />
&nbsp;&nbsp;&nbsp; SingleValueCookie.Expires = DateTime.MinValue;<br />
&nbsp;&nbsp;&nbsp; Response.Cookies.Add(SingleValueCookie);<br />
}<br />
</div></p>
<p>如果你想删除所有Cookie，可以遍历删除。</p>
<p><div class="codetitle"><span><a style="CURSOR: pointer" data="23042" class="copybut" id="copybut23042" onclick="doCopy('code23042')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code23042"><br />
protected void btn_DelCookie_Click(object sender, EventArgs e)<br />
{<br />
&nbsp;&nbsp;&nbsp; foreach (string key in Request.Cookies.AllKeys)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; HttpCookie cookie = Request.Cookies[key];<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cookie.Expires = DateTime.MinValue;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Response.Cookies.Add(cookie);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</div></p>
<p>我们始终要记住，服务器不能直接删除Cookie，删除Cookie的操作是浏览器进行的。说是删除，其实是把它的过期时间设置为过去的时间，让Cookie过期。因此，对于删除操作来说有三个步骤。</p>
<p>1．从Request对象中获取Cookie。<br />
2．把Cookie的过期时间设置为过去的时间。<br />
3．把Cookie重新写回Response中。<br />
4．修改Cookie的操作也非常简单。</p>
<p><div class="codetitle"><span><a style="CURSOR: pointer" data="49746" class="copybut" id="copybut49746" onclick="doCopy('code49746')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code49746"><br />
protected void btn_ModifyCookie_Click(object sender, EventArgs e)<br />
{<br />
&nbsp;&nbsp;&nbsp; HttpCookie SingleValueCookie = Request.Cookies["test1"];<br />
&nbsp;&nbsp;&nbsp; SingleValueCookie.Value = "修改后的单值Cookie";<br />
&nbsp;&nbsp;&nbsp; Response.Cookies.Add(SingleValueCookie);<br />
}<br />
</div></p>
<p><strong>三、Cookie使用扩展</strong></p>
<p>（1）编写Cookie</p>
<p><div class="codetitle"><span><a style="CURSOR: pointer" data="69636" class="copybut" id="copybut69636" onclick="doCopy('code69636')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code69636"><br />
//方式1:<br />
Response.Cookies["username"].value="mike";<br />
Response.Cookies["username"].Expires=DateTime.MaxValue;<br />
&nbsp;<br />
//方式2:<br />
HttpCookie acookie = new HttpCookie("last");<br />
acookie.Value="a";<br />
acookie..Expires=DateTime.MaxValue;<br />
Response.Cookies.Add(acookie);<br />
</div></p>
<p>//多值Cookie的写法</p>
<p><div class="codetitle"><span><a style="CURSOR: pointer" data="36524" class="copybut" id="copybut36524" onclick="doCopy('code36524')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code36524"><br />
//方式1:<br />
Response.Cookies["userinfo1"]["name"].value="mike";<br />
Response.Cookies["userinfo1"]["last"].value="a";<br />
Response.Cookies["userinfo1"].Expires=DateTime.MaxValue;<br />
&nbsp;<br />
//方式2:<br />
HttpCookie cookie = new HttpCookie("userinfo1");<br />
cookie.Values["name"]="mike";<br />
cookie.Values["last"]="a";<br />
cookie.Expires=DateTime.MaxValue;<br />
//cookie.Expires = System.DateTime.Now.AddDays(1);//设置过期时间 1天<br />
Response.Cookies.Add(cookie);<br />
</div></p>
<p>（2）读取Cookie<br />
Internet Explorer 将站点的 Cookie 保存在文件名格式为 &lt;user&gt;@&lt;domain&gt;.txt 的文件中，其中 &lt;user&gt; 是您的帐户名。<br />
注意:在获取Cookie的值之前，应该确保该 Cookie 确实存在。否则，您将得到一个异常</p>
<p><div class="codetitle"><span><a style="CURSOR: pointer" data="35860" class="copybut" id="copybut35860" onclick="doCopy('code35860')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code35860"><br />
If (Request.Cookies["userName"]!=null)<br />
{<br />
&nbsp;&nbsp;&nbsp; string str = Request.Cookies("userName").Value;<br />
}<br />
&nbsp;<br />
//多值Cookie的读取<br />
If ( Request.Cookies["userInfo1"]!=null )<br />
{<br />
&nbsp;&nbsp;&nbsp; string name=Request.Cookies["userInfo1"]["name"];<br />
&nbsp;&nbsp;&nbsp; string last=Request.Cookies["userInfo1"]["last"];<br />
}<br />
&nbsp;<br />
//读取 Cookie 集合<br />
for(int i = 0 ;i&lt;Request.Cookies.Count ;i++)<br />
{<br />
&nbsp;&nbsp;&nbsp; HttpCookie cookies = Request.Cookies;<br />
&nbsp;&nbsp;&nbsp; Response.Write("name="+cookies.Mame+"&lt;br/&gt;");<br />
&nbsp;&nbsp;&nbsp; if (cookies.HasKeys )//是否有子键<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.Collections.Specialized.NameValueCollection NameColl<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = aCookie.Values ;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for(int j=0;j&lt;NameColl.Count;j++)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Response.Write("子键名="+ NameColl.AllKey[j] +"&lt;br/&gt;");<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Response.Write("子键值="+ NameColl[j] +"&lt;br/&gt;");<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Response.Write("value="+cookies.Value+"&lt;br/&gt;");&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</div></p>
<p>运行此代码时，可看到一个名为“ASP.NET_SessionId”的Cookie，ASP.NET用这个 Cookie 来保存您的会话的唯一标识符。</p>
<p>（3）删除 Cookie<br />
将其有效期设置为过去的某个日期。当浏览器检查 Cookie 的有效期时，就会删除这个已过期的 Cookie。</p>
<p><div class="codetitle"><span><a style="CURSOR: pointer" data="11293" class="copybut" id="copybut11293" onclick="doCopy('code11293')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code11293"><br />
HttpCookie cookie = new HttpCookie("userinfo1");<br />
cookie.Expires=DateTime.Now.AddDays(-30);<br />
Response.Cookies.Add(cookie);<br />
</div></p>
<p>（4）修改cookie<br />
<div class="codetitle"><span><a style="CURSOR: pointer" data="84994" class="copybut" id="copybut84994" onclick="doCopy('code84994')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code84994"><br />
Response.Cookies["Info"]["user"] = "2";<br />
Response.Cookies["Info"].Expires = DateTime.Now.AddDays(1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 删除cookie下的属性<br />
HttpCookie acookie=Request.Cookies["Info"];<br />
acookie.Values.Remove("userid");<br />
acookie.Expires = DateTime.Now.AddDays(1);<br />
Response.Cookies.Add(acookie);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 删除所有cookie，就是设置过期时间为现在就行了<br />
int limit=Request.Cookies.Count - 1;<br />
for(int i=0;i&lt;limit;i++)<br />
{<br />
&nbsp;&nbsp;&nbsp; acookie = Request.Cookies(i)<br />
&nbsp;&nbsp;&nbsp; acookie.Expires = DateTime.Now.AddDays(-1)<br />
&nbsp;&nbsp;&nbsp; Response.Cookies.Add(acookie)<br />
}<br />
</div></p>
<p>-------------</p>
<p>如果有主站及二级域名站且cookie要共享的话则要加入如下设置</p>
<p><div class="codetitle"><span><a style="CURSOR: pointer" data="37333" class="copybut" id="copybut37333" onclick="doCopy('code37333')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code37333"><br />
cookie.Domain = ".主域名";<br />
cookie.Path = "/";<br />
</div></p>
<p><strong>四、Cookie总结</strong></p>
<p>Cookie虽然是一个简单实用的对象，但是我们也要注意Cookie的工作原理、大小限制以及安全性等，大致可以归纳为以下几点。</p>
<p>·存储的物理位置。客户端的Cookies文件夹内。<br />
·存储的类型限制。字符串。<br />
·状态使用的范围。当前请求上下文的上下文都能访问到Cookie，Cookie对每个用户来说都是独立的。<br />
·存储的大小限制。每个Cookie不超过4K数据。每个网站不超过20个Cookie。所有网站的Cookie总和不超过300个。<br />
·生命周期。每个Cookie都有自己的过期时间，超过了过期时间后失效。<br />
·安全与性能。存储在客户端，安全性差。对于敏感数据建议加密后存储。<br />
·优点缺点与注意事项。可以很方便地关联网站和用户，长久保存用户设置。</p>
<hr></span>                                     
		    	</div>
		    	<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>代码注释</div>
			    <div class="panel-content">
			    <span></span>                                     
		    	</div>

			</div>

			<!-- END ROW -->
			<div class="newsPage">
				<div class="newsPageTurn">
				    <span><a>上一篇</a><a href='/php/biji/105838.html'>php封装的连接Mysql类及用法分析</a><a>下一篇</a><a href='/php/biji/105840.html'>thinkphp路由规则使用示例详解和伪静态功能实现(apache重写)</a></span>
				</div>
			</div>
		</div>


<div id="author-box">
    <h3>作者：喵哥笔记</h3>
        <div class="author-info">
            <div class="author-avatar">
                <img src="/skin1/picture/01.jpg" alt="IDC笔记" class="avatar" width="64" height="64">
            </div>
        <div class="author-description">
            <p>学的不仅是技术，更是梦想！</p>
            <ul class="author-social follows nb">
            	<li>
                    <a target="_blank" href="/" title="IDC笔记">IDC笔记</a>
                </li>
            </ul>
        </div>
        <div class="clear"></div>
    </div>
</div>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
<!-- container-fluid -->
	</div>
<!-- content -->
	<footer class="footer">
	© 2020 IDC笔记 <i class="mdi mdi-heart text-danger"></i>. | 备案号：<a href="https://beian.miit.gov.cn/">辽ICP备18000516号</a>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?674585fbbd2294d3faf910f668ea91b4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

	</footer>
</div>

</div>
<!-- END wrapper -->
<!-- jQuery  -->
<script src="/skin1/js/jquery.min.js"></script>
<script src="/skin1/js/bootstrap.bundle.min.js"></script>
<script src="/skin1/js/metismenu.min.js"></script>
<script src="/skin1/js/jquery.slimscroll.js"></script>
<script src="/skin1/js/waves.min.js"></script>
<!--Morris Chart-->
<script src="/skin1/js/morris.min.js"></script>
<script src="/skin1/js/raphael.min.js"></script>
<script src="/skin1/js/dashboard.init.js"></script>
<script src="/skin1/js/app.js"></script>
<script src="/foot.js"></script>
</body>
</html>