<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title>Java棋类游戏实践之中国象棋_PHP教程_IDC笔记</title>
    <meta name="keywords" content="PHP,PHP笔记,PHP教程" />
    <meta name="description" content="本文实例讲述了java实现的中国象棋游戏代码，分享给大家供大家参考，具体代码如下<br />
一、实践目的：<br />
1.鼠标点击、拖动等事件的应用与区别<br />
2.棋谱文件的保存与读取<br />
3.完善象棋的规则" />
    <meta content="Responsive admin theme build on top of Bootstrap 4" name="description" />
    <meta content="idcnote.com" name="author" />
    <link rel="shortcut icon" href="/skin1/images/favicon.ico">
    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="/skin1/css/morris.css">
    <link href="/skin1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/metismenu.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/icons.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/style.css" rel="stylesheet" type="text/css">
<link href="/SyntaxHighlighter/shCoreDefault.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/SyntaxHighlighter/shCore.js"></script>
<script type="text/javascript">
 SyntaxHighlighter.all();
</script>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
</head>
<body>
<!-- Begin page -->
		<div id="wrapper">
			<!-- Top Bar Start -->
			<div class="topbar">
				<!-- LOGO -->
				<div class="topbar-left">
					<a href="/" class="logo">
						<span class="logo-light">
                            <i class="mdi mdi-camera-control"></i>IDC笔记
                        </span>
						<span class="logo-sm">
                            <i class="mdi mdi-camera-control"></i>
                        </span>
					</a>
				</div>
				<nav class="navbar-custom">
					<ul class="navbar-right list-inline float-right mb-0">
						<!--<li class="dropdown notification-list list-inline-item d-none d-md-inline-block">
							<a class="nav-link waves-effect" href="#" id="btn-fullscreen">
								<i class="mdi mdi-arrow-expand-all noti-icon"></i>
							</a>
						</li>
						<li class="dropdown notification-list list-inline-item">
							<div class="dropdown notification-list nav-pro-img">
								<a class="dropdown-toggle nav-link arrow-none nav-user" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
									<img src="/skin1/picture/user-4.jpg" alt="user" class="rounded-circle">
								</a>
								<div class="dropdown-menu dropdown-menu-right profile-dropdown ">
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-account-circle"></i> Profile</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-wallet"></i> Wallet</a>
									<a class="dropdown-item d-block" href="#">
										<span class="badge badge-success float-right">11</span>
										<i class="mdi mdi-settings"></i> Settings</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-lock-open-outline"></i> Lock screen</a>
									<div class="dropdown-divider"></div>
									<a class="dropdown-item text-danger" href="#">
										<i class="mdi mdi-power text-danger"></i> Logout</a>
								</div>
							</div>
						</li>
						-->
					</ul>
					<ul class="list-inline menu-left mb-0">
						<li class="float-left">
							<button class="button-menu-mobile open-left waves-effect">
                            <i class="mdi mdi-menu"></i>
                        </button>
						</li>
						<li class="d-none d-md-inline-block">
							<form role="search" class="app-search">
								<div class="form-group mb-0">
									<input type="text" class="form-control" placeholder="Search..">
									<button type="submit"><i class="fa fa-search"></i></button>
								</div>
							</form>
						</li>
					</ul>
				</nav>
			</div>
<!-- ========== Left Sidebar Start ========== -->
<div class="left side-menu">
    <div class="slimscroll-menu" id="remove-scroll">
    <!--- Sidemenu -->
    <div id="sidebar-menu">
    <!-- Left Menu Start -->
    <ul class="metismenu" id="side-menu">
			<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP简介			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jianjie/1.html">PHP简介</a></li><li><a href="/php/jianjie/2.html">PHP用途</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP基本语法			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yufa/3.html">分离HTML</a></li><li><a href="/php/yufa/4.html">指令分隔符</a></li><li><a href="/php/yufa/5.html">PHP注释</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类型			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpleixing/6.html">PHP类型简介</a></li><li><a href="/php/phpleixing/7.html">PHP类型之布尔类型</a></li><li><a href="/php/phpleixing/8.html">PHP类型之整型</a></li><li><a href="/php/phpleixing/9.html">PHP类型之浮点型</a></li><li><a href="/php/phpleixing/10.html">PHP类型之字符串</a></li><li><a href="/php/phpleixing/11.html">PHP类型之数组</a></li><li><a href="/php/phpleixing/12.html">PHP类型之对象</a></li><li><a href="/php/phpleixing/13.html">PHP类型之资源类型</a></li><li><a href="/php/phpleixing/14.html">PHP类型之NULL</a></li><li><a href="/php/phpleixing/15.html">PHP类型之伪类型</a></li><li><a href="/php/phpleixing/16.html">PHP类型之类型判别</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP变量			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbianliang/17.html">PHP变量之基础</a></li><li><a href="/php/phpbianliang/18.html">PHP变量之预定义变量</a></li><li><a href="/php/phpbianliang/19.html">PHP变量之变量范围</a></li><li><a href="/php/phpbianliang/20.html">PHP变量之可变变量</a></li><li><a href="/php/phpbianliang/21.html">PHP变量之外部变量</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP运算符			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yunsuanfu/22.html">PHP运算符优先级</a></li><li><a href="/php/yunsuanfu/23.html">算术运算符</a></li><li><a href="/php/yunsuanfu/24.html">赋值运算符</a></li><li><a href="/php/yunsuanfu/25.html">位运算符</a></li><li><a href="/php/yunsuanfu/26.html">比较运算符</a></li><li><a href="/php/yunsuanfu/27.html">错误控制运算符</a></li><li><a href="/php/yunsuanfu/28.html">执行运算符</a></li><li><a href="/php/yunsuanfu/29.html">递增/递减运算符</a></li><li><a href="/php/yunsuanfu/30.html">逻辑运算符</a></li><li><a href="/php/yunsuanfu/31.html">字符串运算符</a></li><li><a href="/php/yunsuanfu/32.html">数组运算符</a></li><li><a href="/php/yunsuanfu/33.html">类型运算符</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP控制结构			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jiegou/34.html">PHP控制结构之if</a></li><li><a href="/php/jiegou/35.html">PHP控制结构之else</a></li><li><a href="/php/jiegou/36.html">PHP控制结构之elseif/else if</a></li><li><a href="/php/jiegou/37.html">PHP控制结构之替代语法</a></li><li><a href="/php/jiegou/38.html">PHP控制结构之while</a></li><li><a href="/php/jiegou/39.html">PHP控制结构之do-while</a></li><li><a href="/php/jiegou/40.html">PHP控制结构之for</a></li><li><a href="/php/jiegou/41.html">PHP控制结构之foreach</a></li><li><a href="/php/jiegou/42.html">PHP控制结构之break</a></li><li><a href="/php/jiegou/43.html">PHP控制结构之continue</a></li><li><a href="/php/jiegou/44.html">PHP控制结构之switch</a></li><li><a href="/php/jiegou/45.html">PHP控制结构之declare</a></li><li><a href="/php/jiegou/46.html">PHP控制结构之return</a></li><li><a href="/php/jiegou/47.html">PHP控制结构之require</a></li><li><a href="/php/jiegou/48.html">PHP控制结构之include</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/hanshu/52.html">用户自定义函数</a></li><li><a href="/php/hanshu/53.html">函数的参数</a></li><li><a href="/php/hanshu/54.html">返回值</a></li><li><a href="/php/hanshu/55.html">可变函数</a></li><li><a href="/php/hanshu/56.html">内部（内置）函数</a></li><li><a href="/php/hanshu/57.html">匿名函数</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类与对象			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpduixiang/58.html">类与对象前言</a></li><li><a href="/php/phpduixiang/59.html">基本概念</a></li><li><a href="/php/phpduixiang/60.html">属性</a></li><li><a href="/php/phpduixiang/61.html">类常量</a></li><li><a href="/php/phpduixiang/62.html">自动加载对象</a></li><li><a href="/php/phpduixiang/63.html">构造函数和析构函数</a></li><li><a href="/php/phpduixiang/64.html">访问控制</a></li><li><a href="/php/phpduixiang/65.html">对象继承</a></li><li><a href="/php/phpduixiang/66.html">Static关键字</a></li><li><a href="/php/phpduixiang/67.html">抽象类</a></li><li><a href="/php/phpduixiang/68.html">接口</a></li><li><a href="/php/phpduixiang/69.html">Traits</a></li><li><a href="/php/phpduixiang/70.html">重载</a></li><li><a href="/php/phpduixiang/71.html">对象迭代</a></li><li><a href="/php/phpduixiang/72.html">设计模式</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP异常处理			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yichang/81.html">异常处理</a></li><li><a href="/php/yichang/82.html">扩展PHP内置的异常处理类</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数库按分类			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpku/83.html">数组</a></li><li><a href="/php/phpku/84.html">Classes/Objects</a></li><li><a href="/php/phpku/85.html">Date/Time</a></li><li><a href="/php/phpku/86.html">Directories</a></li><li><a href="/php/phpku/87.html">错误处理</a></li><li><a href="/php/phpku/88.html">Program execution</a></li><li><a href="/php/phpku/89.html">Filesystem</a></li><li><a href="/php/phpku/90.html">Filter</a></li><li><a href="/php/phpku/91.html">Function Handling</a></li><li><a href="/php/phpku/92.html">PHP 选项/信息</a></li><li><a href="/php/phpku/93.html">Mail</a></li><li><a href="/php/phpku/94.html">Math</a></li><li><a href="/php/phpku/95.html">Misc.</a></li><li><a href="/php/phpku/96.html">Network</a></li><li><a href="/php/phpku/97.html">输出控制</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> php基础			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbiji/108377.html"></a></li><li><a href="/php/phpbiji/108376.html"></a></li><li><a href="/php/phpbiji/108380.html"></a></li><li><a href="/php/phpbiji/108379.html"></a></li><li><a href="/php/phpbiji/108378.html"></a></li><li><a href="/php/phpbiji/108381.html"></a></li><li><a href="/php/phpbiji/108382.html"></a></li><li><a href="/php/phpbiji/108384.html"></a></li><li><a href="/php/phpbiji/108383.html"></a></li><li><a href="/php/phpbiji/108385.html"></a></li><li><a href="/php/phpbiji/108386.html"></a></li><li><a href="/php/phpbiji/108388.html"></a></li><li><a href="/php/phpbiji/108387.html"></a></li><li><a href="/php/phpbiji/108389.html"></a></li><li><a href="/php/phpbiji/108391.html"></a></li>		</ul>
	</li>
		<li>
	    <a href="/php/biji/" class="waves-effect">
		    <i class="icon-share"></i>
		    <span>PHP笔记
		       	<span class="float-right menu-arrow">
		       	<i class="mdi mdi-chevron-right"></i>
		       	</span>
		    </span>
	    </a>
	</li>
	</ul>
</div>
<!-- Sidebar -->
<div class="clearfix"></div>
</div>
<!-- Sidebar -left -->
</div>
<!-- Left Sidebar End -->
<!-- Start right Content here -->
<div class="content-page">
	<div class="content">
		<div class="container-fluid">
			<div class="page-title-box">
				<div class="row align-items-center">
					<div class="col-sm-6">
						<h1 class="page-title">Java棋类游戏实践之中国象棋</h1>
					</div>
				</div>
				<!-- end row -->
			</div>
			<!-- end page-title -->
			<!-- START ROW -->
			<div class="panel panel-forbid">
				<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>内容摘要</div>
			    <div class="panel-content">
			    <span>本文实例讲述了java实现的中国象棋游戏代码，分享给大家供大家参考，具体代码如下<br />
一、实践目的：<br />
1.鼠标点击、拖动等事件的应用与区别<br />
2.棋谱文件的保存与读取<br />
3.完善象棋的规则</span>                                     
		    	</div>
			    <div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>文章正文</div>
			    <div class="panel-content">
			    <span><p>本文实例讲述了java实现的中国象棋游戏代码，分享给大家供大家参考，具体代码如下</p>
<p><strong>一、实践目的：</strong></p>
<p>1.鼠标点击、拖动等事件的应用与区别</p>
<p>2.棋谱文件的保存与读取</p>
<p>3.完善象棋的规则。</p>
<p><strong>二、实践内容：</strong></p>
<p>中国象棋历史悠久，吸引了无数的人研究，现对中国象棋的对战和实现棋谱的制作做如下的设计和说明，供大家参考学习。</p>
<p>1、机机对弈，红方先手。在符合规则的情况下拖动棋子到目的地，松鼠标落子。</p>
<p style="text-align: center"><br />
</p>
<p style="text-align: center">人人对弈图</p>
<p>2、制作棋谱，选择制作棋谱菜单后，对弈开始，并记录了下棋过程。</p>
<p style="text-align: center"><br />
</p>
<p style="text-align: center">选择“制作棋谱”菜单<br />
</p>
<p style="text-align: center"><br />
</p>
<p style="text-align: center"><br />
</p>
<p style="text-align: center">棋谱制作完毕红方胜出</p>
<p>一方胜出后弹出胜利消息对话框。点击确定后，选择“保存棋谱”菜单，弹出保存文件对话框。</p>
<p style="text-align: center"><br />
</p>
<p style="text-align: center">保存棋谱对话框</p>
<p>3.演示棋谱，选择演示棋谱菜单后，弹出打开对话框，选择保存好的棋谱，开始演示。</p>
<p style="text-align: center"><br />
</p>
<p style="text-align: center">演示棋谱对话框<br />
</p>
<p style="text-align: center"><br />
</p>
<p style="text-align: center">演示棋谱过程（自动和手动两种）</p>
<p><strong>三、参考代码：</strong></p>
<p>1.象棋主类 文件ChineseChess.java<br />
</p>
<div class="phpstudycode">
<pre class="brush:java;">
package cn.edu.ouc.chineseChess; 
 
import javax.swing.*; 
import java.awt.*; 
import java.awt.event.*; 
import java.io.*; 
import java.util.LinkedList; 
 
/** 
 * 象棋主类 
 * 
 * @author cnlht 
 */ 
public class ChineseChess extends JFrame implements ActionListener { 
 ChessBoard board = null; 
 Demon demon = null; 
 MakeChessManual record = null; 
 Container con = null; 
 JMenuBar bar; 
 JMenu fileMenu; 
 JMenuItem 制作棋谱, 保存棋谱, 演示棋谱; 
 JFileChooser fileChooser = null; 
 LinkedList 棋谱 = null; 
 
 public ChineseChess() { 
  bar = new JMenuBar(); 
  fileMenu = new JMenu("中国象棋"); 
  制作棋谱 = new JMenuItem("制作棋谱"); 
  保存棋谱 = new JMenuItem("保存棋谱"); 
  保存棋谱.setEnabled(false); 
  演示棋谱 = new JMenuItem("演示棋谱"); 
  fileMenu.add(制作棋谱); 
  fileMenu.add(保存棋谱); 
  fileMenu.add(演示棋谱); 
  bar.add(fileMenu); 
  setJMenuBar(bar); 
  setTitle(制作棋谱.getText()); 
  制作棋谱.addActionListener(this); 
  保存棋谱.addActionListener(this); 
  演示棋谱.addActionListener(this); 
  board = new ChessBoard(45, 45, 9, 10); 
  record = board.record; 
  con = getContentPane(); 
  JSplitPane split = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT, true, 
    board, record); 
  split.setDividerSize(5); 
  split.setDividerLocation(460); 
  con.add(split, BorderLayout.CENTER); 
  addWindowListener(new WindowAdapter() { 
   public void windowClosing(WindowEvent e) { 
    System.exit(0); 
   } 
  }); 
  setVisible(true); 
  setBounds(60, 20, 690, 540); 
  fileChooser = new JFileChooser(); 
  con.validate(); 
  validate(); 
 } 
 
 public void actionPerformed(ActionEvent e) { 
  if (e.getSource() == 制作棋谱) { 
   con.removeAll(); 
   保存棋谱.setEnabled(true); 
   this.setTitle(制作棋谱.getText()); 
   board = new ChessBoard(45, 45, 9, 10); 
   record = board.record; 
   JSplitPane split = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT, 
     true, board, record); 
   split.setDividerSize(5); 
   split.setDividerLocation(460); 
   con.add(split, BorderLayout.CENTER); 
   validate(); 
  } 
  if (e.getSource() == 保存棋谱) { 
   int state = fileChooser.showSaveDialog(null); 
   File saveFile = fileChooser.getSelectedFile(); 
   if (saveFile != null && state == JFileChooser.APPROVE_OPTION) { 
    try { 
     FileOutputStream outOne = new FileOutputStream(saveFile); 
     ObjectOutputStream outTwo = new ObjectOutputStream(outOne); 
     outTwo.writeObject(record.获取棋谱()); 
     outOne.close(); 
     outTwo.close(); 
    } catch (IOException event) { 
    } 
   } 
  } 
  if (e.getSource() == 演示棋谱) { 
   con.removeAll(); 
   con.repaint(); 
   con.validate(); 
   validate(); 
   保存棋谱.setEnabled(false); 
 
   int state = fileChooser.showOpenDialog(null); 
   File openFile = fileChooser.getSelectedFile(); 
   if (openFile != null && state == JFileChooser.APPROVE_OPTION) { 
    try { 
     FileInputStream inOne = new FileInputStream(openFile); 
     ObjectInputStream inTwo = new ObjectInputStream(inOne); 
     棋谱 = (LinkedList) inTwo.readObject(); 
     inOne.close(); 
     inTwo.close(); 
     ChessBoard board = new ChessBoard(45, 45, 9, 10); 
     demon = new Demon(board); 
     demon.set棋谱(棋谱); 
     con.add(demon, BorderLayout.CENTER); 
     con.validate(); 
     validate(); 
     this.setTitle(演示棋谱.getText() + ":" + openFile); 
    } catch (Exception event) { 
     JLabel label = new JLabel("不是棋谱文件"); 
     label.setFont(new Font("隶书", Font.BOLD, 60)); 
     label.setForeground(Color.red); 
     label.setHorizontalAlignment(SwingConstants.CENTER); 
     con.add(label, BorderLayout.CENTER); 
     con.validate(); 
     this.setTitle("没有打开棋谱"); 
     validate(); 
    } 
   } else { 
    JLabel label = new JLabel("没有打开棋谱文件呢"); 
    label.setFont(new Font("隶书", Font.BOLD, 50)); 
    label.setForeground(Color.pink); 
    label.setHorizontalAlignment(SwingConstants.CENTER); 
    con.add(label, BorderLayout.CENTER); 
    con.validate(); 
    this.setTitle("没有打开棋谱文件呢"); 
    validate(); 
   } 
  } 
 } 
 
 public static void main(String args[]) { 
  new ChineseChess(); 
 } 
} 
</pre>
</div>
<p>2.象棋棋盘类文件ChessBoard.java<br />
</p>
<div class="phpstudycode">
<pre class="brush:java;">
package cn.edu.ouc.chineseChess; 
 
import javax.swing.*; 
import java.awt.*; 
import java.awt.event.*; 
 
/** 
 * 棋盘类 
 * 
 * @author cnlht 
 */ 
public class ChessBoard extends JPanel implements MouseListener, 
  MouseMotionListener { 
 public ChessPoint point[][]; 
 public int unitWidth, unitHeight; 
 private int x轴长, y轴长; 
 private int x, y; 
 private Image img; 
 protected Image pieceImg; 
 private boolean move = false; 
 public String 红方颜色 = "红方", 黑方颜色 = "黑方"; 
 ChessPiece 红车1, 红车2, 红马1, 红马2, 红相1, 红相2, 红帅, 红士1, 红士2, 红兵1, 红兵2, 红兵3, 红兵4, 
   红兵5, 红炮1, 红炮2; 
 ChessPiece 黑车1, 黑车2, 黑马1, 黑马2, 黑将, 黑士1, 黑士2, 黑卒1, 黑卒2, 黑卒3, 黑卒4, 黑卒5, 黑象1, 
   黑象2, 黑炮1, 黑炮2; 
 
 int startX, startY; 
 int startI, startJ; 
 public boolean 红方走棋 = true, 黑方走棋 = false; 
 Rule rule = null; 
 public MakeChessManual record = null; 
 
 public ChessBoard(int w, int h, int r, int c) { 
  setLayout(null); 
  addMouseListener(this); 
  addMouseMotionListener(this); 
  Color bc = getBackground(); 
  unitWidth = w; 
  unitHeight = h; 
  x轴长 = r; 
  y轴长 = c; 
 
  point = new ChessPoint[r + 1][c + 1]; 
 
  for (int i = 1; i &lt;= r; i++) { 
   for (int j = 1; j &lt;= c; j++) { 
    point[i][j] = new ChessPoint(i * unitWidth, j * unitHeight, 
      false); 
   } 
  } 
 
  rule = new Rule(this, point); 
  record = new MakeChessManual(this, point); 
 
  img = Toolkit.getDefaultToolkit().getImage("board.jpg"); 
  pieceImg = Toolkit.getDefaultToolkit().getImage("piece.gif"); 
   
  红车1 = new ChessPiece("車", Color.red, bc, w - 4, h - 4, this); 
  红车1.set棋子类别(红方颜色); 
  红车2 = new ChessPiece("車", Color.red, bc, w - 4, h - 4, this); 
  红车2.set棋子类别(红方颜色); 
  红马1 = new ChessPiece("馬", Color.red, bc, w - 4, h - 4, this); 
  红马1.set棋子类别(红方颜色); 
  红马2 = new ChessPiece("馬", Color.red, bc, w - 4, h - 4, this); 
  红马2.set棋子类别(红方颜色); 
  红炮1 = new ChessPiece("炮", Color.red, bc, w - 4, h - 4, this); 
  红炮1.set棋子类别(红方颜色); 
  红炮2 = new ChessPiece("炮", Color.red, bc, w - 4, h - 4, this); 
  红炮2.set棋子类别(红方颜色); 
  红相1 = new ChessPiece("相", Color.red, bc, w - 4, h - 4, this); 
  红相1.set棋子类别(红方颜色); 
  红相2 = new ChessPiece("相", Color.red, bc, w - 4, h - 4, this); 
  红相2.set棋子类别(红方颜色); 
  红士1 = new ChessPiece("仕", Color.red, bc, w - 4, h - 4, this); 
  红士1.set棋子类别(红方颜色); 
  红士2 = new ChessPiece("仕", Color.red, bc, w - 4, h - 4, this); 
  红士2.set棋子类别(红方颜色); 
  红帅 = new ChessPiece("帅", Color.red, bc, w - 4, h - 4, this); 
  红帅.set棋子类别(红方颜色); 
  红兵1 = new ChessPiece("兵", Color.red, bc, w - 4, h - 4, this); 
  红兵1.set棋子类别(红方颜色); 
  红兵2 = new ChessPiece("兵", Color.red, bc, w - 4, h - 4, this); 
  红兵2.set棋子类别(红方颜色); 
  红兵3 = new ChessPiece("兵", Color.red, bc, w - 4, h - 4, this); 
  红兵3.set棋子类别(红方颜色); 
  红兵4 = new ChessPiece("兵", Color.red, bc, w - 4, h - 4, this); 
  红兵4.set棋子类别(红方颜色); 
  红兵5 = new ChessPiece("兵", Color.red, bc, w - 4, h - 4, this); 
  红兵5.set棋子类别(红方颜色); 
 
  黑将 = new ChessPiece("将", Color.black, bc, w - 4, h - 4, this); 
  黑将.set棋子类别(黑方颜色); 
  黑士1 = new ChessPiece("士", Color.black, bc, w - 4, h - 4, this); 
  黑士1.set棋子类别(黑方颜色); 
  黑士2 = new ChessPiece("士", Color.black, bc, w - 4, h - 4, this); 
  黑士2.set棋子类别(黑方颜色); 
  黑车1 = new ChessPiece("车", Color.black, bc, w - 4, h - 4, this); 
  黑车1.set棋子类别(黑方颜色); 
  黑车2 = new ChessPiece("车", Color.black, bc, w - 4, h - 4, this); 
  黑车2.set棋子类别(黑方颜色); 
  黑炮1 = new ChessPiece("炮", Color.black, bc, w - 4, h - 4, this); 
  黑炮1.set棋子类别(黑方颜色); 
  黑炮2 = new ChessPiece("炮", Color.black, bc, w - 4, h - 4, this); 
  黑炮2.set棋子类别(黑方颜色); 
  黑象1 = new ChessPiece("象", Color.black, bc, w - 4, h - 4, this); 
  黑象1.set棋子类别(黑方颜色); 
  黑象2 = new ChessPiece("象", Color.black, bc, w - 4, h - 4, this); 
  黑象2.set棋子类别(黑方颜色); 
  黑马1 = new ChessPiece("马", Color.black, bc, w - 4, h - 4, this); 
  黑马1.set棋子类别(黑方颜色); 
  黑马2 = new ChessPiece("马", Color.black, bc, w - 4, h - 4, this); 
  黑马2.set棋子类别(黑方颜色); 
  黑卒1 = new ChessPiece("卒", Color.black, bc, w - 4, h - 4, this); 
  黑卒1.set棋子类别(黑方颜色); 
  黑卒2 = new ChessPiece("卒", Color.black, bc, w - 4, h - 4, this); 
  黑卒2.set棋子类别(黑方颜色); 
  黑卒3 = new ChessPiece("卒", Color.black, bc, w - 4, h - 4, this); 
  黑卒3.set棋子类别(黑方颜色); 
  黑卒4 = new ChessPiece("卒", Color.black, bc, w - 4, h - 4, this); 
  黑卒4.set棋子类别(黑方颜色); 
  黑卒5 = new ChessPiece("卒", Color.black, bc, w - 4, h - 4, this); 
  黑卒5.set棋子类别(黑方颜色); 
  point[1][10].setPiece(红车1, this); 
  point[2][10].setPiece(红马1, this); 
  point[3][10].setPiece(红相1, this); 
  point[4][10].setPiece(红士1, this); 
  point[5][10].setPiece(红帅, this); 
  point[6][10].setPiece(红士2, this); 
  point[7][10].setPiece(红相2, this); 
  point[8][10].setPiece(红马2, this); 
  point[9][10].setPiece(红车2, this); 
  point[2][8].setPiece(红炮1, this); 
  point[8][8].setPiece(红炮2, this); 
  point[1][7].setPiece(红兵1, this); 
  point[3][7].setPiece(红兵2, this); 
  point[5][7].setPiece(红兵3, this); 
  point[7][7].setPiece(红兵4, this); 
  point[9][7].setPiece(红兵5, this); 
 
  point[1][1].setPiece(黑车1, this); 
  point[2][1].setPiece(黑马1, this); 
  point[3][1].setPiece(黑象1, this); 
  point[4][1].setPiece(黑士1, this); 
  point[5][1].setPiece(黑将, this); 
  point[6][1].setPiece(黑士2, this); 
  point[7][1].setPiece(黑象2, this); 
  point[8][1].setPiece(黑马2, this); 
  point[9][1].setPiece(黑车2, this); 
  point[2][3].setPiece(黑炮1, this); 
  point[8][3].setPiece(黑炮2, this); 
  point[1][4].setPiece(黑卒1, this); 
  point[3][4].setPiece(黑卒2, this); 
  point[5][4].setPiece(黑卒3, this); 
  point[7][4].setPiece(黑卒4, this); 
  point[9][4].setPiece(黑卒5, this); 
 
 } 
 
 public void paintComponent(Graphics g) { 
  super.paintComponent(g); 
 
  int imgWidth = img.getWidth(this); 
  int imgHeight = img.getHeight(this);// 获得图片的宽度与高度 
  int FWidth = getWidth(); 
  int FHeight = getHeight();// 获得窗口的宽度与高度 
  int x = (FWidth - imgWidth) / 2; 
  int y = (FHeight - imgHeight) / 2; 
  g.drawImage(img, x, y, null); 
 
  for (int j = 1; j &lt;= y轴长; j++) { 
   g.drawLine(point[1][j].x, point[1][j].y, point[x轴长][j].x, 
     point[x轴长][j].y); 
  } 
  for (int i = 1; i &lt;= x轴长; i++) { 
   if (i != 1 && i != x轴长) { 
    g.drawLine(point[i][1].x, point[i][1].y, point[i][y轴长 - 5].x, 
      point[i][y轴长 - 5].y); 
    g.drawLine(point[i][y轴长 - 4].x, point[i][y轴长 - 4].y, 
      point[i][y轴长].x, point[i][y轴长].y); 
   } else { 
    g.drawLine(point[i][1].x, point[i][1].y, point[i][y轴长].x, 
      point[i][y轴长].y); 
   } 
  } 
 
  g.drawLine(point[4][1].x, point[4][1].y, point[6][3].x, point[6][3].y); 
  g.drawLine(point[6][1].x, point[6][1].y, point[4][3].x, point[4][3].y); 
  g.drawLine(point[4][8].x, point[4][8].y, point[6][y轴长].x, 
    point[6][y轴长].y); 
  g.drawLine(point[4][y轴长].x, point[4][y轴长].y, point[6][8].x, 
    point[6][8].y); 
 
  for (int i = 1; i &lt;= x轴长; i++) { 
   g.drawString("" + i, i * unitWidth, unitHeight / 2); 
  } 
  int j = 1; 
  for (char c = 'A'; c &lt;= 'J'; c++) { 
   g.drawString("" + c, unitWidth / 4, j * unitHeight); 
   j++; 
  } 
 
 } 
 
 /**鼠标按下事件*/ 
 public void mousePressed(MouseEvent e) { 
  ChessPiece piece = null; 
  Rectangle rect = null; 
  if (e.getSource() == this) 
   move = false; 
  if (move == false) 
   if (e.getSource() instanceof ChessPiece) { 
    piece = (ChessPiece) e.getSource(); 
    startX = piece.getBounds().x; 
    startY = piece.getBounds().y; 
 
    rect = piece.getBounds(); 
    for (int i = 1; i &lt;= x轴长; i++) { 
     for (int j = 1; j &lt;= y轴长; j++) { 
      int x = point[i][j].getX(); 
      int y = point[i][j].getY(); 
      if (rect.contains(x, y)) { 
       startI = i; 
       startJ = j; 
       break; 
      } 
 
     } 
    } 
   } 
 } 
 
 public void mouseMoved(MouseEvent e) { 
 } 
 
 /**鼠标拖动事件*/ 
 public void mouseDragged(MouseEvent e) { 
 
  ChessPiece piece = null; 
  if (e.getSource() instanceof ChessPiece) { 
   piece = (ChessPiece) e.getSource(); 
 
   move = true; 
 
   e = SwingUtilities.convertMouseEvent(piece, e, this); 
  } 
 
  if (e.getSource() == this) { 
   if (move && piece != null) { 
    x = e.getX(); 
    y = e.getY(); 
    if (红方走棋 && ((piece.棋子类别()).equals(红方颜色))) { 
     piece.setLocation(x - piece.getWidth() / 2, 
       y - piece.getHeight() / 2); 
    } 
    if (黑方走棋 && (piece.棋子类别().equals(黑方颜色))) { 
     piece.setLocation(x - piece.getWidth() / 2, 
       y - piece.getHeight() / 2); 
    } 
   } 
  } 
 } 
 
 /**松开鼠标事件*/ 
 public void mouseReleased(MouseEvent e) { 
  ChessPiece piece = null; 
  move = false; 
  Rectangle rect = null; 
  if (e.getSource() instanceof ChessPiece) { 
   piece = (ChessPiece) e.getSource(); 
   rect = piece.getBounds(); 
 
   e = SwingUtilities.convertMouseEvent(piece, e, this); 
  } 
  if (e.getSource() == this) { 
   boolean containChessPoint = false; 
   int x = 0, y = 0; 
   int m = 0, n = 0; 
   if (piece != null) { 
    for (int i = 1; i &lt;= x轴长; i++) { 
     for (int j = 1; j &lt;= y轴长; j++) { 
      x = point[i][j].getX(); 
      y = point[i][j].getY(); 
      if (rect.contains(x, y)) { 
 
       containChessPoint = true; 
       m = i; 
       n = j; 
       break; 
      } 
 
     } 
    } 
   } 
   if (piece != null && containChessPoint) { 
    Color pieceColor = piece.获取棋子颜色(); 
    if (point[m][n].isPiece()) { 
     Color c = (point[m][n].getPiece()).获取棋子颜色(); 
     if (pieceColor.getRGB() == c.getRGB()) { 
      piece.setLocation(startX, startY); 
 
      (point[startI][startJ]).set有棋子(true); 
     } else { 
      boolean ok = rule.movePieceRule(piece, startI, startJ, 
        m, n); 
      if (ok) { 
       ChessPiece pieceRemoved = point[m][n].getPiece(); 
       point[m][n].reMovePiece(pieceRemoved, this); 
       point[m][n].setPiece(piece, this); 
       (point[startI][startJ]).set有棋子(false); 
       record.记录棋谱(piece, startI, startJ, m, n); 
       record.记录吃掉的棋子(pieceRemoved); 
       rule.isWine(pieceRemoved); 
       if (piece.棋子类别().equals(红方颜色)) { 
        红方走棋 = false; 
        黑方走棋 = true; 
       } 
       if (piece.棋子类别().equals(黑方颜色)) { 
        黑方走棋 = false; 
        红方走棋 = true; 
       } 
       validate(); 
       repaint(); 
      } else { 
       piece.setLocation(startX, startY); 
       (point[startI][startJ]).set有棋子(true); 
      } 
     } 
 
    } else { 
 
     boolean ok = rule 
       .movePieceRule(piece, startI, startJ, m, n); 
     if (ok) { 
      point[m][n].setPiece(piece, this); 
      (point[startI][startJ]).set有棋子(false); 
      record.记录棋谱(piece, startI, startJ, m, n); 
      record.记录吃掉的棋子("没吃棋子"); 
 
      if (piece.棋子类别().equals(红方颜色)) { 
       红方走棋 = false; 
       黑方走棋 = true; 
      } 
      if (piece.棋子类别().equals(黑方颜色)) { 
       黑方走棋 = false; 
       红方走棋 = true; 
      } 
     } else { 
      piece.setLocation(startX, startY); 
      (point[startI][startJ]).set有棋子(true); 
     } 
    } 
   } 
 
   if (piece != null && !containChessPoint) { 
    piece.setLocation(startX, startY); 
    (point[startI][startJ]).set有棋子(true); 
   } 
  } 
 } 
 
 public void mouseEntered(MouseEvent e) { 
 } 
 
 public void mouseExited(MouseEvent e) { 
 } 
 
 public void mouseClicked(MouseEvent e) { 
 } 
} 
</pre>
</div>
<p>3.棋子类文件ChessPiece.java<br />
</p>
<div class="phpstudycode">
<pre class="brush:java;">
package cn.edu.ouc.chineseChess; 
 
import javax.swing.*; 
import java.awt.*; 
import java.awt.event.*; 
 
/** 
 * 棋子类 
 * 
 * @author cnlht 
 */ 
public class ChessPiece extends JLabel { 
 String name; // 棋子名字 
 Color backColor = null, foreColor;// 背景色和前景色 
 String 颜色类别 = null; 
 ChessBoard board = null; 
 int width, height;// 大小 
 
 public ChessPiece(String name, Color fc, Color bc, int width, int height, 
   ChessBoard board) {// 构造棋子 
  this.name = name; 
  this.board = board; 
  this.width = width; 
  this.height = height; 
  foreColor = fc; 
  backColor = bc; 
  setSize(width, height); 
  setBackground(bc); 
  addMouseMotionListener(board); 
  addMouseListener(board); 
 } 
 
 // 绘制棋子 
 public void paint(Graphics g) {  
  g.drawImage(board.pieceImg, 2, 2, width-2, height-2, null); 
  g.setColor(foreColor); 
  g.setFont(new Font("楷体", Font.BOLD, 26)); 
  g.drawString(name, 7, height - 8);// 在棋子上绘制 “棋子名” 
  g.setColor(Color.black); 
  //g.drawOval(1, 1, width - 1, height - 1); 
  float lineWidth = 2.3f; 
  ((Graphics2D)g).setStroke(new BasicStroke(lineWidth)); 
  ((Graphics2D)g).drawOval(2, 2, width-2, height-2); 
 } 
 
 public int getWidth() { 
  return width; 
 } 
 
 public int getHeight() { 
  return height; 
 } 
 
 public String getName() { 
  return name; 
 } 
 
 public Color 获取棋子颜色() { 
  return foreColor; 
 } 
 
 public void set棋子类别(String 类别) { 
  颜色类别 = 类别; 
 } 
 
 public String 棋子类别() { 
  return 颜色类别; 
 } 
} 
</pre>
</div>
<p>4.棋子点坐标类文件<br />
</p>
<div class="phpstudycode">
<pre class="brush:java;">
package cn.edu.ouc.chineseChess; 
 
/** 
 * 棋点类 
 * 
 * @author cnlht 
 */ 
public class ChessPoint { 
 /** 棋子坐标 */ 
 int x, y; 
  
 /** 该坐标 是否有子*/ 
 boolean 有棋子; 
  
 /** 改坐标的棋子 */ 
 ChessPiece piece = null; 
  
 /** 坐标所属棋盘 */ 
 ChessBoard board = null; 
 
 public ChessPoint(int x, int y, boolean boo) { 
  this.x = x; 
  this.y = y; 
  有棋子 = boo; 
 } 
 
 public boolean isPiece() { 
  return 有棋子; 
 } 
 
 public void set有棋子(boolean boo) { 
  有棋子 = boo; 
 } 
 
 public int getX() { 
  return x; 
 } 
 
 public int getY() { 
  return y; 
 } 
 
 // 设置改点棋子 
 public void setPiece(ChessPiece piece, ChessBoard board) { 
  this.board = board; 
  this.piece = piece; 
  board.add(piece); 
  int w = (board.unitWidth); 
  int h = (board.unitHeight); 
  piece.setBounds(x - w / 2, y - h / 2, w, h);// 棋子位置，宽度，高度 
  有棋子 = true; 
  board.validate(); 
 } 
 
 public ChessPiece getPiece() { 
  return piece; 
 } 
 
 public void reMovePiece(ChessPiece piece, ChessBoard board) { 
  this.board = board; 
  this.piece = piece; 
  board.remove(piece); 
  board.validate(); 
  有棋子 = false; 
 } 
} 
</pre>
</div>
<p>5.玩法规则类文件Rule.java<br />
</p>
<div class="phpstudycode">
<pre class="brush:java;">
package cn.edu.ouc.chineseChess; 
 
import javax.swing.*; 
 
import java.awt.*; 
import java.awt.event.*; 
 
/** 
 * 走棋规则类 
 * 
 * @author cnlht 
 */ 
public class Rule { 
 ChessBoard board = null; 
 ChessPiece piece = null; 
 ChessPoint point[][]; 
 int startI, startJ, endI, endJ; 
 
 public Rule(ChessBoard board, ChessPoint point[][]) { 
  this.board = board; 
  this.point = point; 
 } 
 
 public void isWine(ChessPiece piece) { 
  this.piece = piece; 
  if (piece.getName() == "将" || piece.getName() == "帅") { 
   if (piece.颜色类别 == "红方") { 
    JOptionPane.showMessageDialog(null, "黑方 胜利！"); 
   } else { 
    JOptionPane.showMessageDialog(null, "红方 胜利！"); 
   } 
  } 
 } 
 
 public boolean movePieceRule(ChessPiece piece, int startI, int startJ, 
   int endI, int endJ) { 
  this.piece = piece; 
  this.startI = startI; 
  this.startJ = startJ; 
  this.endI = endI; 
  this.endJ = endJ; 
  int minI = Math.min(startI, endI); 
  int maxI = Math.max(startI, endI); 
  int minJ = Math.min(startJ, endJ); 
  int maxJ = Math.max(startJ, endJ); 
  boolean 可否走棋 = false; 
  if (piece.getName().equals("车")) { 
   if (startI == endI) { 
    int j = 0; 
    for (j = minJ + 1; j &lt;= maxJ - 1; j++) { 
     if (point[startI][j].isPiece()) { 
      可否走棋 = false; 
      break; 
     } 
    } 
    if (j == maxJ) { 
     可否走棋 = true; 
    } 
   } else if (startJ == endJ) { 
    int i = 0; 
    for (i = minI + 1; i &lt;= maxI - 1; i++) { 
     if (point[i][startJ].isPiece()) { 
      可否走棋 = false; 
      break; 
     } 
    } 
    if (i == maxI) { 
     可否走棋 = true; 
    } 
   } else { 
    可否走棋 = false; 
   } 
 
  } else if (piece.getName().equals("車")) { 
   if (startI == endI) { 
    int j = 0; 
    for (j = minJ + 1; j &lt;= maxJ - 1; j++) { 
     if (point[startI][j].isPiece()) { 
      可否走棋 = false; 
      break; 
     } 
    } 
    if (j == maxJ) { 
     可否走棋 = true; 
    } 
   } else if (startJ == endJ) { 
    int i = 0; 
    for (i = minI + 1; i &lt;= maxI - 1; i++) { 
     if (point[i][startJ].isPiece()) { 
      可否走棋 = false; 
      break; 
     } 
    } 
    if (i == maxI) { 
     可否走棋 = true; 
    } 
   } else { 
    可否走棋 = false; 
   } 
 
  }else if (piece.getName().equals("马")) { 
   int xAxle = Math.abs(startI - endI); 
   int yAxle = Math.abs(startJ - endJ); 
 
   if (xAxle == 2 && yAxle == 1) { 
    if (endI &gt; startI) { 
     if (point[startI + 1][startJ].isPiece()) { 
      可否走棋 = false; 
     } else { 
      可否走棋 = true; 
     } 
    } 
    if (endI &lt; startI) { 
     if (point[startI - 1][startJ].isPiece()) { 
      可否走棋 = false; 
     } else { 
      可否走棋 = true; 
     } 
    } 
 
   }else if (xAxle == 1 && yAxle == 2) { 
    if (endJ &gt; startJ) { 
     if (point[startI][startJ + 1].isPiece()) { 
      可否走棋 = false; 
     } else { 
      可否走棋 = true; 
     } 
    } 
    if (endJ &lt; startJ) { 
     if (point[startI][startJ - 1].isPiece()) { 
      可否走棋 = false; 
     } else { 
      可否走棋 = true; 
     } 
    } 
 
   } else { 
    可否走棋 = false; 
   } 
  } else if (piece.getName().equals("馬")) { 
   int xAxle = Math.abs(startI - endI); 
   int yAxle = Math.abs(startJ - endJ); 
 
   if (xAxle == 2 && yAxle == 1) { 
    if (endI &gt; startI) { 
     if (point[startI + 1][startJ].isPiece()) { 
      可否走棋 = false; 
     } else { 
      可否走棋 = true; 
     } 
    } 
    if (endI &lt; startI) { 
     if (point[startI - 1][startJ].isPiece()) { 
      可否走棋 = false; 
     } else { 
      可否走棋 = true; 
     } 
    } 
 
   }else if (xAxle == 1 && yAxle == 2) { 
    if (endJ &gt; startJ) { 
     if (point[startI][startJ + 1].isPiece()) { 
      可否走棋 = false; 
     } else { 
      可否走棋 = true; 
     } 
    } 
    if (endJ &lt; startJ) { 
     if (point[startI][startJ - 1].isPiece()) { 
      可否走棋 = false; 
     } else { 
      可否走棋 = true; 
     } 
    } 
 
   } else { 
    可否走棋 = false; 
   } 
  } else if (piece.getName().equals("象")) { 
   int centerI = (startI + endI) / 2; 
   int centerJ = (startJ + endJ) / 2; 
   int xAxle = Math.abs(startI - endI); 
   int yAxle = Math.abs(startJ - endJ); 
   if (xAxle == 2 && yAxle == 2 && endJ &lt;= 5) { 
    if (point[centerI][centerJ].isPiece()) { 
     可否走棋 = false; 
    } else { 
     可否走棋 = true; 
    } 
   } else { 
    可否走棋 = false; 
   } 
  } else if (piece.getName().equals("相")) { 
   int centerI = (startI + endI) / 2; 
   int centerJ = (startJ + endJ) / 2; 
   int xAxle = Math.abs(startI - endI); 
   int yAxle = Math.abs(startJ - endJ); 
   if (xAxle == 2 && yAxle == 2 && endJ &gt;= 6) { 
    if (point[centerI][centerJ].isPiece()) { 
     可否走棋 = false; 
    } else { 
     可否走棋 = true; 
    } 
   } else { 
    可否走棋 = false; 
   } 
  } else if (piece.getName().equals("炮")) { 
   int number = 0; 
   if (startI == endI) { 
    int j = 0; 
    for (j = minJ + 1; j &lt;= maxJ - 1; j++) { 
     if (point[startI][j].isPiece()) { 
      number++; 
     } 
    } 
    if (number &gt; 1) { 
     可否走棋 = false; 
    } else if (number == 1) { 
     if (point[endI][endJ].isPiece()) { 
      可否走棋 = true; 
     } 
    } else if (number == 0 && !point[endI][endJ].isPiece()) { 
     可否走棋 = true; 
    } 
   } else if (startJ == endJ) { 
    int i = 0; 
    for (i = minI + 1; i &lt;= maxI - 1; i++) { 
     if (point[i][startJ].isPiece()) { 
      number++; 
     } 
    } 
    if (number &gt; 1) { 
     可否走棋 = false; 
    } else if (number == 1) { 
     if (point[endI][endJ].isPiece()) { 
      可否走棋 = true; 
     } 
    } else if (number == 0 && !point[endI][endJ].isPiece()) { 
     可否走棋 = true; 
    } 
   } else { 
    可否走棋 = false; 
   } 
  } else if (piece.getName().equals("兵")) { 
   int xAxle = Math.abs(startI - endI); 
   int yAxle = Math.abs(startJ - endJ); 
 
   if (endJ &gt;= 6) { 
    if (startJ - endJ == 1 && xAxle == 0) { 
     可否走棋 = true; 
    } 
 
    else { 
     可否走棋 = false; 
    } 
   } else if (endJ &lt;= 5) { 
    if ((startJ - endJ == 1) && (xAxle == 0)) { 
     可否走棋 = true; 
    } else if ((endJ - startJ == 0) && (xAxle == 1)) { 
     可否走棋 = true; 
    } else { 
     可否走棋 = false; 
    } 
   } 
  } else if (piece.getName().equals("卒")) { 
   int xAxle = Math.abs(startI - endI); 
   int yAxle = Math.abs(startJ - endJ); 
 
   if (endJ &lt;= 5) { 
    if (endJ - startJ == 1 && xAxle == 0) { 
     可否走棋 = true; 
    } else { 
     可否走棋 = false; 
    } 
   } else if (endJ &gt;= 6) { 
    if ((endJ - startJ == 1) && (xAxle == 0)) { 
     可否走棋 = true; 
    } else if ((endJ - startJ == 0) && (xAxle == 1)) { 
     可否走棋 = true; 
    } else { 
     可否走棋 = false; 
    } 
   } 
  } 
 
  else if (piece.getName().equals("士")) { 
   int xAxle = Math.abs(startI - endI); 
   int yAxle = Math.abs(startJ - endJ); 
   if (endI &lt;= 6 && endI &gt;= 4 && xAxle == 1 && yAxle == 1) { 
    可否走棋 = true; 
   } else { 
    可否走棋 = false; 
   } 
  } else if (piece.getName().equals("仕")) { 
   int xAxle = Math.abs(startI - endI); 
   int yAxle = Math.abs(startJ - endJ); 
   if (endI &lt;= 6 && endI &gt;= 4 && xAxle == 1 && yAxle == 1) { 
    可否走棋 = true; 
   } else { 
    可否走棋 = false; 
   } 
  } else if ((piece.getName().equals("帅")) 
    || (piece.getName().equals("将"))) { 
   int xAxle = Math.abs(startI - endI); 
   int yAxle = Math.abs(startJ - endJ); 
   if (endI &lt;= 6 && endI &gt;= 4) { 
    if ((xAxle == 1 && yAxle == 0) || (xAxle == 0 && yAxle == 1)) { 
     可否走棋 = true; 
    } else { 
     可否走棋 = false; 
    } 
   } else { 
    可否走棋 = false; 
   } 
  } 
 
  return 可否走棋; 
 
 } 
} 
</pre>
</div>
<p>6.走步类文件MoveStep.java<br />
</p>
<div class="phpstudycode">
<pre class="brush:java;">
package cn.edu.ouc.chineseChess; 
 
import java.awt.Point; 
 
/** 
 * 走步类 
 * 
 * @author cnlht 
 * 
 */ 
public class MoveStep implements java.io.Serializable { 
 public Point pStart, pEnd; 
 
 public MoveStep(Point p1, Point p2) { 
  pStart = p1; 
  pEnd = p2; 
 } 
} 
</pre>
</div>
<p>7.制作棋谱类MakeChessManual.java<br />
</p>
<div class="phpstudycode">
<pre class="brush:java;">
package cn.edu.ouc.chineseChess; 
 
import javax.swing.*; 
import java.awt.*; 
import java.awt.event.*; 
import java.util.LinkedList; 
 
/** 
 * 制作棋谱类 
 * 
 * @author cnlht 
 */ 
public class MakeChessManual extends JPanel implements ActionListener { 
 JTextArea text = null; 
 JScrollPane scroll = null; 
 ChessBoard board = null; 
 ChessPoint[][] point; 
 LinkedList 棋谱 = null; 
 LinkedList 吃掉的棋子 = null; 
 JButton buttonUndo; 
 int i = 0; 
 
 public MakeChessManual(ChessBoard board, ChessPoint[][] point) { 
  this.board = board; 
  this.point = point; 
  text = new JTextArea(); 
  scroll = new JScrollPane(text); 
  棋谱 = new LinkedList(); 
  吃掉的棋子 = new LinkedList(); 
  buttonUndo = new JButton("悔棋"); 
  buttonUndo.setFont(new Font("隶书", Font.PLAIN, 18)); 
  setLayout(new BorderLayout()); 
  add(scroll, BorderLayout.CENTER); 
  add(buttonUndo, BorderLayout.SOUTH); 
  buttonUndo.addActionListener(this); 
 } 
 
 public char numberToLetter(int n) { 
  char c = '\0'; 
  switch (n) { 
  case 1: 
   c = 'A'; 
   break; 
  case 2: 
   c = 'B'; 
   break; 
  case 3: 
   c = 'C'; 
   break; 
  case 4: 
   c = 'D'; 
   break; 
  case 5: 
   c = 'E'; 
   break; 
  case 6: 
   c = 'F'; 
   break; 
  case 7: 
   c = 'G'; 
   break; 
  case 8: 
   c = 'H'; 
   break; 
  case 9: 
   c = 'I'; 
   break; 
  case 10: 
   c = 'J'; 
   break; 
  } 
  return c; 
 } 
 
 public void 记录棋谱(ChessPiece piece, int startI, int startJ, int endI, 
   int endJ) { 
  Point pStart = new Point(startI, startJ); 
  Point pEnd = new Point(endI, endJ); 
  MoveStep step = new MoveStep(pStart, pEnd); 
  棋谱.add(step); 
 
  String 棋子类别 = piece.棋子类别(); 
  String name = piece.getName(); 
  String m = "#" + 棋子类别 + name + ": " + startI + numberToLetter(startJ) 
    + " 到 " + endI + numberToLetter(endJ); 
  text.append(m); 
  if (piece.棋子类别().equals(board.黑方颜色)) 
   text.append("\n"); 
 } 
 
 public void 记录吃掉的棋子(Object object) { 
  吃掉的棋子.add(object); 
 } 
 
 public LinkedList 获取棋谱() { 
  return 棋谱; 
 } 
 
 public void actionPerformed(ActionEvent e) { 
  int position = text.getText().lastIndexOf("#"); 
  if (position != -1) 
   text.replaceRange("", position, text.getText().length()); 
  if (棋谱.size() &gt; 0) { 
   MoveStep lastStep = (MoveStep) 棋谱.getLast(); 
   棋谱.removeLast(); 
   Object qizi = 吃掉的棋子.getLast(); 
   吃掉的棋子.removeLast(); 
   String temp = qizi.toString(); 
   if (temp.equals("没吃棋子")) { 
    int startI = lastStep.pStart.x; 
    int startJ = lastStep.pStart.y; 
    int endI = lastStep.pEnd.x; 
    int endJ = lastStep.pEnd.y; 
    ChessPiece piece = point[endI][endJ].getPiece(); 
 
    point[startI][startJ].setPiece(piece, board); 
    (point[endI][endJ]).set有棋子(false); 
 
    if (piece.棋子类别().equals(board.红方颜色)) { 
     board.红方走棋 = true; 
     board.黑方走棋 = false; 
    } 
    if (piece.棋子类别().equals(board.黑方颜色)) { 
     board.黑方走棋 = true; 
     board.红方走棋 = false; 
    } 
   } else { 
    ChessPiece removedPiece = (ChessPiece) qizi; 
    int startI = lastStep.pStart.x; 
    int startJ = lastStep.pStart.y; 
    int endI = lastStep.pEnd.x; 
    int endJ = lastStep.pEnd.y; 
    ChessPiece piece = point[endI][endJ].getPiece(); 
    point[startI][startJ].setPiece(piece, board); 
    point[endI][endJ].setPiece(removedPiece, board); 
    (point[endI][endJ]).set有棋子(true); 
 
    if (piece.棋子类别().equals(board.红方颜色)) { 
     board.红方走棋 = true; 
     board.黑方走棋 = false; 
    } 
    if (piece.棋子类别().equals(board.黑方颜色)) { 
     board.黑方走棋 = true; 
     board.红方走棋 = false; 
    } 
   } 
  } 
 } 
} 
</pre>
</div>
<p>8.演示棋谱类文件Demon.java<br />
</p>
<div class="phpstudycode">
<pre class="brush:java;">
package cn.edu.ouc.chineseChess; 
 
import javax.swing.*; 
import java.awt.*; 
import java.awt.event.*; 
import java.util.*; 
 
/** 
 * 演示棋谱类 
 * 
 * @author cnlht 
 */ 
public class Demon extends JPanel implements ActionListener, Runnable { 
 public JButton replay = null, next = null, auto = null, stop = null; 
 LinkedList 棋谱 = null; 
 Thread 自动演示 = null; 
 int index = -1; 
 ChessBoard board = null; 
 JTextArea text; 
 JTextField 时间间隔 = null; 
 int time = 1000; 
 String 演示过程 = ""; 
 JSplitPane splitH = null, splitV = null; 
 
 public Demon(ChessBoard board) { 
  this.board = board; 
  replay = new JButton("重新演示"); 
  next = new JButton("下一步"); 
  auto = new JButton("自动演示"); 
  stop = new JButton("暂停演示"); 
  自动演示 = new Thread(this); 
  replay.addActionListener(this); 
  next.addActionListener(this); 
  auto.addActionListener(this); 
  stop.addActionListener(this); 
  text = new JTextArea(); 
  时间间隔 = new JTextField("1"); 
  setLayout(new BorderLayout()); 
  JScrollPane pane = new JScrollPane(text); 
  JPanel p = new JPanel(new GridLayout(3, 2)); 
  p.add(next); 
  p.add(replay); 
  p.add(auto); 
  p.add(stop); 
  p.add(new JLabel("时间间隔(秒)", SwingConstants.CENTER)); 
  p.add(时间间隔); 
  splitV = new JSplitPane(JSplitPane.VERTICAL_SPLIT, pane, p); 
  splitH = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT, board, splitV); 
  splitV.setDividerSize(5); 
  splitV.setDividerLocation(400); 
  splitH.setDividerSize(5); 
  splitH.setDividerLocation(460); 
  add(splitH, BorderLayout.CENTER); 
  validate(); 
 } 
 
 public void set棋谱(LinkedList 棋谱) { 
  this.棋谱 = 棋谱; 
 } 
 
 public char numberToLetter(int n) { 
  char c = '\0'; 
  switch (n) { 
  case 1: 
   c = 'A'; 
   break; 
  case 2: 
   c = 'B'; 
   break; 
  case 3: 
   c = 'C'; 
   break; 
  case 4: 
   c = 'D'; 
   break; 
  case 5: 
   c = 'E'; 
   break; 
  case 6: 
   c = 'F'; 
   break; 
  case 7: 
   c = 'G'; 
   break; 
  case 8: 
   c = 'H'; 
   break; 
  case 9: 
   c = 'I'; 
   break; 
  case 10: 
   c = 'J'; 
   break; 
  } 
  return c; 
 } 
 
 public void actionPerformed(ActionEvent e) { 
  if (e.getSource() == next) { 
   index++; 
   if (index &lt; 棋谱.size()) { 
    演示一步(index); 
   } else { 
    演示结束("棋谱演示完毕"); 
   } 
  } 
  if (e.getSource() == replay) { 
   board = new ChessBoard(45, 45, 9, 10); 
   splitH.remove(board); 
   splitH.setDividerSize(5); 
   splitH.setDividerLocation(460); 
   splitH.setLeftComponent(board); 
   splitH.validate(); 
   index = -1; 
   text.setText(null); 
  } 
  if (e.getSource() == auto) { 
   next.setEnabled(false); 
   replay.setEnabled(false); 
   try { 
    time = 1000 * Integer.parseInt(时间间隔.getText().trim()); 
   } catch (NumberFormatException ee) { 
    time = 1000; 
   } 
 
   if (!(自动演示.isAlive())) { 
    自动演示 = new Thread(this); 
    board = new ChessBoard(45, 45, 9, 10); 
    splitH.remove(board); 
    splitH.setDividerSize(5); 
    splitH.setDividerLocation(460); 
    splitH.setLeftComponent(board); 
    splitH.validate(); 
    text.setText(null); 
    自动演示.start(); 
   } 
 
  } 
  if (e.getSource() == stop) { 
   if (e.getActionCommand().equals("暂停演示")) { 
    演示过程 = "暂停演示"; 
    stop.setText("继续演示"); 
    stop.repaint(); 
   } 
   if (e.getActionCommand().equals("继续演示")) { 
    演示过程 = "继续演示"; 
    自动演示.interrupt(); 
    stop.setText("暂停演示"); 
    stop.repaint(); 
   } 
  } 
 } 
 
 public synchronized void run() { 
  for (index = 0; index &lt; 棋谱.size(); index++) { 
   try { 
    Thread.sleep(time); 
   } catch (InterruptedException e) { 
   } 
   while (演示过程.equals("暂停演示")) { 
    try { 
     wait(); 
    } catch (InterruptedException e) { 
     notifyAll(); 
    } 
   } 
   演示一步(index); 
  } 
  if (index &gt;= 棋谱.size()) { 
   演示结束("棋谱演示完毕"); 
   next.setEnabled(true); 
   replay.setEnabled(true); 
  } 
 } 
 
 public void 演示一步(int index) { 
  MoveStep step = (MoveStep) 棋谱.get(index); 
  Point pStart = step.pStart; 
  Point pEnd = step.pEnd; 
  int startI = pStart.x; 
  int startJ = pStart.y; 
  int endI = pEnd.x; 
  int endJ = pEnd.y; 
  ChessPiece piece = (board.point)[startI][startJ].getPiece(); 
  if ((board.point)[endI][endJ].isPiece() == true) { 
   ChessPiece pieceRemoved = (board.point)[endI][endJ].getPiece(); 
   (board.point)[endI][endJ].reMovePiece(pieceRemoved, board); 
   board.repaint(); 
   (board.point)[endI][endJ].setPiece(piece, board); 
   (board.point)[startI][startJ].set有棋子(false); 
   board.repaint(); 
  } else { 
   (board.point)[endI][endJ].setPiece(piece, board); 
   (board.point)[startI][startJ].set有棋子(false); 
 
  } 
  String 棋子类别 = piece.棋子类别(); 
  String name = piece.getName(); 
  String m = "#" + 棋子类别 + name + ": " + startI + numberToLetter(startJ) 
    + " 到 " + endI + numberToLetter(endJ); 
  text.append(m); 
  if (piece.棋子类别().equals(board.黑方颜色)) 
   text.append("\n"); 
 } 
 
 public void 演示结束(String message) { 
  splitH.remove(board); 
  splitH.setDividerSize(5); 
  splitH.setDividerLocation(460); 
  JLabel label = new JLabel(message); 
  label.setFont(new Font("隶书", Font.BOLD, 40)); 
  label.setForeground(Color.blue); 
  label.setHorizontalAlignment(SwingConstants.CENTER); 
  splitH.setLeftComponent(label); 
  splitH.validate(); 
 } 
} 
</pre>
</div>
<p><strong>四、总结与要求<br />
</strong>1.理解8个文件，没有太复杂的代码。<br />
2.理解鼠标的MouseListener,MouseMotionListener两个接口的区别，五子棋的实现不需要MouseMotionListener。<br />
3.使用LinkedList记录棋谱的方法。</p>
<p>希望大家喜欢这篇文章，制作一款属于自己的中国象棋游戏。</p>
<hr></span>                                     
		    	</div>
		    	<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>代码注释</div>
			    <div class="panel-content">
			    <span></span>                                     
		    	</div>

			</div>

			<!-- END ROW -->
			<div class="newsPage">
				<div class="newsPageTurn">
				    <span><a>上一篇</a><a href='/php/biji/96742.html'>Android学习笔记之应用单元测试实例分析</a><a>下一篇</a><a href='/php/biji/96744.html'>MySQL中触发器入门简单实例与介绍</a></span>
				</div>
			</div>
		</div>


<div id="author-box">
    <h3>作者：喵哥笔记</h3>
        <div class="author-info">
            <div class="author-avatar">
                <img src="/skin1/picture/01.jpg" alt="IDC笔记" class="avatar" width="64" height="64">
            </div>
        <div class="author-description">
            <p>学的不仅是技术，更是梦想！</p>
            <ul class="author-social follows nb">
            	<li>
                    <a target="_blank" href="/" title="IDC笔记">IDC笔记</a>
                </li>
            </ul>
        </div>
        <div class="clear"></div>
    </div>
</div>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
<!-- container-fluid -->
	</div>
<!-- content -->
	<footer class="footer">
	© 2020 IDC笔记 <i class="mdi mdi-heart text-danger"></i>. | 备案号：<a href="https://beian.miit.gov.cn/">辽ICP备18000516号</a>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?674585fbbd2294d3faf910f668ea91b4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

	</footer>
</div>

</div>
<!-- END wrapper -->
<!-- jQuery  -->
<script src="/skin1/js/jquery.min.js"></script>
<script src="/skin1/js/bootstrap.bundle.min.js"></script>
<script src="/skin1/js/metismenu.min.js"></script>
<script src="/skin1/js/jquery.slimscroll.js"></script>
<script src="/skin1/js/waves.min.js"></script>
<!--Morris Chart-->
<script src="/skin1/js/morris.min.js"></script>
<script src="/skin1/js/raphael.min.js"></script>
<script src="/skin1/js/dashboard.init.js"></script>
<script src="/skin1/js/app.js"></script>
<script src="/foot.js"></script>
</body>
</html>