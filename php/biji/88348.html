<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title>Android实现横向二级菜单_PHP教程_IDC笔记</title>
    <meta name="keywords" content="PHP,PHP笔记,PHP教程" />
    <meta name="description" content="本文实例为大家分享了Android二级横向菜单的实现过程.效果如上图：<br />
 <br />
  这种横向的二级菜单在很多的app都有所应用.效果看起来还是非常的美观的.也算是项目需要,自己也就学了" />
    <meta content="Responsive admin theme build on top of Bootstrap 4" name="description" />
    <meta content="idcnote.com" name="author" />
    <link rel="shortcut icon" href="/skin1/images/favicon.ico">
    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="/skin1/css/morris.css">
    <link href="/skin1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/metismenu.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/icons.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/style.css" rel="stylesheet" type="text/css">
<link href="/SyntaxHighlighter/shCoreDefault.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/SyntaxHighlighter/shCore.js"></script>
<script type="text/javascript">
 SyntaxHighlighter.all();
</script>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
</head>
<body>
<!-- Begin page -->
		<div id="wrapper">
			<!-- Top Bar Start -->
			<div class="topbar">
				<!-- LOGO -->
				<div class="topbar-left">
					<a href="/" class="logo">
						<span class="logo-light">
                            <i class="mdi mdi-camera-control"></i>IDC笔记
                        </span>
						<span class="logo-sm">
                            <i class="mdi mdi-camera-control"></i>
                        </span>
					</a>
				</div>
				<nav class="navbar-custom">
					<ul class="navbar-right list-inline float-right mb-0">
						<!--<li class="dropdown notification-list list-inline-item d-none d-md-inline-block">
							<a class="nav-link waves-effect" href="#" id="btn-fullscreen">
								<i class="mdi mdi-arrow-expand-all noti-icon"></i>
							</a>
						</li>
						<li class="dropdown notification-list list-inline-item">
							<div class="dropdown notification-list nav-pro-img">
								<a class="dropdown-toggle nav-link arrow-none nav-user" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
									<img src="/skin1/picture/user-4.jpg" alt="user" class="rounded-circle">
								</a>
								<div class="dropdown-menu dropdown-menu-right profile-dropdown ">
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-account-circle"></i> Profile</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-wallet"></i> Wallet</a>
									<a class="dropdown-item d-block" href="#">
										<span class="badge badge-success float-right">11</span>
										<i class="mdi mdi-settings"></i> Settings</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-lock-open-outline"></i> Lock screen</a>
									<div class="dropdown-divider"></div>
									<a class="dropdown-item text-danger" href="#">
										<i class="mdi mdi-power text-danger"></i> Logout</a>
								</div>
							</div>
						</li>
						-->
					</ul>
					<ul class="list-inline menu-left mb-0">
						<li class="float-left">
							<button class="button-menu-mobile open-left waves-effect">
                            <i class="mdi mdi-menu"></i>
                        </button>
						</li>
						<li class="d-none d-md-inline-block">
							<form role="search" class="app-search">
								<div class="form-group mb-0">
									<input type="text" class="form-control" placeholder="Search..">
									<button type="submit"><i class="fa fa-search"></i></button>
								</div>
							</form>
						</li>
					</ul>
				</nav>
			</div>
<!-- ========== Left Sidebar Start ========== -->
<div class="left side-menu">
    <div class="slimscroll-menu" id="remove-scroll">
    <!--- Sidemenu -->
    <div id="sidebar-menu">
    <!-- Left Menu Start -->
    <ul class="metismenu" id="side-menu">
			<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP简介			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jianjie/1.html">PHP简介</a></li><li><a href="/php/jianjie/2.html">PHP用途</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP基本语法			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yufa/3.html">分离HTML</a></li><li><a href="/php/yufa/4.html">指令分隔符</a></li><li><a href="/php/yufa/5.html">PHP注释</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类型			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpleixing/6.html">PHP类型简介</a></li><li><a href="/php/phpleixing/7.html">PHP类型之布尔类型</a></li><li><a href="/php/phpleixing/8.html">PHP类型之整型</a></li><li><a href="/php/phpleixing/9.html">PHP类型之浮点型</a></li><li><a href="/php/phpleixing/10.html">PHP类型之字符串</a></li><li><a href="/php/phpleixing/11.html">PHP类型之数组</a></li><li><a href="/php/phpleixing/12.html">PHP类型之对象</a></li><li><a href="/php/phpleixing/13.html">PHP类型之资源类型</a></li><li><a href="/php/phpleixing/14.html">PHP类型之NULL</a></li><li><a href="/php/phpleixing/15.html">PHP类型之伪类型</a></li><li><a href="/php/phpleixing/16.html">PHP类型之类型判别</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP变量			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbianliang/17.html">PHP变量之基础</a></li><li><a href="/php/phpbianliang/18.html">PHP变量之预定义变量</a></li><li><a href="/php/phpbianliang/19.html">PHP变量之变量范围</a></li><li><a href="/php/phpbianliang/20.html">PHP变量之可变变量</a></li><li><a href="/php/phpbianliang/21.html">PHP变量之外部变量</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP运算符			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yunsuanfu/22.html">PHP运算符优先级</a></li><li><a href="/php/yunsuanfu/23.html">算术运算符</a></li><li><a href="/php/yunsuanfu/24.html">赋值运算符</a></li><li><a href="/php/yunsuanfu/25.html">位运算符</a></li><li><a href="/php/yunsuanfu/26.html">比较运算符</a></li><li><a href="/php/yunsuanfu/27.html">错误控制运算符</a></li><li><a href="/php/yunsuanfu/28.html">执行运算符</a></li><li><a href="/php/yunsuanfu/29.html">递增/递减运算符</a></li><li><a href="/php/yunsuanfu/30.html">逻辑运算符</a></li><li><a href="/php/yunsuanfu/31.html">字符串运算符</a></li><li><a href="/php/yunsuanfu/32.html">数组运算符</a></li><li><a href="/php/yunsuanfu/33.html">类型运算符</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP控制结构			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jiegou/34.html">PHP控制结构之if</a></li><li><a href="/php/jiegou/35.html">PHP控制结构之else</a></li><li><a href="/php/jiegou/36.html">PHP控制结构之elseif/else if</a></li><li><a href="/php/jiegou/37.html">PHP控制结构之替代语法</a></li><li><a href="/php/jiegou/38.html">PHP控制结构之while</a></li><li><a href="/php/jiegou/39.html">PHP控制结构之do-while</a></li><li><a href="/php/jiegou/40.html">PHP控制结构之for</a></li><li><a href="/php/jiegou/41.html">PHP控制结构之foreach</a></li><li><a href="/php/jiegou/42.html">PHP控制结构之break</a></li><li><a href="/php/jiegou/43.html">PHP控制结构之continue</a></li><li><a href="/php/jiegou/44.html">PHP控制结构之switch</a></li><li><a href="/php/jiegou/45.html">PHP控制结构之declare</a></li><li><a href="/php/jiegou/46.html">PHP控制结构之return</a></li><li><a href="/php/jiegou/47.html">PHP控制结构之require</a></li><li><a href="/php/jiegou/48.html">PHP控制结构之include</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/hanshu/52.html">用户自定义函数</a></li><li><a href="/php/hanshu/53.html">函数的参数</a></li><li><a href="/php/hanshu/54.html">返回值</a></li><li><a href="/php/hanshu/55.html">可变函数</a></li><li><a href="/php/hanshu/56.html">内部（内置）函数</a></li><li><a href="/php/hanshu/57.html">匿名函数</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类与对象			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpduixiang/58.html">类与对象前言</a></li><li><a href="/php/phpduixiang/59.html">基本概念</a></li><li><a href="/php/phpduixiang/60.html">属性</a></li><li><a href="/php/phpduixiang/61.html">类常量</a></li><li><a href="/php/phpduixiang/62.html">自动加载对象</a></li><li><a href="/php/phpduixiang/63.html">构造函数和析构函数</a></li><li><a href="/php/phpduixiang/64.html">访问控制</a></li><li><a href="/php/phpduixiang/65.html">对象继承</a></li><li><a href="/php/phpduixiang/66.html">Static关键字</a></li><li><a href="/php/phpduixiang/67.html">抽象类</a></li><li><a href="/php/phpduixiang/68.html">接口</a></li><li><a href="/php/phpduixiang/69.html">Traits</a></li><li><a href="/php/phpduixiang/70.html">重载</a></li><li><a href="/php/phpduixiang/71.html">对象迭代</a></li><li><a href="/php/phpduixiang/72.html">设计模式</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP异常处理			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yichang/81.html">异常处理</a></li><li><a href="/php/yichang/82.html">扩展PHP内置的异常处理类</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数库按分类			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpku/83.html">数组</a></li><li><a href="/php/phpku/84.html">Classes/Objects</a></li><li><a href="/php/phpku/85.html">Date/Time</a></li><li><a href="/php/phpku/86.html">Directories</a></li><li><a href="/php/phpku/87.html">错误处理</a></li><li><a href="/php/phpku/88.html">Program execution</a></li><li><a href="/php/phpku/89.html">Filesystem</a></li><li><a href="/php/phpku/90.html">Filter</a></li><li><a href="/php/phpku/91.html">Function Handling</a></li><li><a href="/php/phpku/92.html">PHP 选项/信息</a></li><li><a href="/php/phpku/93.html">Mail</a></li><li><a href="/php/phpku/94.html">Math</a></li><li><a href="/php/phpku/95.html">Misc.</a></li><li><a href="/php/phpku/96.html">Network</a></li><li><a href="/php/phpku/97.html">输出控制</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> php基础			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbiji/108377.html"></a></li><li><a href="/php/phpbiji/108376.html"></a></li><li><a href="/php/phpbiji/108380.html"></a></li><li><a href="/php/phpbiji/108379.html"></a></li><li><a href="/php/phpbiji/108378.html"></a></li><li><a href="/php/phpbiji/108381.html"></a></li><li><a href="/php/phpbiji/108382.html"></a></li><li><a href="/php/phpbiji/108384.html"></a></li><li><a href="/php/phpbiji/108383.html"></a></li><li><a href="/php/phpbiji/108385.html"></a></li><li><a href="/php/phpbiji/108386.html"></a></li><li><a href="/php/phpbiji/108388.html"></a></li><li><a href="/php/phpbiji/108387.html"></a></li><li><a href="/php/phpbiji/108389.html"></a></li><li><a href="/php/phpbiji/108391.html"></a></li>		</ul>
	</li>
		<li>
	    <a href="/php/biji/" class="waves-effect">
		    <i class="icon-share"></i>
		    <span>PHP笔记
		       	<span class="float-right menu-arrow">
		       	<i class="mdi mdi-chevron-right"></i>
		       	</span>
		    </span>
	    </a>
	</li>
	</ul>
</div>
<!-- Sidebar -->
<div class="clearfix"></div>
</div>
<!-- Sidebar -left -->
</div>
<!-- Left Sidebar End -->
<!-- Start right Content here -->
<div class="content-page">
	<div class="content">
		<div class="container-fluid">
			<div class="page-title-box">
				<div class="row align-items-center">
					<div class="col-sm-6">
						<h1 class="page-title">Android实现横向二级菜单</h1>
					</div>
				</div>
				<!-- end row -->
			</div>
			<!-- end page-title -->
			<!-- START ROW -->
			<div class="panel panel-forbid">
				<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>内容摘要</div>
			    <div class="panel-content">
			    <span>本文实例为大家分享了Android二级横向菜单的实现过程.效果如上图：<br />
 <br />
  这种横向的二级菜单在很多的app都有所应用.效果看起来还是非常的美观的.也算是项目需要,自己也就学了</span>                                     
		    	</div>
			    <div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>文章正文</div>
			    <div class="panel-content">
			    <span><p>本文实例为大家分享了Android二级横向菜单的实现过程.效果如上图：</p>
<p style="text-align: center">&nbsp;</p>
<p>&nbsp; 这种横向的二级菜单在很多的app都有所应用.效果看起来还是非常的美观的.也算是项目需要,自己也就学了一下这个效果,首先说一下逻辑.实现的方式其实并不是很难..只不过逻辑上可能有点复杂.原理其实就是一个按钮.当触发按钮的时候弹出PopWindow.PopWindow由两个ListView构成..对两个ListView适当的适配.就可以实现这个效果了..</p>
<p>&nbsp; 实现这种效果可以有两种不同的方式..一种是直接在布局文件layout.xml中写..最上方的可以是一个按钮.也可以是多个按钮..多个按钮就可以使用RadioGroup去实现..下方则采用ScrollView去实现也是可以的..</p>
<p>&nbsp; 不过我还是说一下第二种方式..直接用Java去写这个布局..通过使用自定义控件的方式实现这个效果..既然是自定义,那么首先我们需要继承一个布局.布局可以使用LinearLayout或者RelativeLayout.</p>
<p><span style="color: #800000"><strong>&nbsp; setValue()方法..</strong></span></p>
<p>&nbsp; setValue()方法是自定义的方法..主要是用于加载布局.以及在布局当中添加相关的View.没有加载任何的xml文件..</p>
<div class="phpstudycode">
<pre class="brush:java;">
  /**
   * @param textArray: ListView中item对应的text值的集合..
   * @param viewArray: 当前Layout中需要加入的View.. 
   * */
  @SuppressLint("ResourceAsColor") 
  public void setValue(ArrayList&lt;String&gt; textArray, ArrayList&lt;View&gt; viewArray) {
    if (mContext == null) {
      return;
    }
    LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    mTextList = textArray;
    for (int i = 0; i &lt; viewArray.size(); i++) {
      
      //这里就添加了一个View..
      final RelativeLayout r = new RelativeLayout(mContext);
      int maxHeight = (int) (displayHeight * 0.5);  //定义布局的高度..
      
      
      RelativeLayout.LayoutParams rl = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT, maxHeight);
      r.addView(viewArray.get(i), rl); //在布局中添加View并指定参数
      
      
      mViewList.add(r);
      r.setTag(SMALL);
      
      //定义最上方的按钮,并在布局中添加这个按钮。并设置按钮的text
      ToggleButton tButton = (ToggleButton) inflater.inflate(R.layout.toggle_button, this, false);
      addView(tButton);
      mToggleList.add(tButton);
      tButton.setTag(i);
      tButton.setText(mTextList.get(i));
      
      //用于实现当PopWindow显示时.再次点击收回PopWindow
      r.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
          onPressBack();
        }
      });

      r.setBackgroundColor(mContext.getResources().getColor(R.color.popup_main_background));
      
      //当按钮被点击后需要触发的监听
      tButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View view) {
          
          
          ToggleButton tButton = (ToggleButton) view;
          /** 如果当前点击的按钮与上次的点击不同.则设置当前的按钮处于点击状态 */
          if (selectedButton != null && selectedButton != tButton) {
            selectedButton.setChecked(false);
          }
          selectedButton = tButton;
          selectPosition = (Integer) selectedButton.getTag();
          /** 按钮被点击后,需要触发对应的监听事件.*/
          startAnimation();
          if (mOnButtonClickListener != null && tButton.isChecked()) {
            mOnButtonClickListener.onClick(selectPosition);
          }
        }
      });
    }
  }
</pre>
</div>
<p>&nbsp; 那么设置完了布局的样式后..只有一个ToggleButton按钮.点击后没有任何的效果.我们需要去定义一个新的View视图.用于点击按钮后需要显示的弹出窗.那么这个弹出窗也需要自定义..</p>
<p>&nbsp;弹出窗则采用两个ListView的形式进行显示.在布局中将两个ListView进行添加.对每一个ListView设置相应的适配器.然后将这个View添加到上面的主View当中.就可以实现当button被点击后，弹出窗在下方进行显示的效果..</p>
<p>&nbsp;ChildView() 弹出窗View的布局实现方式..</p>
<p>&nbsp;这里定义了这个View,并完成相应的初始化操作.设置对应的适配器也就完成了..</p>
<p></p>
<div class="phpstudycode">
<pre class="brush:java;">
package com.example.view;

import java.util.ArrayList;
import java.util.LinkedList;

import android.content.Context;
import android.util.AttributeSet;
import android.util.SparseArray;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.LinearLayout;
import android.widget.ListView;

import com.example.adapter.TextAdapter;
import com.example.expandtabview.R;

public class ChildView extends LinearLayout {
  
  private ListView regionListView;  //主ListView
  private ListView plateListView;  //子ListView
  
  //主ListView每一个Item对应的text
  private String LeftFaString[] = new String[] { "美食", "快餐小吃", "火锅", "海鲜/烧烤",
      "特色菜", "香锅/烤鱼", "地方菜", "东南亚菜", "西餐", "日韩料理" };
  //子ListView每一个Item对应的text..采用了二维数组的实现方式..
  private String LeftCh1String[][] = new String[][] {
      { "全部" },
      { "全部", "中式简餐", "地方小吃", "盖浇饭", "米粉米线", "面馆", "麻辣烫", "黄焖鸡米饭",
          "鸭脖卤味", "饺子馄饨", "炸鸡炸串", "包子/粥", "零食", "生煎锅贴", "冒菜" },
      { "全部", "其他火锅" }, { "全部", "小龙虾" }, { "全部" }, { "全部", "香锅", "烤鱼" },
      { "全部", "鲁菜", "川菜", "其他" }, { "全部" },
      { "全部", "意面披萨", "西式快餐", "其他西餐" }, { "全部", "韩式简餐", "韩国料理" } };

  //添加主ListView中的数据信息
  private ArrayList&lt;String&gt; groups = new ArrayList&lt;String&gt;();
  
  //添加子ListView中的数据信息
  private LinkedList&lt;String&gt; childrenItem = new LinkedList&lt;String&gt;();
  
  //稀疏数组
  private SparseArray&lt;LinkedList&lt;String&gt;&gt; children = new SparseArray&lt;LinkedList&lt;String&gt;&gt;();
  //为ListView设置适配器
  private TextAdapter plateListViewAdapter;
  private TextAdapter earaListViewAdapter;
  //监听事件的设置
  private OnSelectListener mOnSelectListener;
  
  private int tEaraPosition = 0;   //用于保存当前主ListView被点击的Item对应的Position.
  private int tBlockPosition = 0;    //用于保存当前子ListView被点击的Item对应的Position.
  
  private String showString = "";

  public ChildView(Context context) {
    super(context);
    init(context);
  }

  public ChildView(Context context, AttributeSet attrs) {
    super(context, attrs);
    init(context);
  }


  private void init(Context context) {
    LayoutInflater inflater = (LayoutInflater) context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    
    //加载布局,绑定ID.
    inflater.inflate(R.layout.view_region, this, true);
    regionListView = (ListView) findViewById(R.id.listView);
    plateListView = (ListView) findViewById(R.id.listView2);

    //初始化ListView中每一个item对应的text
    for(int i=0;i&lt;10;i++){
      groups.add(LeftFaString[i]);
      LinkedList&lt;String&gt; tItem = new LinkedList&lt;String&gt;();
      for(int j=0;j&lt;LeftCh1String[i].length;j++){
        
        tItem.add(LeftCh1String[i][j]);
        
      }
      children.put(i, tItem);
    }

    //主ListView列表项的适配器
    earaListViewAdapter = new TextAdapter(context, groups,
        R.drawable.choose,
        R.drawable.choose_eara_item_selector);
    earaListViewAdapter.setTextSize(12);
    earaListViewAdapter.setSelectedPositionNoNotify(tEaraPosition);
    
    regionListView.setAdapter(earaListViewAdapter);
    
    earaListViewAdapter
        .setOnItemClickListener(new TextAdapter.OnItemClickListener() {

          @Override
          public void onItemClick(View view, int position) {
            if (position &lt; children.size()) {
              childrenItem.clear();
              //获取这一页的所有数据信息..然后唤醒适配器更新数据
              childrenItem.addAll(children.get(position));
              plateListViewAdapter.notifyDataSetChanged();
            }
          }
        });
    
    if (tEaraPosition &lt; children.size())
      childrenItem.addAll(children.get(tEaraPosition));
    
    
    //子ListView的适配器
    plateListViewAdapter = new TextAdapter(context, childrenItem,
        R.drawable.choose_item_right,
        R.drawable.choose_plate_item_selector);
    plateListViewAdapter.setTextSize(12);
    plateListViewAdapter.setSelectedPositionNoNotify(tBlockPosition);
    plateListView.setAdapter(plateListViewAdapter);
    //设置当Item被点击后触发的监听.
    plateListViewAdapter
        .setOnItemClickListener(new TextAdapter.OnItemClickListener() {

          @Override
          public void onItemClick(View view, final int position) {
            //获取被点击的Item的文字数据
            showString = childrenItem.get(position);
            if (mOnSelectListener != null) {
              
              mOnSelectListener.getValue(showString);
            }

          }
        });
    
    if (tBlockPosition &lt; childrenItem.size())
      showString = childrenItem.get(tBlockPosition);
    setDefaultSelect();

  }
  
  //设置当前Item的Position.
  public void setDefaultSelect() {
    //默认选择的Item项
    regionListView.setSelection(tEaraPosition);
    plateListView.setSelection(tBlockPosition);
  }

  public String getShowText() {
    return showString;
  }

  public void setOnSelectListener(OnSelectListener onSelectListener) {
    mOnSelectListener = onSelectListener;
  }

  public interface OnSelectListener {
    public void getValue(String showText);
  }

}

</pre>
</div>
<p>&nbsp; 那么最后就剩下适配器了..</p>
<p><span style="color: #800000"><strong>&nbsp; ArrayAdapter&lt;String&gt;</strong></span></p>
<p>&nbsp; 这里使用了ArrayAdapter适配器.继承与BaseAdapter.可以用于显示文本数据..我们也都知道,适配器必须要实现的方法就是getView()方法了..那么我们就简单的看一下这个方法..</p>
<div class="phpstudycode">
<pre class="brush:java;">
  @SuppressLint("ResourceAsColor") @SuppressWarnings("deprecation")
  @Override
  public View getView(int position, View convertView, ViewGroup parent) {
    TextView view;
    if (convertView == null) {
      view = (TextView) LayoutInflater.from(mContext).inflate(R.layout.choose_item, parent, false);
    } else {
      view = (TextView) convertView;
    }
    view.setTag(position);
    String mString = "";
    if (mListData != null) {
      if (position &lt; mListData.size()) {
        mString = mListData.get(position);
      }
    } else if (mArrayData != null) {
      if (position &lt; mArrayData.length) {
        mString = mArrayData[position];
      }
    }
    if (mString.contains("不限"))
      view.setText("不限");
    else
      view.setText(mString);
    view.setTextSize(TypedValue.COMPLEX_UNIT_SP,textSize);

    if (selectedText != null && selectedText.equals(mString)) {
      view.setBackgroundDrawable(selectedDrawble);//设置选中的背景图片
    } else {
      view.setBackgroundDrawable(mContext.getResources().getDrawable(normalDrawbleId));//设置未选中状态背景图片
    }
    view.setPadding(20, 0, 0, 0);
    view.setOnClickListener(onClickListener);
    return view;
  }
</pre>
</div>
<p>&nbsp; 适配的工作还是非常的简单的.仅仅一个TextView就可以搞定了.当然我们也可以写一个比较复杂的样式.在一个Layout内部定义一些复杂的控件.就能够实现更好的效果.</p>
<p>&nbsp; 最后再MainActivity中的布局文件中加载这个控件，简单的做一些初始化操作就可以实现了..</p>
<p></p>
<div class="phpstudycode">
<pre class="brush:java;">
package com.example.expandtabview;


import java.util.ArrayList;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Toast;

import com.example.view.ExpandTabView;
import com.example.view.ChildView;

public class MainActivity extends Activity {

  private ExpandTabView expandTabView;
  private ArrayList&lt;View&gt; mViewArray = new ArrayList&lt;View&gt;();
  private ChildView viewLeft;
  
  @Override
  protected void onCreate(Bundle savedInstanceState) {
    
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    initView();
    initVaule();
    initListener();
    
  }

  private void initView() {
    
    //初始化控件
    expandTabView = (ExpandTabView) findViewById(R.id.expandtab_view);
    viewLeft = new ChildView(this);
    
  }

  private void initVaule() {
    
    mViewArray.add(viewLeft);
    
    //设置顶部数据信息
    ArrayList&lt;String&gt; mTextArray = new ArrayList&lt;String&gt;();
    mTextArray.add("全部");
    expandTabView.setValue(mTextArray, mViewArray);
    expandTabView.setTitle(viewLeft.getShowText(), 0);
    
  }

  private void initListener() {
    
    
    viewLeft.setOnSelectListener(new ChildView.OnSelectListener() {
      
      @Override
      public void getValue(String showText) {
        
        onRefresh(viewLeft,showText);
        
      }
    });
    
    
  }
  
  //视图被点击后刷新数据
  private void onRefresh(View view, String showText) {
    
    expandTabView.onPressBack();
    int position = getPositon(view);
    if (position &gt;= 0 && !expandTabView.getTitle(position).equals(showText)) {
      expandTabView.setTitle(showText, position);
    }
    Toast.makeText(MainActivity.this, showText, Toast.LENGTH_SHORT).show();

  }
  
  //获取当前的view
  private int getPositon(View tView) {
    for (int i = 0; i &lt; mViewArray.size(); i++) {
      if (mViewArray.get(i) == tView) {
        return i;
      }
    }
    return -1;
  }
}

</pre>
</div>
<p>&nbsp;这里只是贴了一些核心代码.其他的涉及的一些不重要的代码就不在这里粘贴了..最后放一张图片流程.方便大家去理解.最后给出源代码.</p>
<p style="text-align: center"></p>
<p>&nbsp;放一个源代码提供下载，方便去理解这个过程:<a target="_blank" href="http://xiazai.phpstudy.net/201603/yuanma/AndroidTabView(phpstudy.net).rar"><strong>Android实现横向二级菜单</strong></a></p>
<p>以上就是本文的全部内容，希望对大家的学习有所帮助。</p>
<hr></span>                                     
		    	</div>
		    	<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>代码注释</div>
			    <div class="panel-content">
			    <span></span>                                     
		    	</div>

			</div>

			<!-- END ROW -->
			<div class="newsPage">
				<div class="newsPageTurn">
				    <span><a>上一篇</a><a href='/php/biji/88347.html'>CSS3 @font-face属性使用指南</a><a>下一篇</a><a href='/php/biji/88349.html'>Win10系统中使用Win8系统命令提示符的设置方法图文教程</a></span>
				</div>
			</div>
		</div>


<div id="author-box">
    <h3>作者：喵哥笔记</h3>
        <div class="author-info">
            <div class="author-avatar">
                <img src="/skin1/picture/01.jpg" alt="IDC笔记" class="avatar" width="64" height="64">
            </div>
        <div class="author-description">
            <p>学的不仅是技术，更是梦想！</p>
            <ul class="author-social follows nb">
            	<li>
                    <a target="_blank" href="/" title="IDC笔记">IDC笔记</a>
                </li>
            </ul>
        </div>
        <div class="clear"></div>
    </div>
</div>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
<!-- container-fluid -->
	</div>
<!-- content -->
	<footer class="footer">
	© 2020 IDC笔记 <i class="mdi mdi-heart text-danger"></i>. | 备案号：<a href="https://beian.miit.gov.cn/">辽ICP备18000516号</a>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?674585fbbd2294d3faf910f668ea91b4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

	</footer>
</div>

</div>
<!-- END wrapper -->
<!-- jQuery  -->
<script src="/skin1/js/jquery.min.js"></script>
<script src="/skin1/js/bootstrap.bundle.min.js"></script>
<script src="/skin1/js/metismenu.min.js"></script>
<script src="/skin1/js/jquery.slimscroll.js"></script>
<script src="/skin1/js/waves.min.js"></script>
<!--Morris Chart-->
<script src="/skin1/js/morris.min.js"></script>
<script src="/skin1/js/raphael.min.js"></script>
<script src="/skin1/js/dashboard.init.js"></script>
<script src="/skin1/js/app.js"></script>
<script src="/foot.js"></script>
</body>
</html>