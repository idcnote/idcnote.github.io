<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title>探讨fckeditor在Php中的配置详解_PHP教程_IDC笔记</title>
    <meta name="keywords" content="PHP,PHP笔记,PHP教程" />
    <meta name="description" content="前言：　　FCKeidtor是个国外的多语言编辑器，你可以对其配置文件进行简单修改使之支持目前常用Web开发语言的应用，下面我就讲讲FCKeditor的最新版本2.4.2在php的具体配置过程，有" />
    <meta content="Responsive admin theme build on top of Bootstrap 4" name="description" />
    <meta content="idcnote.com" name="author" />
    <link rel="shortcut icon" href="/skin1/images/favicon.ico">
    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="/skin1/css/morris.css">
    <link href="/skin1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/metismenu.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/icons.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/style.css" rel="stylesheet" type="text/css">
<link href="/SyntaxHighlighter/shCoreDefault.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/SyntaxHighlighter/shCore.js"></script>
<script type="text/javascript">
 SyntaxHighlighter.all();
</script>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
</head>
<body>
<!-- Begin page -->
		<div id="wrapper">
			<!-- Top Bar Start -->
			<div class="topbar">
				<!-- LOGO -->
				<div class="topbar-left">
					<a href="/" class="logo">
						<span class="logo-light">
                            <i class="mdi mdi-camera-control"></i>IDC笔记
                        </span>
						<span class="logo-sm">
                            <i class="mdi mdi-camera-control"></i>
                        </span>
					</a>
				</div>
				<nav class="navbar-custom">
					<ul class="navbar-right list-inline float-right mb-0">
						<!--<li class="dropdown notification-list list-inline-item d-none d-md-inline-block">
							<a class="nav-link waves-effect" href="#" id="btn-fullscreen">
								<i class="mdi mdi-arrow-expand-all noti-icon"></i>
							</a>
						</li>
						<li class="dropdown notification-list list-inline-item">
							<div class="dropdown notification-list nav-pro-img">
								<a class="dropdown-toggle nav-link arrow-none nav-user" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
									<img src="/skin1/picture/user-4.jpg" alt="user" class="rounded-circle">
								</a>
								<div class="dropdown-menu dropdown-menu-right profile-dropdown ">
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-account-circle"></i> Profile</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-wallet"></i> Wallet</a>
									<a class="dropdown-item d-block" href="#">
										<span class="badge badge-success float-right">11</span>
										<i class="mdi mdi-settings"></i> Settings</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-lock-open-outline"></i> Lock screen</a>
									<div class="dropdown-divider"></div>
									<a class="dropdown-item text-danger" href="#">
										<i class="mdi mdi-power text-danger"></i> Logout</a>
								</div>
							</div>
						</li>
						-->
					</ul>
					<ul class="list-inline menu-left mb-0">
						<li class="float-left">
							<button class="button-menu-mobile open-left waves-effect">
                            <i class="mdi mdi-menu"></i>
                        </button>
						</li>
						<li class="d-none d-md-inline-block">
							<form role="search" class="app-search">
								<div class="form-group mb-0">
									<input type="text" class="form-control" placeholder="Search..">
									<button type="submit"><i class="fa fa-search"></i></button>
								</div>
							</form>
						</li>
					</ul>
				</nav>
			</div>
<!-- ========== Left Sidebar Start ========== -->
<div class="left side-menu">
    <div class="slimscroll-menu" id="remove-scroll">
    <!--- Sidemenu -->
    <div id="sidebar-menu">
    <!-- Left Menu Start -->
    <ul class="metismenu" id="side-menu">
			<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP简介			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jianjie/1.html">PHP简介</a></li><li><a href="/php/jianjie/2.html">PHP用途</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP基本语法			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yufa/3.html">分离HTML</a></li><li><a href="/php/yufa/4.html">指令分隔符</a></li><li><a href="/php/yufa/5.html">PHP注释</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类型			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpleixing/6.html">PHP类型简介</a></li><li><a href="/php/phpleixing/7.html">PHP类型之布尔类型</a></li><li><a href="/php/phpleixing/8.html">PHP类型之整型</a></li><li><a href="/php/phpleixing/9.html">PHP类型之浮点型</a></li><li><a href="/php/phpleixing/10.html">PHP类型之字符串</a></li><li><a href="/php/phpleixing/11.html">PHP类型之数组</a></li><li><a href="/php/phpleixing/12.html">PHP类型之对象</a></li><li><a href="/php/phpleixing/13.html">PHP类型之资源类型</a></li><li><a href="/php/phpleixing/14.html">PHP类型之NULL</a></li><li><a href="/php/phpleixing/15.html">PHP类型之伪类型</a></li><li><a href="/php/phpleixing/16.html">PHP类型之类型判别</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP变量			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbianliang/17.html">PHP变量之基础</a></li><li><a href="/php/phpbianliang/18.html">PHP变量之预定义变量</a></li><li><a href="/php/phpbianliang/19.html">PHP变量之变量范围</a></li><li><a href="/php/phpbianliang/20.html">PHP变量之可变变量</a></li><li><a href="/php/phpbianliang/21.html">PHP变量之外部变量</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP运算符			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yunsuanfu/22.html">PHP运算符优先级</a></li><li><a href="/php/yunsuanfu/23.html">算术运算符</a></li><li><a href="/php/yunsuanfu/24.html">赋值运算符</a></li><li><a href="/php/yunsuanfu/25.html">位运算符</a></li><li><a href="/php/yunsuanfu/26.html">比较运算符</a></li><li><a href="/php/yunsuanfu/27.html">错误控制运算符</a></li><li><a href="/php/yunsuanfu/28.html">执行运算符</a></li><li><a href="/php/yunsuanfu/29.html">递增/递减运算符</a></li><li><a href="/php/yunsuanfu/30.html">逻辑运算符</a></li><li><a href="/php/yunsuanfu/31.html">字符串运算符</a></li><li><a href="/php/yunsuanfu/32.html">数组运算符</a></li><li><a href="/php/yunsuanfu/33.html">类型运算符</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP控制结构			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jiegou/34.html">PHP控制结构之if</a></li><li><a href="/php/jiegou/35.html">PHP控制结构之else</a></li><li><a href="/php/jiegou/36.html">PHP控制结构之elseif/else if</a></li><li><a href="/php/jiegou/37.html">PHP控制结构之替代语法</a></li><li><a href="/php/jiegou/38.html">PHP控制结构之while</a></li><li><a href="/php/jiegou/39.html">PHP控制结构之do-while</a></li><li><a href="/php/jiegou/40.html">PHP控制结构之for</a></li><li><a href="/php/jiegou/41.html">PHP控制结构之foreach</a></li><li><a href="/php/jiegou/42.html">PHP控制结构之break</a></li><li><a href="/php/jiegou/43.html">PHP控制结构之continue</a></li><li><a href="/php/jiegou/44.html">PHP控制结构之switch</a></li><li><a href="/php/jiegou/45.html">PHP控制结构之declare</a></li><li><a href="/php/jiegou/46.html">PHP控制结构之return</a></li><li><a href="/php/jiegou/47.html">PHP控制结构之require</a></li><li><a href="/php/jiegou/48.html">PHP控制结构之include</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/hanshu/52.html">用户自定义函数</a></li><li><a href="/php/hanshu/53.html">函数的参数</a></li><li><a href="/php/hanshu/54.html">返回值</a></li><li><a href="/php/hanshu/55.html">可变函数</a></li><li><a href="/php/hanshu/56.html">内部（内置）函数</a></li><li><a href="/php/hanshu/57.html">匿名函数</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类与对象			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpduixiang/58.html">类与对象前言</a></li><li><a href="/php/phpduixiang/59.html">基本概念</a></li><li><a href="/php/phpduixiang/60.html">属性</a></li><li><a href="/php/phpduixiang/61.html">类常量</a></li><li><a href="/php/phpduixiang/62.html">自动加载对象</a></li><li><a href="/php/phpduixiang/63.html">构造函数和析构函数</a></li><li><a href="/php/phpduixiang/64.html">访问控制</a></li><li><a href="/php/phpduixiang/65.html">对象继承</a></li><li><a href="/php/phpduixiang/66.html">Static关键字</a></li><li><a href="/php/phpduixiang/67.html">抽象类</a></li><li><a href="/php/phpduixiang/68.html">接口</a></li><li><a href="/php/phpduixiang/69.html">Traits</a></li><li><a href="/php/phpduixiang/70.html">重载</a></li><li><a href="/php/phpduixiang/71.html">对象迭代</a></li><li><a href="/php/phpduixiang/72.html">设计模式</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP异常处理			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yichang/81.html">异常处理</a></li><li><a href="/php/yichang/82.html">扩展PHP内置的异常处理类</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数库按分类			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpku/83.html">数组</a></li><li><a href="/php/phpku/84.html">Classes/Objects</a></li><li><a href="/php/phpku/85.html">Date/Time</a></li><li><a href="/php/phpku/86.html">Directories</a></li><li><a href="/php/phpku/87.html">错误处理</a></li><li><a href="/php/phpku/88.html">Program execution</a></li><li><a href="/php/phpku/89.html">Filesystem</a></li><li><a href="/php/phpku/90.html">Filter</a></li><li><a href="/php/phpku/91.html">Function Handling</a></li><li><a href="/php/phpku/92.html">PHP 选项/信息</a></li><li><a href="/php/phpku/93.html">Mail</a></li><li><a href="/php/phpku/94.html">Math</a></li><li><a href="/php/phpku/95.html">Misc.</a></li><li><a href="/php/phpku/96.html">Network</a></li><li><a href="/php/phpku/97.html">输出控制</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> php基础			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbiji/108377.html"></a></li><li><a href="/php/phpbiji/108376.html"></a></li><li><a href="/php/phpbiji/108380.html"></a></li><li><a href="/php/phpbiji/108379.html"></a></li><li><a href="/php/phpbiji/108378.html"></a></li><li><a href="/php/phpbiji/108381.html"></a></li><li><a href="/php/phpbiji/108382.html"></a></li><li><a href="/php/phpbiji/108384.html"></a></li><li><a href="/php/phpbiji/108383.html"></a></li><li><a href="/php/phpbiji/108385.html"></a></li><li><a href="/php/phpbiji/108386.html"></a></li><li><a href="/php/phpbiji/108388.html"></a></li><li><a href="/php/phpbiji/108387.html"></a></li><li><a href="/php/phpbiji/108389.html"></a></li><li><a href="/php/phpbiji/108391.html"></a></li>		</ul>
	</li>
		<li>
	    <a href="/php/biji/" class="waves-effect">
		    <i class="icon-share"></i>
		    <span>PHP笔记
		       	<span class="float-right menu-arrow">
		       	<i class="mdi mdi-chevron-right"></i>
		       	</span>
		    </span>
	    </a>
	</li>
	</ul>
</div>
<!-- Sidebar -->
<div class="clearfix"></div>
</div>
<!-- Sidebar -left -->
</div>
<!-- Left Sidebar End -->
<!-- Start right Content here -->
<div class="content-page">
	<div class="content">
		<div class="container-fluid">
			<div class="page-title-box">
				<div class="row align-items-center">
					<div class="col-sm-6">
						<h1 class="page-title">探讨fckeditor在Php中的配置详解</h1>
					</div>
				</div>
				<!-- end row -->
			</div>
			<!-- end page-title -->
			<!-- START ROW -->
			<div class="panel panel-forbid">
				<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>内容摘要</div>
			    <div class="panel-content">
			    <span>前言：　　FCKeidtor是个国外的多语言编辑器，你可以对其配置文件进行简单修改使之支持目前常用Web开发语言的应用，下面我就讲讲FCKeditor的最新版本2.4.2在php的具体配置过程，有</span>                                     
		    	</div>
			    <div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>文章正文</div>
			    <div class="panel-content">
			    <span><P><STRONG><FONT style="COLOR: #ff0000">前言：<BR></FONT></STRONG>　　FCKeidtor是个国外的多语言编辑器，你可以对其配置文件进行简单修改使之支持目前常用Web开发语言的应用，下面我就讲讲FCKeditor的最新版本2.4.2在php的具体配置过程，有不足和出错的地方，欢迎指正。</P>
<P><STRONG><FONT style="COLOR: #ff0000">精简：<BR></FONT></STRONG>　　正因为这个编辑器是支持多语言的，所以首先我们针对使用对其做相应的冗余文件删除。</P>
<P>1、临时文件及文件夹删除：从根目录下开始删除一切以“_”开头的文件及文件夹，因为他们为临时文件和文件夹。删除这类临时文件及文件夹之后，我们还要删除一些根目录下的多余文件，根目录下我们只保留fckconfig.js（配置文件）、fckeditor.js（js方式调用文件）、fckeditor.php（php方式调用文件，新版本通过该文件统一调用php4或者php5的调用文件，fckeditor_php4.php/fckeditor_php5.php你可以根据自己服务器使用的情况删减，建议都保留）、fckeditor_php4.php（php4的调用文件）、fckeditor_php5.php（php5的调用文件）、fckstyles.xml（样式）、fcktemplates.xml（模板）文件和editor文件夹。 <BR>2、editor/lang目录：存放的是多语言配置文件，因为我们只可能用到en和zh-cn（简体中文）所以，根据我的选择，我删掉其他的语言配置文件。 <BR>3、editor/skins界面目录：默认带有三个界面（default：默认界面，加载速度相对较快；office2003：相对pp的界面，不过速度确实要慢些；silver：银白色界面，加载速度也相对较快），可以自行决定是否删除其中一两个。 <BR>4、editor/filemanager/browser/default/connectors目录：存放编辑器所支持的Web动态语言，我们以php为例所以保留php目录，test.html文件可以帮助你查看某语言下的上传设置等（具体上传设置我将在后面的配置作较为详细讲解），可以自行决定是否删除。 <BR>5、editor/filemanager/upload目录：同理。 <BR>到此精简完成，你会发现整个编辑器确实“瘦身”不少，呵呵 </P>
<P><STRONG><FONT style="COLOR: #ff0000">基本配置：<BR></FONT></STRONG>下面我开始对编辑器进行简单配置（并非每步都必须，可根据自己的需要参考修改）：<BR><STRONG>1、默认语言<BR></STRONG>打开fckconfig.js文件（注意此文件是utf-8编码哦），找到FCKConfig.AutoDetectLanguage = true ;（第56行）此句作用为自动检测语言，默认为true，即表示编辑器会根据系统语言自动检测加载相应的语言，我们将其改为false，不让其检测，然后将FCKConfig.DefaultLanguage = 'en';（编辑器默认语言，第57行）改为简体中文"zh-cn"。 <BR><STRONG>2、字体列表 <BR></STRONG>依然打开fckconfig.js，因为此编辑器为外国人编写，所以默认不提供中文字体，我们为其加入，找到FCKConfig.FontNames（第142行）加入“宋体;楷体_GB2312;新宋体;黑体;隶书;幼圆;”其他字体可根据自己需要自行加入。<BR><STRONG>3、文件上传<BR></STRONG>FCKeditor的文件管理程序在editor/filemanager/文件夹下，分为浏览（browser）和上传（upload）两种。“浏览”是指浏览服务器已存在文件并可以选择，也可以上传本地文件至服务器；上传是指快速上传，在窗口中点“上传”选项，选择本地文件后上传就行，但是不能查看服务器上已有上传文件，相对而言不太方便，只是操作更为快捷。也就是说FCKeditor中有一个文件浏览，有两个文件上传，而这些设置是分散在多个文件中，配置相对复杂，下面我大致讲一下：<BR>在FCKeditor中共有三个文件跟上传功能有关，一个是js文件，两个是php文件，前者关闭后界面中不出现相关窗口或按钮，后者关闭后相关功能不可用。<BR>js文件即是指的fckconfig.js文件，在以前旧版本的fckconfig.js中首先你必需开启如下几项：<BR><STRONG>浏览上传功能： <BR></STRONG>&nbsp;<BR>FCKConfig.LinkBrowser = true ; //文件 <BR>FCKConfig.ImageBrowser = true ; //图片 <BR>FCKConfig.FlashBrowser = true ; //Flash </P>
<P>快速上传功能： <br><br>FCKConfig.LinkUpload = true ; //同上 <BR>FCKConfig.ImageUpload = true ; //同上 <BR>FCKConfig.FlashUpload = true ; //同上 </P>
<P>即把这几项设为true，而我们今天使用的2.4.2的fckconfig.js中默认已经是开启上传开关显示功能的，所以，如果你要将该编辑器作为前台使用（fckeditor上传漏洞问题一直没有得到较好的改善），考虑到安全性你可能需要关闭文件上传功能，那么你只需要将这几项设置为false即可（当然两个php文件你也不要开启上传功能哦）。<BR>如果你要使用文件上传功能，那么我们继续配置：<BR>依然在fckconfig.js文件中，fckeditor对语言默认支持的是asp，找到以下两句，进行相应修改： <br><br>var _FileBrowserLanguage = 'asp' ; // asp | aspx | cfm | lasso | perl | php | py（第182行） <BR>var _QuickUploadLanguage = 'asp' ; // asp | aspx | cfm | lasso | php（第183行） </P>
<P>我们将其均改为'php':<br><br>var _FileBrowserLanguage = 'php' ; // asp | aspx | cfm | lasso | perl | php | py（第182行） <BR>var _QuickUploadLanguage = 'php' ; // asp | aspx | cfm | lasso | php </P>
<P>在2.4.2版本中，我们发现增加了对更多文件后缀名的支持，这个应该是为了解决上传漏洞所作的些许改动，不过作用不大。<BR>*.AllowedExtensions：（其中*号代表：FCKConfig.LinkUpload、FCKConfig.ImageUpload等）表示允许上传的文件后缀名，为空表示允许所有文件，你可根据自己需要设置上传文件后缀名，一定程度增加安全性，设置的格式可以参考它已有的后缀名设置。<BR>*.DeniedExtensions：同上，表示禁止上传的文件后缀名。<BR><FONT style="COLOR: #ff0000"><STRONG>注：你设置了允许上传的，当然禁止的也就不必要设置了，本人推荐设置允许的，毕竟禁止的后缀名列表不能罗列完全，可能还有很多我们不曾想到的后缀名。<BR></STRONG></FONT>对js文件的配置到此已经完成，下面我们进行两个php文件在上传方面的设置： <BR>文件浏览上传修改： <BR>打开editor/filemanager/browser/default/connectors/php/config.php文件，找到：<BR>$Config['Enabled'] = false ;（第28行）将false改为true，即允许上传。<BR>$Config['UserFilesPath'] = '/userfiles/' ;（第32行）为定义上传目录，可根据自己情况进行修改，我将其改为upload目录。 <BR><STRONG><FONT style="COLOR: #ff0000">注：注意FCKeditor是不支持虚拟目录的，你的所有路径都是针对网站根目录的绝对路径。 <BR></FONT>文件快速上传修改：</STRONG> <BR>打开文件editor/filemanager/upload/php/config.php文件，找到<BR>$Config['Enabled'] = false ;（第28行）将false改为true。 <BR>$Config['UserFilesPath'] = '/UserFiles/' ;（第35行）同“文件浏览上传”的上传目录。 <BR>$Config['UseFileType'] = false ; （第32行）改为true，不然上传文件不会放在上传目录中 <BR>在该文件中，还有一项：<BR>$Config['UserFilesAbsolutePath'] = '' ;（第41行）<BR>这项的作用是设定上传的绝对路径，比如，你想指定上传文件到D:/Web/upload/下，你可以指定它的值为你的绝对路径，注意，如果你指定了该值，那你也要对$Config['UserFilesPath'] = '/UserFiles/' ;作相同的设置。<BR>到此上传基本配置已经完成，整个编辑器最基本的配置也已经结束了，你可以通过下列代码对其进行调用测试了：<BR>[php]&lt;?php<BR>include("/fckeditor/fckeditor.php"); // 包含fckeditor类，fckeditor目录放在网站根目录下 <BR>$BasePath = "/fckeditor/"; // 编辑器路径 <BR>$oFCKeditor = new FCKeditor('jayliao'); // 创建一个fckeditor对象，表单的名称为jayliao<BR>$oFCKeditor-&gt;BasePath&nbsp;&nbsp; = $BasePath;<BR>$oFCKeditor-&gt;Value&nbsp;&nbsp; = 'test'; // 设置表单初始值 </P>
<P>// 还可设置以下部分（“=”包含部分），并非必须：<BR>//==================================================================================//<BR>$oFCKeditor-&gt;Width = '100%'; // 编辑器宽度，类中有默认值，如果不想修改可不管此项<BR>$oFCKeditor-&gt;Height= '300'; // 同width，此处为高$oFCKeditor-&gt;ToolbarSet <BR>$oFCKeditor-&gt;ToolbarSet = 'JayLiao'; // 默认编辑器工具栏有Basic（基本工具）和Default（所有工具）两种选择，JayLiao为本人自定义的工具条，如有需要可参考后文中的说明新建或修改工具条 <BR>$oFCKeditor-&gt;Config['SkinPath'] = '/fckeditor/editor/skins/office2003/'; // 设置编辑器皮肤<BR>//==================================================================================//</P>
<P>$oFCKeditor-&gt;Create(); // 调用类中方法，必须<BR>?&gt;[/php]<BR>赶紧测试一下吧，是不是很激动，终于可以看到这个强大的编辑器了。不过，马上你会发现在上传以中文命名的文件时会出现乱码，这到底是怎么回事呢？呵呵，不怕，下面我们就对其进行简单修改问题很快就解决的：<BR>我们为上传文件以时间+随机数作为其新名字，打开：editor/filemanager/upload/php/upload.php，找到：<BR>[php]$sFileName = $oFile['name'] ;[/php]<BR>替换为：<BR>[php]$sFileName = $oFile['name'] ;<BR>$sOriginalFileName = $sFileName ;<BR>$sExtension = substr( $sFileName, ( strrpos($sFileName, '.') + 1 ) ) ;<BR>$sExtension = strtolower( $sExtension ) ;<BR>$sFileName = date("YmdHis").rand(100, 200).".".$sExtension;[/php]<BR>哈哈，你会发现“快速上传”的乱码已经解决，就这么简单，高兴之余不要忘了，同样，还需要修改“浏览”的上传，修改文件：editor/filemanager/browser/default/connectors/php/commands.php，修改内容同上。<BR>另：你上传的中文文件不做以上命名修改可能在服务器上并非乱码，如果你只是为了在浏览的时候让编辑器正确显示该类文件名，那你可以作如下修改，打开：editor/filemanager/browser/default/connectors/php/util.php，修改ConvertToXmlAttribute函数，将：<br><br>return utf8_encode( htmlspecialchars( $value ) ) ; <BR>修改为：<br><br>return iconv( "GBK", "UTF-8", htmlspecialchars($value) ) ; <BR>这样，你的编辑器应该已经能正确显示中文名，不过强烈建议你修改上传文件的命名，中文名可能存在诸多不便。<BR>当完成以上设置后，fckeditor已经能满足我们的日常使用需要，不过我们却又发现一个问题，那就是上传后的文件我们却无法删除，这样会使网站上的垃圾文件（主要是图片）日益增多，那我们是否能够通过对编辑器的修改能较为方便的管理删除无用上传文件呢？我们不难想到fckeditor的浏览文件功能，对该功能进行适当的扩展，对日常所上传的文件进行管理就变得相当简单易行了，那我们赶紧动手吧：<BR>增加该功能我们修改的页面为：fckeditor/editor/filemanager/browser/default/frmresourceslist.html<BR>第一步，在页面的body区域增加如下代码：<br><br>&lt;div id="showFile" style="float:left; display:none; background-color:#999999"&gt;&lt;/div&gt; <BR>&lt;iframe id="iframe_del" name="iframe_del" width="0" height="0" scrolling="no"&gt;&lt;/iframe&gt; <BR>&lt;div id="body_content"&gt;&lt;/div&gt; </P>
<P>说明：第一对&lt;div&gt;&lt;/div&gt;的作用是当我们把鼠标移动到所上传的文件上时显示其相关信息；&lt;iframe&gt;&lt;/iframe&gt;标签的作用是供我们删除上传文件时做动作响应窗口的，即是将我们的删除动作在iframe中运行，目的是实现伪无刷新删除效果；最后一对&lt;div&gt;&lt;/div&gt;的作用是显示上传文件及文件夹的列表（2.4较以前版本对&lt;body&gt;&lt;/body&gt;标签中内容作了调整，老版该页面以&lt;table&gt;&lt;/table&gt;作为存放列表的容器，而新版直接将显示容器在js中生成，为了使文件显示div和iframe两组标签正常使用，故在body标签中加入一对&lt;div&gt;&lt;/div&gt;标签，使之能正常使用，在我的尝试中，倘若不这样修改似乎有错，当然不排除我方法不当的原因）</P>
<P>第二步，在文件的js代码区中加入：<br><br><div class="codetitle"><span><a style="CURSOR: pointer" data="98846" class="copybut" id="copybut98846" onclick="doCopy('code98846')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code98846"><BR>// add by jayliaoscu @ 2007-04-23 /*{{{{*/ <BR>// 显示文件显示层 <BR>function showDiv( fileUrl ) <BR>{ <BR>var name = fileUrl; <BR>//获取文件类型 <BR>var suffix = name.substring(name.lastIndexOf(".")+1); </P>
<P>var div= document.getElementById("showFile"); <BR>div.content = ""; <BR>div.style.position = "absolute"; <BR>div.content += "&lt;table width='256' border='0' cellpadding='3' cellspacing='1' bgcolor='#737357'&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td height='23' align='left' bgcolor='#C7C78F'&gt;&lt;table width='100%' height='100%' border='0' cellpadding='0' cellspacing='0'&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td width='47%'&gt;&nbsp;&lt;a href='javascript:' onClick='hiddenDiv();'&gt;&lt;font color='#000000' style='text-decoration:none;'&gt;关闭&lt;/font&gt;&lt;/a&gt;&lt;/td&gt;&lt;td width='53%' align='right'&gt;&lt;a href='javascript:' onclick='delFile(/"" + fileUrl + "/");'&gt;&lt;font color='#000000' style='text-decoration:none;'&gt;删除&lt;/font&gt;&lt;/a&gt;&nbsp;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/td&gt;&lt;/tr&gt;"; <BR>if (suffix=='gif' || suffix=="jpg" || suffix=="jpeg" || suffix=="bmp" || suffix=="png") <BR>{ <BR>　div.content += "&lt;tr&gt;&lt;td align='center' bgcolor='#C7C78F'&gt;&lt;img src='" + fileUrl + "' onload='if(this.width&gt;250) this.width=250' style='margin:3px;'&gt;&lt;/td&gt;&lt;/tr&gt;"; <BR>} <BR>else <BR>{ <BR>　div.content += "&lt;tr&gt;&lt;td height='35' align='center' bgcolor='#C7C78F'&gt;&lt;strong&gt;该类型不能预览&lt;/strong&gt;&lt;/td&gt;&lt;/tr&gt;"; <BR>} <BR>div.content += "&lt;/tbody&gt;&lt;/table&gt;"; <BR>div.innerHTML = div.content; <BR>div.style.display = ""; <BR>div.style.top = event.y+document.body.scrollTop+10; <BR>div.style.left = event.x+document.body.scrollLeft+30; <BR>} <BR>// 隐藏文件显示层 <BR>function hiddenDiv() <BR>{ <BR>var div= document.getElementById("showFile"); <BR>div.style.display ="none"; <BR>} <BR>// 在iframe中删除文件 <BR>function delFile( fileUrl ) <BR>{ <BR>if(!confirm('你确定删除该文件？')) <BR>return; <BR>var url = '/fckeditor/del_file.php?filePath='+ fileUrl; <BR>window.open(url, "iframe_del"); <BR>Refresh(); <BR>} <BR>///*}}}*/ <BR></div><BR>第三步，修改本页面原有js<BR>修改：<BR><div class="codetitle"><span><a style="CURSOR: pointer" data="90560" class="copybut" id="copybut90560" onclick="doCopy('code90560')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code90560"><BR>oListManager.Clear = function() <BR>{ <BR>document.body.innerHTML = '' ; <BR>} <BR></div><BR>为：<BR><div class="codetitle"><span><a style="CURSOR: pointer" data="68533" class="copybut" id="copybut68533" onclick="doCopy('code68533')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code68533"><BR>oListManager.Clear = function() <BR>{ <BR>hiddenDiv(); <BR>document.getElementById("body_content").innerHTML = '' ; // body_content为我们在body区域增加的div标签 <BR>} <BR></div><BR>找到：<BR><div class="codetitle"><span><a style="CURSOR: pointer" data="8054" class="copybut" id="copybut8054" onclick="doCopy('code8054')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code8054"><BR>var sLink = '&lt;a href="#" onclick="OpenFile(/'' + fileUrl.replace( /'/g, '///'') + '/');return false;"&gt;' ; <BR></div><BR>修改为：<BR><div class="codetitle"><span><a style="CURSOR: pointer" data="89491" class="copybut" id="copybut89491" onclick="doCopy('code89491')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code89491"><BR>var sLink = '&lt;a href="#" onmouseover="showDiv(/'' + fileUrl + '/');" onclick="OpenFile(/'' + fileUrl.replace( /'/g, '///'') + '/');return false;"&gt;' ;&nbsp;&nbsp;&nbsp;&nbsp; // 即是文件信息显示功能 <BR></div><BR>修改：<BR><div class="codetitle"><span><a style="CURSOR: pointer" data="71738" class="copybut" id="copybut71738" onclick="doCopy('code71738')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code71738"><BR>function Refresh() <BR>{ <BR>LoadResources( oConnector.ResourceType, oConnector.CurrentFolder ) ; <BR>} <BR></div><BR>为：<BR><div class="codetitle"><span><a style="CURSOR: pointer" data="98441" class="copybut" id="copybut98441" onclick="doCopy('code98441')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code98441"><BR>function Refresh() <BR>{ <BR>hiddenDiv(); // 所作修改，为了刷新列表时默认隐藏文件显示层 <BR>LoadResources( oConnector.ResourceType, oConnector.CurrentFolder ) ; <BR>} <BR></div><BR>修改函数：GetFoldersAndFilesCallBack，找到：<BR><div class="codetitle"><span><a style="CURSOR: pointer" data="18331" class="copybut" id="copybut18331" onclick="doCopy('code18331')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code18331"><BR>document.body.innerHTML = oHtml.ToString() ; <BR></div><BR>修改为：<BR><div class="codetitle"><span><a style="CURSOR: pointer" data="85219" class="copybut" id="copybut85219" onclick="doCopy('code85219')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code85219"><BR>document.getElementById("body_content").innerHTML = oHtml.ToString() ; <BR></div><BR>最后，增加一个文件删除页面del_file.php（该文件路径和增加的js函数delFile(fileUrl)中的调用一致），作用为删除文件，给出成功与否的操作提示，参考代码：<BR><div class="codetitle"><span><a style="CURSOR: pointer" data="84555" class="copybut" id="copybut84555" onclick="doCopy('code84555')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code84555"><BR>[php]&lt;?php<BR>$filePath = "..".trim($_GET['filePath']);<BR>if ( $filePath )<BR>{<BR>@unlink($filePath);<BR>echo "&lt;script&gt;alert('删除成功。');&lt;/script&gt;";<BR>}<BR>else<BR>{<BR>echo "&lt;script&gt;alert('删除错误，可能文件不存在或者已经删除。');&lt;/script&gt;";<BR>}<BR>?&gt;[/php]</P>
<P></div><BR>至此，我对于fckeditor的修改基本完成，当然这些修改只是对fckeditor修改使用的抛砖引玉，给大家一个参考，希望对初学者有所帮助。后面对编辑器的修改过程比较匆忙，并未修改一步完成一步文档书写，所以，难免有所出错，望见谅，如果你有什么问题和错误发现欢迎联系我互相讨论，共同进步。<BR><STRONG><FONT style="COLOR: #ff0000">另附：<BR></FONT>配置文件（fckconfig.js）中主要配置项目如下，根据自己看情况配置： </STRONG></P>
<P>1.FCKConfig.CustomConfigurationsPath = '' ; // 自定义配置文件路径和名称 <BR>2.FCKConfig.EditorAreaCSS = FCKConfig.BasePath + 'css/fck_editorarea.css'; // 编辑区的样式表文件 <BR>3.FCKConfig.BaseHref = ''; // 相对链接的基地址 <BR>4.FCKConfig.Debug = true/false; // 是否开启调试功能，当调用FCKDebug.Output()时，会在调试窗中输出内容 <BR>5.FCKConfig.SkinPath = FCKConfig.BasePath + 'skins/default/'; // 设置皮肤 <BR>6.FCKConfig.AutoDetectLanguage = true/false ; // 是否自动检测语言 <BR>7.FCKConfig.DefaultLanguage = 'zh-cn' ; // 设置默认语言 <BR>8.FCKConfig.ContentLangDirection = 'ltr/rtr'; // 默认文字方向，ltr左，rtr右 <BR>9.FCKConfig.FillEmptyBlocks = true/false ; // 使用这个功能，可以将空的块级元素用空格来替代 <BR>10.FCKConfig.FormatSource = true/false; // 切换到代码视图时，是否自动格式化代码 <BR>11.FCKConfig.FormatOutput = true/false; // 当输出内容时是否自动格式化代码 <BR>12.FCKConfig.FormatIndentator = ""; // 当在“源码格式”下缩进代码使用的字符 <BR>13.FCKConfig.GeckoUseSPAN = true/false; // 是否允许SPAN标记代替B，I，U标记 <BR>14.FCKConfig.StartupFocus = true/false; // 开启时是否FOCUS到编辑器 <BR>15.FCKConfig.ForcePasteAsPlainText = true/false;// 强制粘贴为纯文本 <BR>16.FCKConfig.ForceSimpleAmpersand = true/false; // 是否不把&符号转换为XML实体 <BR>17.FCKConfig.TabSpaces = 0/1; // TAB是否有效 <BR>18.FCKConfig.TabSpaces = 4; // TAB键产生的空格字符数 <BR>19.FCKConfig.ShowBorders = true/false; // 是否合并边框 <BR>20.FCKConfig.ToolbarStartExpanded = true/false; // 页面载入时，工具栏是否展开，点“展开工具栏”时才出现 <BR>21.FCKConfig.ToolBarCanCollapse = true/false; // 是否允许展开折叠工具栏 <BR>22.FCKConfig.ToolbarSets = object ; // 编辑器的工具栏，可以自行定义，删减，可参考已存在工具栏 <BR>23.FCKConfig.EnterMode = 'p'; // 编辑器中直接回车，在代码中生成，可选为p | div | br <BR>24.FCKConfig.ShiftEnterMode = 'br'; // 编辑器中Shift+回车，在代码中生成，可选为p | div | br <BR>25.FCKConfig.ContextMenu = 字符串数组; // 右键菜单的内容 <BR>26.FCKConfig.FontColors = ""; // 文字颜色列表 <BR>27.FCKConfig.FontNames = ""; // 字体列表 <BR>28.FCKConfig.FontSizes = ""; // 字号列表 <BR>29.FCKConfig.FontFormats = ""; // 文字格式列表 <BR>30.FCKConfig.StylesXmlPath = ""; // CSS样式列表的XML文件的位置 <BR>31.FCKConfig.TemplatesXmlPath = ""; // 模版的XML文件位置 <BR>32.FCKConfig.SpellChecker = "ieSpell/Spellerpages"; // 拼写检查器 <BR>33.FCKConfig.IeSpellDownloadUrl = ""; // 下载拼写检查器的网址 <BR>34.FCKConfig.SmileyPath = FCKConfig.BasePath + 'images/smiley/msn/'; // 表情文件存放路径 <BR>35.FCKConfig.SmileyImages = ''; // 表情文件名称列表，具体参考默认设置 <BR>36.FCKConfig.SmileyColumns = 8; // 表情窗口显示表情列数 <BR>37.FCKConfig.SmileyWindowWidth = 320; // 表情窗口显示宽度，此窗口会因为表情文件的改变而作调整 <BR>38.FCKConfig.SmileyWindowHeight = 240; // 表情窗口显示高度，此窗口会因为表情文件的改变而作调整 <BR>39.FCKConfig.FullPage = true/false; // 是否允许编辑整个HTML文件，还是仅允许编辑BODY间的内容 </P>
<hr></span>                                     
		    	</div>
		    	<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>代码注释</div>
			    <div class="panel-content">
			    <span></span>                                     
		    	</div>

			</div>

			<!-- END ROW -->
			<div class="newsPage">
				<div class="newsPageTurn">
				    <span><a>上一篇</a><a href='/php/biji/82380.html'>MySQL 主键与索引的联系与区别分析</a><a>下一篇</a><a href='/php/biji/82382.html'>浅谈CSS中overflow清除浮动的用法</a></span>
				</div>
			</div>
		</div>


<div id="author-box">
    <h3>作者：喵哥笔记</h3>
        <div class="author-info">
            <div class="author-avatar">
                <img src="/skin1/picture/01.jpg" alt="IDC笔记" class="avatar" width="64" height="64">
            </div>
        <div class="author-description">
            <p>学的不仅是技术，更是梦想！</p>
            <ul class="author-social follows nb">
            	<li>
                    <a target="_blank" href="/" title="IDC笔记">IDC笔记</a>
                </li>
            </ul>
        </div>
        <div class="clear"></div>
    </div>
</div>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
<!-- container-fluid -->
	</div>
<!-- content -->
	<footer class="footer">
	© 2020 IDC笔记 <i class="mdi mdi-heart text-danger"></i>. | 备案号：<a href="https://beian.miit.gov.cn/">辽ICP备18000516号</a>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?674585fbbd2294d3faf910f668ea91b4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

	</footer>
</div>

</div>
<!-- END wrapper -->
<!-- jQuery  -->
<script src="/skin1/js/jquery.min.js"></script>
<script src="/skin1/js/bootstrap.bundle.min.js"></script>
<script src="/skin1/js/metismenu.min.js"></script>
<script src="/skin1/js/jquery.slimscroll.js"></script>
<script src="/skin1/js/waves.min.js"></script>
<!--Morris Chart-->
<script src="/skin1/js/morris.min.js"></script>
<script src="/skin1/js/raphael.min.js"></script>
<script src="/skin1/js/dashboard.init.js"></script>
<script src="/skin1/js/app.js"></script>
<script src="/foot.js"></script>
</body>
</html>