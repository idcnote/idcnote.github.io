<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title>Ajax学习全套(最全最经典)_PHP教程_IDC笔记</title>
    <meta name="keywords" content="PHP,PHP笔记,PHP教程" />
    <meta name="description" content="ajax简介<br />
<br />
<br />
AJAX即“Asynchronous Javascript And XML”（异步JavaScript和XML），是指一种创建交互式网页应用的网页开发技术。Ajax不是一种新的编程语言，而是使用现有标准的新方" />
    <meta content="Responsive admin theme build on top of Bootstrap 4" name="description" />
    <meta content="idcnote.com" name="author" />
    <link rel="shortcut icon" href="/skin1/images/favicon.ico">
    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="/skin1/css/morris.css">
    <link href="/skin1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/metismenu.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/icons.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/style.css" rel="stylesheet" type="text/css">
<link href="/SyntaxHighlighter/shCoreDefault.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/SyntaxHighlighter/shCore.js"></script>
<script type="text/javascript">
 SyntaxHighlighter.all();
</script>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
</head>
<body>
<!-- Begin page -->
		<div id="wrapper">
			<!-- Top Bar Start -->
			<div class="topbar">
				<!-- LOGO -->
				<div class="topbar-left">
					<a href="/" class="logo">
						<span class="logo-light">
                            <i class="mdi mdi-camera-control"></i>IDC笔记
                        </span>
						<span class="logo-sm">
                            <i class="mdi mdi-camera-control"></i>
                        </span>
					</a>
				</div>
				<nav class="navbar-custom">
					<ul class="navbar-right list-inline float-right mb-0">
						<!--<li class="dropdown notification-list list-inline-item d-none d-md-inline-block">
							<a class="nav-link waves-effect" href="#" id="btn-fullscreen">
								<i class="mdi mdi-arrow-expand-all noti-icon"></i>
							</a>
						</li>
						<li class="dropdown notification-list list-inline-item">
							<div class="dropdown notification-list nav-pro-img">
								<a class="dropdown-toggle nav-link arrow-none nav-user" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
									<img src="/skin1/picture/user-4.jpg" alt="user" class="rounded-circle">
								</a>
								<div class="dropdown-menu dropdown-menu-right profile-dropdown ">
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-account-circle"></i> Profile</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-wallet"></i> Wallet</a>
									<a class="dropdown-item d-block" href="#">
										<span class="badge badge-success float-right">11</span>
										<i class="mdi mdi-settings"></i> Settings</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-lock-open-outline"></i> Lock screen</a>
									<div class="dropdown-divider"></div>
									<a class="dropdown-item text-danger" href="#">
										<i class="mdi mdi-power text-danger"></i> Logout</a>
								</div>
							</div>
						</li>
						-->
					</ul>
					<ul class="list-inline menu-left mb-0">
						<li class="float-left">
							<button class="button-menu-mobile open-left waves-effect">
                            <i class="mdi mdi-menu"></i>
                        </button>
						</li>
						<li class="d-none d-md-inline-block">
							<form role="search" class="app-search">
								<div class="form-group mb-0">
									<input type="text" class="form-control" placeholder="Search..">
									<button type="submit"><i class="fa fa-search"></i></button>
								</div>
							</form>
						</li>
					</ul>
				</nav>
			</div>
<!-- ========== Left Sidebar Start ========== -->
<div class="left side-menu">
    <div class="slimscroll-menu" id="remove-scroll">
    <!--- Sidemenu -->
    <div id="sidebar-menu">
    <!-- Left Menu Start -->
    <ul class="metismenu" id="side-menu">
			<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP简介			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jianjie/1.html">PHP简介</a></li><li><a href="/php/jianjie/2.html">PHP用途</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP基本语法			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yufa/3.html">分离HTML</a></li><li><a href="/php/yufa/4.html">指令分隔符</a></li><li><a href="/php/yufa/5.html">PHP注释</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类型			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpleixing/6.html">PHP类型简介</a></li><li><a href="/php/phpleixing/7.html">PHP类型之布尔类型</a></li><li><a href="/php/phpleixing/8.html">PHP类型之整型</a></li><li><a href="/php/phpleixing/9.html">PHP类型之浮点型</a></li><li><a href="/php/phpleixing/10.html">PHP类型之字符串</a></li><li><a href="/php/phpleixing/11.html">PHP类型之数组</a></li><li><a href="/php/phpleixing/12.html">PHP类型之对象</a></li><li><a href="/php/phpleixing/13.html">PHP类型之资源类型</a></li><li><a href="/php/phpleixing/14.html">PHP类型之NULL</a></li><li><a href="/php/phpleixing/15.html">PHP类型之伪类型</a></li><li><a href="/php/phpleixing/16.html">PHP类型之类型判别</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP变量			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbianliang/17.html">PHP变量之基础</a></li><li><a href="/php/phpbianliang/18.html">PHP变量之预定义变量</a></li><li><a href="/php/phpbianliang/19.html">PHP变量之变量范围</a></li><li><a href="/php/phpbianliang/20.html">PHP变量之可变变量</a></li><li><a href="/php/phpbianliang/21.html">PHP变量之外部变量</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP运算符			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yunsuanfu/22.html">PHP运算符优先级</a></li><li><a href="/php/yunsuanfu/23.html">算术运算符</a></li><li><a href="/php/yunsuanfu/24.html">赋值运算符</a></li><li><a href="/php/yunsuanfu/25.html">位运算符</a></li><li><a href="/php/yunsuanfu/26.html">比较运算符</a></li><li><a href="/php/yunsuanfu/27.html">错误控制运算符</a></li><li><a href="/php/yunsuanfu/28.html">执行运算符</a></li><li><a href="/php/yunsuanfu/29.html">递增/递减运算符</a></li><li><a href="/php/yunsuanfu/30.html">逻辑运算符</a></li><li><a href="/php/yunsuanfu/31.html">字符串运算符</a></li><li><a href="/php/yunsuanfu/32.html">数组运算符</a></li><li><a href="/php/yunsuanfu/33.html">类型运算符</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP控制结构			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jiegou/34.html">PHP控制结构之if</a></li><li><a href="/php/jiegou/35.html">PHP控制结构之else</a></li><li><a href="/php/jiegou/36.html">PHP控制结构之elseif/else if</a></li><li><a href="/php/jiegou/37.html">PHP控制结构之替代语法</a></li><li><a href="/php/jiegou/38.html">PHP控制结构之while</a></li><li><a href="/php/jiegou/39.html">PHP控制结构之do-while</a></li><li><a href="/php/jiegou/40.html">PHP控制结构之for</a></li><li><a href="/php/jiegou/41.html">PHP控制结构之foreach</a></li><li><a href="/php/jiegou/42.html">PHP控制结构之break</a></li><li><a href="/php/jiegou/43.html">PHP控制结构之continue</a></li><li><a href="/php/jiegou/44.html">PHP控制结构之switch</a></li><li><a href="/php/jiegou/45.html">PHP控制结构之declare</a></li><li><a href="/php/jiegou/46.html">PHP控制结构之return</a></li><li><a href="/php/jiegou/47.html">PHP控制结构之require</a></li><li><a href="/php/jiegou/48.html">PHP控制结构之include</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/hanshu/52.html">用户自定义函数</a></li><li><a href="/php/hanshu/53.html">函数的参数</a></li><li><a href="/php/hanshu/54.html">返回值</a></li><li><a href="/php/hanshu/55.html">可变函数</a></li><li><a href="/php/hanshu/56.html">内部（内置）函数</a></li><li><a href="/php/hanshu/57.html">匿名函数</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类与对象			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpduixiang/58.html">类与对象前言</a></li><li><a href="/php/phpduixiang/59.html">基本概念</a></li><li><a href="/php/phpduixiang/60.html">属性</a></li><li><a href="/php/phpduixiang/61.html">类常量</a></li><li><a href="/php/phpduixiang/62.html">自动加载对象</a></li><li><a href="/php/phpduixiang/63.html">构造函数和析构函数</a></li><li><a href="/php/phpduixiang/64.html">访问控制</a></li><li><a href="/php/phpduixiang/65.html">对象继承</a></li><li><a href="/php/phpduixiang/66.html">Static关键字</a></li><li><a href="/php/phpduixiang/67.html">抽象类</a></li><li><a href="/php/phpduixiang/68.html">接口</a></li><li><a href="/php/phpduixiang/69.html">Traits</a></li><li><a href="/php/phpduixiang/70.html">重载</a></li><li><a href="/php/phpduixiang/71.html">对象迭代</a></li><li><a href="/php/phpduixiang/72.html">设计模式</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP异常处理			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yichang/81.html">异常处理</a></li><li><a href="/php/yichang/82.html">扩展PHP内置的异常处理类</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数库按分类			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpku/83.html">数组</a></li><li><a href="/php/phpku/84.html">Classes/Objects</a></li><li><a href="/php/phpku/85.html">Date/Time</a></li><li><a href="/php/phpku/86.html">Directories</a></li><li><a href="/php/phpku/87.html">错误处理</a></li><li><a href="/php/phpku/88.html">Program execution</a></li><li><a href="/php/phpku/89.html">Filesystem</a></li><li><a href="/php/phpku/90.html">Filter</a></li><li><a href="/php/phpku/91.html">Function Handling</a></li><li><a href="/php/phpku/92.html">PHP 选项/信息</a></li><li><a href="/php/phpku/93.html">Mail</a></li><li><a href="/php/phpku/94.html">Math</a></li><li><a href="/php/phpku/95.html">Misc.</a></li><li><a href="/php/phpku/96.html">Network</a></li><li><a href="/php/phpku/97.html">输出控制</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> php基础			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbiji/108377.html"></a></li><li><a href="/php/phpbiji/108376.html"></a></li><li><a href="/php/phpbiji/108380.html"></a></li><li><a href="/php/phpbiji/108379.html"></a></li><li><a href="/php/phpbiji/108378.html"></a></li><li><a href="/php/phpbiji/108381.html"></a></li><li><a href="/php/phpbiji/108382.html"></a></li><li><a href="/php/phpbiji/108384.html"></a></li><li><a href="/php/phpbiji/108383.html"></a></li><li><a href="/php/phpbiji/108385.html"></a></li><li><a href="/php/phpbiji/108386.html"></a></li><li><a href="/php/phpbiji/108388.html"></a></li><li><a href="/php/phpbiji/108387.html"></a></li><li><a href="/php/phpbiji/108389.html"></a></li><li><a href="/php/phpbiji/108391.html"></a></li>		</ul>
	</li>
		<li>
	    <a href="/php/biji/" class="waves-effect">
		    <i class="icon-share"></i>
		    <span>PHP笔记
		       	<span class="float-right menu-arrow">
		       	<i class="mdi mdi-chevron-right"></i>
		       	</span>
		    </span>
	    </a>
	</li>
	</ul>
</div>
<!-- Sidebar -->
<div class="clearfix"></div>
</div>
<!-- Sidebar -left -->
</div>
<!-- Left Sidebar End -->
<!-- Start right Content here -->
<div class="content-page">
	<div class="content">
		<div class="container-fluid">
			<div class="page-title-box">
				<div class="row align-items-center">
					<div class="col-sm-6">
						<h1 class="page-title">Ajax学习全套(最全最经典)</h1>
					</div>
				</div>
				<!-- end row -->
			</div>
			<!-- end page-title -->
			<!-- START ROW -->
			<div class="panel panel-forbid">
				<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>内容摘要</div>
			    <div class="panel-content">
			    <span>ajax简介<br />
<br />
<br />
AJAX即“Asynchronous Javascript And XML”（异步JavaScript和XML），是指一种创建交互式网页应用的网页开发技术。Ajax不是一种新的编程语言，而是使用现有标准的新方</span>                                     
		    	</div>
			    <div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>文章正文</div>
			    <div class="panel-content">
			    <span><p><span style="color: #ff0000"><strong>ajax简介</strong></span><br />
</p>
<p>AJAX即“Asynchronous Javascript And XML”（异步JavaScript和XML），是指一种创建交互式网页应用的网页开发技术。Ajax不是一种新的编程语言，而是使用现有标准的新方法。AJAX可以在不重新加载整个页面的情况下，与服务器交换数据。这种异步交互的方式，使用户单击后，不必刷新页面也能获取新数据。使用Ajax，用户可以创建接近本地桌面应用的直接、高可用、更丰富、更动态的Web用户界面。<br />
</p>
<p><strong>Ajax包括：</strong></p>
<p>&nbsp;&#8226;XHTML和CSS<br />
</p>
<p>&#8226;使用文档对象模型(Document Object Model)作动态显示和交互<br />
</p>
<p>&nbsp;&#8226;使用XML和XSLT做数据交互和操作<br />
</p>
<p>&nbsp;&#8226;使用XMLHttpRequest进行异步数据接收<br />
</p>
<p><strong>利用AJAX可以做：</strong></p>
<p>&nbsp;&#8226;注册时，输入用户名自动检测用户是否已经存在。<br />
</p>
<p>&nbsp;&#8226;登陆时，提示用户名密码错误<br />
</p>
<p>&nbsp;&#8226;删除数据行时，将行ID发送到后台，后台在数据库中删除，数据库删除成功后，在页面DOM中将数据行也删除。<br />
</p>
<p><span style="color: #ff0000"><strong>ajax伪造</strong></span><br />
</p>
<p>&nbsp;iframe就是我们常用的iframe标签：&lt;iframe&gt;。iframe标签是框架的一种形式，也比较常用到，iframe一般用来包含别的页面，例如我们可以在我们自己的网站页面加载别人网站或者本站其他页面的内容。iframe标签的最大作用就是让页面变得美观。iframe标签的用法有很多，主要区别在于对iframe标签定义的形式不同，例如定义iframe的长宽高。<br />
</p>
<p>因此，iframe标签具有局部加载内容的特性，所以可以使用其来伪造Ajax请求。<br />
</p>
<div class="phpstudycode">
<pre class="brush:js;">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head lang="en"&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;伪造AJAX&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div&gt;
      &lt;p&gt;请输入要加载的地址：&lt;span id="currentTime"&gt;&lt;/span&gt;&lt;/p&gt;
      &lt;p&gt;
        &lt;input id="url" type="text" /&gt;
        &lt;input type="button" value="提交" onclick="LoadPage();"&gt;
      &lt;/p&gt;
    &lt;/div&gt;
    &lt;div&gt;
      &lt;h3&gt;加载页面位置：&lt;/h3&gt;
      &lt;iframe id="iframePosition" style="width: 100%;height: 500px;"&gt;&lt;/iframe&gt;
    &lt;/div&gt;
    &lt;script type="text/javascript"&gt;
      window.onload= function(){
        var myDate = new Date();
        document.getElementById('currentTime').innerText = myDate.getTime();
      };
      function LoadPage(){
        var targetUrl = document.getElementById('url').value;
        document.getElementById("iframePosition").src = targetUrl;
      }
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p>原理是这样的，设置一个提交按钮，再设置一个输入框，当我们输入一个网址的时候，在当前的页面加载输入网址的页面信息，呈现在iframe框里，这样就能做到不刷新URL来提交不同的信息。<br />
</p>
<p><span style="color: #ff0000"><strong>原生ajax</strong></span><br />
</p>
<p>&nbsp;Ajax的核心是XMLHttpRequest对象(XHR)。XHR为向服务器发送请求和解析服务器响应提供了接口。能够以异步方式从服务器获取新数据。<br />
</p>
<p><strong>一、XMLHttpRequest对象</strong><br />
</p>
<p>Ajax的核心是XMLHttpRequest对象(XHR)。XHR为向服务器发送请求和解析服务器响应提供了接口。能够以异步方式从服务器获取新数据。<br />
</p>
<p>XHR的主要方法有：&nbsp;</p>
<div class="phpstudycode">
<pre class="brush:js;">
1. void open(String method,String url,Boolen async)  
 用于创建请求  
  参数：
    method： 请求方式（字符串类型），如：POST、GET、DELETE...
    url：  要请求的地址（字符串类型）
    async： 是否异步（布尔类型）
2. void send(String body)
  用于发送请求
  参数：
    body： 要发送的数据（字符串类型）
3. void setRequestHeader(String header,String value)
  用于设置请求头
  参数：
    header： 请求头的key（字符串类型）
    vlaue： 请求头的value（字符串类型）
4. String getAllResponseHeaders()
  获取所有响应头
  返回值：
    响应头数据（字符串类型）
5. String getResponseHeader(String header)
  获取响应头中指定header的值
  参数：
    header： 响应头的key（字符串类型）
  返回值：
    响应头中指定的header对应的值
6. void abort() 

终止请求</pre>
</div>
<p><strong>XHR的主要属性有：<br />
</strong></p>
<div class="phpstudycode">
<pre class="brush:js;">
1. Number readyState
  状态值（整数），可以确定请求/响应过程的当前活动阶段 &#8226;0：未初始化。未调用open()方法
 &#8226;1：启动。已经调用open()方法，未调用send()方法
 &#8226;2：发送。已经调用send()方法，未接收到响应
 &#8226;3：接收。已经接收到部分数据
 &#8226;4：完成。已经接收到全部数据，可以在客户端使用
 2. Function onreadystatechange        
 当readyState的值改变时自动触发执行其对应的函数（回调函数） 
 3. String responseText            
 作为响应主体被返回的文本（字符串类型）
 4. XmlDocument responseXML          
 服务器返回的数据（Xml对象） 
 5. Number states  
 状态码（整数），如：200、404... 6. String statesText             
 状态文本（字符串），如：OK、NotFound...</pre>
</div>
<p><strong>&nbsp;二、get请求<br />
</strong></p>
<p>GET用于向服务器查询某些信息：<br />
</p>
<div class="phpstudycode">
<pre class="brush:js;">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head lang="en"&gt;
  &lt;meta charset="UTF-8"&gt;
  &lt;title&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;h1&gt;XMLHttpRequest - Ajax请求&lt;/h1&gt;
  &lt;input type="button" onclick="XmlGetRequest();" value="Get发送请求" /&gt;
  &lt;script src="/statics/jquery-1.12.4.js"&gt;&lt;/script&gt;
  &lt;script type="text/javascript"&gt;
    function GetXHR(){
      var xhr = null;
      if(XMLHttpRequest){
        xhr = new XMLHttpRequest();
      }else{
        xhr = new ActiveXObject("Microsoft.XMLHTTP");
      }
      return xhr;
    }
    function XmlGetRequest(){
      var xhr = GetXHR();
      // 定义回调函数
      xhr.onreadystatechange = function(){
        if(xhr.readyState == 4){
          // 已经接收到全部响应数据，执行以下操作
          var data = xhr.responseText;
          console.log(data);
        }
      };
      // 指定连接方式和地址----文件方式
      xhr.open('get', "/test/", true);
      // 发送请求
      xhr.send();
    }
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><strong>三、post请求</strong><br />
</p>
<p>POST请求用于向服务器发送应该被保存的数据。POST请求的主体可以包含非常多的数据，而且格式不限。<br />
</p>
<div class="phpstudycode">
<pre class="brush:js;">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head lang="en"&gt;
  &lt;meta charset="UTF-8"&gt;
  &lt;title&gt;POST&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;h1&gt;XMLHttpRequest - Ajax请求&lt;/h1&gt;
  &lt;input type="button" onclick="XmlPostRequest();" value="Post发送请求" /&gt;
  &lt;script src="/statics/jquery-1.12.4.js"&gt;&lt;/script&gt;
  &lt;script type="text/javascript"&gt;
    function GetXHR(){
      var xhr = null;
      if(XMLHttpRequest){
        xhr = new XMLHttpRequest();
      }else{
        xhr = new ActiveXObject("Microsoft.XMLHTTP");
      }
      return xhr;
    }
    function XmlPostRequest(){
      var xhr = GetXHR();
      // 定义回调函数
      xhr.onreadystatechange = function(){
        if(xhr.readyState == 4){
          // 已经接收到全部响应数据，执行以下操作
          var data = xhr.responseText;
          console.log(data);
        }
      };
      // 指定连接方式和地址----文件方式
      xhr.open('POST', "/test/", true);
      // 设置请求头
      xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset-UTF-8');
      // 发送请求
      xhr.send('n1=1;n2=2;');
    }
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><span style="color: #ff0000"><strong>jquery ajax</strong></span><br />
</p>
<p>jQuery 提供多个与 AJAX 有关的方法。<br />
</p>
<p>通过 jQuery AJAX 方法，您能够使用 HTTP Get 和 HTTP Post 从远程服务器上请求文本、HTML、XML 或 JSON - 同时您能够把这些外部数据直接载入网页的被选元素中。</p>
<p>&nbsp;&#8226;jQuery 不是生产者，而是大自然搬运工。</p>
<p>&nbsp;&#8226;jQuery Ajax本质 XMLHttpRequest 或 ActiveXObject&nbsp;<br />
</p>
<p>注：2.+版本不再支持IE9以下的浏览器</p>
<div class="phpstudycode">
<pre class="brush:js;">
1. jQuery.get(...)
    所有参数：
       url: 待载入页面的URL地址
       data: 待发送 Key/value 参数。
     success: 载入成功时回调函数。
     dataType: 返回内容格式，xml, json, script, text, html
2.jQuery.post(...)
    所有参数：
       url: 待载入页面的URL地址
       data: 待发送 Key/value 参数
     success: 载入成功时回调函数
     dataType: 返回内容格式，xml, json, script, text, html
3.jQuery.getJSON(...)
    所有参数：
       url: 待载入页面的URL地址
       data: 待发送 Key/value 参数。
     success: 载入成功时回调函数。
4.jQuery.getScript(...)
    所有参数：
       url: 待载入页面的URL地址
       data: 待发送 Key/value 参数。
     success: 载入成功时回调函数。
5.jQuery.ajax(...)
    部分参数：
       url：请求地址
       type：请求方式，GET、POST（1.9.0之后用method）
     headers：请求头
       data：要发送的数据
   contentType：即将发送信息至服务器的内容编码类型(默认: "application/x-www-form-urlencoded; charset=UTF-8")
      async：是否异步
     timeout：设置请求超时时间（毫秒）
    beforeSend：发送请求前执行的函数(全局)
     complete：完成之后执行的回调函数(全局)
     success：成功之后执行的回调函数(全局)
      error：失败之后执行的回调函数(全局)
     accepts：通过请求头发送给服务器，告诉服务器当前客户端课接受的数据类型
     dataType：将服务器端返回的数据转换成指定类型
      "xml": 将服务器端返回的内容转换成xml格式
      "text": 将服务器端返回的内容转换成普通文本格式
      "html": 将服务器端返回的内容转换成普通文本格式，在插入DOM中时，如果包含JavaScript标签，则会尝试去执行。
     "script": 尝试将返回值当作JavaScript去执行，然后再将服务器端返回的内容转换成普通文本格式
      "json": 将服务器端返回的内容转换成相应的JavaScript对象
     "jsonp": JSONP 格式使用 JSONP 形式调用函数时，如 "myurl&#63;callback=&#63;" jQuery 将自动替换 &#63; 为正确的函数名，以执行回调函数</pre>
</div>
<p>写一个最简单的例子：</p>
<div class="phpstudycode">
<pre class="brush:js;">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head lang="en"&gt;
  &lt;meta charset="UTF-8"&gt;
  &lt;title&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;p&gt;
    &lt;input type="button" onclick="XmlSendRequest();" value='Ajax请求' /&gt;
  &lt;/p&gt;
  &lt;script type="text/javascript" src="jquery-1.12.4.js"&gt;&lt;/script&gt;
  &lt;script&gt;
    function JXmlSendRequest(){
      $.ajax({
        url: "http://c2.com:8000/test/",  // 访问url地址
        type: 'GET',            // get方式提交
        dataType: 'text',　　　　　　　　　　 // 数据类型
        success: function(data, statusText, xmlHttpRequest){ // 成功后返回的结果
          console.log(data);
        }
      })
    }
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><span style="color: #ff0000"><strong>跨域ajax<br />
</strong></span></p>
<p>由于浏览器存在同源策略机制，同源策略阻止从一个源加载的文档或脚本获取或设置另一个源加载的文档的属性。所以ajax本身是不可以跨域的，通过产生一个script标签来实现跨域。因为script标签的src属性是没有跨域的限制的。<br />
</p>
<p>浏览器同源策略并不是对所有的请求均制约：</p>
<p>&nbsp;&#8226;制约： XmlHttpRequest</p>
<p>&nbsp;&#8226;不制约： img、iframe、script等具有src属性的标签<br />
</p>
<p>注：自己模拟跨域，需要现在自己电脑的host文件里面添加两条域名，我这里添加的是zhangyanlin.com和aylin.com这两个域名<br />
</p>
<p><strong>一、JSONP实现跨域请求<br />
</strong></p>
<p>JSONP是一个非官方的协议，它允许在服务器端集成Script tags返回至客户端，通过javascript callback的形式实现跨域访问。jsonp只能通过get方式进行跨域请求<br />
</p>
<div class="phpstudycode">
<pre class="brush:js;">
&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="UTF-8"&gt;
  &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;input type="button" value="Ajax" onclick="DoAjax();"/&gt;
  &lt;input type="button" value="JsonpAjax" onclick="JsonpAjax();"/&gt;
  &lt;script src="/statics/jquery-1.12.4.js"&gt;&lt;/script&gt;
  &lt;script src="http://aylin.com:8002/statics/jquery.cookie.js"&gt;&lt;/script&gt;
  &lt;script&gt;
    function func(arg) {
      console.log(arg); // 输出结果就是python代码给传过来的列表[11,22,33,]
    }
    function DoAjax() {
      $.ajax({
        url: 'http://alex.com:8002/index',
        type: 'POST',
        data: {'k1': 'v1'},
        success: function (arg) {
          console.log(arg);
        }        
      });
    }
    function JsonpAjax() {
//      var tag = document.createElement('script');
//      tag.src = "http://alex.com:8002/index";
//      document.head.appendChild(tag);
//      document.head.removeChild(tag);
      $.ajax({
        url: "http://aylin.com:8002/index",
        dataType: 'jsonp',
        jsonpCallBack: 'func'  // 对端给返回函数名，函数接收的参数是内容
      })
    }
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p>aylin.com域名这边可以给定义函数<br />
</p>
<div class="phpstudycode">
<pre class="brush:js;">
# 采用pythontornado框架来进行的
class IndexHandler(tornado.web.RequestHandler):
  def get(self):
    self.write('func([11,22,33]);')
  def post(self, *args, **kwargs):
    self.write('t2.post')</pre>
</div>
<p>在这里jsonp就采用script标签的src来进行跨域请求的<br />
</p>
<p><strong>二、CORS</strong><br />
</p>
<p>上面那种方法说到浏览器的同源策略导致ajax无法进行跨域传输，那么这种方法就可以突破浏览器限制来进行传输。当数据发送给对方域名的时候，对方已经收到，但是在返回的时候被浏览器给阻挡，我们可以写一串类似于身份证的字符串，通过浏览器的预检，从而达到数据的传输。<br />
</p>
<p>这方面分为简单请求和非简单请求<br />
</p>
<div class="phpstudycode">
<pre class="brush:js;">
条件：
  1、请求方式：HEAD、GET、POST
  2、请求头信息：
    Accept
    Accept-Language
    Content-Language
    Last-Event-ID
    Content-Type 对应的值是以下三个中的任意一个
                application/x-www-form-urlencoded
                multipart/form-data
                text/plain
注意：同时满足以上两个条件时，则是简单请求，否则为复杂请求</pre>
</div>
<p>简单请求只一次请求，而复杂请求是两次请求，在发送数据之前会先发一次请求用于做“预检”，只有“预检”通过后才再发送一次请求用于数据传输。<br />
</p>
<p><strong>基于cors实现AJAX请求:</strong><br />
</p>
<p>1、支持跨域，简单请求<br />
</p>
<p>服务器设置响应头：Access-Control-Allow-Origin = '域名' 或 '*'<br />
</p>
<div class="phpstudycode">
<pre class="brush:js;">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head lang="en"&gt;
  &lt;meta charset="UTF-8"&gt;
  &lt;title&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;p&gt;
    &lt;input type="submit" onclick="XmlSendRequest();" /&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;input type="submit" onclick="JqSendRequest();" /&gt;
  &lt;/p&gt;
  &lt;script type="text/javascript" src="jquery-1.12.4.js"&gt;&lt;/script&gt;
  &lt;script&gt;
    function XmlSendRequest(){
      var xhr = new XMLHttpRequest();
      xhr.onreadystatechange = function(){
        if(xhr.readyState == 4) {
          var result = xhr.responseText;
          console.log(result);
        }
      };
      xhr.open('GET', "http://c2.com:8000/test/", true);
      xhr.send();
    }
    function JqSendRequest(){
      $.ajax({
        url: "http://c2.com:8000/test/",
        type: 'GET',
        dataType: 'text',
        success: function(data, statusText, xmlHttpRequest){
          console.log(data);
        }
      })
    }
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<div class="phpstudycode">
<pre class="brush:js;">
class MainHandler(tornado.web.RequestHandler):
  def get(self):
    self.set_header('Access-Control-Allow-Origin', "http://www.xxx.com")
    self.write('{"status": true, "data": "seven"}')</pre>
</div>
<p>2、支持跨域，复杂请求<br />
</p>
<p>由于复杂请求时，首先会发送“预检”请求，如果“预检”成功，则发送真实数据。</p>
<p>&nbsp;&#8226;“预检”请求时，允许请求方式则需服务器设置响应头：Access-Control-Request-Method</p>
<p>&nbsp;&#8226;“预检”请求时，允许请求头则需服务器设置响应头：Access-Control-Request-Headers</p>
<p>&nbsp;&#8226;“预检”缓存时间，服务器设置响应头：Access-Control-Max-Age<br />
</p>
<div class="phpstudycode">
<pre class="brush:js;">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head lang="en"&gt;
  &lt;meta charset="UTF-8"&gt;
  &lt;title&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;p&gt;
    &lt;input type="submit" onclick="XmlSendRequest();" /&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;input type="submit" onclick="JqSendRequest();" /&gt;
  &lt;/p&gt;
  &lt;script type="text/javascript" src="jquery-1.12.4.js"&gt;&lt;/script&gt;
  &lt;script&gt;
    function XmlSendRequest(){
      var xhr = new XMLHttpRequest();
      xhr.onreadystatechange = function(){
        if(xhr.readyState == 4) {
          var result = xhr.responseText;
          console.log(result);
        }
      };
      xhr.open('PUT', "http://aylin.com:8000/test/", true);
      xhr.setRequestHeader('k1', 'v1');
      xhr.send();
    }
    function JqSendRequest(){
      $.ajax({
        url: "http://aylin.com:8000/test/",
        type: 'PUT',
        dataType: 'text',
        headers: {'k1': 'v1'},
        success: function(data, statusText, xmlHttpRequest){
          console.log(data);
        }
      })
    }
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<div class="phpstudycode">
<pre class="brush:js;">
class MainHandler(tornado.web.RequestHandler):
  def put(self):
    self.set_header('Access-Control-Allow-Origin', "http://www.xxx.com")
    self.write('{"status": true, "data": "seven"}')
  def options(self, *args, **kwargs):
    self.set_header('Access-Control-Allow-Origin', "http://www.xxx.com")
    self.set_header('Access-Control-Allow-Headers', "k1,k2")
    self.set_header('Access-Control-Allow-Methods', "PUT,DELETE")
    self.set_header('Access-Control-Max-Age', 10)</pre>
</div>
<p>3、跨域传输cookie<br />
</p>
<p>在跨域请求中，默认情况下，HTTP Authentication信息，Cookie头以及用户的SSL证书无论在预检请求中或是在实际请求都是不会被发送。<br />
</p>
<p>如果想要发送：</p>
<p>&nbsp;&#8226;浏览器端：XMLHttpRequest的withCredentials为true</p>
<p>&nbsp;&#8226;服务器端：Access-Control-Allow-Credentials为true</p>
<p>&nbsp;&#8226;注意：服务器端响应的 Access-Control-Allow-Origin 不能是通配符 *<br />
</p>
<div class="phpstudycode">
<pre class="brush:js;">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head lang="en"&gt;
  &lt;meta charset="UTF-8"&gt;
  &lt;title&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;p&gt;
    &lt;input type="submit" onclick="XmlSendRequest();" /&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;input type="submit" onclick="JqSendRequest();" /&gt;
  &lt;/p&gt;
  &lt;script type="text/javascript" src="jquery-1.12.4.js"&gt;&lt;/script&gt;
  &lt;script&gt;
    function XmlSendRequest(){
      var xhr = new XMLHttpRequest();
      xhr.onreadystatechange = function(){
        if(xhr.readyState == 4) {
          var result = xhr.responseText;
          console.log(result);
        }
      };
      xhr.withCredentials = true;
      xhr.open('PUT', "http://aylin.com:8000/test/", true);
      xhr.setRequestHeader('k1', 'v1');
      xhr.send();
    }
    function JqSendRequest(){
      $.ajax({
        url: "http://aylin.com:8000/test/",
        type: 'PUT',
        dataType: 'text',
        headers: {'k1': 'v1'},
        xhrFields:{withCredentials: true},
        success: function(data, statusText, xmlHttpRequest){
          console.log(data);
        }
      })
    }
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<div class="phpstudycode">
<pre class="brush:js;">
class MainHandler(tornado.web.RequestHandler):
  def put(self):
    self.set_header('Access-Control-Allow-Origin', "http://www.xxx.com")
    self.set_header('Access-Control-Allow-Credentials', "true")
    self.set_header('xxoo', "seven")
    self.set_header('zhangyanlinhenshuai', "feichangshuai")
    self.set_header('Access-Control-Expose-Headers', "shuai,shuaishuai")
    self.set_cookie('kkkkk', 'vvvvv');
    self.write('{"status": true, "data": "seven"}')
  def options(self, *args, **kwargs):
    self.set_header('Access-Control-Allow-Origin', "http://www.xxx.com")
    self.set_header('Access-Control-Allow-Headers', "k1,k2")
    self.set_header('Access-Control-Allow-Methods', "PUT,DELETE")
    self.set_header('Access-Control-Max-Age', 10)</pre>
</div>
<p>以上所述是小编给大家介绍的Ajax学习全套(最全最经典)的全部叙述，希望对大家有所帮助，如果大家有任何疑问请给我留言，小编会及时回复大家的。在此也非常感谢大家对phpstudy网站的支持！</p>
<hr></span>                                     
		    	</div>
		    	<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>代码注释</div>
			    <div class="panel-content">
			    <span></span>                                     
		    	</div>

			</div>

			<!-- END ROW -->
			<div class="newsPage">
				<div class="newsPageTurn">
				    <span><a>上一篇</a><a href='/php/biji/82585.html'>Android 解析JSON对象及实例说明</a><a>下一篇</a><a href='/php/biji/82587.html'>用SELECT... INTO OUTFILE语句导出MySQL数据的教程</a></span>
				</div>
			</div>
		</div>


<div id="author-box">
    <h3>作者：喵哥笔记</h3>
        <div class="author-info">
            <div class="author-avatar">
                <img src="/skin1/picture/01.jpg" alt="IDC笔记" class="avatar" width="64" height="64">
            </div>
        <div class="author-description">
            <p>学的不仅是技术，更是梦想！</p>
            <ul class="author-social follows nb">
            	<li>
                    <a target="_blank" href="/" title="IDC笔记">IDC笔记</a>
                </li>
            </ul>
        </div>
        <div class="clear"></div>
    </div>
</div>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
<!-- container-fluid -->
	</div>
<!-- content -->
	<footer class="footer">
	© 2020 IDC笔记 <i class="mdi mdi-heart text-danger"></i>. | 备案号：<a href="https://beian.miit.gov.cn/">辽ICP备18000516号</a>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?674585fbbd2294d3faf910f668ea91b4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

	</footer>
</div>

</div>
<!-- END wrapper -->
<!-- jQuery  -->
<script src="/skin1/js/jquery.min.js"></script>
<script src="/skin1/js/bootstrap.bundle.min.js"></script>
<script src="/skin1/js/metismenu.min.js"></script>
<script src="/skin1/js/jquery.slimscroll.js"></script>
<script src="/skin1/js/waves.min.js"></script>
<!--Morris Chart-->
<script src="/skin1/js/morris.min.js"></script>
<script src="/skin1/js/raphael.min.js"></script>
<script src="/skin1/js/dashboard.init.js"></script>
<script src="/skin1/js/app.js"></script>
<script src="/foot.js"></script>
</body>
</html>