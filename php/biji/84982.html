<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title>AJax与Jsonp跨域访问问题小结_PHP教程_IDC笔记</title>
    <meta name="keywords" content="PHP,PHP笔记,PHP教程" />
    <meta name="description" content="####JavaScript的AJax<br />
<br />
<br />
AJAX即“Asynchronous Javascript And XML”（异步JavaScript和XML）<br />
<br />
设计AJax使用的一种重要技术是XMLHttpRequest对象。<br />
<br />
<br />
创建XMLHttpRequest对象的" />
    <meta content="Responsive admin theme build on top of Bootstrap 4" name="description" />
    <meta content="idcnote.com" name="author" />
    <link rel="shortcut icon" href="/skin1/images/favicon.ico">
    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="/skin1/css/morris.css">
    <link href="/skin1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/metismenu.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/icons.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/style.css" rel="stylesheet" type="text/css">
<link href="/SyntaxHighlighter/shCoreDefault.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/SyntaxHighlighter/shCore.js"></script>
<script type="text/javascript">
 SyntaxHighlighter.all();
</script>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
</head>
<body>
<!-- Begin page -->
		<div id="wrapper">
			<!-- Top Bar Start -->
			<div class="topbar">
				<!-- LOGO -->
				<div class="topbar-left">
					<a href="/" class="logo">
						<span class="logo-light">
                            <i class="mdi mdi-camera-control"></i>IDC笔记
                        </span>
						<span class="logo-sm">
                            <i class="mdi mdi-camera-control"></i>
                        </span>
					</a>
				</div>
				<nav class="navbar-custom">
					<ul class="navbar-right list-inline float-right mb-0">
						<!--<li class="dropdown notification-list list-inline-item d-none d-md-inline-block">
							<a class="nav-link waves-effect" href="#" id="btn-fullscreen">
								<i class="mdi mdi-arrow-expand-all noti-icon"></i>
							</a>
						</li>
						<li class="dropdown notification-list list-inline-item">
							<div class="dropdown notification-list nav-pro-img">
								<a class="dropdown-toggle nav-link arrow-none nav-user" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
									<img src="/skin1/picture/user-4.jpg" alt="user" class="rounded-circle">
								</a>
								<div class="dropdown-menu dropdown-menu-right profile-dropdown ">
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-account-circle"></i> Profile</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-wallet"></i> Wallet</a>
									<a class="dropdown-item d-block" href="#">
										<span class="badge badge-success float-right">11</span>
										<i class="mdi mdi-settings"></i> Settings</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-lock-open-outline"></i> Lock screen</a>
									<div class="dropdown-divider"></div>
									<a class="dropdown-item text-danger" href="#">
										<i class="mdi mdi-power text-danger"></i> Logout</a>
								</div>
							</div>
						</li>
						-->
					</ul>
					<ul class="list-inline menu-left mb-0">
						<li class="float-left">
							<button class="button-menu-mobile open-left waves-effect">
                            <i class="mdi mdi-menu"></i>
                        </button>
						</li>
						<li class="d-none d-md-inline-block">
							<form role="search" class="app-search">
								<div class="form-group mb-0">
									<input type="text" class="form-control" placeholder="Search..">
									<button type="submit"><i class="fa fa-search"></i></button>
								</div>
							</form>
						</li>
					</ul>
				</nav>
			</div>
<!-- ========== Left Sidebar Start ========== -->
<div class="left side-menu">
    <div class="slimscroll-menu" id="remove-scroll">
    <!--- Sidemenu -->
    <div id="sidebar-menu">
    <!-- Left Menu Start -->
    <ul class="metismenu" id="side-menu">
			<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP简介			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jianjie/1.html">PHP简介</a></li><li><a href="/php/jianjie/2.html">PHP用途</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP基本语法			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yufa/3.html">分离HTML</a></li><li><a href="/php/yufa/4.html">指令分隔符</a></li><li><a href="/php/yufa/5.html">PHP注释</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类型			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpleixing/6.html">PHP类型简介</a></li><li><a href="/php/phpleixing/7.html">PHP类型之布尔类型</a></li><li><a href="/php/phpleixing/8.html">PHP类型之整型</a></li><li><a href="/php/phpleixing/9.html">PHP类型之浮点型</a></li><li><a href="/php/phpleixing/10.html">PHP类型之字符串</a></li><li><a href="/php/phpleixing/11.html">PHP类型之数组</a></li><li><a href="/php/phpleixing/12.html">PHP类型之对象</a></li><li><a href="/php/phpleixing/13.html">PHP类型之资源类型</a></li><li><a href="/php/phpleixing/14.html">PHP类型之NULL</a></li><li><a href="/php/phpleixing/15.html">PHP类型之伪类型</a></li><li><a href="/php/phpleixing/16.html">PHP类型之类型判别</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP变量			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbianliang/17.html">PHP变量之基础</a></li><li><a href="/php/phpbianliang/18.html">PHP变量之预定义变量</a></li><li><a href="/php/phpbianliang/19.html">PHP变量之变量范围</a></li><li><a href="/php/phpbianliang/20.html">PHP变量之可变变量</a></li><li><a href="/php/phpbianliang/21.html">PHP变量之外部变量</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP运算符			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yunsuanfu/22.html">PHP运算符优先级</a></li><li><a href="/php/yunsuanfu/23.html">算术运算符</a></li><li><a href="/php/yunsuanfu/24.html">赋值运算符</a></li><li><a href="/php/yunsuanfu/25.html">位运算符</a></li><li><a href="/php/yunsuanfu/26.html">比较运算符</a></li><li><a href="/php/yunsuanfu/27.html">错误控制运算符</a></li><li><a href="/php/yunsuanfu/28.html">执行运算符</a></li><li><a href="/php/yunsuanfu/29.html">递增/递减运算符</a></li><li><a href="/php/yunsuanfu/30.html">逻辑运算符</a></li><li><a href="/php/yunsuanfu/31.html">字符串运算符</a></li><li><a href="/php/yunsuanfu/32.html">数组运算符</a></li><li><a href="/php/yunsuanfu/33.html">类型运算符</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP控制结构			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jiegou/34.html">PHP控制结构之if</a></li><li><a href="/php/jiegou/35.html">PHP控制结构之else</a></li><li><a href="/php/jiegou/36.html">PHP控制结构之elseif/else if</a></li><li><a href="/php/jiegou/37.html">PHP控制结构之替代语法</a></li><li><a href="/php/jiegou/38.html">PHP控制结构之while</a></li><li><a href="/php/jiegou/39.html">PHP控制结构之do-while</a></li><li><a href="/php/jiegou/40.html">PHP控制结构之for</a></li><li><a href="/php/jiegou/41.html">PHP控制结构之foreach</a></li><li><a href="/php/jiegou/42.html">PHP控制结构之break</a></li><li><a href="/php/jiegou/43.html">PHP控制结构之continue</a></li><li><a href="/php/jiegou/44.html">PHP控制结构之switch</a></li><li><a href="/php/jiegou/45.html">PHP控制结构之declare</a></li><li><a href="/php/jiegou/46.html">PHP控制结构之return</a></li><li><a href="/php/jiegou/47.html">PHP控制结构之require</a></li><li><a href="/php/jiegou/48.html">PHP控制结构之include</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/hanshu/52.html">用户自定义函数</a></li><li><a href="/php/hanshu/53.html">函数的参数</a></li><li><a href="/php/hanshu/54.html">返回值</a></li><li><a href="/php/hanshu/55.html">可变函数</a></li><li><a href="/php/hanshu/56.html">内部（内置）函数</a></li><li><a href="/php/hanshu/57.html">匿名函数</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类与对象			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpduixiang/58.html">类与对象前言</a></li><li><a href="/php/phpduixiang/59.html">基本概念</a></li><li><a href="/php/phpduixiang/60.html">属性</a></li><li><a href="/php/phpduixiang/61.html">类常量</a></li><li><a href="/php/phpduixiang/62.html">自动加载对象</a></li><li><a href="/php/phpduixiang/63.html">构造函数和析构函数</a></li><li><a href="/php/phpduixiang/64.html">访问控制</a></li><li><a href="/php/phpduixiang/65.html">对象继承</a></li><li><a href="/php/phpduixiang/66.html">Static关键字</a></li><li><a href="/php/phpduixiang/67.html">抽象类</a></li><li><a href="/php/phpduixiang/68.html">接口</a></li><li><a href="/php/phpduixiang/69.html">Traits</a></li><li><a href="/php/phpduixiang/70.html">重载</a></li><li><a href="/php/phpduixiang/71.html">对象迭代</a></li><li><a href="/php/phpduixiang/72.html">设计模式</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP异常处理			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yichang/81.html">异常处理</a></li><li><a href="/php/yichang/82.html">扩展PHP内置的异常处理类</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数库按分类			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpku/83.html">数组</a></li><li><a href="/php/phpku/84.html">Classes/Objects</a></li><li><a href="/php/phpku/85.html">Date/Time</a></li><li><a href="/php/phpku/86.html">Directories</a></li><li><a href="/php/phpku/87.html">错误处理</a></li><li><a href="/php/phpku/88.html">Program execution</a></li><li><a href="/php/phpku/89.html">Filesystem</a></li><li><a href="/php/phpku/90.html">Filter</a></li><li><a href="/php/phpku/91.html">Function Handling</a></li><li><a href="/php/phpku/92.html">PHP 选项/信息</a></li><li><a href="/php/phpku/93.html">Mail</a></li><li><a href="/php/phpku/94.html">Math</a></li><li><a href="/php/phpku/95.html">Misc.</a></li><li><a href="/php/phpku/96.html">Network</a></li><li><a href="/php/phpku/97.html">输出控制</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> php基础			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbiji/108377.html"></a></li><li><a href="/php/phpbiji/108376.html"></a></li><li><a href="/php/phpbiji/108380.html"></a></li><li><a href="/php/phpbiji/108379.html"></a></li><li><a href="/php/phpbiji/108378.html"></a></li><li><a href="/php/phpbiji/108381.html"></a></li><li><a href="/php/phpbiji/108382.html"></a></li><li><a href="/php/phpbiji/108384.html"></a></li><li><a href="/php/phpbiji/108383.html"></a></li><li><a href="/php/phpbiji/108385.html"></a></li><li><a href="/php/phpbiji/108386.html"></a></li><li><a href="/php/phpbiji/108388.html"></a></li><li><a href="/php/phpbiji/108387.html"></a></li><li><a href="/php/phpbiji/108389.html"></a></li><li><a href="/php/phpbiji/108391.html"></a></li>		</ul>
	</li>
		<li>
	    <a href="/php/biji/" class="waves-effect">
		    <i class="icon-share"></i>
		    <span>PHP笔记
		       	<span class="float-right menu-arrow">
		       	<i class="mdi mdi-chevron-right"></i>
		       	</span>
		    </span>
	    </a>
	</li>
	</ul>
</div>
<!-- Sidebar -->
<div class="clearfix"></div>
</div>
<!-- Sidebar -left -->
</div>
<!-- Left Sidebar End -->
<!-- Start right Content here -->
<div class="content-page">
	<div class="content">
		<div class="container-fluid">
			<div class="page-title-box">
				<div class="row align-items-center">
					<div class="col-sm-6">
						<h1 class="page-title">AJax与Jsonp跨域访问问题小结</h1>
					</div>
				</div>
				<!-- end row -->
			</div>
			<!-- end page-title -->
			<!-- START ROW -->
			<div class="panel panel-forbid">
				<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>内容摘要</div>
			    <div class="panel-content">
			    <span>####JavaScript的AJax<br />
<br />
<br />
AJAX即“Asynchronous Javascript And XML”（异步JavaScript和XML）<br />
<br />
设计AJax使用的一种重要技术是XMLHttpRequest对象。<br />
<br />
<br />
创建XMLHttpRequest对象的</span>                                     
		    	</div>
			    <div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>文章正文</div>
			    <div class="panel-content">
			    <span><p><strong>####JavaScript的AJax</strong><br />
</p>
<p>AJAX即“Asynchronous Javascript And XML”（异步JavaScript和XML）<br />
设计AJax使用的一种重要技术是XMLHttpRequest对象。<br />
</p>
<p>创建XMLHttpRequest对象的方式：</p>
<p>xmlhttp = new ActiveObject("Microsoft.XMLHTTP"); // IE浏览器支持的创建方式 <br />
xmlhttp = new XMLHTTPRequest(); // FireFox,Opera等浏览器支持的创建方式<br />
XMLHttp是一套可以在Javascript、VbScript、Jscript等脚本语言中通过http协议传送或从接收XML及其他数据的一套API。可用于模拟http的GET和POST请求。<br />
可以判断window.XMLHttpRequest对象是否可用然后创建XMLHttpRequest对象。<br />
以下是XMLHttpRequest对象的属性和使用方法，粘贴过来的，注释的很详细。</p>
<div class="phpstudycode">
<pre class="brush:js;">
&lt;html&gt; 
&lt;head&gt; 
&lt;title&gt;XMLHTTPRequest对象的说明DEMO&lt;/title&gt; 
&lt;script language="javascript" type="text/javascript"&gt; 
&lt;!-- 
var xmlhttp; 
// 创建一个XMLHTTPRequest对象 
function createXMLHTTPRequext(){ 
  if(window.ActiveXObject) { 
    xmlhttp = new ActiveXObject('Microsoft.XMLHTTP'); 
  } 
  else if(window.XMLHTTPRequest){ 
    xmlhttp = new XMLHTTPRequest(); 
  } 
} 
function PostOrder(xmldoc) 
{ 
  createXMLHTTPRequext(); 

  // 方法：open 
  // 创建一个新的http请求，并指定此请求的方法、URL以及验证信息 
  // 语法：oXMLHttpRequest.open(bstrMethod, bstrUrl, varAsync, bstrUser, bstrPassword); 
  // 参数 
  // bstrMethod 
  // http方法，例如：POST、GET、PUT及PROPFIND。大小写不敏感。 
  // bstrUrl 
  // 请求的URL地址，可以为绝对地址也可以为相对地址。 
  // varAsync[可选] 
  // 布尔型，指定此请求是否为异步方式，默认为true。如果为真，当状态改变时会调用onreadystatechange属性指定的回调函数。 
  // bstrUser[可选] 
  // 如果服务器需要验证，此处指定用户名，如果未指定，当服务器需要验证时，会弹出验证窗口。 
  // bstrPassword[可选] 
  // 验证信息中的密码部分，如果用户名为空，则此值将被忽略。 
  // 备注：调用此方法后，可以调用send方法向服务器发送数据。 
  xmlhttp.Open("get", "http://localhost/example.htm", false); 
  // var book = xmlhttp.responseXML.selectSingleNode("//book[@id='bk101']"); 
  // alert(book.xml); 

  // 属性：onreadystatechange 
  // onreadystatechange：指定当readyState属性改变时的事件处理句柄 
  // 语法：oXMLHttpRequest.onreadystatechange = funcMyHandler; 
  // 如下的例子演示当XMLHTTPRequest对象的readyState属性改变时调用HandleStateChange函数， 
  // 当数据接收完毕后（readystate == 4）此页面上的一个按钮将被激活 
  // 备注：此属性只写，为W3C文档对象模型的扩展. 
  xmlhttp.onreadystatechange= HandleStateChange; 

  // 方法：send 
  // 发送请求到http服务器并接收回应 
  // 语法：oXMLHttpRequest.send(varBody); 
  // 参数：varBody （欲通过此请求发送的数据。） 
  // 备注：此方法的同步或异步方式取决于open方法中的bAsync参数，如果bAsync == False，此方法将会等待请求完成或者超时时才会返回，如果bAsync == True，此方法将立即返回。 
  // This method takes one optional parameter, which is the requestBody to use. The acceptable VARIANT input types are BSTR, SAFEARRAY of UI1 (unsigned bytes), IDispatch to an XML Document Object Model (DOM) object, and IStream *. You can use only chunked encoding (for sending) when sending IStream * input types. The component automatically sets the Content-Length header for all but IStream * input types. 
  // 如果发送的数据为BSTR，则回应被编码为utf-8, 必须在适当位置设置一个包含charset的文档类型头。 
  // If the input type is a SAFEARRAY of UI1, the response is sent as is without additional encoding. The caller must set a Content-Type header with the appropriate content type. 
  // 如果发送的数据为XML DOM object，则回应将被编码为在xml文档中声明的编码，如果在xml文档中没有声明编码，则使用默认的UTF-8。 
  // If the input type is an IStream *, the response is sent as is without additional encoding. The caller must set a Content-Type header with the appropriate content type. 

  xmlhttp.Send(xmldoc); 

  // 方法：getAllResponseHeaders 
  // 获取响应的所有http头 
  // 语法：strValue = oXMLHttpRequest.getAllResponseHeaders(); 
  // 备注：每个http头名称和值用冒号分割，并以\r\n结束。当send方法完成后才可调用该方法。 
  alert(xmlhttp.getAllResponseHeaders()); 
  // 方法：getResponseHeader 
  // 从响应信息中获取指定的http头 
  // 语法：strValue = oXMLHttpRequest.getResponseHeader(bstrHeader); 
  // 备注：当send方法成功后才可调用该方法。如果服务器返回的文档类型为"text/xml", 则这句话 
  // xmlhttp.getResponseHeader("Content-Type");将返回字符串"text/xml"。可以使用getAllResponseHeaders方法获取完整的http头信息。 
  alert(xmlhttp.getResponseHeader("Content-Type")); // 输出http头中的Content-Type列：当前web服务器的版本及名称。 

  document.frmTest.myButton.disabled = true; 

  // 方法：abort 
  // 取消当前请求 
  // 语法：oXMLHttpRequest.abort(); 
  // 备注：调用此方法后，当前请求返回UNINITIALIZED 状态。 
  // xmlhttp.abort(); 

  // 方法：setRequestHeader 
  // 单独指定请求的某个http头 
  // 语法：oXMLHttpRequest.setRequestHeader(bstrHeader, bstrValue); 
  // 参数：bstrHeader（字符串，头名称。） 
  // bstrValue（字符串，值。） 
  // 备注：如果已经存在已此名称命名的http头，则覆盖之。此方法必须在open方法后调用。 
  // xmlhttp.setRequestHeader(bstrHeader, bstrValue); 
  } 
  function HandleStateChange() 
  { 
  // 属性：readyState 
  // 返回XMLHTTP请求的当前状态 
  // 语法：lValue = oXMLHttpRequest.readyState; 
  // 备注：变量，此属性只读，状态用长度为4的整型表示.定义如下： 
  // 0 (未初始化) 对象已建立，但是尚未初始化（尚未调用open方法） 
  // 1 (初始化) 对象已建立，尚未调用send方法 
  // 2 (发送数据) send方法已调用，但是当前的状态及http头未知 
  // 3 (数据传送中) 已接收部分数据，因为响应及http头不全，这时通过responseBody和responseText获取部分数据会出现错误， 
  // 4 (完成) 数据接收完毕,此时可以通过通过responseBody和responseText获取完整的回应数据 
  if (xmlhttp.readyState == 4){ 
    document.frmTest.myButton.disabled = false; 

    // 属性：responseBody 
    // 返回某一格式的服务器响应数据 
    // 语法：strValue = oXMLHttpRequest.responseBody; 
    // 备注：变量，此属性只读，以unsigned array格式表示直接从服务器返回的未经解码的二进制数据。 
    alert(xmlhttp.responseBody); 

    // 属性：responseStream 
    // 以Ado Stream对象的形式返回响应信息 
    // 语法：strValue = oXMLHttpRequest.responseStream; 
    // 备注：变量，此属性只读，以Ado Stream对象的形式返回响应信息。 
    alert(xmlhttp.responseStream); 

    // 属性：responseText 
    // 将响应信息作为字符串返回 
    // 语法：strValue = oXMLHttpRequest.responseText; 
    // 备注：变量，此属性只读，将响应信息作为字符串返回。XMLHTTP尝试将响应信息解码为Unicode字符串， 
    // XMLHTTP默认将响应数据的编码定为UTF-8，如果服务器返回的数据带BOM(byte-order mark)，XMLHTTP可 
    // 以解码任何UCS-2 (big or little endian)或者UCS-4 数据。注意，如果服务器返回的是xml文档，此属 
    // 性并不处理xml文档中的编码声明。你需要使用responseXML来处理。 
    alert(xmlhttp.responseText); 

    // 属性：responseXML 
    // 将响应信息格式化为Xml Document对象并返回 
    // 语法：var objDispatch = oXMLHttpRequest.responseXML; 
    // 备注：变量，此属性只读，将响应信息格式化为Xml Document对象并返回。如果响应数据不是有效的XML文档， 
    // 此属性本身不返回XMLDOMParseError，可以通过处理过的DOMDocument对象获取错误信息。 
    alert("Result = " + xmlhttp.responseXML.xml); 

    // 属性：status 
    // 返回当前请求的http状态码 
    // 语法：lValue = oXMLHttpRequest.status; 
    // 返回值：长整形标准http状态码，定义如下： 
    // Number:Description 
    // 100:Continue
    // 101:Switching protocols 
    // 200:OK 
    // 201:Created 
    // 202:Accepted 
    // 203:Non-Authoritative Information 
    // 204:No Content 
    // 205:Reset Content 
    // 206:Partial Content 
    // 300:Multiple Choices 
    // 301:Moved Permanently 
    // 302:Found 
    // 303:See Other 
    // 304:Not Modified 
    // 305:Use Proxy 
    // 307:Temporary Redirect 
    // 400:Bad Request 
    // 401:Unauthorized 
    // 402:Payment Required 
    // 403:Forbidden 
    // 404:Not Found 
    // 405:Method Not Allowed 
    // 406:Not Acceptable 
    // 407:Proxy Authentication Required 
    // 408:Request Timeout 
    // 409:Conflict 
    // 410:Gone 
    // 411:Length Required 
    // 412:Precondition Failed 
    // 413:Request Entity Too Large 
    // 414:Request-URI Too Long 
    // 415:Unsupported Media Type 
    // 416:Requested Range Not Suitable 
    // 417:Expectation Failed 
    // 500:Internal Server Error 
    // 501:Not Implemented 
    // 502:Bad Gateway 
    // 503:Service Unavailable 
    // 504:Gateway Timeout 
    // 505:HTTP Version Not Supported 
    // 备注：长整形，此属性只读，返回当前请求的http状态码,此属性仅当数据发送并接收完毕后才可获取。 
    alert(xmlhttp.status);

    // 属性：statusText 
    // 返回当前请求的响应行状态 
    // 语法：strValue = oXMLHttpRequest.statusText; 
    // 备注：字符串，此属性只读，以BSTR返回当前请求的响应行状态,此属性仅当数据发送并接收完毕后才可获取。 
    alert(xmlhttp.statusText); 
  } 
} 

//--&gt; 
&lt;/script&gt; 
&lt;/head&gt; 
&lt;body&gt; 
  &lt;form name="frmTest"&gt; 
    &lt;input name="myButton" type="button" value="Click Me" onclick="PostOrder('http://localhost/example.htm');"&gt; 
  &lt;/form&gt; 
&lt;/body&gt; 
&lt;/html&gt;

</pre>
</div>
<p>简单一点来说，就是利用XMLHttpRequest对象向服务器发出了请求，然后获取服务器返回信息这样一个过程，<br />
以上是JavaScript的Ajax技术原理。和后面要说的Jsonp实现跨域 访问的原理完全不一样。</p>
<p><strong>###JQuery的AJax</strong></p>
<p>JQuery对ajax这种技术进行了封装，使用起来更为方便。<br />
</p>
<p>$.ajax的一般形式</p>
<div class="phpstudycode">
<pre class="brush:js;">
$.ajax({
  type: 'POST',
  url: url ,
  data: data ,
  dataType: dataType
  success: success ,  
});
</pre>
</div>
<p>在场景不一样的时候，我们需要变换使用Ajax。 1.拼装json数据。 2.序列化表格内容。var formParam = $("#form1").serialize(); 3.拼接URL 。。。 比如我们的数据中有特殊字符串（比如&）的时候拼接字符串不好用，可能会使提交内容不完整。这时候采用Json的形式会比较好用。</p>
<p><strong>###利用jsonp实现跨域访问<br />
</strong></p>
<p>什么是Jsonp？<br />
和json有什么关系？<br />
jsonp是怎么实现跨域访问的？<br />
</p>
<p>首先解释一下，为什么Ajax不能跨域访问，浏览器为什么限制跨域访问。<br />
</p>
<p>假设浏览器支持跨域访问，我们可以在A站通过XmlHttpRequest访问B站，这时候已经通过了B站的验证，得到了B站的Cookie，然后我们就可以随意访问B站了，这时候A站冒用B站的身份可以操作B站一切不需要进一步验证的操作，这是相当危险的。<br />
</p>
<p>我们如何获取跨域的数据呢？<br />
</p>
<p>我们发现Web页面上调用js文件时则不受是否跨域的影响（不仅如此，我们还发现凡是拥有”src”这个属性的标签都拥有跨域的能力，比如script、img、iframe等等。我们可以利用js的这一性质来获取我们想要的数据。<br />
</p>
<p>为了便于客户端使用数据，逐渐形成了一种非正式传输协议，人们把它称作JSONP，该协议的一个要点就是允许用户传递一个callback参数给服务端，然后服务端返回数据时会将这个callback参数作为函数名来包裹住JSON数据，这样客户端就可以随意定制自己的函数来自动处理返回数据了。<br />
</p>
<p>下面我们来看一下jsonp到底做了什么事情。<br />
</p>
<p>1、我们知道，哪怕跨域js文件中的代码（当然指符合web脚本安全策略的），web页面也是可以无条件执行的。 远程服务器remoteserver.com根目录下有个remote.js文件代码如下：</p>
<p>alert('我是远程文件');<br />
本地服务器localserver.com下有个jsonp.html页面代码如下：</p>
<div class="phpstudycode">
<pre class="brush:js;">
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
&lt;head&gt;
  &lt;title&gt;&lt;/title&gt;
  &lt;script type="text/javascript" src="http://remoteserver.com/remote.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
</div>
<p>毫无疑问，页面将会弹出一个提示窗体，显示跨域调用成功。 这就是最基本的jsonp的思想。</p>
<p>2、现在我们在jsonp.html页面定义一个函数，然后在远程remote.js中传入数据进行调用。 　　jsonp.html页面代码如下：</p>
<div class="phpstudycode">
<pre class="brush:js;">
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
&lt;head&gt;
  &lt;title&gt;&lt;/title&gt;
  &lt;script type="text/javascript"&gt;
  var localHandler = function(data){
    alert('我是本地函数，可以被跨域的remote.js文件调用，远程js带来的数据是：' + data.result);
  };
  &lt;/script&gt;
  &lt;script type="text/javascript" src="http://remoteserver.com/remote.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
</div>
<p>remote.js文件代码如下：</p>
<p>localHandler({"result":"我是远程js带来的数据"});<br />
运行之后查看结果，页面成功弹出提示窗口，显示本地函数被跨域的远程js调用成功，并且还接收到了远程js带来的数据。 跨域访问数据的目的已经实现了，可是我怎么让远程js知道它应该调用的本地函数叫什么名字呢？</p>
<p>3.可以传一个参数过去告诉服务端“我想要一段调用XXX函数的js代码，请你返回给我”，于是服务器就可以按照客户端的需求来生成js脚本并响应了。</p>
<div class="phpstudycode">
<pre class="brush:js;">
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
&lt;head&gt;
  &lt;title&gt;&lt;/title&gt;
  &lt;script type="text/javascript"&gt;
  // 得到航班信息查询结果后的回调函数
  var flightHandler = function(data){
    alert('你查询的航班结果是：票价 ' + data.price + ' 元，' + '余票 ' + data.tickets + ' 张。');
  };
  // 提供jsonp服务的url地址（不管是什么类型的地址，最终生成的返回值都是一段javascript代码）
  var url = "http://flightQuery.com/jsonp/flightResult.aspx&#63;code=CA1998&callback=flightHandler";
  // 创建script标签，设置其属性
  var script = document.createElement('script');
  script.setAttribute('src', url);
  // 把script标签加入head，此时调用开始
  document.getElementsByTagName('head')[0].appendChild(script);
  &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
</div>
<p>在服务器端，我们获取callback，并且拼装好需要的js。</p>
<p>String callback = request.getParemeter("callback");<br />
response.getWriter.print(callback + "(" + json +")");<br />
这样返回给页面的内容是：</p>
<div class="phpstudycode">
<pre class="brush:js;">
flightHandler({
  "code": "CA1998",
  "price": 1780,
  "tickets": 5
});
</pre>
</div>
<p>4.Jquery也对jsonp实现了封装。（形式比较像ajax）</p>
<div class="phpstudycode">
<pre class="brush:js;">
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
 &lt;html xmlns="http://www.w3.org/1999/xhtml" &gt;
 &lt;head&gt;
   &lt;title&gt;Untitled Page&lt;/title&gt;
   &lt;script type="text/javascript" src=jquery.min.js"&gt;&lt;/script&gt;
   &lt;script type="text/javascript"&gt;
   jQuery(document).ready(function(){
    $.ajax({
       type: "get",
       async: false,
       url: "http://flightQuery.com/jsonp/flightResult.aspx&#63;code=CA1998",
       dataType: "jsonp",
       jsonp: "callback",//传递给请求处理程序或页面的，用以获得jsonp回调函数名的参数名(一般默认为:callback)
       jsonpCallback:"flightHandler",//自定义的jsonp回调函数名称，默认为jQuery自动生成的随机函数名，也可以写"&#63;"，jQuery会自动为你处理数据
       success: function(json){
         alert('您查询到航班信息：票价： ' + json.price + ' 元，余票： ' + json.tickets + ' 张。');
       },
       error: function(){
         alert('fail');
       }
     });
   });
   &lt;/script&gt;
   &lt;/head&gt;
 &lt;body&gt;
 &lt;/body&gt;
 &lt;/html&gt;
</pre>
</div>
<p>最后申明，Ajax和jsonp是两个完全不一样的东西。 ajax的核心是通过XmlHttpRequest获取非本页内容，而jsonp的核心则是动态添加script标签来调用服务器提供的js脚本。</p>
<p><strong>在jQuery中如何通过JSONP来跨域获取数据</strong><br />
</p>
<p>第一种方法是在ajax函数中设置dataType为'jsonp'：<br />
</p>
<div class="phpstudycode">
<pre class="brush:js;">
$.ajax({
    dataType: 'jsonp',
    jsonp:'callback',
    url: 'http://www.a.com/user&#63;id=123',   
    success: function(data){   
        //处理data数据   
    }   
});  
</pre>
</div>
<p>第二种方法是利用getJSON来实现，只要在地址中加上callback=&#63;参数即可：<br />
</p>
<div class="phpstudycode">
<pre class="brush:js;">
$.getJSON('http://www.a.com/user&#63;id=123&callback=&#63;', function(data){   
    //处理data数据   
});  
</pre>
</div>
<p>也可以简单地使用getScript方法：<br />
</p>
<div class="phpstudycode">
<pre class="brush:js;">
//此时也可以在函数外定义foo方法   
function foo(data){   
    //处理data数据   
}   
$.getJSON('http://www.a.com/user&#63;id=123&callback=foo');  
</pre>
</div>
<p>JSONP的应用<br />
</p>
<p>JSONP在开放API中可以起到非常重要的作用，开放API是运用在开发者自己的应用上，而许多应用往往是在开发者的服务器上而不是在新浪微博的服务器上，因此跨域请求数据成为开发者们所需要解决的一大问题，广大开放平台应该实现对JSONP的支持，这一点新浪微博开放平台便做的非常好（虽然某些API里没有说明，但实际上是可以使用JSONP方式调用的）。</p>
<hr></span>                                     
		    	</div>
		    	<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>代码注释</div>
			    <div class="panel-content">
			    <span></span>                                     
		    	</div>

			</div>

			<!-- END ROW -->
			<div class="newsPage">
				<div class="newsPageTurn">
				    <span><a>上一篇</a><a href='/php/biji/84981.html'>php正则preg_replace_callback函数用法实例</a><a>下一篇</a><a href='/php/biji/84983.html'>在Linux的系统Shell脚本中使用if语句的方法</a></span>
				</div>
			</div>
		</div>


<div id="author-box">
    <h3>作者：喵哥笔记</h3>
        <div class="author-info">
            <div class="author-avatar">
                <img src="/skin1/picture/01.jpg" alt="IDC笔记" class="avatar" width="64" height="64">
            </div>
        <div class="author-description">
            <p>学的不仅是技术，更是梦想！</p>
            <ul class="author-social follows nb">
            	<li>
                    <a target="_blank" href="/" title="IDC笔记">IDC笔记</a>
                </li>
            </ul>
        </div>
        <div class="clear"></div>
    </div>
</div>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
<!-- container-fluid -->
	</div>
<!-- content -->
	<footer class="footer">
	© 2020 IDC笔记 <i class="mdi mdi-heart text-danger"></i>. | 备案号：<a href="https://beian.miit.gov.cn/">辽ICP备18000516号</a>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?674585fbbd2294d3faf910f668ea91b4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

	</footer>
</div>

</div>
<!-- END wrapper -->
<!-- jQuery  -->
<script src="/skin1/js/jquery.min.js"></script>
<script src="/skin1/js/bootstrap.bundle.min.js"></script>
<script src="/skin1/js/metismenu.min.js"></script>
<script src="/skin1/js/jquery.slimscroll.js"></script>
<script src="/skin1/js/waves.min.js"></script>
<!--Morris Chart-->
<script src="/skin1/js/morris.min.js"></script>
<script src="/skin1/js/raphael.min.js"></script>
<script src="/skin1/js/dashboard.init.js"></script>
<script src="/skin1/js/app.js"></script>
<script src="/foot.js"></script>
</body>
</html>