<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title>php多种形式发送邮件(mail qmail邮件系统 phpmailer类)_PHP教程_IDC笔记</title>
    <meta name="keywords" content="PHP,PHP笔记,PHP教程" />
    <meta name="description" content="1. 使用 mail() 函数 <br />
没什么好讲的，就是使用系统自带的smtp系统来发送，一般是使用sendmail来发。这个按照各个系统不同而定。使用参考手册。 <br />
2. 使用管道的形式 <br />
昨天刚测试" />
    <meta content="Responsive admin theme build on top of Bootstrap 4" name="description" />
    <meta content="idcnote.com" name="author" />
    <link rel="shortcut icon" href="/skin1/images/favicon.ico">
    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="/skin1/css/morris.css">
    <link href="/skin1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/metismenu.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/icons.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/style.css" rel="stylesheet" type="text/css">
<link href="/SyntaxHighlighter/shCoreDefault.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/SyntaxHighlighter/shCore.js"></script>
<script type="text/javascript">
 SyntaxHighlighter.all();
</script>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
</head>
<body>
<!-- Begin page -->
		<div id="wrapper">
			<!-- Top Bar Start -->
			<div class="topbar">
				<!-- LOGO -->
				<div class="topbar-left">
					<a href="/" class="logo">
						<span class="logo-light">
                            <i class="mdi mdi-camera-control"></i>IDC笔记
                        </span>
						<span class="logo-sm">
                            <i class="mdi mdi-camera-control"></i>
                        </span>
					</a>
				</div>
				<nav class="navbar-custom">
					<ul class="navbar-right list-inline float-right mb-0">
						<!--<li class="dropdown notification-list list-inline-item d-none d-md-inline-block">
							<a class="nav-link waves-effect" href="#" id="btn-fullscreen">
								<i class="mdi mdi-arrow-expand-all noti-icon"></i>
							</a>
						</li>
						<li class="dropdown notification-list list-inline-item">
							<div class="dropdown notification-list nav-pro-img">
								<a class="dropdown-toggle nav-link arrow-none nav-user" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
									<img src="/skin1/picture/user-4.jpg" alt="user" class="rounded-circle">
								</a>
								<div class="dropdown-menu dropdown-menu-right profile-dropdown ">
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-account-circle"></i> Profile</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-wallet"></i> Wallet</a>
									<a class="dropdown-item d-block" href="#">
										<span class="badge badge-success float-right">11</span>
										<i class="mdi mdi-settings"></i> Settings</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-lock-open-outline"></i> Lock screen</a>
									<div class="dropdown-divider"></div>
									<a class="dropdown-item text-danger" href="#">
										<i class="mdi mdi-power text-danger"></i> Logout</a>
								</div>
							</div>
						</li>
						-->
					</ul>
					<ul class="list-inline menu-left mb-0">
						<li class="float-left">
							<button class="button-menu-mobile open-left waves-effect">
                            <i class="mdi mdi-menu"></i>
                        </button>
						</li>
						<li class="d-none d-md-inline-block">
							<form role="search" class="app-search">
								<div class="form-group mb-0">
									<input type="text" class="form-control" placeholder="Search..">
									<button type="submit"><i class="fa fa-search"></i></button>
								</div>
							</form>
						</li>
					</ul>
				</nav>
			</div>
<!-- ========== Left Sidebar Start ========== -->
<div class="left side-menu">
    <div class="slimscroll-menu" id="remove-scroll">
    <!--- Sidemenu -->
    <div id="sidebar-menu">
    <!-- Left Menu Start -->
    <ul class="metismenu" id="side-menu">
			<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP简介			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jianjie/1.html">PHP简介</a></li><li><a href="/php/jianjie/2.html">PHP用途</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP基本语法			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yufa/3.html">分离HTML</a></li><li><a href="/php/yufa/4.html">指令分隔符</a></li><li><a href="/php/yufa/5.html">PHP注释</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类型			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpleixing/6.html">PHP类型简介</a></li><li><a href="/php/phpleixing/7.html">PHP类型之布尔类型</a></li><li><a href="/php/phpleixing/8.html">PHP类型之整型</a></li><li><a href="/php/phpleixing/9.html">PHP类型之浮点型</a></li><li><a href="/php/phpleixing/10.html">PHP类型之字符串</a></li><li><a href="/php/phpleixing/11.html">PHP类型之数组</a></li><li><a href="/php/phpleixing/12.html">PHP类型之对象</a></li><li><a href="/php/phpleixing/13.html">PHP类型之资源类型</a></li><li><a href="/php/phpleixing/14.html">PHP类型之NULL</a></li><li><a href="/php/phpleixing/15.html">PHP类型之伪类型</a></li><li><a href="/php/phpleixing/16.html">PHP类型之类型判别</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP变量			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbianliang/17.html">PHP变量之基础</a></li><li><a href="/php/phpbianliang/18.html">PHP变量之预定义变量</a></li><li><a href="/php/phpbianliang/19.html">PHP变量之变量范围</a></li><li><a href="/php/phpbianliang/20.html">PHP变量之可变变量</a></li><li><a href="/php/phpbianliang/21.html">PHP变量之外部变量</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP运算符			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yunsuanfu/22.html">PHP运算符优先级</a></li><li><a href="/php/yunsuanfu/23.html">算术运算符</a></li><li><a href="/php/yunsuanfu/24.html">赋值运算符</a></li><li><a href="/php/yunsuanfu/25.html">位运算符</a></li><li><a href="/php/yunsuanfu/26.html">比较运算符</a></li><li><a href="/php/yunsuanfu/27.html">错误控制运算符</a></li><li><a href="/php/yunsuanfu/28.html">执行运算符</a></li><li><a href="/php/yunsuanfu/29.html">递增/递减运算符</a></li><li><a href="/php/yunsuanfu/30.html">逻辑运算符</a></li><li><a href="/php/yunsuanfu/31.html">字符串运算符</a></li><li><a href="/php/yunsuanfu/32.html">数组运算符</a></li><li><a href="/php/yunsuanfu/33.html">类型运算符</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP控制结构			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jiegou/34.html">PHP控制结构之if</a></li><li><a href="/php/jiegou/35.html">PHP控制结构之else</a></li><li><a href="/php/jiegou/36.html">PHP控制结构之elseif/else if</a></li><li><a href="/php/jiegou/37.html">PHP控制结构之替代语法</a></li><li><a href="/php/jiegou/38.html">PHP控制结构之while</a></li><li><a href="/php/jiegou/39.html">PHP控制结构之do-while</a></li><li><a href="/php/jiegou/40.html">PHP控制结构之for</a></li><li><a href="/php/jiegou/41.html">PHP控制结构之foreach</a></li><li><a href="/php/jiegou/42.html">PHP控制结构之break</a></li><li><a href="/php/jiegou/43.html">PHP控制结构之continue</a></li><li><a href="/php/jiegou/44.html">PHP控制结构之switch</a></li><li><a href="/php/jiegou/45.html">PHP控制结构之declare</a></li><li><a href="/php/jiegou/46.html">PHP控制结构之return</a></li><li><a href="/php/jiegou/47.html">PHP控制结构之require</a></li><li><a href="/php/jiegou/48.html">PHP控制结构之include</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/hanshu/52.html">用户自定义函数</a></li><li><a href="/php/hanshu/53.html">函数的参数</a></li><li><a href="/php/hanshu/54.html">返回值</a></li><li><a href="/php/hanshu/55.html">可变函数</a></li><li><a href="/php/hanshu/56.html">内部（内置）函数</a></li><li><a href="/php/hanshu/57.html">匿名函数</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类与对象			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpduixiang/58.html">类与对象前言</a></li><li><a href="/php/phpduixiang/59.html">基本概念</a></li><li><a href="/php/phpduixiang/60.html">属性</a></li><li><a href="/php/phpduixiang/61.html">类常量</a></li><li><a href="/php/phpduixiang/62.html">自动加载对象</a></li><li><a href="/php/phpduixiang/63.html">构造函数和析构函数</a></li><li><a href="/php/phpduixiang/64.html">访问控制</a></li><li><a href="/php/phpduixiang/65.html">对象继承</a></li><li><a href="/php/phpduixiang/66.html">Static关键字</a></li><li><a href="/php/phpduixiang/67.html">抽象类</a></li><li><a href="/php/phpduixiang/68.html">接口</a></li><li><a href="/php/phpduixiang/69.html">Traits</a></li><li><a href="/php/phpduixiang/70.html">重载</a></li><li><a href="/php/phpduixiang/71.html">对象迭代</a></li><li><a href="/php/phpduixiang/72.html">设计模式</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP异常处理			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yichang/81.html">异常处理</a></li><li><a href="/php/yichang/82.html">扩展PHP内置的异常处理类</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数库按分类			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpku/83.html">数组</a></li><li><a href="/php/phpku/84.html">Classes/Objects</a></li><li><a href="/php/phpku/85.html">Date/Time</a></li><li><a href="/php/phpku/86.html">Directories</a></li><li><a href="/php/phpku/87.html">错误处理</a></li><li><a href="/php/phpku/88.html">Program execution</a></li><li><a href="/php/phpku/89.html">Filesystem</a></li><li><a href="/php/phpku/90.html">Filter</a></li><li><a href="/php/phpku/91.html">Function Handling</a></li><li><a href="/php/phpku/92.html">PHP 选项/信息</a></li><li><a href="/php/phpku/93.html">Mail</a></li><li><a href="/php/phpku/94.html">Math</a></li><li><a href="/php/phpku/95.html">Misc.</a></li><li><a href="/php/phpku/96.html">Network</a></li><li><a href="/php/phpku/97.html">输出控制</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> php基础			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbiji/108377.html"></a></li><li><a href="/php/phpbiji/108376.html"></a></li><li><a href="/php/phpbiji/108380.html"></a></li><li><a href="/php/phpbiji/108379.html"></a></li><li><a href="/php/phpbiji/108378.html"></a></li><li><a href="/php/phpbiji/108381.html"></a></li><li><a href="/php/phpbiji/108382.html"></a></li><li><a href="/php/phpbiji/108384.html"></a></li><li><a href="/php/phpbiji/108383.html"></a></li><li><a href="/php/phpbiji/108385.html"></a></li><li><a href="/php/phpbiji/108386.html"></a></li><li><a href="/php/phpbiji/108388.html"></a></li><li><a href="/php/phpbiji/108387.html"></a></li><li><a href="/php/phpbiji/108389.html"></a></li><li><a href="/php/phpbiji/108391.html"></a></li>		</ul>
	</li>
		<li>
	    <a href="/php/biji/" class="waves-effect">
		    <i class="icon-share"></i>
		    <span>PHP笔记
		       	<span class="float-right menu-arrow">
		       	<i class="mdi mdi-chevron-right"></i>
		       	</span>
		    </span>
	    </a>
	</li>
	</ul>
</div>
<!-- Sidebar -->
<div class="clearfix"></div>
</div>
<!-- Sidebar -left -->
</div>
<!-- Left Sidebar End -->
<!-- Start right Content here -->
<div class="content-page">
	<div class="content">
		<div class="container-fluid">
			<div class="page-title-box">
				<div class="row align-items-center">
					<div class="col-sm-6">
						<h1 class="page-title">php多种形式发送邮件(mail qmail邮件系统 phpmailer类)</h1>
					</div>
				</div>
				<!-- end row -->
			</div>
			<!-- end page-title -->
			<!-- START ROW -->
			<div class="panel panel-forbid">
				<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>内容摘要</div>
			    <div class="panel-content">
			    <span>1. 使用 mail() 函数 <br />
没什么好讲的，就是使用系统自带的smtp系统来发送，一般是使用sendmail来发。这个按照各个系统不同而定。使用参考手册。 <br />
2. 使用管道的形式 <br />
昨天刚测试</span>                                     
		    	</div>
			    <div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>文章正文</div>
			    <div class="panel-content">
			    <span><P>1. 使用 mail() 函数 </P>
<P>没什么好讲的，就是使用系统自带的smtp系统来发送，一般是使用sendmail来发。这个按照各个系统不同而定。使用参考手册。 </P>
<P>2. 使用管道的形式 </P>
<P>昨天刚测试成功，使用本地的qmail来发送邮件。</P>
<P><div class="codetitle"><span><a style="CURSOR: pointer" data="18275" class="copybut" id="copybut18275" onclick="doCopy('code18275')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code18275"><BR>/* 使用qmail发送邮件函数 */&nbsp; <BR>function send_check_mail($email, $subject,$uid,$buffer)&nbsp; <BR>{&nbsp; <BR>&nbsp;$command =&nbsp; "/var/qmail/bin/qmail-inject ".$email; //qmail程式地址,$email是要发送的地址&nbsp; <BR>&nbsp;$handle = popen($command, "w"); //打开管道&nbsp; http://www.cnblogs.com/roucheng/<BR>&nbsp;if (!$handle) {&nbsp; <BR>&nbsp; return false;&nbsp; <BR>&nbsp;}&nbsp;&nbsp; <br><br>&nbsp;$from = "webmaster@unixsky.net"; //发件人&nbsp; <BR>&nbsp;fwrite($handle, "From: ".$from."＼n"); //往管道写数据&nbsp; <BR>&nbsp;fwrite($handle, "Return-Path: ".$from."＼n");&nbsp; <BR>&nbsp;fwrite($handle, "To: ".$uid."＼n");&nbsp; <BR>&nbsp;fwrite($handle, "Subject: ".$subject."＼n");&nbsp; <BR>&nbsp;fwrite($handle, "Mime-Version: 1.0＼n");&nbsp; <BR>&nbsp;fwrite($handle, "Content-Type: text/html; charset=＼"gb2312＼"＼n＼n");&nbsp; <BR>&nbsp;fwrite($handle, $buffer."＼n");&nbsp; <BR>&nbsp;pclose($handle); //关闭管道&nbsp; <br><br>&nbsp;return true;&nbsp; <BR>}&nbsp; <br><br>------------------测试发送邮件：&nbsp; <br><br>//发送邮件&nbsp; <br><br>$subject = "测试邮件";&nbsp; <br><br>$uid = $_POST['uid']; //from信息&nbsp; <BR>$content = "&lt;html&gt;&lt;body&gt;".$u_email&nbsp;&nbsp; <br><br>&nbsp;&nbsp; ." 你好！&lt;br&gt;&lt;br&gt;谢谢，本邮件测试！&lt;br&lt;/body&gt;&lt;/html&gt;"; //内容信息&nbsp; <br><br>$u_email = "hren@yahoo.com.cn"; //发送到的邮箱&nbsp; <BR>if (send_check_mail($u_email, $subject, $uid, $content)) {&nbsp; <br><br>&nbsp;echo "恭喜！发送投票邮件到你的邮箱！&lt;br&gt;&lt;br&gt;请检查你的邮箱：&lt;font color=#CC0033&gt;".$u_email." &lt;/font&gt;&lt;br&gt;&lt;br&gt;". $close;&nbsp; <BR>&nbsp;} else {&nbsp; <br><br>&nbsp;echo "非常不幸，发送投票邮件到你的邮箱失败，请重试或联系研发人员。&lt;br&gt;&lt;br&gt;". $close;&nbsp; <br><br>}<BR></div></P>
<P>当然，也能使用相同的方法来处理sendmail的进程来发送邮件。 </P>
<P>下面代码示例： </P>
<P><div class="codetitle"><span><a style="CURSOR: pointer" data="9989" class="copybut" id="copybut9989" onclick="doCopy('code9989')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code9989"><BR>&lt;?php&nbsp; <BR>$pp = popen("/usr/sbin/sendmail -t", "w") or die("Cannot fork sendmail");&nbsp; <BR>fputs($pp, "To: sterling@designmultimedia.com＼r＼n");&nbsp; <BR>fputs($pp, "Reply-to: $senders_email＼r＼n");&nbsp; <BR>fputs($pp, "From: $senders_email＼r＼n");&nbsp; <BR>fputs($pp, "Subject The Results of your form＼r＼n＼r＼n");&nbsp; <BR>fputs($pp, "$senders_email sent the fllowing comments:＼r＼n");&nbsp; <BR>fputs($pp, $comments);&nbsp; <BR>pclose($pp) or die("Cannot close pipe to sendmail");&nbsp; <BR>?&gt;<BR></div></P>
<P>其实这种管道的方法比较底层，取决于你所调用程式的稳定性。所以是一种可选的发送邮件的方式。 </P>
<P><BR>3. 使用phpmailer类 </P>
<P>是个开源的发送邮件类，主站：http://phpmailer.sourceforge.net </P>
<P>里面是两个文件，一个是class.smtp.php，更有以个是class.phpmailer.php<BR>另外加上官方网站的使用方法： <BR>Examples using phpmailer <BR>1. Advanced ExampleThis demonstrates sending out multiple email messages with binary attachments from a MySQL database with multipart/alternative support.</P>
<P><div class="codetitle"><span><a style="CURSOR: pointer" data="87962" class="copybut" id="copybut87962" onclick="doCopy('code87962')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code87962"><BR>require("class.phpmailer.php");&nbsp; <br><br>$mail = new phpmailer();&nbsp; <br><br>$mail-&gt;From&nbsp;&nbsp;&nbsp;&nbsp; = "list@example.com";&nbsp; <BR>$mail-&gt;FromName = "List manager";&nbsp; <BR>$mail-&gt;Host&nbsp;&nbsp;&nbsp;&nbsp; = "smtp1.example.com;smtp2.example.com";&nbsp; <BR>$mail-&gt;Mailer&nbsp;&nbsp; = "smtp";&nbsp; <br><br>@MYSQL_CONNECT("localhost","root","password");&nbsp; <BR>@mysql_select_db("my_company");&nbsp; <BR>$query?=?SELECT full_name, email,?hoto?ROM employee?HERE?d=$id";&nbsp; <BR>$result??MYSQL_QUERY($query);&nbsp; <br><br>while ($row = mysql_fetch_array ($result))&nbsp; <BR>{&nbsp; <BR>&nbsp;&nbsp;&nbsp; // HTML body&nbsp; <BR>&nbsp;&nbsp;&nbsp; $body&nbsp; = "Hello &lt;font size=＼"4＼"&gt;" . $row["full_name"] . "&lt;/font&gt;, &lt;p&gt;";&nbsp; <BR>&nbsp;&nbsp;&nbsp; $body .= "&lt;i&gt;Your&lt;/i&gt; personal photograph to this message.&lt;p&gt;";&nbsp; <BR>&nbsp;&nbsp;&nbsp; $body .= "Sincerely, &lt;br&gt;";&nbsp; <BR>&nbsp;&nbsp;&nbsp; $body .= "phpmailer List manager";&nbsp; <br><br>&nbsp;&nbsp;&nbsp; // Plain text body (for mail clients that cannot read HTML)&nbsp; <BR>&nbsp;&nbsp;&nbsp; $text_body&nbsp; = "Hello " . $row["full_name"] . ", ＼n＼n";&nbsp; <BR>&nbsp;&nbsp;&nbsp; $text_body .= "Your personal photograph to this message.＼n＼n";&nbsp; <BR>&nbsp;&nbsp;&nbsp; $text_body .= "Sincerely, ＼n";&nbsp; <BR>&nbsp;&nbsp;&nbsp; $text_body .= "phpmailer List manager";&nbsp; <br><br>&nbsp;&nbsp;&nbsp; $mail-&gt;Body&nbsp;&nbsp;&nbsp; = $body;&nbsp; <BR>&nbsp;&nbsp;&nbsp; $mail-&gt;AltBody = $text_body;&nbsp; <BR>&nbsp;&nbsp;&nbsp; $mail-&gt;AddAddress($row["email"], $row["full_name"]);&nbsp; <BR>&nbsp;&nbsp;&nbsp; $mail-&gt;AddStringAttachment($row["photo"], "YourPhoto.jpg");&nbsp; <br><br>&nbsp;&nbsp;&nbsp; if(!$mail-&gt;Send())&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "There has been a mail error sending to " . $row["email"] . "&lt;br&gt;";&nbsp; <br><br>&nbsp;&nbsp;&nbsp; // Clear all addresses and attachments for next loop&nbsp; <BR>&nbsp;&nbsp;&nbsp; $mail-&gt;ClearAddresses();&nbsp; <BR>&nbsp;&nbsp;&nbsp; $mail-&gt;ClearAttachments();&nbsp; <BR>}<BR></div></P>
<P>2. Extending phpmailerExtending classes with inheritance is one of the most powerful features of object-oriented programming. It allows you to make changes to the original class for your own personal use without hacking the original classes. Plus, it is very easy to do. I've provided an example: </P>
<P>Here's a class that extends the phpmailer class and sets the defaults for the particular site: <BR>PHP include file: mail.inc.php <BR><div class="codetitle"><span><a style="CURSOR: pointer" data="27483" class="copybut" id="copybut27483" onclick="doCopy('code27483')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code27483"><BR>require("class.phpmailer.php"); <BR></div></P>
<P><div class="codetitle"><span><a style="CURSOR: pointer" data="8920" class="copybut" id="copybut8920" onclick="doCopy('code8920')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code8920"><BR>class my_phpmailer extends phpmailer {&nbsp; <BR>&nbsp;&nbsp;&nbsp; // Set default variables for all new objects&nbsp; <BR>&nbsp;&nbsp;&nbsp; var $From&nbsp;&nbsp;&nbsp;&nbsp; = "from@example.com";&nbsp; <BR>&nbsp;&nbsp;&nbsp; var $FromName = "Mailer";&nbsp; <BR>&nbsp;&nbsp;&nbsp; var $Host&nbsp;&nbsp;&nbsp;&nbsp; = "smtp1.example.com;smtp2.example.com";&nbsp; <BR>&nbsp;&nbsp;&nbsp; var $Mailer&nbsp;&nbsp; = "smtp";&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Alternative to IsSMTP()&nbsp; <BR>&nbsp;&nbsp;&nbsp; var $WordWrap = 75;&nbsp; <br><br>&nbsp;&nbsp;&nbsp; // Replace the default error_handler&nbsp; <BR>&nbsp;&nbsp;&nbsp; function error_handler($msg) {&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print("My Site Error");&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print("Description:");&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf("%s", $msg);&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; exit;&nbsp; <BR>&nbsp;&nbsp;&nbsp; }&nbsp; <br><br>&nbsp;&nbsp;&nbsp; // Create an additional function&nbsp; <BR>&nbsp;&nbsp;&nbsp; function do_something($something) {&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Place your new code here&nbsp; <BR>&nbsp;&nbsp;&nbsp; }&nbsp; <BR>}<BR></div></P>
<P>Now here's a normal PHP page in the site, which will have all the defaults set above: <BR>Normal PHP file: mail_test.php </P>
<P><div class="codetitle"><span><a style="CURSOR: pointer" data="91167" class="copybut" id="copybut91167" onclick="doCopy('code91167')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code91167"><BR>require("mail.inc.php");&nbsp; <br><br>// Instantiate your new class&nbsp; <BR>$mail = new my_phpmailer;&nbsp; <br><br>// Now you only need to add the necessary stuff&nbsp; <BR>$mail-&gt;AddAddress("josh@example.com", "Josh Adams");&nbsp; <BR>$mail-&gt;Subject = "Here is the subject";&nbsp; <BR>$mail-&gt;Body&nbsp;&nbsp;&nbsp; = "This is the message body";&nbsp; <BR>$mail-&gt;AddAttachment("c:/temp/11-10-00.zip", "new_name.zip");&nbsp; // optional name&nbsp; <br><br>if(!$mail-&gt;Send())&nbsp; <BR>{&nbsp; <BR>&nbsp;&nbsp; echo "There was an error sending the message";&nbsp; <BR>&nbsp;&nbsp; exit;&nbsp; <BR>}&nbsp; <br><br>echo "Message was sent successfully";<BR></div></P>
<P>4. 使用PEAR::Net_SMTP组件 </P>
<P>PEAR真是个好东西，可能非常多人都不怎么用，至少我目前使用他的DB类，发送邮件类都不错。 </P>
<P>需要Net_SMTP类，能去 http://pear.php.net 下载，Net_SMTP类的使用手册： </P>
<P>http://pear.php.net/manual/en/package.networking.net-smtp.php </P>
<P>我使用上面几个类，这个是最佳的，不管是速度还是别的，不过操作涉及到一些简单的smtp协议。 </P>
<P>我的使用代码：</P>
<P><div class="codetitle"><span><a style="CURSOR: pointer" data="17870" class="copybut" id="copybut17870" onclick="doCopy('code17870')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code17870"><BR>//------------------------------------------&nbsp; <br><br>require_once 'Net/SMTP.php'; //加载类库&nbsp; <br><br>&nbsp; <BR>$subject = "测试邮件";&nbsp; <br><br>$uid = $_POST['uid']; //from信息&nbsp; <BR>$content = "&lt;html&gt;&lt;body&gt;".$u_email&nbsp;&nbsp; <br><br>&nbsp;&nbsp; ." 你好！&lt;br&gt;&lt;br&gt;谢谢，本邮件测试！&lt;br&lt;/body&gt;&lt;/html&gt;"; //内容信息&nbsp; <br><br>$u_email = "hren@yahoo.com.cn"; //发送到的邮箱&nbsp; <br><br>$smtp = new Net_SMTP('192.168.0.1'); //smtp服务器&nbsp; <BR>$smtp-&gt;connect(); //连接服务器&nbsp; <BR>$smtp-&gt;helo('unixsky.net'); //发送HELO信息给服务器&nbsp; <BR>$smtp-&gt;mailFrom('hren@unixsky.net'); //发件人地址&nbsp; <BR>$smtp-&gt;rcptTo($u_email); //收件人地址&nbsp; <BR>$date = date('r'); //获取发信日期&nbsp; <BR>$smtp-&gt;data("Date: $date＼r＼nFrom: vdddote@eyou.net＼r＼nTo: $u_email＼r＼nSubject: $subject＼r＼nContent-Type: text/html; charset=＼"gb2312＼"＼r＼n＼r＼n$content＼r＼n"); //添加发送数据并且发送&nbsp; <BR>$smtp-&gt;disconnect(); //关闭连接<BR></div></P>
<hr></span>                                     
		    	</div>
		    	<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>代码注释</div>
			    <div class="panel-content">
			    <span></span>                                     
		    	</div>

			</div>

			<!-- END ROW -->
			<div class="newsPage">
				<div class="newsPageTurn">
				    <span><a>上一篇</a><a href='/php/biji/85281.html'>Android实现返回键功能</a><a>下一篇</a><a href='/php/biji/85283.html'>Win10 14367版系统这台电脑设为可以被检测到打不开怎么解决?</a></span>
				</div>
			</div>
		</div>


<div id="author-box">
    <h3>作者：喵哥笔记</h3>
        <div class="author-info">
            <div class="author-avatar">
                <img src="/skin1/picture/01.jpg" alt="IDC笔记" class="avatar" width="64" height="64">
            </div>
        <div class="author-description">
            <p>学的不仅是技术，更是梦想！</p>
            <ul class="author-social follows nb">
            	<li>
                    <a target="_blank" href="/" title="IDC笔记">IDC笔记</a>
                </li>
            </ul>
        </div>
        <div class="clear"></div>
    </div>
</div>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
<!-- container-fluid -->
	</div>
<!-- content -->
	<footer class="footer">
	© 2020 IDC笔记 <i class="mdi mdi-heart text-danger"></i>. | 备案号：<a href="https://beian.miit.gov.cn/">辽ICP备18000516号</a>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?674585fbbd2294d3faf910f668ea91b4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

	</footer>
</div>

</div>
<!-- END wrapper -->
<!-- jQuery  -->
<script src="/skin1/js/jquery.min.js"></script>
<script src="/skin1/js/bootstrap.bundle.min.js"></script>
<script src="/skin1/js/metismenu.min.js"></script>
<script src="/skin1/js/jquery.slimscroll.js"></script>
<script src="/skin1/js/waves.min.js"></script>
<!--Morris Chart-->
<script src="/skin1/js/morris.min.js"></script>
<script src="/skin1/js/raphael.min.js"></script>
<script src="/skin1/js/dashboard.init.js"></script>
<script src="/skin1/js/app.js"></script>
<script src="/foot.js"></script>
</body>
</html>