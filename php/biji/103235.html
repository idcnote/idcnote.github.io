<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title>android 传感器(OnSensorChanged)使用介绍_PHP教程_IDC笔记</title>
    <meta name="keywords" content="PHP,PHP笔记,PHP教程" />
    <meta name="description" content="下面是API中定义的几个代表sensor的常量。<br />
<br />
<br />
<br />
<br />
Int<br />
TYPE_ACCELEROMETER<br />
A constant describing an accelerometer sensor type. 加速度传感器<br />
<br />
<br />
int<br />
TYPE_ALL<br />
A constant de" />
    <meta content="Responsive admin theme build on top of Bootstrap 4" name="description" />
    <meta content="idcnote.com" name="author" />
    <link rel="shortcut icon" href="/skin1/images/favicon.ico">
    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="/skin1/css/morris.css">
    <link href="/skin1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/metismenu.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/icons.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/style.css" rel="stylesheet" type="text/css">
<link href="/SyntaxHighlighter/shCoreDefault.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/SyntaxHighlighter/shCore.js"></script>
<script type="text/javascript">
 SyntaxHighlighter.all();
</script>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
</head>
<body>
<!-- Begin page -->
		<div id="wrapper">
			<!-- Top Bar Start -->
			<div class="topbar">
				<!-- LOGO -->
				<div class="topbar-left">
					<a href="/" class="logo">
						<span class="logo-light">
                            <i class="mdi mdi-camera-control"></i>IDC笔记
                        </span>
						<span class="logo-sm">
                            <i class="mdi mdi-camera-control"></i>
                        </span>
					</a>
				</div>
				<nav class="navbar-custom">
					<ul class="navbar-right list-inline float-right mb-0">
						<!--<li class="dropdown notification-list list-inline-item d-none d-md-inline-block">
							<a class="nav-link waves-effect" href="#" id="btn-fullscreen">
								<i class="mdi mdi-arrow-expand-all noti-icon"></i>
							</a>
						</li>
						<li class="dropdown notification-list list-inline-item">
							<div class="dropdown notification-list nav-pro-img">
								<a class="dropdown-toggle nav-link arrow-none nav-user" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
									<img src="/skin1/picture/user-4.jpg" alt="user" class="rounded-circle">
								</a>
								<div class="dropdown-menu dropdown-menu-right profile-dropdown ">
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-account-circle"></i> Profile</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-wallet"></i> Wallet</a>
									<a class="dropdown-item d-block" href="#">
										<span class="badge badge-success float-right">11</span>
										<i class="mdi mdi-settings"></i> Settings</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-lock-open-outline"></i> Lock screen</a>
									<div class="dropdown-divider"></div>
									<a class="dropdown-item text-danger" href="#">
										<i class="mdi mdi-power text-danger"></i> Logout</a>
								</div>
							</div>
						</li>
						-->
					</ul>
					<ul class="list-inline menu-left mb-0">
						<li class="float-left">
							<button class="button-menu-mobile open-left waves-effect">
                            <i class="mdi mdi-menu"></i>
                        </button>
						</li>
						<li class="d-none d-md-inline-block">
							<form role="search" class="app-search">
								<div class="form-group mb-0">
									<input type="text" class="form-control" placeholder="Search..">
									<button type="submit"><i class="fa fa-search"></i></button>
								</div>
							</form>
						</li>
					</ul>
				</nav>
			</div>
<!-- ========== Left Sidebar Start ========== -->
<div class="left side-menu">
    <div class="slimscroll-menu" id="remove-scroll">
    <!--- Sidemenu -->
    <div id="sidebar-menu">
    <!-- Left Menu Start -->
    <ul class="metismenu" id="side-menu">
			<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP简介			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jianjie/1.html">PHP简介</a></li><li><a href="/php/jianjie/2.html">PHP用途</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP基本语法			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yufa/3.html">分离HTML</a></li><li><a href="/php/yufa/4.html">指令分隔符</a></li><li><a href="/php/yufa/5.html">PHP注释</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类型			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpleixing/6.html">PHP类型简介</a></li><li><a href="/php/phpleixing/7.html">PHP类型之布尔类型</a></li><li><a href="/php/phpleixing/8.html">PHP类型之整型</a></li><li><a href="/php/phpleixing/9.html">PHP类型之浮点型</a></li><li><a href="/php/phpleixing/10.html">PHP类型之字符串</a></li><li><a href="/php/phpleixing/11.html">PHP类型之数组</a></li><li><a href="/php/phpleixing/12.html">PHP类型之对象</a></li><li><a href="/php/phpleixing/13.html">PHP类型之资源类型</a></li><li><a href="/php/phpleixing/14.html">PHP类型之NULL</a></li><li><a href="/php/phpleixing/15.html">PHP类型之伪类型</a></li><li><a href="/php/phpleixing/16.html">PHP类型之类型判别</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP变量			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbianliang/17.html">PHP变量之基础</a></li><li><a href="/php/phpbianliang/18.html">PHP变量之预定义变量</a></li><li><a href="/php/phpbianliang/19.html">PHP变量之变量范围</a></li><li><a href="/php/phpbianliang/20.html">PHP变量之可变变量</a></li><li><a href="/php/phpbianliang/21.html">PHP变量之外部变量</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP运算符			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yunsuanfu/22.html">PHP运算符优先级</a></li><li><a href="/php/yunsuanfu/23.html">算术运算符</a></li><li><a href="/php/yunsuanfu/24.html">赋值运算符</a></li><li><a href="/php/yunsuanfu/25.html">位运算符</a></li><li><a href="/php/yunsuanfu/26.html">比较运算符</a></li><li><a href="/php/yunsuanfu/27.html">错误控制运算符</a></li><li><a href="/php/yunsuanfu/28.html">执行运算符</a></li><li><a href="/php/yunsuanfu/29.html">递增/递减运算符</a></li><li><a href="/php/yunsuanfu/30.html">逻辑运算符</a></li><li><a href="/php/yunsuanfu/31.html">字符串运算符</a></li><li><a href="/php/yunsuanfu/32.html">数组运算符</a></li><li><a href="/php/yunsuanfu/33.html">类型运算符</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP控制结构			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jiegou/34.html">PHP控制结构之if</a></li><li><a href="/php/jiegou/35.html">PHP控制结构之else</a></li><li><a href="/php/jiegou/36.html">PHP控制结构之elseif/else if</a></li><li><a href="/php/jiegou/37.html">PHP控制结构之替代语法</a></li><li><a href="/php/jiegou/38.html">PHP控制结构之while</a></li><li><a href="/php/jiegou/39.html">PHP控制结构之do-while</a></li><li><a href="/php/jiegou/40.html">PHP控制结构之for</a></li><li><a href="/php/jiegou/41.html">PHP控制结构之foreach</a></li><li><a href="/php/jiegou/42.html">PHP控制结构之break</a></li><li><a href="/php/jiegou/43.html">PHP控制结构之continue</a></li><li><a href="/php/jiegou/44.html">PHP控制结构之switch</a></li><li><a href="/php/jiegou/45.html">PHP控制结构之declare</a></li><li><a href="/php/jiegou/46.html">PHP控制结构之return</a></li><li><a href="/php/jiegou/47.html">PHP控制结构之require</a></li><li><a href="/php/jiegou/48.html">PHP控制结构之include</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/hanshu/52.html">用户自定义函数</a></li><li><a href="/php/hanshu/53.html">函数的参数</a></li><li><a href="/php/hanshu/54.html">返回值</a></li><li><a href="/php/hanshu/55.html">可变函数</a></li><li><a href="/php/hanshu/56.html">内部（内置）函数</a></li><li><a href="/php/hanshu/57.html">匿名函数</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类与对象			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpduixiang/58.html">类与对象前言</a></li><li><a href="/php/phpduixiang/59.html">基本概念</a></li><li><a href="/php/phpduixiang/60.html">属性</a></li><li><a href="/php/phpduixiang/61.html">类常量</a></li><li><a href="/php/phpduixiang/62.html">自动加载对象</a></li><li><a href="/php/phpduixiang/63.html">构造函数和析构函数</a></li><li><a href="/php/phpduixiang/64.html">访问控制</a></li><li><a href="/php/phpduixiang/65.html">对象继承</a></li><li><a href="/php/phpduixiang/66.html">Static关键字</a></li><li><a href="/php/phpduixiang/67.html">抽象类</a></li><li><a href="/php/phpduixiang/68.html">接口</a></li><li><a href="/php/phpduixiang/69.html">Traits</a></li><li><a href="/php/phpduixiang/70.html">重载</a></li><li><a href="/php/phpduixiang/71.html">对象迭代</a></li><li><a href="/php/phpduixiang/72.html">设计模式</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP异常处理			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yichang/81.html">异常处理</a></li><li><a href="/php/yichang/82.html">扩展PHP内置的异常处理类</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数库按分类			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpku/83.html">数组</a></li><li><a href="/php/phpku/84.html">Classes/Objects</a></li><li><a href="/php/phpku/85.html">Date/Time</a></li><li><a href="/php/phpku/86.html">Directories</a></li><li><a href="/php/phpku/87.html">错误处理</a></li><li><a href="/php/phpku/88.html">Program execution</a></li><li><a href="/php/phpku/89.html">Filesystem</a></li><li><a href="/php/phpku/90.html">Filter</a></li><li><a href="/php/phpku/91.html">Function Handling</a></li><li><a href="/php/phpku/92.html">PHP 选项/信息</a></li><li><a href="/php/phpku/93.html">Mail</a></li><li><a href="/php/phpku/94.html">Math</a></li><li><a href="/php/phpku/95.html">Misc.</a></li><li><a href="/php/phpku/96.html">Network</a></li><li><a href="/php/phpku/97.html">输出控制</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> php基础			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbiji/108377.html"></a></li><li><a href="/php/phpbiji/108376.html"></a></li><li><a href="/php/phpbiji/108380.html"></a></li><li><a href="/php/phpbiji/108379.html"></a></li><li><a href="/php/phpbiji/108378.html"></a></li><li><a href="/php/phpbiji/108381.html"></a></li><li><a href="/php/phpbiji/108382.html"></a></li><li><a href="/php/phpbiji/108384.html"></a></li><li><a href="/php/phpbiji/108383.html"></a></li><li><a href="/php/phpbiji/108385.html"></a></li><li><a href="/php/phpbiji/108386.html"></a></li><li><a href="/php/phpbiji/108388.html"></a></li><li><a href="/php/phpbiji/108387.html"></a></li><li><a href="/php/phpbiji/108389.html"></a></li><li><a href="/php/phpbiji/108391.html"></a></li>		</ul>
	</li>
		<li>
	    <a href="/php/biji/" class="waves-effect">
		    <i class="icon-share"></i>
		    <span>PHP笔记
		       	<span class="float-right menu-arrow">
		       	<i class="mdi mdi-chevron-right"></i>
		       	</span>
		    </span>
	    </a>
	</li>
	</ul>
</div>
<!-- Sidebar -->
<div class="clearfix"></div>
</div>
<!-- Sidebar -left -->
</div>
<!-- Left Sidebar End -->
<!-- Start right Content here -->
<div class="content-page">
	<div class="content">
		<div class="container-fluid">
			<div class="page-title-box">
				<div class="row align-items-center">
					<div class="col-sm-6">
						<h1 class="page-title">android 传感器(OnSensorChanged)使用介绍</h1>
					</div>
				</div>
				<!-- end row -->
			</div>
			<!-- end page-title -->
			<!-- START ROW -->
			<div class="panel panel-forbid">
				<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>内容摘要</div>
			    <div class="panel-content">
			    <span>下面是API中定义的几个代表sensor的常量。<br />
<br />
<br />
<br />
<br />
Int<br />
TYPE_ACCELEROMETER<br />
A constant describing an accelerometer sensor type. 加速度传感器<br />
<br />
<br />
int<br />
TYPE_ALL<br />
A constant de</span>                                     
		    	</div>
			    <div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>文章正文</div>
			    <div class="panel-content">
			    <span><p>下面是API中定义的几个代表sensor的常量。</p>
<p>
<table class="dataintable" width="892">
<tbody>
<tr>
<td width="31">Int</td>
<td width="187"><a>TYPE_ACCELEROMETER</a></td>
<td>A constant describing an accelerometer sensor type. <strong>加速度传感器</strong></td>
</tr>
<tr>
<td>int</td>
<td><a>TYPE_ALL</a></td>
<td width="857">A constant describing all sensor types. <strong>所有类型</strong> <strong>A constant describing all sensor types.</strong></td>
</tr>
<tr>
<td>int</td>
<td><a>TYPE_GRAVITY</a></td>
<td width="857">A constant describing a gravity sensor type.</td>
</tr>
<tr>
<td>int</td>
<td><a>TYPE_GYROSCOPE</a></td>
<td width="857">A constant describing a gyroscope sensor type <strong>回转仪传感器</strong></td>
</tr>
<tr>
<td>int</td>
<td><a>TYPE_LIGHT</a></td>
<td width="857">A constant describing an light sensor type.<strong>光线传感器</strong></td>
</tr>
<tr>
<td>int</td>
<td><a>TYPE_LINEAR_ACCELERATION</a></td>
<td width="857">A constant describing a linear acceleration sensor type.</td>
</tr>
<tr>
<td>int</td>
<td><a>TYPE_MAGNETIC_FIELD</a></td>
<td width="857">A constant describing a magnetic field sensor type.<strong>磁场传感器</strong></td>
</tr>
<tr>
<td>int</td>
<td><a>TYPE_ORIENTATION</a></td>
<td width="857"><em>This constant is deprecated. use <code><a><font face="NSimsun">SensorManager.getOrientation()</font></a></code>instead. </em><del>磁场<strong>传感器</strong><br />
</del></td>
</tr>
<tr>
<td>int</td>
<td><a>TYPE_PRESSURE</a></td>
<td width="857">A constant describing a pressure sensor type <strong>压力计</strong>传感器</td>
</tr>
<tr>
<td>int</td>
<td><a>TYPE_PROXIMITY</a></td>
<td width="857">A constant describing an proximity sensor type.<strong>距离传感器</strong></td>
</tr>
<tr>
<td>int</td>
<td><a>TYPE_ROTATION_VECTOR</a></td>
<td width="857">A constant describing a rotation vector sensor type.</td>
</tr>
<tr>
<td>int</td>
<td><a>TYPE_TEMPERATURE</a></td>
<td width="857">A constant describing a temperature sensor type <strong>温度传感器</strong></td>
</tr>
</tbody>
</table>
</p>
<p>我们在编写传感器相关的代码时可以按照以下步骤：</p>
<p><strong>第一步： 获得传感器管理器 </strong></p>
<p>SensorManger sm = (SensorManager).getSystemService(SENSOR_SERVICE);</p>
<p><strong>第二步：为具体的传感器注册监听器 ,这里我们使用磁阻传感器Sensor.TYPE_ORIENTATION.</strong></p>
<p>sm,registerListener (this,sm.getDefaultSensor(Sensor.TYPE_ORIENTATION), SensorManager.SENSOR_DELAY_FASTEST);</p>
<p>这里如果想注册其他的传感器，可以改变第一个参数值的传感器类型属性。我们应该根据手机中的实际存在的传感器来进行注册。如果手机中</p>
<p>不存在我们注册的传感器，就算我们注册了也不起什么作用。</p>
<p>第三个参数值表示获得传感器数据的速度，SENSOR_DELAY_FASTEST表示尽可能快的获取传感器数据，除了该值以外，还可以设置3个获取</p>
<p>传感器数据的速度值，这些值如下：</p>
<p><div class="codetitle"><span><a style="CURSOR: pointer" data="11542" class="copybut" id="copybut11542" onclick="doCopy('code11542')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code11542"><br />
SENSOR_DELAY_GAME&nbsp; 如果利用传感器开发游戏，建议使用该值。 一般大多数实时行较高的游戏使用该级别。<br />
SENSOR_DELAY_NORMAL&nbsp; 默认的获取传感器数据的速度。标准延迟，对于一般的益智类游戏或者EASY界别的游戏可以使用，但过低的采样率可能对一些赛车类游戏有跳帧的现象。<br />
SENSOR_DELAY_UI&nbsp;&nbsp;&nbsp; 若使用传感器更新UI, 建议使用该值。<br />
SENSOR_DELAY_FASTEST：最低延迟，一般不是特别灵敏的处理不推荐使用，该模式可能造成手机电力大量消耗，而且由于传递的为大量的原始数据，算法处理不好将会影响游戏逻辑和UI的性能。<br />
</div></p>
<p>第三步，既然我们在第二部已经为传感器设置了监听。我们就要实现具体的监听方法，在android 中，应用程序使用传感器主要依赖于&nbsp;&nbsp; android.hardware.SensorEventListener 接口。该接口可以监听传感器各种事件。SensorEventListener 接口代码如下：</p>
<p><div class="codetitle"><span><a style="CURSOR: pointer" data="3256" class="copybut" id="copybut3256" onclick="doCopy('code3256')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code3256"><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public interface SensorEventListener {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public&nbsp; void onSensorChanged(SensorEvent event) {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public void onAccuracyChanged(Sensor sensor ,int accuracy ){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />
</div></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; 当传感器的值发生变化时，例如磁阻传感器方向改变时会调用OnSensorChanged(). 当传感器的精度发生变化时会调用OnAccuracyChanged()方法。<br />
&nbsp;首先我们可以先看一下android 开发文档中的注释及事例代码：</p>
<div class="phpstudycode">
<pre class="brush:java;">
public class SensorActivity extends Activity, implements SensorEventListener {
 private final SensorManager mSensorManager;
 private final Sensor mAccelerometer;

 public SensorActivity() {
 mSensorManager = (SensorManager)getSystemService(SENSOR_SERVICE);
 mAccelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
 }

 protected void onResume() {
 super.onResume();
 mSensorManager.registerListener(this, mAccelerometer, SensorManager.SENSOR_DELAY_NORMAL);
 }

 protected void onPause() {
 super.onPause();
 mSensorManager.unregisterListener(this);
 }

 public void onAccuracyChanged(Sensor sensor, int accuracy) {
 }

 public void onSensorChanged(SensorEvent event) {
 }
 }
</pre>
</div>
<p>Always make sure to disable sensors you don't need, especially when your activity is paused. Failing to do so can drain the battery in just a few hours. Note that the system will not disable sensors automatically when the screen turns off.</p>
<p>大家可以看到，文档里要求我们不需要的传感器尽量要解除注册，特别是我们的activity处于失去焦点的状态时。如果我们不按照以上去做的话，手机电池很快会被用完。</p>
<p>还要注意的是当屏幕关闭的时候，传感器也不会自动的解除注册。</p>
<p>所以我们可以利用activity 中的 onPause() 方法和onresume()方法。在onresume方法i中对传感器注册监听器，在onPause()</p>
<p>方法中解除注册。</p>
<p>以下为利用方向传感器写的一个简单的DEMO</p>
<div class="phpstudycode">
<pre class="brush:java;">
public class SensorActivity extends Activity, implements SensorEventListener {
 private final SensorManager mSensorManager;
 private final Sensor mAccelerometer;
 public SensorActivity() {
 mSensorManager = (SensorManager)getSystemService(SENSOR_SERVICE);
 mAccelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
 }
 protected void onResume() {
 super.onResume();
 mSensorManager.registerListener(this, mAccelerometer, SensorManager.SENSOR_DELAY_NORMAL);
 }
 protected void onPause() {
 super.onPause();
 mSensorManager.unregisterListener(this);
 }
 public void onAccuracyChanged(Sensor sensor, int accuracy) {
 }
 public void onSensorChanged(SensorEvent event) {
 }
 }
 

package net.blogjava.mobile.sensor;
import android.app.Activity;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.Bundle;
import android.widget.TextView;
public class OrientationSensorTest extends Activity implements
 SensorEventListener {
 private SensorManager sensorManager = null;
 private Sensor orientaionSensor = null;
 private TextView textView;
 @Override
 protected void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.main);
 setTitle("方向传感器DEMO");
 textView = (TextView) findViewById(R.id.textview);
 sensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
 orientaionSensor = sensorManager
 .getDefaultSensor(Sensor.TYPE_ORIENTATION);
 }
 @Override
 protected void onPause() {
 super.onPause();
 sensorManager.unregisterListener(this); // 解除监听器注册
 }
 @Override
 protected void onResume() {
 super.onResume();
 sensorManager.registerListener(this, orientaionSensor,
 SensorManager.SENSOR_DELAY_NORMAL); //为传感器注册监听器
 
 }
 @Override
 public void onAccuracyChanged(Sensor sensor, int accuracy) {
 }
 @Override
 public void onSensorChanged(SensorEvent event) {
 float x = event.values[SensorManager.DATA_X];
 float y = event.values[SensorManager.DATA_Y];
 float z = event.values[SensorManager.DATA_Z];
 textView.setText("x=" + (int) x + "," + "y=" + (int) y + "," + "z="
 + (int) z);
 }
}</pre>
</div>
<p>下面介绍android 的坐标系是如何定义x, y z 轴的。</p>
<p>x轴的方向是沿着屏幕的水平方向从左向右，如果手机不是正方形的话，较短的边需要水平放置，较长的边需要垂直放置。<br />
Y轴的方向是从屏幕的左下角开始沿着屏幕的的垂直方向指向屏幕的顶端。</p>
<p>将手机放在桌子上，z轴的方向是从手机指向天空。</p>
<p>自从苹果公司在2007年发布第一代iPhone以来，以前看似和手机挨不着边的传感器也逐渐成为手机硬件的重要组成部分。如果读者使用过iPhone、HTC Dream、HTC Magic、HTC Hero以及其他的Android手机，会发现通过将手机横向或纵向放置，屏幕会随着手机位置的不同而改变方向。这种功能就需要通过重力传感器来实现，除了重力传感器，还有很多其他类型的传感器被应用到手机中，例如磁阻传感器就是最重要的一种传感器。虽然手机可以通过GPS来判断方向，但在GPS信号不好或根本没有GPS信号的情况下，GPS就形同虚设。这时通过磁阻传感器就可以很容易判断方向（东、南、西、北）。有了磁阻传感器，也使罗盘（俗称指向针）的电子化成为可能。<br />
在Android应用程序中使用传感器要依赖于android.hardware.SensorEventListener接口。通过该接口可以监听传感器的各种事件。SensorEventListener接口的代码如下：</p>
<p><div class="codetitle"><span><a style="CURSOR: pointer" data="81230" class="copybut" id="copybut81230" onclick="doCopy('code81230')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code81230"><br />
package android.hardware;<br />
public interface SensorEventListener <br />
{<br />
&nbsp;&nbsp;&nbsp; public void<br />
onSensorChanged(SensorEvent event);<br />
&nbsp;&nbsp;&nbsp; public void<br />
onAccuracyChanged(Sensor sensor, int accuracy);&nbsp;&nbsp;&nbsp; <br />
} <br />
</div></p>
<p>在SensorEventListener接口中定义了两个方法：onSensorChanged和onAccuracyChanged。当传感器的值发生变化时，例如磁阻传感器的方向改变时会调用onSensorChanged方法。当传感器的精度变化时会调用onAccuracyChanged方法。<br />
onSensorChanged方法只有一个SensorEvent类型的参数event，其中SensorEvent类有一个values变量非常重要，该变量的类型是float[]。但该变量最多只有3个元素，而且根据传感器的不同，values变量中元素所代表的含义也不同。</p>
<p>在解释values变量中元素的含义之前，先来介绍一下Android的坐标系统是如何定义X、Y、Z轴的。</p>
<p>X轴的方向是沿着屏幕的水平方向从左向右。如果手机不是正方形的话，较短的边需要水平放置，较长的边需要垂直放置。<br />
Y轴的方向是从屏幕的左下角开始沿着屏幕的垂直方向指向屏幕的顶端。<br />
将手机平放在桌子上，Z轴的方向是从手机里指向天空。</p>
<p>下面是values变量的元素在主要的传感器中所代表的含义。</p>
<p>1.1方向传感器</p>
<p>在方向传感器中values变量的3个值都表示度数，它们的含义如下：</p>
<p>values[0]：该值表示方位，也就是手机绕着Z轴旋转的角度。0表示北（North）；90表示东（East）；180表示南（South）；270表示西（West）。如果values[0]的值正好是这4个值，并且手机是水平放置，表示手机的正前方就是这4个方向。可以利用这个特性来实现电子罗盘，实例76将详细介绍电子罗盘的实现过程。</p>
<p>values[1]：该值表示倾斜度，或手机翘起的程度。当手机绕着X轴倾斜时该值发生变化。values[1]的取值范围是-180≤values[1]<br />
≤180。假设将手机屏幕朝上水平放在桌子上，这时如果桌子是完全水平的，values[1]的值应该是0（由于很少有桌子是绝对水平的，因此，该值很可能不为0，但一般都是-5和5之间的某个值）。这时从手机顶部开始抬起，直到将手机沿X轴旋转180度（屏幕向下水平放在桌面上）。在这个旋转过程中，values[1]会在0到-180之间变化，也就是说，从手机顶部抬起时，values[1]的值会逐渐变小，直到等于-180。如果从手机底部开始抬起，直到将手机沿X轴旋转180度，这时values[1]会在0到180之间变化。也就是values[1]的值会逐渐增大，直到等于180。可以利用values[1]和下面要介绍的values[2]来测量桌子等物体的倾斜度。</p>
<p>values[2]：表示手机沿着Y轴的滚动角度。取值范围是-90≤values[2]≤90。假设将手机屏幕朝上水平放在桌面上，这时如果桌面是平的，values[2]的值应为0。将手机左侧逐渐抬起时，values[2]的值逐渐变小，直到手机垂直于桌面放置，这时values[2]的值是-90。将手机右侧逐渐抬起时，values[2]的值逐渐增大，直到手机垂直于桌面放置，这时values[2]的值是90。在垂直位置时继续向右或向左滚动，values[2]的值会继续在-90至90之间变化。</p>
<p>1.2加速传感器</p>
<p>&nbsp;&nbsp;&nbsp; 该传感器的values变量的3个元素值分别表示X、Y、Z轴的加速值。例如，水平放在桌面上的手机从左侧向右侧移动，values[0]为负值；从右向左移动，values[0]为正值。读者可以通过本节的例子来体会加速传感器中的值的变化。要想使用相应的传感器，仅实现SensorEventListener接口是不够的，还需要使用下面的代码来注册相应的传感器。</p>
<p><div class="codetitle"><span><a style="CURSOR: pointer" data="20751" class="copybut" id="copybut20751" onclick="doCopy('code20751')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code20751"><br />
//&nbsp; 获得传感器管理器<br />
SensorManager sm = (SensorManager) getSystemService(SENSOR_SERVICE);<br />
//&nbsp; 注册方向传感器<br />
sm.registerListener(this,<br />
sm.getDefaultSensor(Sensor.TYPE_ORIENTATION),<br />
SensorManager.SENSOR_DELAY_FASTEST); <br />
</div></p>
<p>如果想注册其他的传感器，可以改变getDefaultSensor方法的第1个参数值，例如，注册加速传感器可以使用Sensor.TYPE_ACCELEROMETER。在Sensor类中还定义了很多传感器常量，但要根据手机中实际的硬件配置来注册传感器。如果手机中没有相应的传感器硬件，就算注册了相应的传感器也不起任何作用。getDefaultSensor方法的第2个参数表示获得传感器数据的速度。SensorManager.SENSOR_DELAY_ FASTEST表示尽可能快地获得传感器数据。除了该值以外，还可以设置3个获得传感器数据的速度值，这些值如下：</p>
<p>SensorManager.SENSOR_DELAY_NORMAL：默认的获得传感器数据的速度。<br />
SensorManager.SENSOR_DELAY_GAME：如果利用传感器开发游戏，建议使用该值。<br />
SensorManager.SENSOR_DELAY_UI：如果使用传感器更新UI中的数据，建议使用该值。</p>
<p>1.3重力感应器</p>
<p>加速度传感器的类型常量是Sensor.TYPE_GRAVITY。重力传感器与加速度传感器使用同一套坐标系。values数组中三个元素分别表示了X、Y、Z轴的重力大小。Android SDK定义了一些常量，用于表示星系中行星、卫星和太阳表面的重力。下面就来温习一下天文知识，将来如果在地球以外用Android手机，也许会用得上。</p>
<p><div class="codetitle"><span><a style="CURSOR: pointer" data="2188" class="copybut" id="copybut2188" onclick="doCopy('code2188')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code2188"><br />
public static final float GRAVITY_SUN= 275.0f;<br />
public static final float GRAVITY_MERCURY= 3.70f;<br />
public static final float GRAVITY_VENUS= 8.87f;<br />
public static final float GRAVITY_EARTH= 9.80665f;<br />
public static final float GRAVITY_MOON= 1.6f;<br />
public static final float GRAVITY_MARS= 3.71f;<br />
public static final float GRAVITY_JUPITER= 23.12f;<br />
public static final float GRAVITY_SATURN= 8.96f;<br />
public static final float GRAVITY_URANUS= 8.69f;<br />
public static final float GRAVITY_NEPTUNE= 11.0f;<br />
public static final float GRAVITY_PLUTO= 0.6f;<br />
public static final float GRAVITY_DEATH_STAR_I= 0.000000353036145f;<br />
public static final float GRAVITY_THE_ISLAND= 4.815162342f; <br />
</div> <br />
&nbsp;<br />
1.4 光线传感器</p>
<p>光线传感器的类型常量是Sensor.TYPE_LIGHT。values数组只有第一个元素（values[0]）有意义。表示光线的强度。最大的值是120000.0f。Android SDK将光线强度分为不同的等级，每一个等级的最大值由一个常量表示，这些常量都定义在SensorManager类中，代码如下：</p>
<p><div class="codetitle"><span><a style="CURSOR: pointer" data="84435" class="copybut" id="copybut84435" onclick="doCopy('code84435')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code84435"><br />
public static final float LIGHT_SUNLIGHT_MAX =120000.0f;<br />
public static final float LIGHT_SUNLIGHT=110000.0f;<br />
public static final float LIGHT_SHADE=20000.0f;<br />
public static final float LIGHT_OVERCAST= 10000.0f;<br />
public static final float LIGHT_SUNRISE= 400.0f;<br />
public static final float LIGHT_CLOUDY= 100.0f;<br />
public static final float LIGHT_FULLMOON= 0.25f;<br />
public static final float LIGHT_NO_MOON= 0.001f; <br />
</div></p>
<p>上面的八个常量只是临界值。读者在实际使用光线传感器时要根据实际情况确定一个范围。例如，当太阳逐渐升起时，values[0]的值很可能会超过LIGHT_SUNRISE，当values[0]的值逐渐增大时，就会逐渐越过LIGHT_OVERCAST，而达到LIGHT_SHADE，当然，如果天特别好的话，也可能会达到LIGHT_SUNLIGHT，甚至更高。 <br />
&nbsp;<br />
1.5陀螺仪传感器<br />
&nbsp;&nbsp; 陀螺仪传感器的类型常量是Sensor.TYPE_GYROSCOPE。values数组的三个元素表示的含义如下：values[0]：延X轴旋转的角速度。<br />
values[1]：延Y轴旋转的角速度。<br />
values[2]：延Z轴旋转的角速度。<br />
当手机逆时针旋转时，角速度为正值，顺时针旋转时，角速度为负值。陀螺仪传感器经常被用来计算手机已转动的角度，代码如下：</p>
<p><div class="codetitle"><span><a style="CURSOR: pointer" data="11138" class="copybut" id="copybut11138" onclick="doCopy('code11138')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code11138"><br />
private static final float NS2S = 1.0f / 1000000000.0f;<br />
private float timestamp;<br />
public void onSensorChanged(SensorEvent event)<br />
{<br />
&nbsp;&nbsp;&nbsp; if (timestamp != 0) <br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp; //&nbsp; event.timesamp表示当前的时间，单位是纳秒（1百万分之一毫秒）<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; final float dT = (event.timestamp - timestamp) * NS2S;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; angle[0] += event.values[0] * dT;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; angle[1] += event.values[1] * dT;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; angle[2] += event.values[2] * dT;<br />
&nbsp;&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp;&nbsp; timestamp = event.timestamp;<br />
} <br />
</div></p>
<p>上面代码中通过陀螺仪传感器相邻两次获得数据的时间差（dT）来分别计算在这段时间内手机延X、 Y、Z轴旋转的角度，并将值分别累加到angle数组的不同元素上。<br />
&nbsp;<br />
1.6其他传感器<br />
其他传感器在前面几节介绍了加速度传感器、重力传感器、光线传感器、陀螺仪传感器以及方向传感器。除了这些传感器外，Android SDK还支持如下的几种传感器。关于这些传感器的使用方法以及与这些传感器相关的常量、方法，读者可以参阅官方文档。</p>
<p>近程传感器（Sensor.TYPE_PROXIMITY）<br />
线性加速度传感器（Sensor.TYPE_LINEAR_ACCELERATION）<br />
旋转向量传感器（Sensor.TYPE_ROTATION_VECTOR）<br />
磁场传感器（Sensor.TYPE_MAGNETIC_FIELD）<br />
压力传感器（Sensor.TYPE_PRESSURE）<br />
温度传感器（Sensor.TYPE_TEMPERATURE）</p>
<p>虽然AndroidSDK定义了十多种传感器，但并不是每一部手机都完全支持这些传感器。例如，Google Nexus S支持其中的9种传感器（不支持压力和温度传感器），而HTC G7只支持其中的5种传感器。如果使用了手机不支持的传感器，一般不会抛出异常，但也无法获得传感器传回的数据。读者在使用传感器时最好先判断当前的手机是否支持所使用的传感器。</p>
<hr></span>                                     
		    	</div>
		    	<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>代码注释</div>
			    <div class="panel-content">
			    <span></span>                                     
		    	</div>

			</div>

			<!-- END ROW -->
			<div class="newsPage">
				<div class="newsPageTurn">
				    <span><a>上一篇</a><a href='/php/biji/103234.html'>Json返回时间的格式中出现乱码问题的两种解决方案</a><a>下一篇</a><a href='/php/biji/103236.html'>MFC自定义消息的实现方法</a></span>
				</div>
			</div>
		</div>


<div id="author-box">
    <h3>作者：喵哥笔记</h3>
        <div class="author-info">
            <div class="author-avatar">
                <img src="/skin1/picture/01.jpg" alt="IDC笔记" class="avatar" width="64" height="64">
            </div>
        <div class="author-description">
            <p>学的不仅是技术，更是梦想！</p>
            <ul class="author-social follows nb">
            	<li>
                    <a target="_blank" href="/" title="IDC笔记">IDC笔记</a>
                </li>
            </ul>
        </div>
        <div class="clear"></div>
    </div>
</div>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
<!-- container-fluid -->
	</div>
<!-- content -->
	<footer class="footer">
	© 2020 IDC笔记 <i class="mdi mdi-heart text-danger"></i>. | 备案号：<a href="https://beian.miit.gov.cn/">辽ICP备18000516号</a>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?674585fbbd2294d3faf910f668ea91b4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

	</footer>
</div>

</div>
<!-- END wrapper -->
<!-- jQuery  -->
<script src="/skin1/js/jquery.min.js"></script>
<script src="/skin1/js/bootstrap.bundle.min.js"></script>
<script src="/skin1/js/metismenu.min.js"></script>
<script src="/skin1/js/jquery.slimscroll.js"></script>
<script src="/skin1/js/waves.min.js"></script>
<!--Morris Chart-->
<script src="/skin1/js/morris.min.js"></script>
<script src="/skin1/js/raphael.min.js"></script>
<script src="/skin1/js/dashboard.init.js"></script>
<script src="/skin1/js/app.js"></script>
<script src="/foot.js"></script>
</body>
</html>