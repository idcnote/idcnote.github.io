<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title>浅谈JavaScript 浏览器对象_PHP教程_IDC笔记</title>
    <meta name="keywords" content="PHP,PHP笔记,PHP教程" />
    <meta name="description" content="window<br />
window对象不但充当全局作用域，而且表示浏览器窗口。<br />
window对象有innerWidth和innerHeight属性，可以获取浏览器窗口的内部宽度和高度。内部宽高是指除去菜单栏、工具" />
    <meta content="Responsive admin theme build on top of Bootstrap 4" name="description" />
    <meta content="idcnote.com" name="author" />
    <link rel="shortcut icon" href="/skin1/images/favicon.ico">
    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="/skin1/css/morris.css">
    <link href="/skin1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/metismenu.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/icons.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/style.css" rel="stylesheet" type="text/css">
<link href="/SyntaxHighlighter/shCoreDefault.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/SyntaxHighlighter/shCore.js"></script>
<script type="text/javascript">
 SyntaxHighlighter.all();
</script>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
</head>
<body>
<!-- Begin page -->
		<div id="wrapper">
			<!-- Top Bar Start -->
			<div class="topbar">
				<!-- LOGO -->
				<div class="topbar-left">
					<a href="/" class="logo">
						<span class="logo-light">
                            <i class="mdi mdi-camera-control"></i>IDC笔记
                        </span>
						<span class="logo-sm">
                            <i class="mdi mdi-camera-control"></i>
                        </span>
					</a>
				</div>
				<nav class="navbar-custom">
					<ul class="navbar-right list-inline float-right mb-0">
						<!--<li class="dropdown notification-list list-inline-item d-none d-md-inline-block">
							<a class="nav-link waves-effect" href="#" id="btn-fullscreen">
								<i class="mdi mdi-arrow-expand-all noti-icon"></i>
							</a>
						</li>
						<li class="dropdown notification-list list-inline-item">
							<div class="dropdown notification-list nav-pro-img">
								<a class="dropdown-toggle nav-link arrow-none nav-user" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
									<img src="/skin1/picture/user-4.jpg" alt="user" class="rounded-circle">
								</a>
								<div class="dropdown-menu dropdown-menu-right profile-dropdown ">
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-account-circle"></i> Profile</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-wallet"></i> Wallet</a>
									<a class="dropdown-item d-block" href="#">
										<span class="badge badge-success float-right">11</span>
										<i class="mdi mdi-settings"></i> Settings</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-lock-open-outline"></i> Lock screen</a>
									<div class="dropdown-divider"></div>
									<a class="dropdown-item text-danger" href="#">
										<i class="mdi mdi-power text-danger"></i> Logout</a>
								</div>
							</div>
						</li>
						-->
					</ul>
					<ul class="list-inline menu-left mb-0">
						<li class="float-left">
							<button class="button-menu-mobile open-left waves-effect">
                            <i class="mdi mdi-menu"></i>
                        </button>
						</li>
						<li class="d-none d-md-inline-block">
							<form role="search" class="app-search">
								<div class="form-group mb-0">
									<input type="text" class="form-control" placeholder="Search..">
									<button type="submit"><i class="fa fa-search"></i></button>
								</div>
							</form>
						</li>
					</ul>
				</nav>
			</div>
<!-- ========== Left Sidebar Start ========== -->
<div class="left side-menu">
    <div class="slimscroll-menu" id="remove-scroll">
    <!--- Sidemenu -->
    <div id="sidebar-menu">
    <!-- Left Menu Start -->
    <ul class="metismenu" id="side-menu">
			<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP简介			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jianjie/1.html">PHP简介</a></li><li><a href="/php/jianjie/2.html">PHP用途</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP基本语法			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yufa/3.html">分离HTML</a></li><li><a href="/php/yufa/4.html">指令分隔符</a></li><li><a href="/php/yufa/5.html">PHP注释</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类型			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpleixing/6.html">PHP类型简介</a></li><li><a href="/php/phpleixing/7.html">PHP类型之布尔类型</a></li><li><a href="/php/phpleixing/8.html">PHP类型之整型</a></li><li><a href="/php/phpleixing/9.html">PHP类型之浮点型</a></li><li><a href="/php/phpleixing/10.html">PHP类型之字符串</a></li><li><a href="/php/phpleixing/11.html">PHP类型之数组</a></li><li><a href="/php/phpleixing/12.html">PHP类型之对象</a></li><li><a href="/php/phpleixing/13.html">PHP类型之资源类型</a></li><li><a href="/php/phpleixing/14.html">PHP类型之NULL</a></li><li><a href="/php/phpleixing/15.html">PHP类型之伪类型</a></li><li><a href="/php/phpleixing/16.html">PHP类型之类型判别</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP变量			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbianliang/17.html">PHP变量之基础</a></li><li><a href="/php/phpbianliang/18.html">PHP变量之预定义变量</a></li><li><a href="/php/phpbianliang/19.html">PHP变量之变量范围</a></li><li><a href="/php/phpbianliang/20.html">PHP变量之可变变量</a></li><li><a href="/php/phpbianliang/21.html">PHP变量之外部变量</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP运算符			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yunsuanfu/22.html">PHP运算符优先级</a></li><li><a href="/php/yunsuanfu/23.html">算术运算符</a></li><li><a href="/php/yunsuanfu/24.html">赋值运算符</a></li><li><a href="/php/yunsuanfu/25.html">位运算符</a></li><li><a href="/php/yunsuanfu/26.html">比较运算符</a></li><li><a href="/php/yunsuanfu/27.html">错误控制运算符</a></li><li><a href="/php/yunsuanfu/28.html">执行运算符</a></li><li><a href="/php/yunsuanfu/29.html">递增/递减运算符</a></li><li><a href="/php/yunsuanfu/30.html">逻辑运算符</a></li><li><a href="/php/yunsuanfu/31.html">字符串运算符</a></li><li><a href="/php/yunsuanfu/32.html">数组运算符</a></li><li><a href="/php/yunsuanfu/33.html">类型运算符</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP控制结构			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jiegou/34.html">PHP控制结构之if</a></li><li><a href="/php/jiegou/35.html">PHP控制结构之else</a></li><li><a href="/php/jiegou/36.html">PHP控制结构之elseif/else if</a></li><li><a href="/php/jiegou/37.html">PHP控制结构之替代语法</a></li><li><a href="/php/jiegou/38.html">PHP控制结构之while</a></li><li><a href="/php/jiegou/39.html">PHP控制结构之do-while</a></li><li><a href="/php/jiegou/40.html">PHP控制结构之for</a></li><li><a href="/php/jiegou/41.html">PHP控制结构之foreach</a></li><li><a href="/php/jiegou/42.html">PHP控制结构之break</a></li><li><a href="/php/jiegou/43.html">PHP控制结构之continue</a></li><li><a href="/php/jiegou/44.html">PHP控制结构之switch</a></li><li><a href="/php/jiegou/45.html">PHP控制结构之declare</a></li><li><a href="/php/jiegou/46.html">PHP控制结构之return</a></li><li><a href="/php/jiegou/47.html">PHP控制结构之require</a></li><li><a href="/php/jiegou/48.html">PHP控制结构之include</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/hanshu/52.html">用户自定义函数</a></li><li><a href="/php/hanshu/53.html">函数的参数</a></li><li><a href="/php/hanshu/54.html">返回值</a></li><li><a href="/php/hanshu/55.html">可变函数</a></li><li><a href="/php/hanshu/56.html">内部（内置）函数</a></li><li><a href="/php/hanshu/57.html">匿名函数</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类与对象			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpduixiang/58.html">类与对象前言</a></li><li><a href="/php/phpduixiang/59.html">基本概念</a></li><li><a href="/php/phpduixiang/60.html">属性</a></li><li><a href="/php/phpduixiang/61.html">类常量</a></li><li><a href="/php/phpduixiang/62.html">自动加载对象</a></li><li><a href="/php/phpduixiang/63.html">构造函数和析构函数</a></li><li><a href="/php/phpduixiang/64.html">访问控制</a></li><li><a href="/php/phpduixiang/65.html">对象继承</a></li><li><a href="/php/phpduixiang/66.html">Static关键字</a></li><li><a href="/php/phpduixiang/67.html">抽象类</a></li><li><a href="/php/phpduixiang/68.html">接口</a></li><li><a href="/php/phpduixiang/69.html">Traits</a></li><li><a href="/php/phpduixiang/70.html">重载</a></li><li><a href="/php/phpduixiang/71.html">对象迭代</a></li><li><a href="/php/phpduixiang/72.html">设计模式</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP异常处理			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yichang/81.html">异常处理</a></li><li><a href="/php/yichang/82.html">扩展PHP内置的异常处理类</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数库按分类			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpku/83.html">数组</a></li><li><a href="/php/phpku/84.html">Classes/Objects</a></li><li><a href="/php/phpku/85.html">Date/Time</a></li><li><a href="/php/phpku/86.html">Directories</a></li><li><a href="/php/phpku/87.html">错误处理</a></li><li><a href="/php/phpku/88.html">Program execution</a></li><li><a href="/php/phpku/89.html">Filesystem</a></li><li><a href="/php/phpku/90.html">Filter</a></li><li><a href="/php/phpku/91.html">Function Handling</a></li><li><a href="/php/phpku/92.html">PHP 选项/信息</a></li><li><a href="/php/phpku/93.html">Mail</a></li><li><a href="/php/phpku/94.html">Math</a></li><li><a href="/php/phpku/95.html">Misc.</a></li><li><a href="/php/phpku/96.html">Network</a></li><li><a href="/php/phpku/97.html">输出控制</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> php基础			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbiji/108377.html"></a></li><li><a href="/php/phpbiji/108376.html"></a></li><li><a href="/php/phpbiji/108380.html"></a></li><li><a href="/php/phpbiji/108379.html"></a></li><li><a href="/php/phpbiji/108378.html"></a></li><li><a href="/php/phpbiji/108381.html"></a></li><li><a href="/php/phpbiji/108382.html"></a></li><li><a href="/php/phpbiji/108384.html"></a></li><li><a href="/php/phpbiji/108383.html"></a></li><li><a href="/php/phpbiji/108385.html"></a></li><li><a href="/php/phpbiji/108386.html"></a></li><li><a href="/php/phpbiji/108388.html"></a></li><li><a href="/php/phpbiji/108387.html"></a></li><li><a href="/php/phpbiji/108389.html"></a></li><li><a href="/php/phpbiji/108391.html"></a></li>		</ul>
	</li>
		<li>
	    <a href="/php/biji/" class="waves-effect">
		    <i class="icon-share"></i>
		    <span>PHP笔记
		       	<span class="float-right menu-arrow">
		       	<i class="mdi mdi-chevron-right"></i>
		       	</span>
		    </span>
	    </a>
	</li>
	</ul>
</div>
<!-- Sidebar -->
<div class="clearfix"></div>
</div>
<!-- Sidebar -left -->
</div>
<!-- Left Sidebar End -->
<!-- Start right Content here -->
<div class="content-page">
	<div class="content">
		<div class="container-fluid">
			<div class="page-title-box">
				<div class="row align-items-center">
					<div class="col-sm-6">
						<h1 class="page-title">浅谈JavaScript 浏览器对象</h1>
					</div>
				</div>
				<!-- end row -->
			</div>
			<!-- end page-title -->
			<!-- START ROW -->
			<div class="panel panel-forbid">
				<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>内容摘要</div>
			    <div class="panel-content">
			    <span>window<br />
window对象不但充当全局作用域，而且表示浏览器窗口。<br />
window对象有innerWidth和innerHeight属性，可以获取浏览器窗口的内部宽度和高度。内部宽高是指除去菜单栏、工具</span>                                     
		    	</div>
			    <div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>文章正文</div>
			    <div class="panel-content">
			    <span><p><span style="color: #ff0000"><strong>window</strong></span></p>
<p>window对象不但充当全局作用域，而且表示浏览器窗口。</p>
<p>window对象有innerWidth和innerHeight属性，可以获取浏览器窗口的内部宽度和高度。内部宽高是指除去菜单栏、工具栏、边框等占位元素后，用于显示网页的净宽高。还有一个outerWidth和outerHeight属性，可以获取浏览器窗口的整个宽高。</p>
<p><span style="background-color: #ffcc99"><strong>补充：</strong></span></p>
<div class="phpstudycode">
<pre class="brush:xhtml;">
网页可见区域宽：document.body.clientWidth 
网页可见区域高：document.body.clientHeight 
网页可见区域宽：document.body.offsetWidth (包括边线和滚动条的宽) 
网页可见区域高：document.body.offsetHeight (包括边线的宽) 
网页正文全文宽：document.body.scrollWidth 
网页正文全文高：document.body.scrollHeight 
网页被卷去的高：document.body.scrollTop 或者 jQuery(document).scrollTop() 
网页被卷去的左：document.body.scrollLeft 
网页正文部分上：window.screenTop 
网页正文部分左：window.screenLeft 
屏幕分辨率的高：window.screen.height 
屏幕分辨率的宽：window.screen.width 
屏幕可用工作区高度：window.screen.availHeight 
屏幕可用工作区宽度：window.screen.availWidth 
屏幕彩色位数: window.screen.colorDepth 
屏幕像素/英寸比例: window.screen.deviceXDPI 
浏览器窗口的高度: $(window).height() 
浏览器窗口的宽度: $(window).width()</pre>
</div>
<div class="phpstudycode">
<pre class="brush:js;">
特殊1: 
document.body.scrollTop总为0的解决方法 
var scrollPos; 
if (typeof window.pageYOffset != 'undefined') { 
scrollPos = window.pageYOffset; 
} 
else if (typeof document.compatMode != 'undefined' && 
document.compatMode != 'BackCompat') { 
scrollPos = document.documentElement.scrollTop; 
} 
else if (typeof document.body != 'undefined') { 
scrollPos = document.body.scrollTop; 
} 
alert(scrollPos ); 

特殊2: 
网页正文全文宽："+ document.body.scrollWidth; 
网页正文全文高："+ document.body.scrollHeight; 
以上函数有时获取不了，就用以下方法。 
var xScroll, yScroll; 
if (window.innerHeight && window.scrollMaxY) 
{ 
xScroll = document.body.scrollWidth; 
yScroll = window.innerHeight + window.scrollMaxY; 
} else if (document.body.scrollHeight &gt; document.body.offsetHeight){ // all but Explorer Mac 
xScroll = document.body.scrollWidth; 
yScroll = document.body.scrollHeight; 
} else { //Explorer Mac...would also work in Explorer 6 Strict, Mozilla and Safari 
xScroll = document.body.offsetWidth; 
yScroll = document.body.offsetHeight; 
}</pre>
</div>
<p><span style="background-color: #ccffcc"><strong>navigator</strong></span></p>
<p>navigator对象表示浏览器的信息，最常用的属性包括：</p>
<p>&#8226;navigator.appName：浏览器名称；</p>
<p>&#8226;navigator.appVersion：浏览器版本；</p>
<p>&#8226;navigator.language：浏览器设置的语言；</p>
<p>&#8226;navigator.platform：操作系统类型；</p>
<p>&#8226;navigator.userAgent：浏览器设定的User-Agent字符串。</p>
<p>初学者为了针对不同浏览器编写不同的代码，喜欢用if判断浏览器版本，例如：<br />
</p>
<div class="phpstudycode">
<pre class="brush:js;">
var width;
if (getIEVersion(navigator.userAgent) &lt; 9) {
  width = document.body.clientWidth;
} else {
  width = window.innerWidth;
}</pre>
</div>
<p>但这样既可能判断不准确，也很难维护代码。正确的方法是充分利用JavaScript对不存在属性返回<code><font face="NSimsun">undefined</font></code>的特性，直接用短路运算符<code><font face="NSimsun">||</font></code>计算：</p>
<div class="phpstudycode">
<pre class="brush:js;">
var width = window.innerWidth || document.body.clientWidth;</pre>
</div>
<p><strong>screen</strong></p>
<p>screen对象表示屏幕的信息，常用的属性有：</p>
<p>&#8226;screen.width：屏幕宽度，以像素为单位；</p>
<p>&#8226;screen.height：屏幕高度，以像素为单位；</p>
<p>&#8226;screen.colorDepth：返回颜色位数，如8、16、24。</p>
<p><strong>location</strong></p>
<p>location对象表示当前页面的URL信息。例如，一个完整的URL：<br />
</p>
<div class="phpstudycode">
<pre class="brush:js;">
http://www.example.com:8080/path/index.html&#63;a=1&b=2#TOP</pre>
</div>
<p>可以用<code><font face="NSimsun">location.href</font></code>获取。要获得URL各个部分的值，可以这么写：</p>
<div class="phpstudycode">
<pre class="brush:js;">
location.protocol; // 'http'
location.host; // 'www.example.com' 
location.port; // '8080'
location.pathname; // '/path/index.html'
location.search; // '&#63;a=1&b=2'
location.hash; // 'TOP'</pre>
</div>
<p>要加载一个新页面，可以调用location.assign()。如果要重新加载当前页面，调用location.reload()方法非常方便。</p>
<p><strong>document</strong></p>
<p>document对象表示当前页面。由于HTML在浏览器中以DOM形式表示为树形结构，document对象就是整个DOM树的根节点。</p>
<p>document的title属性是从HTML文档中的&lt;title&gt;xxx&lt;/title&gt;读取的，但是可以动态改变：</p>
<p>document对象还有一个cookie属性，可以获取当前页面的Cookie。</p>
<p>Cookie是由服务器发送的key-value标示符。因为HTTP协议是无状态的，但是服务器要区分到底是哪个用户发过来的请求，就可以用Cookie来区分。当一个用户成功登录后，服务器发送一个Cookie给浏览器，例如user=ABC123XYZ(加密的字符串)...，此后，浏览器访问该网站时，会在请求头附上这个Cookie，服务器根据Cookie即可区分出用户。</p>
<p>Cookie还可以存储网站的一些设置，例如，页面显示的语言等等。</p>
<p>JavaScript可以通过document.cookie读取到当前页面的Cookie：<br />
</p>
<div class="phpstudycode">
<pre class="brush:js;">
document.cookie; // 'v=123; remember=true; prefer=zh'</pre>
</div>
<p>由于JavaScript能读取到页面的Cookie，而用户的登录信息通常也存在Cookie中，这就造成了巨大的安全隐患，这是因为在HTML页面中引入第三方的JavaScript代码是允许的：</p>
<div class="phpstudycode">
<pre class="brush:xhtml;">
&lt;!-- 当前页面在wwwexample.com --&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;script src="http://www.foo.com/jquery.js"&gt;&lt;/script&gt;
  &lt;/head&gt;
&lt;/html&gt;</pre>
</div>
<p>如果引入的第三方的JavaScript中存在恶意代码，则www.foo.com网站将直接获取到www.example.com网站的用户登录信息。</p>
<p>为了解决这个问题，服务器在设置Cookie时可以使用httpOnly，设定了httpOnly的Cookie将不能被JavaScript读取。这个行为由浏览器实现，主流浏览器均支持httpOnly选项，为了确保安全，服务器端在设置Cookie时，应该始终坚持使用httpOnly。</p>
<p>document.write() 仅仅向文档输出新内容</p>
<p>如果在文档已完成加载后执行 document.write，整个 HTML 页面将被覆盖：</p>
<p>参考:http://www.w3school.com.cn/tiy/t.asp&#63;f=js_write_over</p>
<p><strong>DOM | Document</strong></p>
<div class="phpstudycode">
<pre class="brush:js;">
// 返回ID为'test'的节点：
var test = document.getElementById('test');
// 获取节点test下的所有直属子节点:
var cs = test.children;
var first = test.firstElementChild;</pre>
</div>
<p>第二种方法是使用<code><font face="NSimsun">querySelector()</font></code>和<code><font face="NSimsun">querySelectorAll()</font></code>，需要了解selector语法，然后使用条件来获取节点，更加方便：</p>
<p></p>
<div class="phpstudycode">
<pre class="brush:js;">
// 通过querySelector获取ID为q1的节点：
var q1 = document.querySelector('#q1');
// 通过querySelectorAll获取q1节点内的符合条件的所有节点：
var ps = q1.querySelectorAll('div.highlighted &gt; p');</pre>
</div>
<p>严格地讲，我们这里的DOM节点是指Element，但是DOM节点实际上是Node，在HTML中，Node包括Element、Comment、CDATA_SECTION等很多种，以及根节点Document类型，但是，绝大多数时候我们只关心Element，也就是实际控制页面结构的Node，其他类型的Node忽略即可。根节点Document已经自动绑定为全局变量document。</p>
<p><strong>修改Dom</strong></p>
<p>修改CSS也是经常需要的操作。DOM节点的style属性对应所有的CSS，可以直接获取或设置。因为CSS允许font-size这样的名称，但它并非JavaScript有效的属性名，所以需要在JavaScript中改写为驼峰式命名fontSize：<br />
</p>
<p>&nbsp;</p>
<div class="phpstudycode">
<pre class="brush:xhtml;">
// 获取&lt;p id="p-id"&gt;...&lt;/p&gt;var p = document.getElementById('p-id');
// 设置CSS:
p.style.color = '#ff0000';
p.style.fontSize = '20px';
p.style.paddingTop = '2em';</pre>
</div>
<p>&nbsp;<strong>插入DOM</strong></p>
<p>有两个办法可以插入新的节点。一个是使用appendChild，把一个子节点添加到父节点的最后一个子节点。例如：<br />
</p>
<p>&nbsp;</p>
<div class="phpstudycode">
<pre class="brush:xhtml;">
&lt;!-- HTML结构 --&gt;
&lt;p id="js"&gt;JavaScript&lt;/p&gt;
&lt;div id="list"&gt;
  &lt;p id="scheme"&gt;Scheme&lt;/p&gt;
&lt;/div&gt;</pre>
</div>
<p>把<code><font face="NSimsun">&lt;p id="js"&gt;JavaScript&lt;/p&gt;</font></code>添加到<code><font face="NSimsun">&lt;div id="list"&gt;</font></code>的最后一项：</p>
<div class="phpstudycode">
<pre class="brush:js;">
var js = document.getElementById('js'), list = document.getElementById('list');
list.appendChild(js);</pre>
</div>
<p>现在，HTML结构变成了这样：</p>
<div class="phpstudycode">
<pre class="brush:xhtml;">
&lt;!-- HTML结构 --&gt;&lt;div id="list"&gt;
  &lt;p id="scheme"&gt;Scheme&lt;/p&gt;
  &lt;p id="js"&gt;JavaScript&lt;/p&gt;&lt;/div&gt;</pre>
</div>
<p>因为我们插入的<code><font face="NSimsun">js</font></code>节点已经存在于当前的文档树，因此这个节点首先会从原先的位置删除，再插入到新的位置。</p>
<p>更多的时候我们会从零创建一个新的节点，然后插入到指定位置：&nbsp;</p>
<div class="phpstudycode">
<pre class="brush:js;">
haskell = document.createElement('p');</pre>
</div>
<p>动态创建一个节点然后添加到DOM树中，可以实现很多功能。举个例子，下面的代码动态创建了一个<code><font face="NSimsun">&lt;style&gt;</font></code>节点，然后把它添加到<code><font face="NSimsun">&lt;head&gt;</font></code>节点的末尾，这样就动态地给文档添加了新的CSS定义：</p>
<div class="phpstudycode">
<pre class="brush:js;">
var d = document.createElement('style');
d.setAttribute('type', 'text/css');
d.innerHTML = 'p { color: red }';
document.getElementsByTagName('head')[0].appendChild(d); </pre>
</div>
<p><strong>insertBefore</strong></p>
<p>如果我们要把子节点插入到指定的位置怎么办？可以使用parentElement.insertBefore(newElement, referenceElement);，子节点会插入到referenceElement之前。</p>
<p>很多时候，需要循环一个父节点的所有子节点，可以通过迭代children属性实现：<br />
</p>
<div class="phpstudycode">
<pre class="brush:js;">
var
  i, c,
  list = document.getElementById('list');
for (i = 0; i &lt; list.children.length; i++) {
  c = list.children[i]; // 拿到第i个子节点
}</pre>
</div>
<p><strong>删除DOM</strong></p>
<p>要删除一个节点，首先要获得该节点本身以及它的父节点，然后，调用父节点的removeChild把自己删掉：<br />
</p>
<div class="phpstudycode">
<pre class="brush:js;">
// 拿到待删除节点:
var self = document.getElementById('to-be-removed');
// 拿到父节点:
var parent = self.parentElement;
// 删除:
var removed = parent.removeChild(self);
removed === self; // true</pre>
</div>
<p>注意到删除后的节点虽然不在文档树中了，但其实它还在内存中，可以随时再次被添加到别的位置。</p>
<p>当你遍历一个父节点的子节点并进行删除操作时，要注意，children属性是一个只读属性，并且它在子节点变化时会实时更新。因此，删除多个节点时，要注意children属性时刻都在变化。</p>
<p><strong>操作表单 </strong></p>
<p>用JavaScript操作表单和操作DOM是类似的，因为表单本身也是DOM树。</p>
<p>不过表单的输入框、下拉框等可以接收用户输入，所以用JavaScript来操作表单，可以获得用户输入的内容，或者对一个输入框设置新的内容。</p>
<p>HTML表单的输入控件主要有以下几种：</p>
<p>&#8226;文本框，对应的&lt;input type="text"&gt;，用于输入文本；</p>
<p>&#8226;口令框，对应的&lt;input type="password"&gt;，用于输入口令；</p>
<p>&#8226;单选框，对应的&lt;input type="radio"&gt;，用于选择一项；</p>
<p>&#8226;复选框，对应的&lt;input type="checkbox"&gt;，用于选择多项；</p>
<p>&#8226;下拉框，对应的&lt;select&gt;，用于选择一项；</p>
<p>&#8226;隐藏文本，对应的&lt;input type="hidden"&gt;，用户不可见，但表单提交时会把隐藏文本发送到服务器。</p>
<p><strong>获取值</strong></p>
<p>如果我们获得了一个&lt;input&gt;节点的引用，就可以直接调用value获得对应的用户输入值：</p>
<div class="phpstudycode">
<pre class="brush:js;">
// &lt;input type="text" id="email"&gt;
var input = document.getElementById('email');
input.value; // '用户输入的值'</pre>
</div>
<p>这种方式可以应用于<code><font face="NSimsun">text</font></code>、<code><font face="NSimsun">password</font></code>、<code><font face="NSimsun">hidden</font></code>以及<code><font face="NSimsun">select</font></code>。但是，对于单选框和复选框，<code><font face="NSimsun">value</font></code>属性返回的永远是HTML预设的值，而我们需要获得的实际是用户是否“勾上了”选项，所以应该用<code><font face="NSimsun">checked</font></code>判断：</p>
<div class="phpstudycode">
<pre class="brush:js;">
// &lt;label&gt;&lt;input type="radio" name="weekday" id="monday" value="1"&gt; Monday&lt;/label&gt;
// &lt;label&gt;&lt;input type="radio" name="weekday" id="tuesday" value="2"&gt; Tuesday&lt;/label&gt;

var mon = document.getElementById('monday');
var tue = document.getElementById('tuesday');
mon.value; // '1'
tue.value; // '2'
mon.checked; // true或者false
tue.checked; // true或者false</pre>
</div>
<p><strong>设置值</strong></p>
<p>设置值和获取值类似，对于text、password、hidden以及select，直接设置value就可以：<br />
</p>
<div class="phpstudycode">
<pre class="brush:js;">
// &lt;input type="text" id="email"&gt;var input = document.getElementById('email');
input.value = 'test@example.com'; // 文本框的内容已更新</pre>
</div>
<p>对于单选框和复选框，设置checked为true或false即可。</p>
<p><strong>HTML5控件</strong></p>
<p>HTML5新增了大量标准控件，常用的包括date、datetime、datetime-local、color等，它们都使用&lt;input&gt;标签：<br />
</p>
<div class="phpstudycode">
<pre class="brush:xhtml;">
&lt;input type="date" value="2015-07-01"&gt;</pre>
</div>
<p></p>
<div class="phpstudycode">
<pre class="brush:xhtml;">
&lt;input type="datetime-local" value="2015-07-01T02:03:04"&gt;</pre>
</div>
<p></p>
<div class="phpstudycode">
<pre class="brush:xhtml;">
&lt;input type="color" value="#ff0000"&gt;</pre>
</div>
<p></p>
<p>不支持HTML5的浏览器无法识别新的控件，会把它们当做type="text"来显示。支持HTML5的浏览器将获得格式化的字符串。例如，type="date"类型的input的value将保证是一个有效的YYYY-MM-DD格式的日期，或者空字符串。</p>
<p><strong>提交表单</strong></p>
<p>最后，JavaScript可以以两种方式来处理表单的提交（AJAX方式在后面章节介绍）。</p>
<p>方式一是通过&lt;form&gt;元素的submit()方法提交一个表单，例如，响应一个&lt;button&gt;的click事件，在JavaScript代码中提交表单：<br />
</p>
<div class="phpstudycode">
<pre class="brush:js;">
&lt;form id="test-form"&gt;
  &lt;input type="text" name="test"&gt;
  &lt;button type="button" onclick="doSubmitForm()"&gt;Submit&lt;/button&gt;&lt;/form&gt;
&lt;script&gt;
function doSubmitForm() {
  var form = document.getElementById('test-form');  // 可以在此修改form的input...
  // 提交form:
  form.submit();
}&lt;/script&gt;</pre>
</div>
<p>这种方式的缺点是扰乱了浏览器对form的正常提交。浏览器默认点击<code><font face="NSimsun">&lt;button type="submit"&gt;</font></code>时提交表单，或者用户在最后一个输入框按回车键。因此，第二种方式是响应<code><font face="NSimsun">&lt;form&gt;</font></code>本身的<code><font face="NSimsun">onsubmit</font></code>事件，在提交form时作修改：</p>
<div class="phpstudycode">
<pre class="brush:js;">
&lt;form id="test-form" onsubmit="return checkForm()"&gt;
  &lt;input type="text" name="test"&gt;
  &lt;button type="submit"&gt;Submit&lt;/button&gt;&lt;/form&gt;
&lt;script&gt;
function checkForm() {
  var form = document.getElementById('test-form');  // 可以在此修改form的input...
  // 继续下一步:
  return true;
}
&lt;/script&gt;</pre>
</div>
<p>注意要<code><font face="NSimsun">return true</font></code>来告诉浏览器继续提交，如果<code><font face="NSimsun">return false</font></code>，浏览器将不会继续提交form，这种情况通常对应用户输入有误，提示用户错误信息后终止提交form。</p>
<p>在检查和修改<code><font face="NSimsun">&lt;input&gt;</font></code>时，要充分利用<code><font face="NSimsun">&lt;input type="hidden"&gt;</font></code>来传递数据。</p>
<p>例如，很多登录表单希望用户输入用户名和口令，但是，安全考虑，提交表单时不传输明文口令，而是口令的MD5。普通JavaScript开发人员会直接修改<code><font face="NSimsun">&lt;input&gt;</font></code>：</p>
<div class="phpstudycode">
<pre class="brush:js;">
&lt;form id="login-form" method="post" onsubmit="return checkForm()"&gt;
  &lt;input type="text" id="username" name="username"&gt;
  &lt;input type="password" id="password" name="password"&gt;
  &lt;button type="submit"&gt;Submit&lt;/button&gt;&lt;/form&gt;
&lt;script&gt;
function checkForm() {
  var pwd = document.getElementById('password');  // 把用户输入的明文变为MD5:
  pwd.value = toMD5(pwd.value);  // 继续下一步:
  return true;
}&lt;/script&gt;</pre>
</div>
<p>这个做法看上去没啥问题，但用户输入了口令提交时，口令框的显示会突然从几个<code><font face="NSimsun">*</font></code>变成32个<code><font face="NSimsun">*</font></code>（因为MD5有32个字符）。</p>
<p>要想不改变用户的输入，可以利用<code><font face="NSimsun">&lt;input type="hidden"&gt;</font></code>实现：</p>
<div class="phpstudycode">
<pre class="brush:js;">
&lt;form id="login-form" method="post" onsubmit="return checkForm()"&gt;
  &lt;input type="text" id="username" name="username"&gt;
  &lt;input type="password" id="input-password"&gt;
  &lt;input type="hidden" id="md5-password" name="password"&gt;
  &lt;button type="submit"&gt;Submit&lt;/button&gt;&lt;/form&gt;
&lt;script&gt;
function checkForm() {
  var input_pwd = document.getElementById('input-password');
  var md5_pwd = document.getElementById('md5-password');  // 把用户输入的明文变为MD5:
  md5_pwd.value = toMD5(input_pwd.value);  // 继续下一步:
  return true;
}&lt;/script&gt;</pre>
</div>
<p>注意到id为md5-password的&lt;input&gt;标记了name="password"，而用户输入的id为input-password的&lt;input&gt;没有name属性。没有name属性的&lt;input&gt;的数据不会被提交。</p>
<p><strong>操作文件</strong></p>
<p>在HTML表单中，可以上传文件的唯一控件就是&lt;input type="file"&gt;。</p>
<p>注意：当一个表单包含&lt;input type="file"&gt;时，表单的enctype必须指定为multipart/form-data，method必须指定为post，浏览器才能正确编码并以multipart/form-data格式发送表单的数据。</p>
<p>出于安全考虑，浏览器只允许用户点击&lt;input type="file"&gt;来选择本地文件，用JavaScript对&lt;input type="file"&gt;的value赋值是没有任何效果的。当用户选择了上传某个文件后，JavaScript也无法获得该文件的真实路径：</p>
<p></p>
<p>待上传文件:</p>
<p>通常，上传的文件都由后台服务器处理，JavaScript可以在提交表单时对文件扩展名做检查，以便防止用户上传无效格式的文件：</p>
<div class="phpstudycode">
<pre class="brush:js;">
var f = document.getElementById('test-file-upload');
var filename = f.value; // 'C:\fakepath\test.png'
if (!filename || !(filename.endsWith('.jpg') || filename.endsWith('.png') || filename.endsWith('.gif'))) {
  alert('Can only upload image file.');
  return false;
}</pre>
</div>
<p><strong>File API</strong></p>
<p>由于JavaScript对用户上传的文件操作非常有限，尤其是无法读取文件内容，使得很多需要操作文件的网页不得不用Flash这样的第三方插件来实现。</p>
<p>随着HTML5的普及，新增的File API允许JavaScript读取文件内容，获得更多的文件信息。</p>
<p>HTML5的File API提供了File和FileReader两个主要对象，可以获得文件信息并读取文件。</p>
<p>下面的例子演示了如何读取用户选取的图片文件，并在一个&lt;div&gt;中预览图像：</p>
<p>图片预览：</p>
<p></p>
<div class="phpstudycode">
<pre class="brush:js;">
var
  fileInput = document.getElementById('test-image-file'),
  info = document.getElementById('test-file-info'),
  preview = document.getElementById('test-image-preview');
  // 监听change事件:
  fileInput.addEventListener('change', function () {
  // 清除背景图片:
  preview.style.backgroundImage = '';  // 检查文件是否选择:
  if (!fileInput.value) {
    info.innerHTML = '没有选择文件';
    return;
  }  // 获取File引用:
  var file = fileInput.files[0];  // 获取File信息:
  info.innerHTML = '文件: ' + file.name + '&lt;br&gt;' +
           '大小: ' + file.size + '&lt;br&gt;' +
           '修改: ' + file.lastModifiedDate;
  if (file.type !== 'image/jpeg' && file.type !== 'image/png' && file.type !== 'image/gif') {
    alert('不是有效的图片文件!');
    return;
  }  // 读取文件:
  var reader = new FileReader();
  reader.onload = function(e) {
    var data = e.target.result; // 'data:image/jpeg;base64,/9j/4AAQSk...(base64编码)...'      
    preview.style.backgroundImage = 'url(' + data + ')';
  };
  // 以DataURL的形式读取文件:
  reader.readAsDataURL(file);
});</pre>
</div>
<p>上面的代码演示了如何通过HTML5的File API读取文件内容。以DataURL的形式读取到的文件是一个字符串，类似于data:image/jpeg;base64,/9j/4AAQSk...(base64编码)...，常用于设置图像。如果需要服务器端处理，把字符串base64后的字符发送给服务器并用Base64解码就可以得到原始文件的二进制内容。</p>
<p><strong>回调</strong></p>
<p>上面的代码还演示了JavaScript的一个重要的特性就是单线程执行模式。在JavaScript中，浏览器的JavaScript执行引擎在执行JavaScript代码时，总是以单线程模式执行，也就是说，任何时候，JavaScript代码都不可能同时有多于1个线程在执行。</p>
<p>你可能会问，单线程模式执行的JavaScript，如何处理多任务？</p>
<p>在JavaScript中，执行多任务实际上都是异步调用，比如上面的代码：<br />
</p>
<div class="phpstudycode">
<pre class="brush:js;">
reader.readAsDataURL(file);</pre>
</div>
<p>就会发起一个异步操作来读取文件内容。因为是异步操作，所以我们在JavaScript代码中就不知道什么时候操作结束，因此需要先设置一个回调函数：</p>
<div class="phpstudycode">
<pre class="brush:js;">
reader.onload = function(e) {
  // 当文件读取完成后，自动调用此函数:
};</pre>
</div>
<p>当文件读取完成后，JavaScript引擎将自动调用我们设置的回调函数。执行回调函数时，文件已经读取完毕，所以我们可以在回调函数内部安全地获得文件内容。</p>
<p>以上这篇浅谈JavaScript 浏览器对象就是小编分享给大家的全部内容了，希望能给大家一个参考，也希望大家多多支持phpstudy。</p>
<hr></span>                                     
		    	</div>
		    	<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>代码注释</div>
			    <div class="panel-content">
			    <span></span>                                     
		    	</div>

			</div>

			<!-- END ROW -->
			<div class="newsPage">
				<div class="newsPageTurn">
				    <span><a>上一篇</a><a href='/php/biji/102238.html'>jQuery背景插件backstretch使用指南</a><a>下一篇</a><a href='/php/biji/102240.html'>AspNet中使用JQuery上传插件Uploadify详解</a></span>
				</div>
			</div>
		</div>


<div id="author-box">
    <h3>作者：喵哥笔记</h3>
        <div class="author-info">
            <div class="author-avatar">
                <img src="/skin1/picture/01.jpg" alt="IDC笔记" class="avatar" width="64" height="64">
            </div>
        <div class="author-description">
            <p>学的不仅是技术，更是梦想！</p>
            <ul class="author-social follows nb">
            	<li>
                    <a target="_blank" href="/" title="IDC笔记">IDC笔记</a>
                </li>
            </ul>
        </div>
        <div class="clear"></div>
    </div>
</div>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
<!-- container-fluid -->
	</div>
<!-- content -->
	<footer class="footer">
	© 2020 IDC笔记 <i class="mdi mdi-heart text-danger"></i>. | 备案号：<a href="https://beian.miit.gov.cn/">辽ICP备18000516号</a>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?674585fbbd2294d3faf910f668ea91b4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

	</footer>
</div>

</div>
<!-- END wrapper -->
<!-- jQuery  -->
<script src="/skin1/js/jquery.min.js"></script>
<script src="/skin1/js/bootstrap.bundle.min.js"></script>
<script src="/skin1/js/metismenu.min.js"></script>
<script src="/skin1/js/jquery.slimscroll.js"></script>
<script src="/skin1/js/waves.min.js"></script>
<!--Morris Chart-->
<script src="/skin1/js/morris.min.js"></script>
<script src="/skin1/js/raphael.min.js"></script>
<script src="/skin1/js/dashboard.init.js"></script>
<script src="/skin1/js/app.js"></script>
<script src="/foot.js"></script>
</body>
</html>