<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title>java教学笔记之对象的创建与销毁_PHP教程_IDC笔记</title>
    <meta name="keywords" content="PHP,PHP笔记,PHP教程" />
    <meta name="description" content="本课程的目标是帮你更有效的使用Java。其中讨论了一些高级主题，包括对象的创建、并发、序列化、反射以及其他高级特性。本课程将为你的精通Java的旅程提供指导。<br />
1. 引言<br />
在T" />
    <meta content="Responsive admin theme build on top of Bootstrap 4" name="description" />
    <meta content="idcnote.com" name="author" />
    <link rel="shortcut icon" href="/skin1/images/favicon.ico">
    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="/skin1/css/morris.css">
    <link href="/skin1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/metismenu.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/icons.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/style.css" rel="stylesheet" type="text/css">
<link href="/SyntaxHighlighter/shCoreDefault.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/SyntaxHighlighter/shCore.js"></script>
<script type="text/javascript">
 SyntaxHighlighter.all();
</script>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
</head>
<body>
<!-- Begin page -->
		<div id="wrapper">
			<!-- Top Bar Start -->
			<div class="topbar">
				<!-- LOGO -->
				<div class="topbar-left">
					<a href="/" class="logo">
						<span class="logo-light">
                            <i class="mdi mdi-camera-control"></i>IDC笔记
                        </span>
						<span class="logo-sm">
                            <i class="mdi mdi-camera-control"></i>
                        </span>
					</a>
				</div>
				<nav class="navbar-custom">
					<ul class="navbar-right list-inline float-right mb-0">
						<!--<li class="dropdown notification-list list-inline-item d-none d-md-inline-block">
							<a class="nav-link waves-effect" href="#" id="btn-fullscreen">
								<i class="mdi mdi-arrow-expand-all noti-icon"></i>
							</a>
						</li>
						<li class="dropdown notification-list list-inline-item">
							<div class="dropdown notification-list nav-pro-img">
								<a class="dropdown-toggle nav-link arrow-none nav-user" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
									<img src="/skin1/picture/user-4.jpg" alt="user" class="rounded-circle">
								</a>
								<div class="dropdown-menu dropdown-menu-right profile-dropdown ">
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-account-circle"></i> Profile</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-wallet"></i> Wallet</a>
									<a class="dropdown-item d-block" href="#">
										<span class="badge badge-success float-right">11</span>
										<i class="mdi mdi-settings"></i> Settings</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-lock-open-outline"></i> Lock screen</a>
									<div class="dropdown-divider"></div>
									<a class="dropdown-item text-danger" href="#">
										<i class="mdi mdi-power text-danger"></i> Logout</a>
								</div>
							</div>
						</li>
						-->
					</ul>
					<ul class="list-inline menu-left mb-0">
						<li class="float-left">
							<button class="button-menu-mobile open-left waves-effect">
                            <i class="mdi mdi-menu"></i>
                        </button>
						</li>
						<li class="d-none d-md-inline-block">
							<form role="search" class="app-search">
								<div class="form-group mb-0">
									<input type="text" class="form-control" placeholder="Search..">
									<button type="submit"><i class="fa fa-search"></i></button>
								</div>
							</form>
						</li>
					</ul>
				</nav>
			</div>
<!-- ========== Left Sidebar Start ========== -->
<div class="left side-menu">
    <div class="slimscroll-menu" id="remove-scroll">
    <!--- Sidemenu -->
    <div id="sidebar-menu">
    <!-- Left Menu Start -->
    <ul class="metismenu" id="side-menu">
			<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP简介			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jianjie/1.html">PHP简介</a></li><li><a href="/php/jianjie/2.html">PHP用途</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP基本语法			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yufa/3.html">分离HTML</a></li><li><a href="/php/yufa/4.html">指令分隔符</a></li><li><a href="/php/yufa/5.html">PHP注释</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类型			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpleixing/6.html">PHP类型简介</a></li><li><a href="/php/phpleixing/7.html">PHP类型之布尔类型</a></li><li><a href="/php/phpleixing/8.html">PHP类型之整型</a></li><li><a href="/php/phpleixing/9.html">PHP类型之浮点型</a></li><li><a href="/php/phpleixing/10.html">PHP类型之字符串</a></li><li><a href="/php/phpleixing/11.html">PHP类型之数组</a></li><li><a href="/php/phpleixing/12.html">PHP类型之对象</a></li><li><a href="/php/phpleixing/13.html">PHP类型之资源类型</a></li><li><a href="/php/phpleixing/14.html">PHP类型之NULL</a></li><li><a href="/php/phpleixing/15.html">PHP类型之伪类型</a></li><li><a href="/php/phpleixing/16.html">PHP类型之类型判别</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP变量			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbianliang/17.html">PHP变量之基础</a></li><li><a href="/php/phpbianliang/18.html">PHP变量之预定义变量</a></li><li><a href="/php/phpbianliang/19.html">PHP变量之变量范围</a></li><li><a href="/php/phpbianliang/20.html">PHP变量之可变变量</a></li><li><a href="/php/phpbianliang/21.html">PHP变量之外部变量</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP运算符			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yunsuanfu/22.html">PHP运算符优先级</a></li><li><a href="/php/yunsuanfu/23.html">算术运算符</a></li><li><a href="/php/yunsuanfu/24.html">赋值运算符</a></li><li><a href="/php/yunsuanfu/25.html">位运算符</a></li><li><a href="/php/yunsuanfu/26.html">比较运算符</a></li><li><a href="/php/yunsuanfu/27.html">错误控制运算符</a></li><li><a href="/php/yunsuanfu/28.html">执行运算符</a></li><li><a href="/php/yunsuanfu/29.html">递增/递减运算符</a></li><li><a href="/php/yunsuanfu/30.html">逻辑运算符</a></li><li><a href="/php/yunsuanfu/31.html">字符串运算符</a></li><li><a href="/php/yunsuanfu/32.html">数组运算符</a></li><li><a href="/php/yunsuanfu/33.html">类型运算符</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP控制结构			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jiegou/34.html">PHP控制结构之if</a></li><li><a href="/php/jiegou/35.html">PHP控制结构之else</a></li><li><a href="/php/jiegou/36.html">PHP控制结构之elseif/else if</a></li><li><a href="/php/jiegou/37.html">PHP控制结构之替代语法</a></li><li><a href="/php/jiegou/38.html">PHP控制结构之while</a></li><li><a href="/php/jiegou/39.html">PHP控制结构之do-while</a></li><li><a href="/php/jiegou/40.html">PHP控制结构之for</a></li><li><a href="/php/jiegou/41.html">PHP控制结构之foreach</a></li><li><a href="/php/jiegou/42.html">PHP控制结构之break</a></li><li><a href="/php/jiegou/43.html">PHP控制结构之continue</a></li><li><a href="/php/jiegou/44.html">PHP控制结构之switch</a></li><li><a href="/php/jiegou/45.html">PHP控制结构之declare</a></li><li><a href="/php/jiegou/46.html">PHP控制结构之return</a></li><li><a href="/php/jiegou/47.html">PHP控制结构之require</a></li><li><a href="/php/jiegou/48.html">PHP控制结构之include</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/hanshu/52.html">用户自定义函数</a></li><li><a href="/php/hanshu/53.html">函数的参数</a></li><li><a href="/php/hanshu/54.html">返回值</a></li><li><a href="/php/hanshu/55.html">可变函数</a></li><li><a href="/php/hanshu/56.html">内部（内置）函数</a></li><li><a href="/php/hanshu/57.html">匿名函数</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类与对象			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpduixiang/58.html">类与对象前言</a></li><li><a href="/php/phpduixiang/59.html">基本概念</a></li><li><a href="/php/phpduixiang/60.html">属性</a></li><li><a href="/php/phpduixiang/61.html">类常量</a></li><li><a href="/php/phpduixiang/62.html">自动加载对象</a></li><li><a href="/php/phpduixiang/63.html">构造函数和析构函数</a></li><li><a href="/php/phpduixiang/64.html">访问控制</a></li><li><a href="/php/phpduixiang/65.html">对象继承</a></li><li><a href="/php/phpduixiang/66.html">Static关键字</a></li><li><a href="/php/phpduixiang/67.html">抽象类</a></li><li><a href="/php/phpduixiang/68.html">接口</a></li><li><a href="/php/phpduixiang/69.html">Traits</a></li><li><a href="/php/phpduixiang/70.html">重载</a></li><li><a href="/php/phpduixiang/71.html">对象迭代</a></li><li><a href="/php/phpduixiang/72.html">设计模式</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP异常处理			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yichang/81.html">异常处理</a></li><li><a href="/php/yichang/82.html">扩展PHP内置的异常处理类</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数库按分类			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpku/83.html">数组</a></li><li><a href="/php/phpku/84.html">Classes/Objects</a></li><li><a href="/php/phpku/85.html">Date/Time</a></li><li><a href="/php/phpku/86.html">Directories</a></li><li><a href="/php/phpku/87.html">错误处理</a></li><li><a href="/php/phpku/88.html">Program execution</a></li><li><a href="/php/phpku/89.html">Filesystem</a></li><li><a href="/php/phpku/90.html">Filter</a></li><li><a href="/php/phpku/91.html">Function Handling</a></li><li><a href="/php/phpku/92.html">PHP 选项/信息</a></li><li><a href="/php/phpku/93.html">Mail</a></li><li><a href="/php/phpku/94.html">Math</a></li><li><a href="/php/phpku/95.html">Misc.</a></li><li><a href="/php/phpku/96.html">Network</a></li><li><a href="/php/phpku/97.html">输出控制</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> php基础			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbiji/108377.html"></a></li><li><a href="/php/phpbiji/108376.html"></a></li><li><a href="/php/phpbiji/108380.html"></a></li><li><a href="/php/phpbiji/108379.html"></a></li><li><a href="/php/phpbiji/108378.html"></a></li><li><a href="/php/phpbiji/108381.html"></a></li><li><a href="/php/phpbiji/108382.html"></a></li><li><a href="/php/phpbiji/108384.html"></a></li><li><a href="/php/phpbiji/108383.html"></a></li><li><a href="/php/phpbiji/108385.html"></a></li><li><a href="/php/phpbiji/108386.html"></a></li><li><a href="/php/phpbiji/108388.html"></a></li><li><a href="/php/phpbiji/108387.html"></a></li><li><a href="/php/phpbiji/108389.html"></a></li><li><a href="/php/phpbiji/108391.html"></a></li>		</ul>
	</li>
		<li>
	    <a href="/php/biji/" class="waves-effect">
		    <i class="icon-share"></i>
		    <span>PHP笔记
		       	<span class="float-right menu-arrow">
		       	<i class="mdi mdi-chevron-right"></i>
		       	</span>
		    </span>
	    </a>
	</li>
	</ul>
</div>
<!-- Sidebar -->
<div class="clearfix"></div>
</div>
<!-- Sidebar -left -->
</div>
<!-- Left Sidebar End -->
<!-- Start right Content here -->
<div class="content-page">
	<div class="content">
		<div class="container-fluid">
			<div class="page-title-box">
				<div class="row align-items-center">
					<div class="col-sm-6">
						<h1 class="page-title">java教学笔记之对象的创建与销毁</h1>
					</div>
				</div>
				<!-- end row -->
			</div>
			<!-- end page-title -->
			<!-- START ROW -->
			<div class="panel panel-forbid">
				<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>内容摘要</div>
			    <div class="panel-content">
			    <span>本课程的目标是帮你更有效的使用Java。其中讨论了一些高级主题，包括对象的创建、并发、序列化、反射以及其他高级特性。本课程将为你的精通Java的旅程提供指导。<br />
1. 引言<br />
在T</span>                                     
		    	</div>
			    <div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>文章正文</div>
			    <div class="panel-content">
			    <span><p>本课程的目标是帮你更有效的使用Java。其中讨论了一些高级主题，包括对象的创建、并发、序列化、反射以及其他高级特性。本课程将为你的精通Java的旅程提供指导。</p>
<p><strong>1. 引言</strong></p>
<p>在TIOBE 编程语言排名中，Sun 公司于1995年开发的Java语言是世界上使用最广泛的编程语言之一。作为一种通用编程语言，因为强大的工具包和运行时环境、简单的语法、丰富的平台支持(一次编写，到处运行)以及的异常活跃的社区支持，Java语言对软件开发工程师极具吸引力。</p>
<p>在这一系列的文章中，涵盖了Java相关的高级内容，因此假设读者已具有基本语言知识。这并不是一个完整的参考手册，而是让你的技能更上一层楼的详尽指南。</p>
<p>本课程中包含了大量的代码片段，在有些对方为了做对比，会同时提供Java 7和Java 8的示例。</p>
<p><strong>2. 实例构造</strong></p>
<p>作为一种面向对象语言，对象的创建也许就是Java语言中最重要的概念之一。构造方法是在对象实例初始化过程中具有举足轻重的地位，并且Java提供了多种方式来定义构造方法。</p>
<p>2.1 隐式(产生的)构造方法</p>
<p>Java允许在定义类时不声明任何的构造方法，并这并不代表类没有构造方法。我们看下面类的定义：</p>
<div class="phpstudycode">
<pre class="brush:java;">
package com.javacodegeeks.advanced.construction;

public class NoConstructor {
}

</pre>
</div>
<p>这个类未定义构造方法，但是Java编译器会为其隐式生成一个，从而使我们可以使用new关键字来创建新的对象实例。</p>
<div class="phpstudycode">
<pre class="brush:java;">
final NoConstructor noConstructorInstance = new NoConstructor();
</pre>
</div>
<p><strong>2.2 无参构造方法</strong></p>
<p>无参构造方法是最简单的通过显式声明来替代Java编译生成构造方法的方式。</p>
<div class="phpstudycode">
<pre class="brush:java;">
package com.javacodegeeks.advanced.construction;

public class NoArgConstructor {
  public NoArgConstructor() {
    // Constructor body here
  }
}

</pre>
</div>
<p>在使用new关键字创建新的对象实例时，上面的构造方法就会被调用。</p>
<p><strong>2.3 有参构造方法</strong></p>
<p>有参构造方法最有意思并且广泛使用，通过指定参数来定制新实例的创建。下面的例子中定义了一个有两个参数的构造方法。</p>
<div class="phpstudycode">
<pre class="brush:java;">
package com.javacodegeeks.advanced.construction;

public class ConstructorWithArguments {
  public ConstructorWithArguments(final String arg1,final String arg2) {
    // Constructor body here
  }
}

</pre>
</div>
<p>这种场景中，当使用new关键字来创建实例时，需要同时提供构造方法上定义的两个参数。</p>
<div class="phpstudycode">
<pre class="brush:java;">
final ConstructorWithArguments constructorWithArguments = 
  new ConstructorWithArguments( "arg1", "arg2" );
</pre>
</div>
<p>有趣的是构造方法之间可以通过this关键字互相调用。在实践中，推荐通过使用this把多个构造方法链起来以减少代码重复，并从基础上使对象具有单一的初始化入口。作为示例，下面的代码中定义了只有一个参数的构造方法。</p>
<div class="phpstudycode">
<pre class="brush:java;">
public ConstructorWithArguments(final String arg1) {
  this(arg1, null);
}
</pre>
</div>
<p><strong>2.4 初始化代码块</strong></p>
<p>除了构造方法，Java还提供了通过初始化代码块进行初始化的逻辑。这种用法虽然少见，但多了解一些也没害处。</p>
<div class="phpstudycode">
<pre class="brush:java;">
package com.javacodegeeks.advanced.construction;

public class InitializationBlock {
  {
    // initialization code here
  }
}

</pre>
</div>
<p>另一方面，初始化代码块也可被看作是无参的隐式构造方法。在一个具体的类中可以定义多个初始化代码块，在执行的时候按照他们在代码中的位置顺序被调用，如下面的代码所示：</p>
<div class="phpstudycode">
<pre class="brush:java;">
package com.javacodegeeks.advanced.construction;

public class InitializationBlocks {
  {
    // initialization code here
  }

  {
    // initialization code here
  }

}

</pre>
</div>
<p>实始化代码块并不是为了取代构造方法，相反它们可以同时出现。但是要记住，初始化代码快会在构造方法调用之前被执行。</p>
<div class="phpstudycode">
<pre class="brush:java;">
package com.javacodegeeks.advanced.construction;

public class InitializationBlockAndConstructor {
  {
    // initialization code here
  }
  
  public InitializationBlockAndConstructor() {
  }
}

</pre>
</div>
<p><strong>2.5 保证构造默认值</strong></p>
<p>Java提供了确定的初始化保证，程序员可以直接使用初始化结果。未初始化的实例以及类变量(static)会自动初始化为相应的默认值。</p>
<p>类型&nbsp;默认值<br />
boolean&nbsp;False<br />
byte&nbsp;0<br />
short&nbsp;0<br />
int&nbsp;0<br />
long&nbsp;0L<br />
char&nbsp;\u0000<br />
float&nbsp;0.0f<br />
double&nbsp;0.0d<br />
对象引用&nbsp;null<br />
表 1</p>
<p>我们通过下面的例子来验证上表中的默认值：</p>
<div class="phpstudycode">
<pre class="brush:java;">
package com.javacodegeeks.advanced.construction;

public class InitializationWithDefaults {
  private boolean booleanMember;
  private byte byteMember;
  private short shortMember;
  private int intMember;
  private long longMember;
  private char charMember;
  private float floatMember;
  private double doubleMember;
  private Object referenceMember;

  public InitializationWithDefaults() {   
    System.out.println( "booleanMember = " + booleanMember );
    System.out.println( "byteMember = " + byteMember );
    System.out.println( "shortMember = " + shortMember );
    System.out.println( "intMember = " + intMember );
    System.out.println( "longMember = " + longMember );
    System.out.println( "charMember = " + 
      Character.codePointAt( new char[] { charMember }, 0 ) );
    System.out.println( "floatMember = " + floatMember );
    System.out.println( "doubleMember = " + doubleMember );
    System.out.println( "referenceMember = " + referenceMember );
  }
}

</pre>
</div>
<p>当使用new关键字实例化对象之后：</p>
<p>final InitializationWithDefaults initializationWithDefaults = new InitializationWithDefaults(), <br />
可从控制台中看到输出结果如下：</p>
<div class="phpstudycode">
<pre class="brush:java;">
booleanMember = false
byteMember = 0
shortMember = 0
intMember = 0
longMember = 0
charMember = 0
floatMember = 0.0
doubleMember = 0.0
referenceMember = null
</pre>
</div>
<p><strong>2.6 可见性</strong></p>
<p>构造方法遵从Java的可见性规则，并且可以通过访问控制修饰符决定在其他类中是否能调用该构造方法。</p>
<p>修饰符&nbsp;包可见性&nbsp;子类可见性&nbsp;公开可见性<br />
public&nbsp;可见&nbsp;可见&nbsp;可见<br />
protected&nbsp;可见&nbsp;可见&nbsp;不可见<br />
&lt;无修饰符&gt;&nbsp;可见&nbsp;不可见&nbsp;不可见<br />
private&nbsp;不可见&nbsp;不可见&nbsp;不可见<br />
表2</p>
<p><strong>2.7 垃圾回收</strong></p>
<p>Java(准确的说是JVM)拥有自动的垃圾回收机制。简单来讲，当有新对象创建时，会自动为其分配内在；然后当对象不再被引用后，他们会被自动销毁，相应的内存也会被回收。</p>
<p>Java垃圾回收采用分代回收的机制，并基于"大多数对象生命短暂"的假设(即在对象创建之后很快就不会被再引用，所以可以被安全的销毁)。大多程序员习惯性的认为Java中对象创建的效率很低所以要尽可能避免新对象的创建。事实上，这种认识是不对的。在Java中创建对象的开销是相当低的，并且速度很快。真正代来巨大开销的是不必要的长期存活的对象，因此他们最终会被迁移到老年代，并导致stop-the-world发生。</p>
<p><strong>2.8 对象终结器(Finalizers)</strong></p>
<p>前面我们讲述的都是构造方法和对象初始化相关的主题，但还未提及他们的反面：对象销毁。主要是因为Java使用垃圾回收机制来管理对象的生命周期，所以销毁不必要的对象并释放所需内存就成了垃圾回收的职责了。</p>
<p>不过，Java还是提供了另外一种类似于析构函数的终结器(finalizer)的特性，担任多种资源清理的责任。Finalizer一般被看作是危险的事情（因为它会带来多种副作用和性能问题）。通常并不需要finalizer因此要尽量避免使用它(除了极少见的包含大量本地对象(native objects)的场景)。Java 7中引入的try-with-resources语法和AutoCloseable接口可当作finalizer的替代选择，并可写出如下简洁的代码：</p>
<div class="phpstudycode">
<pre class="brush:java;">
try ( final InputStream in = Files.newInputStream( path ) ) {
  // code here
}
</pre>
</div>
<p><strong>3. 静态初始化</strong></p>
<p>上面我们学习了类实例的构造与初始化，除此之外，Java还支持类级别的初始化构造，称作静态初始化。静态初始化与上面介绍的初始化代码块类似，只是多了额外的static关键字修饰。需要注意的是静态初始化只会在类加载时执行一次。示例如下：</p>
<p>与初始化代码块类似，可以在类中定义多个静态初始化块，它们在类中的位置决定在初始化时执行的顺序。示例如下;</p>
<div class="phpstudycode">
<pre class="brush:java;">
package com.javacodegeeks.advanced.construction;

public class StaticInitializationBlocks {
  static {
    // static initialization code here
  }

  static {
    // static initialization code here
  }
}

</pre>
</div>
<p>因为静态初始化块可以被多个并行执行的线程触发(当类被初始加载时)，JVM运行时保证初始化的代码以线程安全的方式只被执行一次。</p>
<p><strong>4. 构造器模式</strong></p>
<p>这些年多种容易理解的构造器(创建者)模式被引入到Java社区。下面我们会学习其中比较流行的几个：单例模式、辅助类模式、工厂模式以及依赖注入(也称为控制反转)。</p>
<p><strong>4.1 单例模式</strong></p>
<p>单例是一种历史悠久却在软件开发社区中饱受争议的模式。单例模式的核心理念是保证在任何时候给定的类只有一个对象被创建。虽然听起来很简单，但人们对如何以正确且线程安全的方式创建对象进行了大量的讨论。下面的代码中展示了简单版本的单例模式实现：</p>
<div class="phpstudycode">
<pre class="brush:java;">
package com.javacodegeeks.advanced.construction.patterns;

public class NaiveSingleton {
  private static NaiveSingleton instance;
  
  private NaiveSingleton() {    
  }
  
  public static NaiveSingleton getInstance() {
    if( instance == null ) {
      instance = new NaiveSingleton();
    }
    
    return instance;
  }
}

</pre>
</div>
<p>上面的代码至少有一个问题：在多线程并发场景中可能会创建出多个对象。一种合理的实现方式(但不能延迟加载)是使用类的static`final`属性。如下：</p>
<div class="phpstudycode">
<pre class="brush:java;">
final property of the class.
package com.javacodegeeks.advanced.construction.patterns;

public class EagerSingleton {
  private static final EagerSingleton instance = new EagerSingleton();
  
  private EagerSingleton() {    
  }
  
  public static EagerSingleton getInstance() {
    return instance;
  }
}

</pre>
</div>
<p>如果你不想浪费宝贵的资源，希望单例对象只在真正需要的时候才被创建，那么就要使用显式的同步方式，不可这种方法可能会降低多线程环境下的并发性(更多关于Java并发的细节将会在Java进阶9-并发最佳实践中详细介绍)。</p>
<div class="phpstudycode">
<pre class="brush:java;">
package com.javacodegeeks.advanced.construction.patterns;

public class LazySingleton {
  private static LazySingleton instance;
  
  private LazySingleton() {    
  }
  
  public static synchronized LazySingleton getInstance() {
    if( instance == null ) {
      instance = new LazySingleton();
    }
    
    return instance;
  }
}

</pre>
</div>
<p>现在，在很多场景下单例模式不再被认为是一种好的选择，因为他们会使代码不易于测试。另外依赖注入模式的产生也使单例模式变得不再必要。</p>
<p><strong>4.2 工具类/辅助类</strong></p>
<p>工具类/辅助类模式在Java开发者当中相当流行。它的核心理念就是使用不可实例化的类(通过声明private构造方法)、可选的final(更多关于声明final类的细节将会在Java进阶3-类和接口的设计中详细介绍)关键字以及静态方法。示例如下：</p>
<div class="phpstudycode">
<pre class="brush:java;">
package com.javacodegeeks.advanced.construction.patterns;

public final class HelperClass {
  private HelperClass() {    
  }
  
  public static void helperMethod1() {
    // Method body here
  }
  
  public static void helperMethod2() {
    // Method body here
  }
}

</pre>
</div>
<p>很多经验丰富的开发者认为这种模式会让工具类成为各种不相关方法的容器。因为有些方法没有合适的放置位置却需要被其他类使用，就会被误放入工具类中。在大多数场景中也应该避免这种设计：总会有更好的功能复用的方式，保持代码清晰简洁。</p>
<p><strong>4.3 工厂模式</strong></p>
<p>工厂模式被证明是开发者的极其强大的利器，在Java中有多种实现方式：工厂方法和抽象工厂。最简单的例子就是使用static方法返回特定类的实例(工厂方法)，如下：</p>
<div class="phpstudycode">
<pre class="brush:java;">
package com.javacodegeeks.advanced.construction.patterns;

public class Book {
  private Book( final String title) {
  }   

  public static Book newBook( final String title ) { 
    return new Book( title );
  }
}

</pre>
</div>
<p>虽然使用这种方法能提高代码的可读性，但经常争议的一点是难以给newBook工厂方法赋予更丰富的场景。另外一种实现工厂模式的方法是采用接口或抽象类(抽象工厂)。如下，我们定义一个工厂接口：</p>
<div class="phpstudycode">
<pre class="brush:java;">
public interface BookFactory {
  Book newBook();
}
</pre>
</div>
<p>根据图片馆的不同，我们可以有多种不同的newBook实现：</p>
<div class="phpstudycode">
<pre class="brush:java;">
public class Library implements BookFactory {
  @Override
  public Book newBook() {
    return new PaperBook();
  }
}

public class KindleLibrary implements BookFactory {
  @Override
  public Book newBook() {
    return new KindleBook();
  }
}

</pre>
</div>
<p>现在，BookFactory的不同实现屏蔽掉了具体Book的不同，却提供了通用的newBook的方法。</p>
<p><strong>4.4 依赖注入</strong></p>
<p>依赖注入(也称为控制反转)被类设计者认为是一种良好的设计实践：如果一些类实例依赖其他类的实例，那些被依赖的实例应该通过构造方法(或者setter方法、策略等方式)提供(注入)，而不应该是由实例自己去创建。先看一下下面的代码：</p>
<div class="phpstudycode">
<pre class="brush:java;">
package com.javacodegeeks.advanced.construction.patterns;

import java.text.DateFormat;
import java.util.Date;

public class Dependant {
  private final DateFormat format = DateFormat.getDateInstance();
  
  public String format( final Date date ) {
    return format.format( date );
  }
}

</pre>
</div>
<p>Dependant类需要一个DateFormat类的实例并通过在实例化对象时通过DateFormat.getDateInstance()的方式获得。更好的方式应该通过构造方法的参数来完成同样的事情：</p>
<div class="phpstudycode">
<pre class="brush:java;">
package com.javacodegeeks.advanced.construction.patterns;

import java.text.DateFormat;
import java.util.Date;

public class Dependant {
  private final DateFormat format;
  
  public Dependant( final DateFormat format ) {
    this.format = format;
  }
  
  public String format( final Date date ) {
    return format.format( date );
  }
}

</pre>
</div>
<p>在上面的例子中，类实例的所有依赖都由外部提供，这样就很容易调整DateFormat，并易于编写测试代码。</p>
<hr></span>                                     
		    	</div>
		    	<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>代码注释</div>
			    <div class="panel-content">
			    <span></span>                                     
		    	</div>

			</div>

			<!-- END ROW -->
			<div class="newsPage">
				<div class="newsPageTurn">
				    <span><a>上一篇</a><a href='/php/biji/97526.html'>Win10登陆界面怎么设置字体阴影效果?</a><a>下一篇</a><a href='/php/biji/97528.html'>Win10怎么看IP地址？Win10系统电脑查看本机IP地址方法图解</a></span>
				</div>
			</div>
		</div>


<div id="author-box">
    <h3>作者：喵哥笔记</h3>
        <div class="author-info">
            <div class="author-avatar">
                <img src="/skin1/picture/01.jpg" alt="IDC笔记" class="avatar" width="64" height="64">
            </div>
        <div class="author-description">
            <p>学的不仅是技术，更是梦想！</p>
            <ul class="author-social follows nb">
            	<li>
                    <a target="_blank" href="/" title="IDC笔记">IDC笔记</a>
                </li>
            </ul>
        </div>
        <div class="clear"></div>
    </div>
</div>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
<!-- container-fluid -->
	</div>
<!-- content -->
	<footer class="footer">
	© 2020 IDC笔记 <i class="mdi mdi-heart text-danger"></i>. | 备案号：<a href="https://beian.miit.gov.cn/">辽ICP备18000516号</a>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?674585fbbd2294d3faf910f668ea91b4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

	</footer>
</div>

</div>
<!-- END wrapper -->
<!-- jQuery  -->
<script src="/skin1/js/jquery.min.js"></script>
<script src="/skin1/js/bootstrap.bundle.min.js"></script>
<script src="/skin1/js/metismenu.min.js"></script>
<script src="/skin1/js/jquery.slimscroll.js"></script>
<script src="/skin1/js/waves.min.js"></script>
<!--Morris Chart-->
<script src="/skin1/js/morris.min.js"></script>
<script src="/skin1/js/raphael.min.js"></script>
<script src="/skin1/js/dashboard.init.js"></script>
<script src="/skin1/js/app.js"></script>
<script src="/foot.js"></script>
</body>
</html>