<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title>Java开发者结合Node.js编程入门教程_PHP教程_IDC笔记</title>
    <meta name="keywords" content="PHP,PHP笔记,PHP教程" />
    <meta name="description" content="首先， 我必须得承认，作为一个有着十多年开发经验的java开发者，我已经形成了解决绝大部分问题的固有套路，尽管它们很多时候显得笨重和繁琐。 比如说如果要读取一个文件，那应该就是" />
    <meta content="Responsive admin theme build on top of Bootstrap 4" name="description" />
    <meta content="idcnote.com" name="author" />
    <link rel="shortcut icon" href="/skin1/images/favicon.ico">
    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="/skin1/css/morris.css">
    <link href="/skin1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/metismenu.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/icons.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/style.css" rel="stylesheet" type="text/css">
<link href="/SyntaxHighlighter/shCoreDefault.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/SyntaxHighlighter/shCore.js"></script>
<script type="text/javascript">
 SyntaxHighlighter.all();
</script>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
</head>
<body>
<!-- Begin page -->
		<div id="wrapper">
			<!-- Top Bar Start -->
			<div class="topbar">
				<!-- LOGO -->
				<div class="topbar-left">
					<a href="/" class="logo">
						<span class="logo-light">
                            <i class="mdi mdi-camera-control"></i>IDC笔记
                        </span>
						<span class="logo-sm">
                            <i class="mdi mdi-camera-control"></i>
                        </span>
					</a>
				</div>
				<nav class="navbar-custom">
					<ul class="navbar-right list-inline float-right mb-0">
						<!--<li class="dropdown notification-list list-inline-item d-none d-md-inline-block">
							<a class="nav-link waves-effect" href="#" id="btn-fullscreen">
								<i class="mdi mdi-arrow-expand-all noti-icon"></i>
							</a>
						</li>
						<li class="dropdown notification-list list-inline-item">
							<div class="dropdown notification-list nav-pro-img">
								<a class="dropdown-toggle nav-link arrow-none nav-user" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
									<img src="/skin1/picture/user-4.jpg" alt="user" class="rounded-circle">
								</a>
								<div class="dropdown-menu dropdown-menu-right profile-dropdown ">
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-account-circle"></i> Profile</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-wallet"></i> Wallet</a>
									<a class="dropdown-item d-block" href="#">
										<span class="badge badge-success float-right">11</span>
										<i class="mdi mdi-settings"></i> Settings</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-lock-open-outline"></i> Lock screen</a>
									<div class="dropdown-divider"></div>
									<a class="dropdown-item text-danger" href="#">
										<i class="mdi mdi-power text-danger"></i> Logout</a>
								</div>
							</div>
						</li>
						-->
					</ul>
					<ul class="list-inline menu-left mb-0">
						<li class="float-left">
							<button class="button-menu-mobile open-left waves-effect">
                            <i class="mdi mdi-menu"></i>
                        </button>
						</li>
						<li class="d-none d-md-inline-block">
							<form role="search" class="app-search">
								<div class="form-group mb-0">
									<input type="text" class="form-control" placeholder="Search..">
									<button type="submit"><i class="fa fa-search"></i></button>
								</div>
							</form>
						</li>
					</ul>
				</nav>
			</div>
<!-- ========== Left Sidebar Start ========== -->
<div class="left side-menu">
    <div class="slimscroll-menu" id="remove-scroll">
    <!--- Sidemenu -->
    <div id="sidebar-menu">
    <!-- Left Menu Start -->
    <ul class="metismenu" id="side-menu">
			<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP简介			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jianjie/1.html">PHP简介</a></li><li><a href="/php/jianjie/2.html">PHP用途</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP基本语法			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yufa/3.html">分离HTML</a></li><li><a href="/php/yufa/4.html">指令分隔符</a></li><li><a href="/php/yufa/5.html">PHP注释</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类型			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpleixing/6.html">PHP类型简介</a></li><li><a href="/php/phpleixing/7.html">PHP类型之布尔类型</a></li><li><a href="/php/phpleixing/8.html">PHP类型之整型</a></li><li><a href="/php/phpleixing/9.html">PHP类型之浮点型</a></li><li><a href="/php/phpleixing/10.html">PHP类型之字符串</a></li><li><a href="/php/phpleixing/11.html">PHP类型之数组</a></li><li><a href="/php/phpleixing/12.html">PHP类型之对象</a></li><li><a href="/php/phpleixing/13.html">PHP类型之资源类型</a></li><li><a href="/php/phpleixing/14.html">PHP类型之NULL</a></li><li><a href="/php/phpleixing/15.html">PHP类型之伪类型</a></li><li><a href="/php/phpleixing/16.html">PHP类型之类型判别</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP变量			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbianliang/17.html">PHP变量之基础</a></li><li><a href="/php/phpbianliang/18.html">PHP变量之预定义变量</a></li><li><a href="/php/phpbianliang/19.html">PHP变量之变量范围</a></li><li><a href="/php/phpbianliang/20.html">PHP变量之可变变量</a></li><li><a href="/php/phpbianliang/21.html">PHP变量之外部变量</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP运算符			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yunsuanfu/22.html">PHP运算符优先级</a></li><li><a href="/php/yunsuanfu/23.html">算术运算符</a></li><li><a href="/php/yunsuanfu/24.html">赋值运算符</a></li><li><a href="/php/yunsuanfu/25.html">位运算符</a></li><li><a href="/php/yunsuanfu/26.html">比较运算符</a></li><li><a href="/php/yunsuanfu/27.html">错误控制运算符</a></li><li><a href="/php/yunsuanfu/28.html">执行运算符</a></li><li><a href="/php/yunsuanfu/29.html">递增/递减运算符</a></li><li><a href="/php/yunsuanfu/30.html">逻辑运算符</a></li><li><a href="/php/yunsuanfu/31.html">字符串运算符</a></li><li><a href="/php/yunsuanfu/32.html">数组运算符</a></li><li><a href="/php/yunsuanfu/33.html">类型运算符</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP控制结构			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jiegou/34.html">PHP控制结构之if</a></li><li><a href="/php/jiegou/35.html">PHP控制结构之else</a></li><li><a href="/php/jiegou/36.html">PHP控制结构之elseif/else if</a></li><li><a href="/php/jiegou/37.html">PHP控制结构之替代语法</a></li><li><a href="/php/jiegou/38.html">PHP控制结构之while</a></li><li><a href="/php/jiegou/39.html">PHP控制结构之do-while</a></li><li><a href="/php/jiegou/40.html">PHP控制结构之for</a></li><li><a href="/php/jiegou/41.html">PHP控制结构之foreach</a></li><li><a href="/php/jiegou/42.html">PHP控制结构之break</a></li><li><a href="/php/jiegou/43.html">PHP控制结构之continue</a></li><li><a href="/php/jiegou/44.html">PHP控制结构之switch</a></li><li><a href="/php/jiegou/45.html">PHP控制结构之declare</a></li><li><a href="/php/jiegou/46.html">PHP控制结构之return</a></li><li><a href="/php/jiegou/47.html">PHP控制结构之require</a></li><li><a href="/php/jiegou/48.html">PHP控制结构之include</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/hanshu/52.html">用户自定义函数</a></li><li><a href="/php/hanshu/53.html">函数的参数</a></li><li><a href="/php/hanshu/54.html">返回值</a></li><li><a href="/php/hanshu/55.html">可变函数</a></li><li><a href="/php/hanshu/56.html">内部（内置）函数</a></li><li><a href="/php/hanshu/57.html">匿名函数</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类与对象			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpduixiang/58.html">类与对象前言</a></li><li><a href="/php/phpduixiang/59.html">基本概念</a></li><li><a href="/php/phpduixiang/60.html">属性</a></li><li><a href="/php/phpduixiang/61.html">类常量</a></li><li><a href="/php/phpduixiang/62.html">自动加载对象</a></li><li><a href="/php/phpduixiang/63.html">构造函数和析构函数</a></li><li><a href="/php/phpduixiang/64.html">访问控制</a></li><li><a href="/php/phpduixiang/65.html">对象继承</a></li><li><a href="/php/phpduixiang/66.html">Static关键字</a></li><li><a href="/php/phpduixiang/67.html">抽象类</a></li><li><a href="/php/phpduixiang/68.html">接口</a></li><li><a href="/php/phpduixiang/69.html">Traits</a></li><li><a href="/php/phpduixiang/70.html">重载</a></li><li><a href="/php/phpduixiang/71.html">对象迭代</a></li><li><a href="/php/phpduixiang/72.html">设计模式</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP异常处理			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yichang/81.html">异常处理</a></li><li><a href="/php/yichang/82.html">扩展PHP内置的异常处理类</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数库按分类			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpku/83.html">数组</a></li><li><a href="/php/phpku/84.html">Classes/Objects</a></li><li><a href="/php/phpku/85.html">Date/Time</a></li><li><a href="/php/phpku/86.html">Directories</a></li><li><a href="/php/phpku/87.html">错误处理</a></li><li><a href="/php/phpku/88.html">Program execution</a></li><li><a href="/php/phpku/89.html">Filesystem</a></li><li><a href="/php/phpku/90.html">Filter</a></li><li><a href="/php/phpku/91.html">Function Handling</a></li><li><a href="/php/phpku/92.html">PHP 选项/信息</a></li><li><a href="/php/phpku/93.html">Mail</a></li><li><a href="/php/phpku/94.html">Math</a></li><li><a href="/php/phpku/95.html">Misc.</a></li><li><a href="/php/phpku/96.html">Network</a></li><li><a href="/php/phpku/97.html">输出控制</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> php基础			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbiji/108377.html"></a></li><li><a href="/php/phpbiji/108376.html"></a></li><li><a href="/php/phpbiji/108380.html"></a></li><li><a href="/php/phpbiji/108379.html"></a></li><li><a href="/php/phpbiji/108378.html"></a></li><li><a href="/php/phpbiji/108381.html"></a></li><li><a href="/php/phpbiji/108382.html"></a></li><li><a href="/php/phpbiji/108384.html"></a></li><li><a href="/php/phpbiji/108383.html"></a></li><li><a href="/php/phpbiji/108385.html"></a></li><li><a href="/php/phpbiji/108386.html"></a></li><li><a href="/php/phpbiji/108388.html"></a></li><li><a href="/php/phpbiji/108387.html"></a></li><li><a href="/php/phpbiji/108389.html"></a></li><li><a href="/php/phpbiji/108391.html"></a></li>		</ul>
	</li>
		<li>
	    <a href="/php/biji/" class="waves-effect">
		    <i class="icon-share"></i>
		    <span>PHP笔记
		       	<span class="float-right menu-arrow">
		       	<i class="mdi mdi-chevron-right"></i>
		       	</span>
		    </span>
	    </a>
	</li>
	</ul>
</div>
<!-- Sidebar -->
<div class="clearfix"></div>
</div>
<!-- Sidebar -left -->
</div>
<!-- Left Sidebar End -->
<!-- Start right Content here -->
<div class="content-page">
	<div class="content">
		<div class="container-fluid">
			<div class="page-title-box">
				<div class="row align-items-center">
					<div class="col-sm-6">
						<h1 class="page-title">Java开发者结合Node.js编程入门教程</h1>
					</div>
				</div>
				<!-- end row -->
			</div>
			<!-- end page-title -->
			<!-- START ROW -->
			<div class="panel panel-forbid">
				<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>内容摘要</div>
			    <div class="panel-content">
			    <span>首先， 我必须得承认，作为一个有着十多年开发经验的java开发者，我已经形成了解决绝大部分问题的固有套路，尽管它们很多时候显得笨重和繁琐。 比如说如果要读取一个文件，那应该就是</span>                                     
		    	</div>
			    <div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>文章正文</div>
			    <div class="panel-content">
			    <span><p>首先， 我必须得承认，作为一个有着十多年开发经验的java开发者，我已经形成了解决绝大部分问题的固有套路，尽管它们很多时候显得笨重和繁琐。 比如说如果要读取一个文件，那应该就是初始化一个BufferedReader 实例并传入一个FileReader，这几乎是顺理成章的，我在很多自认为算得上“企业级”的项目中编写这样的代码并且很享受这个过程，可以说我就是一个对其他语言不屑一顾的java脑残粉。&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
<p>　　如果你正在阅读这篇博文，你可能已经陷入了我多年前早就陷入的一个误区，作为一名合格的开发人员应该不断地学习新的技术并且根据实际工作需求选用适 当的技术。尽管我一直在变老并且有朝一日可能会厌烦了java。但是我现在真的发现了一个激动人心的新东西，node.js对于我就像一个儿童得到一个新 奇的玩具，在这篇博文中，我将先向您展示如何使用Java EE创建一个简单的Rest服务来读取 MongoDB数据库。然后我会用node.js来实现相同的功能，你会更容易了解到这种新的开发语言的激动人心之处。</p>
<p><strong>从基础开始——什么是Node.js&#63;</strong></p>
<p>　　首先，我要说明一点，Node.js不是那种“新潮时尚”，只有“潮人”才使用的语言。虽然它是本着这种认知开始，但是我很高兴的报告给大 家，Node.js是一种成熟的语言——并且在当下这个互联网时代，它已经找到了其自己的方式进入大型企业，支撑起一些最高流量的网站。Node.js是 你技能储备当中的一个非常实用的工具，在构建稳定、安全和高性能的代码上，其便捷度会令你大吃一惊。</p>
<p>　　言而总之，Node是一种针对服务器端活动的语言。它使用了Javascript语言，并且有非常多的库可用，比如npm模型。你可以把那些npm 模型比作Java中的.jar包。当你需要一部分功能，并且不喜欢自己全部编写这部分代码，极有可能在npm模型中已经提供了你正在寻找的特性。</p>
<p>　　Node应用程序通常执行时需要实现效率最大化利用非阻塞 I/O 和异步事件。对于Java开发者来讲需要知道的一点是Node应用运行单线程中。然而，后端节点代码使用多个线程进行操作，如网络和文件访问。鉴于此，Node对于那些需要实时经验的应用是完美的选择。</p>
<p><strong>继续——IDE支持</strong></p>
<p>　　你可能会像我一样，在IDE中“生存”和“呼吸”，这可能源于Java实在是太罗嗦了，需要我们在软件开发过程中编写恒定的代码来完成功能。一旦我们找到 了代码完成的好处，我们慢慢学会了使用 IDE 进行文件管理、 调试和其他非常有用的功能。可以这样说，我喜欢使用一款IDE并且在使用Nodeb工作时继续使用它。下面是当前最为第一批支持Node的IDE：</p>
<p>1.Eclipse——这应该很容易上手当你在Java中已经使用它。仅需要安装Node.js插件即可。<br />
2.JetBrains IntelliJ IDEA——一款非常流行的商业化的IDE。目前为止，这是我最喜欢的IDE。<br />
3.Microsoft Visual Studio——是的，你没看错。Node已经成长到微软在Visual Studio添加了对其的原生支持。这个实现非常稳定，并且VS是我第二喜欢的IDE。说来也怪，我使用VS仅仅用作一些基础的Node项目。<br />
4.CodeEnvy——一款基于web的IDE<br />
5.Cloud9——一款基于web的IDE<br />
6.SublimeText 2——没有多余装饰的文本编辑器，由于其轻量级，在开发者中的知名度越来越高。</p>
<p>这是我工作在Node基础项目上的最喜欢的几款IDE。仅仅做个举例。</p>
<p><strong>从一个范例开始</strong></p>
<p>　　在这篇博文的剩下部分里，我们将要用Java EE和Node.js结合起来创建一个简单的REST服务。这个REST服务将会简单的从MongoDB数据库里面读取信息并且返回这些结果给请求者。而 关于Java应用服务器和MongoDB数据库的安装和配置则不在本文的讨论范围之中。</p>
<p>创建我们的Java应用</p>
<p><strong>　　第一步：配置pom.xml文件</strong></p>
<p>　　我们把这个范例叫做restexample ,我将会使用JBoss EAP应用服务器。第一件我们要做的事情就是为使用Maven构建系统的依赖管理来配置我们的pom.xml文件。下面就是包含了我们这个restexample 应用里面所需要的依赖的pom.xml文件：</p>
<p></p>
<pre class="brush:js;">
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;groupId&gt;restexample&lt;/groupId&gt;
    &lt;artifactId&gt;restexample&lt;/artifactId&gt;
    &lt;packaging&gt;war&lt;/packaging&gt;
    &lt;version&gt;1.0&lt;/version&gt;
    &lt;name&gt;restexample&lt;/name&gt;
    &lt;repositories&gt;
      &lt;repository&gt;
        &lt;id&gt;eap&lt;/id&gt;
        &lt;url&gt;http://maven.repository.redhat.com/techpreview/all&lt;/url&gt;
        &lt;releases&gt;
          &lt;enabled&gt;true&lt;/enabled&gt;
        &lt;/releases&gt;
        &lt;snapshots&gt;
          &lt;enabled&gt;true&lt;/enabled&gt;
        &lt;/snapshots&gt;
      &lt;/repository&gt;
    &lt;/repositories&gt;
    &lt;pluginRepositories&gt;
      &lt;pluginRepository&gt;
        &lt;id&gt;eap&lt;/id&gt;
        &lt;url&gt;http://maven.repository.redhat.com/techpreview/all&lt;/url&gt;
        &lt;releases&gt;
          &lt;enabled&gt;true&lt;/enabled&gt;
        &lt;/releases&gt;
        &lt;snapshots&gt;
          &lt;enabled&gt;true&lt;/enabled&gt;
        &lt;/snapshots&gt;
      &lt;/pluginRepository&gt;
    &lt;/pluginRepositories&gt;
    &lt;properties&gt;
      &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
      &lt;maven.compiler.source&gt;1.6&lt;/maven.compiler.source&gt;
      &lt;maven.compiler.target&gt;1.6&lt;/maven.compiler.target&gt;
    &lt;/properties&gt;
    &lt;dependencies&gt;
      &lt;dependency&gt;
        &lt;groupId&gt;org.jboss.spec&lt;/groupId&gt;
        &lt;artifactId&gt;jboss-javaee-6.0&lt;/artifactId&gt;
        &lt;version&gt;3.0.2.Final-redhat-4&lt;/version&gt;
        &lt;type&gt;pom&lt;/type&gt;
        &lt;scope&gt;provided&lt;/scope&gt;
      &lt;/dependency&gt;
      &lt;dependency&gt;
        &lt;groupId&gt;org.mongodb&lt;/groupId&gt;
        &lt;artifactId&gt;mongo-java-driver&lt;/artifactId&gt;
        &lt;version&gt;2.9.1&lt;/version&gt;
      &lt;/dependency&gt;
      &lt;/dependencies&gt;
    &lt;/project&gt;
</pre>
<p></p>
<p>　酷，相当的详细，但是我希望你们能够理解里面的代码，在这篇博文中我假设读者都已经了解Java，因此我不准备解释里面的细节了。</p>
<p><strong>第二步：创建beans.xml文件并且设置我们的servlet映射</strong></p>
<p>　　作为范例的一部分，我们将会对我们的数据库访问类使用CDI(上下文依赖注入)。根据官方的CDI配置说明，一个应用要使用CDI的话就要在该应用的 WEB-INF 目录里面包含一个beans.xml文件。因此我们就来创建这个文件并且按照我们所需的信息来配置它。进入到你的 /src/main/webapp/WEB-INF 目录然后创建一个 beans.xml文件，加入下面的代码：<br />
</p>
<div class="phpstudycode">
<pre class="brush:js;">
&lt;&#63;xml version="1.0"&#63;&gt;
&lt;beans xmlns="http://java.sun.com/xml/ns/javaee"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
 xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
 http://jboss.org/schema/cdi/beans_1_0.xsd"/&gt;
</pre>
</div>
<p>　　我们也需要在 web.xml 文件里面为我们的RESI API设置servlet映射。在 /src/main/webapp/WEB-INF 目录的文件里面加入下面的servlet映射元素：</p>
<div class="phpstudycode">
<pre class="brush:js;">
&lt;servlet-mapping&gt;
  &lt;servlet-name&gt;javax.ws.rs.core.Application&lt;/servlet-name&gt;
  &lt;url-pattern&gt;/ws/*&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
</pre>
</div>
<p><strong>第三步：创建DBConnection类</strong></p>
<p>　　到这一步，我们已经建立好项目并且我们的pom.xml文件已经包含了MongoDB数据库的驱动依赖，记得要确保所需要的驱动已经被打包好在我们的应用里面。下一件事我们就要创建一个类用来管理数据库的连接。创建一个新的文件命名为 DBConneection.java，把这个文件放置到 /src/main/java/com/strongloop/data 目录里面，然后再这个文件里面加入下面的代码：</p>
<p>　　注意：要确保你安装MongoDB数据库配置好适当的连接授权细节信息!<br />
</p>
<div class="phpstudycode">
<pre class="brush:js;">
package com.strongloop.data;
 
import java.net.UnknownHostException;
 
import javax.annotation.PostConstruct;
import javax.enterprise.context.ApplicationScoped;
import javax.inject.Named;
 
import com.mongodb.DB;
import com.mongodb.Mongo;
 
@Named
@ApplicationScoped
public class DBConnection {
 
  private DB mongoDB;
 
  public DBConnection() {
    super();
  }
 
  @PostConstruct
  public void afterCreate() {
    String mongoHost = "127.0.0.1"
    String mongoPort = "27001"
    String mongoUser = "strongloop;
    String mongoPassword = "rocks";
    String mongoDBName = "restexample";
    int port = Integer.decode(mongoPort);
 
    Mongo mongo = null;
    try {
      mongo = new Mongo(mongoHost, port);
    } catch (UnknownHostException e) {
      System.out.println("Couldn't connect to MongoDB: " + e.getMessage()
          + " :: " + e.getClass());
    }
 
    mongoDB = mongo.getDB(mongoDBName);
 
    if (mongoDB.authenticate(mongoUser, mongoPassword.toCharArray()) == false) {
      System.out.println("Failed to authenticate DB ");
    }
 
  }
 
  public DB getDB() {
    return mongoDB;
  }
 
}</pre>
</div>
<p><strong>第四步：把数据导入到MongoDB中（mmmm啤酒）</strong></p>
<p>在我们的项目中，我们想要加载所有名称为Pabst的啤酒列表。如果你不熟悉啤酒行业，你可以试下Pabst Brewing公司生产的美式淡啤。这些啤酒上面带有蓝绶带和柯尔特{敏感词}图案，他们包含所有的麦芽糖饮料种类。</p>
<p></p>
<p></p>
<p>首先你需要下载一个json文件，里面包含需要返回的所有数据。你可以用下面的URL来实现这点：<br />
https://dl.dropboxusercontent.com/u/72466829/beers.json</p>
<p></p>
<p>下载结束后，使用mongoimport命令把它导入到数据库中，命令如下：</p>
<div class="phpstudycode">
<pre class="brush:bash;">
$ mongoimport --jsonArray -d yourDBName -c beers --type json --file /tmp/beers.json -h yourMongoHost --port yourMongoPort -u yourMongoUsername -p yourMongoPassword
</pre>
</div>
<p>你可以看到如下结果：</p>
<div class="phpstudycode">
<pre class="brush:java;">
connected to: 127.0.0.1:27017
Tue Jun 10 20:09:55.436 check 9 24
Tue Jun 10 20:09:55.437 imported 24 objects</pre>
</div>
<p><strong>第5步: 创建Beer模型对象</strong></p>
<p>　　我们已经创建了一个数据库连接类并且已经把啤酒信息载入到MongoDB数据库里了，是时候创建一个模型对象来控制我们的啤酒信息了。创建一个新文件，名为Beer.java并把它放到/src/main/java/com/strongloop/data目录下。创建好该文件后，在其中添加如下代码:</p>
<div class="phpstudycode">
<pre class="brush:java;">
package com.strongloop.data;
 
public class Beer {
  private String id;
  private String name;
  private String description;
 
  public String getId() {
    return id;
  }
  public void setId(String id) {
    this.id = id;
  }
  public String getName() {
    return name;
  }
  public void setName(String name) {
    this.name = name;
  }
  public String getDescription() {
    return description;
  }
  public void setDescription(String description) {
    this.description = description;
  }
}</pre>
</div>
<p></p>
<p>　注意: 提供好的JSON文件中包含了更多我们将会使用到的信息，所以可以找出来看看，并向其中添加一些额外的功能来拓宽你的学习经验。</p>
<p><strong>第6步: 创建REST服务</strong></p>
<p>　　猜猜看该干什么了？不错，我们终于准备好要创建基于REST的web服务了，它使我们可以获取到上一个步骤当中载入进来的啤酒信息。为此，我们需要创建一个新的名为BeerWS.java的文件，并把它放到/src/main/java/com/strongloop/webservice目录下。创建好之后，添加下列代码:</p>
<div class="phpstudycode">
<pre class="brush:java;">
package com.strongloop.webservice;
 
import java.util.ArrayList;
import java.util.List;
import javax.enterprise.context.RequestScoped;
import javax.inject.Inject;
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.QueryParam;
import com.strongloop.data.DBConnection;
import com.strongloop.data.Beer;
import com.mongodb.BasicDBObject;
import com.mongodb.DB;
import com.mongodb.DBCollection;
import com.mongodb.DBCursor;
import com.mongodb.DBObject;
 
@RequestScoped
@Path("/beers")
public class BeerWS {
 
  @Inject
  private DBConnection dbConnection;
 
  private DBCollection getBeerCollection() {
    DB db = dbConnection.getDB();
    DBCollection beerCollection = db.getCollection("beers");
    return beerCollection;
  }
 
  private Beer populateBeerInformation(DBObject dataValue) {
    Beer theBeer = new Beer();
    theBeer.setName(dataValue.get("name"));
    theBeer.setDescription(dataValue.get("name"));
    theBeer.setId(dataValue.get("_id").toString());
 
    return theBeer;
  }
 
  // 获取所有啤酒
  @GET()
  @Produces("application/json")
  public List&lt;Beer&gt; getAllBeers() {
    ArrayList&lt;Beer&gt; allBeersList = new ArrayList&lt;Beer&gt;();
 
    DBCollection beers = this.getBeerCollection();
    DBCursor cursor = beers.find();
    try {
      while (cursor.hasNext()) {
        allBeersList.add(this.populateBeerInformation(cursor.next()));
      }
    } finally {
      cursor.close();
    }
 
    return allBeersList;
  }
}</pre>
</div>
<p><strong>第7步: 浏览着啤酒信息傻乐</strong></p>
<p>　　喔，搞定。我们已经写好了一个REST服务，可以从数据库中获取所有的啤酒信息。现在把你的代码部署到你的应用服务器吧， 在浏览器中打开下列地址看看它是否工作正常:<br />
http://yourserverlocation/ws/beers</p>
<p>　　如果所有东西都正常，你将会看到所有的啤酒信息列表，如下图所示:</p>
<p></p>
<p></p>
<p><strong>创建 Node 应用</strong></p>
<p>　　如果你按照上面的步骤使用java进行编程，你会意识到使用javaEE创建应用尽管进展很快，但是创建一个类似REST服务的简单应用还是很麻烦。不要误解，我仍然很喜欢用javaEE，但是发现对于很多场景，比如创建返回json数据的REST服务，Node更适用。接下来，我们将要使用StrongLoop的LoopBack API创建一个简单的web服务。另外，我会向你展示如何在苹果OSX系统上安装Node。</p>
<p><strong>步骤1：安装 Node</strong></p>
<p>　　最简单的安装Node的方式是通过一个兼容大部分操作系统的二进制包。打开浏览器访问下面的网页，根据你的操作系统下载适用的版本： <br />
http://nodejs.org/download/</p>
<p>　　下载完成后，你会看到下面的内容：</p>
<p></p>
<p>如果你用的是Mac OSX，点击通用的.pkg文件。这会把安装程序保存到你本机中。下载了该文件之后，双击它就可以启动安装程序，你会看到下列安装对话框:</p>
<p></p>
<p>一路默认的安装下去，成功安装之后，点击close按钮来退出安装程序。</p>
<p>相当简单，是吧&#63;</p>
<p><strong>步骤2：使用NPM安装LoopBack</strong></p>
<p>　　现在本地系统中已经安装了Node，接下来要安装StroopLoop公司提供的LoopBack包。LoopBack是一个开放的API源码包，当你学习使用Node开发、部署软件时，LoopBack可以使编程更简单。</p>
<p>　　为了安装LoopBack，我们要使用npm命令行，它是Node语言核心的一部分。NPM是一个官方的包管理工具，用于安装应用程序依赖的类库或模版。如果你是一名java程序员，你可以把NPM比作Maven。使用Maven构建项目，开发人员可以在pom.xml中配置项目依赖的jar包或模版。当项目开始编译时，Maven会下载所有依赖的文件，并将jar包引入到项目中。NPM工作原理和Maven相同，对于一些特殊的项目，它使用package.json文件来配置项目依赖的文件。你也可以使用命令行方式将依赖的文件下载到本地系统中。如果这些内容你不理解，不要担心，在接下来的步骤里我们会详细描述package.json文件。</p>
<p>　　为了安装LoopBack, 我们使用一个简单的命令行来下载和安装所有依赖的文件。打开你的window命令行窗口，输入下面命令：</p>
<div class="phpstudycode">
<pre class="brush:bash;">
$ npm install -g strongloop
</pre>
</div>
<p>提示：安装时，你可能需要使用其它用户帐号来执行这个命令。</p>
<p>　　这个命令行是什么含义呢？-g参数表示告诉npm我们想要安装strong-cli包。-g参数使这个包对任何系统和应用程序都兼容。一旦你运行了上面的命令，NPM会下载所有依赖的文件。下载的时间视网速而定，可能需要几分钟。</p>
<p><strong>步骤3：创建应用程序</strong></p>
<p>　　使用LoopBack API创建一个应用程序很简单。 打开你的window命令行窗口，使用下面的命令来创建一个新的应用程序restexample.</p>
<div class="phpstudycode">
<pre class="brush:bash;">
$ slc loopback</pre>
</div>
<p>接下来它会提示输入项目根路径的名称。 在这个示例中，使用restexample。 接下来它会提示输入应用程序名称。 使用默认值restexample。</p>
<p>slc命令现在已经创建一个名称为restexample的LoopBack应用程序，并且已经配置了这个应用程序。 如果再次执行上面的命令，仍然使用restexample命名，LoopBack会创建一个新的目录。 可以使用cd命令来修改应用程序的根路径。</p>
<div class="phpstudycode">
<pre class="brush:java;">
$ cd restexample</pre>
</div>
<p>现在我们已经创建完一个应用程序，接下来我们将MongoDB配置为程序的数据源。</p>
<p><strong>步骤4:定义数据源</strong></p>
<p>为了连通MongoDB,我们需要给应用程序增加一个数据源,运行以下命令即可:<br />
</p>
<div class="phpstudycode">
<pre class="brush:plain;">
$ slc loopback:datasource</pre>
</div>
<p>在弹出的提示符下,可以输入任意自定义的数据源名称,这里选择myMongo<br />
</p>
<div class="phpstudycode">
<pre class="brush:plain;">
[&#63;] Enter the data-source name: myMongo</pre>
</div>
<p>这样我们就将后端的数据源定义附加到由StrongLoop支持的真实连接器上面.这里我们从列表选择MongoDB连接器.<br />
</p>
<div class="phpstudycode">
<pre class="brush:plain;">
[&#63;] Select the connector for myMongo:
PostgreSQL (supported by StrongLoop)
Oracle (supported by StrongLoop)
Microsoft SQL (supported by StrongLoop)
MongoDB (supported by StrongLoop)
SOAP webservices (supported by StrongLoop)
REST services (supported by StrongLoop)
Neo4j (provided by community)
(Move up and down to reveal more choices)
</pre>
</div>
<p><strong>步骤5:指向真实的数据源</strong></p>
<p>　　为了连通MongoDB,我们需要指向真实际的MongoDB实例.LoopBack在datasource.json文件中定义了所有的数据源配置信息.这个文件位于应用程序的root/server目录.打开这个文件,按照如下的方式,为MongoDB增加一个数据源:</p>
<div class="phpstudycode">
<pre class="brush:plain;">
{
 
 "db": {
  "name": "db",
  "connector": "memory"
 },
 "myMongo": {
  "name": "myMongo",
  "connector": "mongodb"
  "url": "mongodb://localhost:27017/restexample"
 }
}</pre>
</div>
<p>注意:要保证为MongoDB数据库提供正确的 连接 URL.针对这个例子,我创建了一个名为 restexample 的数据库,它用来作为数据源.</p>
<p><strong>步骤6:导入数据到MongoDB(mmmmm 啤酒)</strong></p>
<p>　　就像本文Java部分说到的那样,我们需要加载数据集到MongoDB数据库中.如果你已经按照本文说到的方法完成了这个步骤,然后打算使用同一个数据库,你可以忽略步骤6,直接跳到步骤7.</p>
<p>　　首先,你需要下载一个包含所有要返回信息的JSON文件,可以从如下的URL获取:<br />
https://dl.dropboxusercontent.com/u/72466829/beers.json</p>
<p>　　数据集文件下载完毕后,直接使用如下的mongoimport命令将它加载到数据库:</p>
<div class="phpstudycode">
<pre class="brush:plain;">
$ mongoimport --jsonArray -d yourDBName -c beers --type json --file /tmp/beers.json -h yourMongoHost --port

</pre>
</div>
<p>　　你应该可以看到如下的结果:</p>
<div class="phpstudycode">
<pre class="brush:plain;">
connected to: 127.6.189.2:27017
Tue Jun 10 20:09:55.436 check 9 24
Tue Jun 10 20:09:55.437 imported 24 objects
</pre>
</div>
<p><strong>步骤7:创造我们自己的啤酒模型</strong></p>
<p>　　在Java世界里,由此可以想到对象模型.它代表这一个对象,只是在这里,这个对象是啤酒.LoopBack通过命令行,提供了一种创建模型对象的简便方式.打开终端窗口,进入到工程文件夹,输入如下命令:<br />
</p>
<div class="phpstudycode">
<pre class="brush:plain;">
$ slc loopback:model
</pre>
</div>
<p>这将会开启一个交互式的会话来定义模型.首先需要输入的是模型名称,这里输入"beer".接下来会提示,这个模型应该附加到的数据源,这里选择之前创建的myMongo数据源.<br />
</p>
<div class="phpstudycode">
<pre class="brush:plain;">
[&#63;] Enter the model name: beer
[&#63;] Select the data-source to attach beer to:
db (memory)
myMongo (mongodb)
</pre>
</div>
<p>接下来提示,是否通过REST将此API暴露出来.当然,这里希望这样.<br />
</p>
<div class="phpstudycode">
<pre class="brush:plain;">
[&#63;] Expose beer via the REST API&#63; Yes
</pre>
</div>
<p>最后,为模型选择网络复数名,这里模型名为beer,所以复数为beers(默认).敲击Enter键接受默认值.<br />
</p>
<div class="phpstudycode">
<pre class="brush:plain;">
[&#63;] Custom plural form (used to build REST URL):
</pre>
</div>
<p>接下来会提示定义模型属性.对这个示例程序,我们关注名称和对啤酒的描述.<br />
</p>
<div class="phpstudycode">
<pre class="brush:plain;">
Enter an empty property name when done.
[&#63;] Property name: name
</pre>
</div>
<p>只要敲击了Enter,就会提示输入各个指定属性的数据类型.第一个项是name,这里选择字符串类型.选择字符串类型,然后敲击</p>
<div class="phpstudycode">
<pre class="brush:plain;">
Enter.
[&#63;] Property type: (Use arrow keys)
string
number
boolean
object
array
date
buffer
geopoint
(other)
</pre>
</div>
<p>接下来,按照同样的方式创建description属性,接着会要求输入数据类型.它同样是一个字符串类型,选择字符串选项,然后敲击</p>
<div class="phpstudycode">
<pre class="brush:plain;">
Enter.
Let's add another beer property.
Enter an empty property name when done.
[&#63;] Property name: description
invoke loopback:property
[&#63;] Property type: string
[&#63;] Required&#63; Yes
</pre>
</div>
<p>　　祝贺!你已经使用LoopBack结合Node完成了模型对象的创建.如果想查看在这个过程中真正创建了什么,可以打开位于应用程序root/common/models目录的beer.json文件,滚动到这个文件的最后,将会看到如下模型:</p>
<div class="phpstudycode">
<pre class="brush:js;">
{
 "name": "beer",
 "base": "PersistedModel",
 "properties": {
  "name": {
   "type": "string",
   "required": true
  },
  "description": {
   "type": "string",
   "required": true
  }
 },
 "validations": [],
 "relations": {},
 "acls": [],
 "methods": []
}</pre>
</div>
<p>这里可以看到,我们创建了一个模型,同时,name和description属性已经赋予了这个模型.</p>
<p>在/server/model-config.js文件中,可以注意到,文件中包含一些额外的字段,包括public和datasource.其中public域指定我们希望通过一个REST网络服务将此模型暴露给外部.datasource域则指定这个模型的CRUD操作将会用到的数据源.</p>
<div class="phpstudycode">
<pre class="brush:js;">
"beer": {
  "dataSource": "myMongo",
  "public": true
 }</pre>
</div>
<p><strong>步骤8:沉浸在看到beers的喜悦中</strong></p>
<p>　　祝贺!你已经创建了第一个Node.js应用程序,其中包含可以获取beer信息的REST网络服务.最后,我们需要做的就是部署这个应用程序.</p>
<p>　　庆幸的是,部署是已经很容易的事情.可以通过在应用程序根目录执行如下命令来完成:<br />
</p>
<div class="phpstudycode">
<pre class="brush:bash;">
$ slc run
</pre>
</div>
<p>只要应用程序一运行,就可以通过浏览器转到如下的URL来确认部署是否成功:</p>
<p>http://0.0.0.0:3000/api/beers</p>
<p>相当酷,是不是&#63;</p>
<p>LoopBack同时也包含了一个允许查看应用程序所有可用服务的页面,包括Beer模型和我们创建的REST服务,将浏览器指向如下的URL即可查看:</p>
<p>http://0.0.0.0:3000/explorer</p>
<p>页面加载成功后，你会看到下面的界面，我们已经创建了beers节点作为博客的一部分，我把/beers端点进行高亮显示了:</p>
<p></p>
<p>你可以点击/beers来展开可供调用的API，你可以操作并测试一下，如下图所示:</p>
<p></p>
<p><strong>结论</strong></p>
<p>　在这篇博文中，我展示了如何使用java EE 去创建一个rest服务，这个服务能够返回Pabst啤酒公司的啤酒产品清单数据。 之后我又使用node.js以及基于node.js的loopback框架使用很少的代码实现了相同功能的rest服务。 最重要的是，LoopBack API&nbsp; 还对beer实体的增删查改提供了默认的实现，使得我们不用再写一行代码就得到了一个具有完整增删查改功能的rest服务。</p>
<p>下面的清单对博文中涉及的javaEE和node.js各自特性进行一个对比：</p>
<table class="jbborder">
<tbody>
<tr>
<td>
<p>Feature</p>
</td>
<td>
<p>Java EE</p>
</td>
<td>
<p>Node.js</p>
</td>
</tr>
<tr>
<td>
<p>完善的IDE支持</p>
</td>
<td>
<p>Yes, 多种IDE供选择，包括 Eclipse, Sublime and Idea</p>
</td>
<td>
<p>Yes,&nbsp;&nbsp;多种IDE供选择，&nbsp;Visual Studio, Eclipse, Sublime</p>
</td>
</tr>
<tr>
<td>
<p>依赖管理</p>
</td>
<td>
<p>Maven</p>
</td>
<td>
<p>NPM</p>
</td>
</tr>
<tr>
<td>
<p>有企业级项目采用</p>
</td>
<td>
<p>Yes</p>
</td>
<td>
<p>Yes</p>
</td>
</tr>
<tr>
<td>
<p>庞大的组件生态系统</p>
</td>
<td>
<p>Yes</p>
</td>
<td>
<p>Yes</p>
</td>
</tr>
<tr>
<td>
<p>需要 JVM</p>
</td>
<td>
<p>Yes</p>
</td>
<td>
<p>No</p>
</td>
</tr>
<tr>
<td>
<p>通用开发框架</p>
</td>
<td>
<p>Spring, JEE</p>
</td>
<td>
<p>Express</p>
</td>
</tr>
<tr>
<td>
<p>数据库支持</p>
</td>
<td>
<p>Yes</p>
</td>
<td>
<p>Yes</p>
</td>
</tr>
<tr>
<td>
<p>ORM 框架</p>
</td>
<td>
<p>Yes</p>
</td>
<td>
<p>Yes</p>
</td>
</tr>
<tr>
<td>
<p>测试框架</p>
</td>
<td>
<p>Yes</p>
</td>
<td>
<p>Yes</p>
</td>
</tr>
</tbody>
</table>
<p>接下来的内容&#63;</p>
<p>&nbsp;即将发布的Node v0.12 将带来至少8个激动人心的新特性，它们会是什么呢？访问 “What's New in Node.js v0.12” 页面了解更多.<br />
对Node相关的培训和认证感兴趣&#63; StrongLoop 公司提供各种服务满足您的需求。</p>
<hr></span>                                     
		    	</div>
		    	<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>代码注释</div>
			    <div class="panel-content">
			    <span></span>                                     
		    	</div>

			</div>

			<!-- END ROW -->
			<div class="newsPage">
				<div class="newsPageTurn">
				    <span><a>上一篇</a><a href='/php/biji/95067.html'>Java中使用While语句自增运算遍历数组典型实例</a><a>下一篇</a><a href='/php/biji/95069.html'>win 7系统怎么调节Internet连接速度？调节Internet连接速度的方法</a></span>
				</div>
			</div>
		</div>


<div id="author-box">
    <h3>作者：喵哥笔记</h3>
        <div class="author-info">
            <div class="author-avatar">
                <img src="/skin1/picture/01.jpg" alt="IDC笔记" class="avatar" width="64" height="64">
            </div>
        <div class="author-description">
            <p>学的不仅是技术，更是梦想！</p>
            <ul class="author-social follows nb">
            	<li>
                    <a target="_blank" href="/" title="IDC笔记">IDC笔记</a>
                </li>
            </ul>
        </div>
        <div class="clear"></div>
    </div>
</div>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
<!-- container-fluid -->
	</div>
<!-- content -->
	<footer class="footer">
	© 2020 IDC笔记 <i class="mdi mdi-heart text-danger"></i>. | 备案号：<a href="https://beian.miit.gov.cn/">辽ICP备18000516号</a>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?674585fbbd2294d3faf910f668ea91b4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

	</footer>
</div>

</div>
<!-- END wrapper -->
<!-- jQuery  -->
<script src="/skin1/js/jquery.min.js"></script>
<script src="/skin1/js/bootstrap.bundle.min.js"></script>
<script src="/skin1/js/metismenu.min.js"></script>
<script src="/skin1/js/jquery.slimscroll.js"></script>
<script src="/skin1/js/waves.min.js"></script>
<!--Morris Chart-->
<script src="/skin1/js/morris.min.js"></script>
<script src="/skin1/js/raphael.min.js"></script>
<script src="/skin1/js/dashboard.init.js"></script>
<script src="/skin1/js/app.js"></script>
<script src="/foot.js"></script>
</body>
</html>