<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title>PHP加速 eAccelerator配置和使用的解决办法_PHP教程_IDC笔记</title>
    <meta name="keywords" content="PHP,PHP笔记,PHP教程" />
    <meta name="description" content="这篇文章主要为大家详细介绍了PHP加速 eAccelerator配置和使用的简单示例，具有一定的参考价值，可以用来参考一下。<br />
<br />
对此感兴趣的朋友，看看idc笔记做的技术笔记！前一段时间完成" />
    <meta content="Responsive admin theme build on top of Bootstrap 4" name="description" />
    <meta content="idcnote.com" name="author" />
    <link rel="shortcut icon" href="/skin1/images/favicon.ico">
    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="/skin1/css/morris.css">
    <link href="/skin1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/metismenu.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/icons.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/style.css" rel="stylesheet" type="text/css">
<link href="/SyntaxHighlighter/shCoreDefault.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/SyntaxHighlighter/shCore.js"></script>
<script type="text/javascript">
 SyntaxHighlighter.all();
</script>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
</head>
<body>
<!-- Begin page -->
		<div id="wrapper">
			<!-- Top Bar Start -->
			<div class="topbar">
				<!-- LOGO -->
				<div class="topbar-left">
					<a href="/" class="logo">
						<span class="logo-light">
                            <i class="mdi mdi-camera-control"></i>IDC笔记
                        </span>
						<span class="logo-sm">
                            <i class="mdi mdi-camera-control"></i>
                        </span>
					</a>
				</div>
				<nav class="navbar-custom">
					<ul class="navbar-right list-inline float-right mb-0">
						<!--<li class="dropdown notification-list list-inline-item d-none d-md-inline-block">
							<a class="nav-link waves-effect" href="#" id="btn-fullscreen">
								<i class="mdi mdi-arrow-expand-all noti-icon"></i>
							</a>
						</li>
						<li class="dropdown notification-list list-inline-item">
							<div class="dropdown notification-list nav-pro-img">
								<a class="dropdown-toggle nav-link arrow-none nav-user" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
									<img src="/skin1/picture/user-4.jpg" alt="user" class="rounded-circle">
								</a>
								<div class="dropdown-menu dropdown-menu-right profile-dropdown ">
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-account-circle"></i> Profile</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-wallet"></i> Wallet</a>
									<a class="dropdown-item d-block" href="#">
										<span class="badge badge-success float-right">11</span>
										<i class="mdi mdi-settings"></i> Settings</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-lock-open-outline"></i> Lock screen</a>
									<div class="dropdown-divider"></div>
									<a class="dropdown-item text-danger" href="#">
										<i class="mdi mdi-power text-danger"></i> Logout</a>
								</div>
							</div>
						</li>
						-->
					</ul>
					<ul class="list-inline menu-left mb-0">
						<li class="float-left">
							<button class="button-menu-mobile open-left waves-effect">
                            <i class="mdi mdi-menu"></i>
                        </button>
						</li>
						<li class="d-none d-md-inline-block">
							<form role="search" class="app-search">
								<div class="form-group mb-0">
									<input type="text" class="form-control" placeholder="Search..">
									<button type="submit"><i class="fa fa-search"></i></button>
								</div>
							</form>
						</li>
					</ul>
				</nav>
			</div>
<!-- ========== Left Sidebar Start ========== -->
<div class="left side-menu">
    <div class="slimscroll-menu" id="remove-scroll">
    <!--- Sidemenu -->
    <div id="sidebar-menu">
    <!-- Left Menu Start -->
    <ul class="metismenu" id="side-menu">
			<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP简介			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jianjie/1.html">PHP简介</a></li><li><a href="/php/jianjie/2.html">PHP用途</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP基本语法			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yufa/3.html">分离HTML</a></li><li><a href="/php/yufa/4.html">指令分隔符</a></li><li><a href="/php/yufa/5.html">PHP注释</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类型			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpleixing/6.html">PHP类型简介</a></li><li><a href="/php/phpleixing/7.html">PHP类型之布尔类型</a></li><li><a href="/php/phpleixing/8.html">PHP类型之整型</a></li><li><a href="/php/phpleixing/9.html">PHP类型之浮点型</a></li><li><a href="/php/phpleixing/10.html">PHP类型之字符串</a></li><li><a href="/php/phpleixing/11.html">PHP类型之数组</a></li><li><a href="/php/phpleixing/12.html">PHP类型之对象</a></li><li><a href="/php/phpleixing/13.html">PHP类型之资源类型</a></li><li><a href="/php/phpleixing/14.html">PHP类型之NULL</a></li><li><a href="/php/phpleixing/15.html">PHP类型之伪类型</a></li><li><a href="/php/phpleixing/16.html">PHP类型之类型判别</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP变量			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbianliang/17.html">PHP变量之基础</a></li><li><a href="/php/phpbianliang/18.html">PHP变量之预定义变量</a></li><li><a href="/php/phpbianliang/19.html">PHP变量之变量范围</a></li><li><a href="/php/phpbianliang/20.html">PHP变量之可变变量</a></li><li><a href="/php/phpbianliang/21.html">PHP变量之外部变量</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP运算符			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yunsuanfu/22.html">PHP运算符优先级</a></li><li><a href="/php/yunsuanfu/23.html">算术运算符</a></li><li><a href="/php/yunsuanfu/24.html">赋值运算符</a></li><li><a href="/php/yunsuanfu/25.html">位运算符</a></li><li><a href="/php/yunsuanfu/26.html">比较运算符</a></li><li><a href="/php/yunsuanfu/27.html">错误控制运算符</a></li><li><a href="/php/yunsuanfu/28.html">执行运算符</a></li><li><a href="/php/yunsuanfu/29.html">递增/递减运算符</a></li><li><a href="/php/yunsuanfu/30.html">逻辑运算符</a></li><li><a href="/php/yunsuanfu/31.html">字符串运算符</a></li><li><a href="/php/yunsuanfu/32.html">数组运算符</a></li><li><a href="/php/yunsuanfu/33.html">类型运算符</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP控制结构			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jiegou/34.html">PHP控制结构之if</a></li><li><a href="/php/jiegou/35.html">PHP控制结构之else</a></li><li><a href="/php/jiegou/36.html">PHP控制结构之elseif/else if</a></li><li><a href="/php/jiegou/37.html">PHP控制结构之替代语法</a></li><li><a href="/php/jiegou/38.html">PHP控制结构之while</a></li><li><a href="/php/jiegou/39.html">PHP控制结构之do-while</a></li><li><a href="/php/jiegou/40.html">PHP控制结构之for</a></li><li><a href="/php/jiegou/41.html">PHP控制结构之foreach</a></li><li><a href="/php/jiegou/42.html">PHP控制结构之break</a></li><li><a href="/php/jiegou/43.html">PHP控制结构之continue</a></li><li><a href="/php/jiegou/44.html">PHP控制结构之switch</a></li><li><a href="/php/jiegou/45.html">PHP控制结构之declare</a></li><li><a href="/php/jiegou/46.html">PHP控制结构之return</a></li><li><a href="/php/jiegou/47.html">PHP控制结构之require</a></li><li><a href="/php/jiegou/48.html">PHP控制结构之include</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/hanshu/52.html">用户自定义函数</a></li><li><a href="/php/hanshu/53.html">函数的参数</a></li><li><a href="/php/hanshu/54.html">返回值</a></li><li><a href="/php/hanshu/55.html">可变函数</a></li><li><a href="/php/hanshu/56.html">内部（内置）函数</a></li><li><a href="/php/hanshu/57.html">匿名函数</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类与对象			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpduixiang/58.html">类与对象前言</a></li><li><a href="/php/phpduixiang/59.html">基本概念</a></li><li><a href="/php/phpduixiang/60.html">属性</a></li><li><a href="/php/phpduixiang/61.html">类常量</a></li><li><a href="/php/phpduixiang/62.html">自动加载对象</a></li><li><a href="/php/phpduixiang/63.html">构造函数和析构函数</a></li><li><a href="/php/phpduixiang/64.html">访问控制</a></li><li><a href="/php/phpduixiang/65.html">对象继承</a></li><li><a href="/php/phpduixiang/66.html">Static关键字</a></li><li><a href="/php/phpduixiang/67.html">抽象类</a></li><li><a href="/php/phpduixiang/68.html">接口</a></li><li><a href="/php/phpduixiang/69.html">Traits</a></li><li><a href="/php/phpduixiang/70.html">重载</a></li><li><a href="/php/phpduixiang/71.html">对象迭代</a></li><li><a href="/php/phpduixiang/72.html">设计模式</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP异常处理			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yichang/81.html">异常处理</a></li><li><a href="/php/yichang/82.html">扩展PHP内置的异常处理类</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数库按分类			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpku/83.html">数组</a></li><li><a href="/php/phpku/84.html">Classes/Objects</a></li><li><a href="/php/phpku/85.html">Date/Time</a></li><li><a href="/php/phpku/86.html">Directories</a></li><li><a href="/php/phpku/87.html">错误处理</a></li><li><a href="/php/phpku/88.html">Program execution</a></li><li><a href="/php/phpku/89.html">Filesystem</a></li><li><a href="/php/phpku/90.html">Filter</a></li><li><a href="/php/phpku/91.html">Function Handling</a></li><li><a href="/php/phpku/92.html">PHP 选项/信息</a></li><li><a href="/php/phpku/93.html">Mail</a></li><li><a href="/php/phpku/94.html">Math</a></li><li><a href="/php/phpku/95.html">Misc.</a></li><li><a href="/php/phpku/96.html">Network</a></li><li><a href="/php/phpku/97.html">输出控制</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> php基础			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbiji/122.html"></a></li><li><a href="/php/phpbiji/123.html"></a></li><li><a href="/php/phpbiji/124.html"></a></li><li><a href="/php/phpbiji/125.html"></a></li><li><a href="/php/phpbiji/126.html"></a></li><li><a href="/php/phpbiji/127.html"></a></li><li><a href="/php/phpbiji/128.html"></a></li><li><a href="/php/phpbiji/129.html"></a></li><li><a href="/php/phpbiji/130.html"></a></li><li><a href="/php/phpbiji/108377.html"></a></li><li><a href="/php/phpbiji/108376.html"></a></li><li><a href="/php/phpbiji/108380.html"></a></li><li><a href="/php/phpbiji/108379.html"></a></li><li><a href="/php/phpbiji/108378.html"></a></li><li><a href="/php/phpbiji/108381.html"></a></li>		</ul>
	</li>
		<li>
	    <a href="/php/biji/" class="waves-effect">
		    <i class="icon-share"></i>
		    <span>PHP笔记
		       	<span class="float-right menu-arrow">
		       	<i class="mdi mdi-chevron-right"></i>
		       	</span>
		    </span>
	    </a>
	</li>
	</ul>
</div>
<!-- Sidebar -->
<div class="clearfix"></div>
</div>
<!-- Sidebar -left -->
</div>
<!-- Left Sidebar End -->
<!-- Start right Content here -->
<div class="content-page">
	<div class="content">
		<div class="container-fluid">
			<div class="page-title-box">
				<div class="row align-items-center">
					<div class="col-sm-6">
						<h1 class="page-title">PHP加速 eAccelerator配置和使用的解决办法</h1>
					</div>
				</div>
				<!-- end row -->
			</div>
			<!-- end page-title -->
			<!-- START ROW -->
			<div class="panel panel-forbid">
				<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>内容摘要</div>
			    <div class="panel-content">
			    <span>这篇文章主要为大家详细介绍了PHP加速 eAccelerator配置和使用的简单示例，具有一定的参考价值，可以用来参考一下。<br />
<br />
对此感兴趣的朋友，看看idc笔记做的技术笔记！前一段时间完成</span>                                     
		    	</div>
			    <div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>文章正文</div>
			    <div class="panel-content">
			    <span><p>这篇文章主要为大家详细介绍了PHP加速 eAccelerator配置和使用的简单示例，具有一定的参考价值，可以用来参考一下。</p>

<p>对此感兴趣的朋友，看看idc笔记做的技术笔记！</p>前一段时间完成了服务器从FreeBSD4.10到6.1的升级，同时把PHP也升级到了最新的PHP5.1.4，Apache也升级到了最新的Apache2.2，为了更好的提高系统的性能考虑对PHP再进行一些优化，前两年接触过MMCache和eAccelerator，尤其对eAccelerator非常喜欢，这次优化也选择了它，下面整理一些文档和大家分享。
<p>目录：一、eAccelerator介绍1、背景2、原理二、安装和配置1、支持平台2、系统要求3、安装4、php.ini文件配置5、验证安装三、使用eAccelerator开发PHP代码1、API文档和接口说明2、开发范例四、附录和参考资料</p>
<p>一、eAccelerator介绍</p>
<p>1、背景eAccelerator 是一个免费开源的PHP加速、优化、编译和动态缓存的项目，它可以通过缓存PHP代码编译后的结果来提高PHP脚本的性能，使得一向很复杂和离我们很远的PHP脚本编译问题完全得到解决。通过使用eAccelerator，可以优化你的PHP代码执行速度，降低服务器负载，可以提高PHP应用执行速度最高达10倍。</p>
<p>eAccelerator 项目诞生于2004年，当时它是作为 <font color="#0000ff">Turck MMCache </font>项目的一个分支提出并投入开发的。 Turck MMCache 由 Dmitry Stogov 开发，是个非常优秀的PHP内存缓存加速系统，如今仍然有很大部分 eAccelerator 的代码应用到该项目中，目前该项目有很长时间没有更新了，对于最新的PHP5.x的支持还未推出。</p>
<p>2、原理eAccelerator 通过把经过编译后的PHP代码缓存到共享内存中，并在用户访问的时候直接调用从而起到高效的加速作用。它的效率非常高，从创建共享内存到查找编译后的代码都在非常短的时间内完成，对于不能缓存到共享内存中的文件和代码，eAccelerator还可以把他们缓存到系统磁盘上。</p>
<p>eAccelerator 同样还支持PHP代码的编译和解释执行，你可以通过encoder.php脚本来对php代码进行编译达到保护代码的目的，经过编译后的代码必须运行在安装了eAccelerator的环境下。eAccelerator编译后的代码不能被反编译，它不象其他一些编译工具那样可以进行反编译，这将使得代码更加安全和高效。</p>
<p>二、eAccelerator安装配置</p>
<p>1、支持平台由于aAccelerator提供了大部分基于共享内存的API，所以在*nix的平台上将得到更好的支持，虽然也发布了基于windows平台的binary版本，但我在这里就只提供基于*nix平台的配置和说明，目前可以支持的平台包括Linux, FreeBSD, OpenBSD, Mac OS X, Solaris, AIX en HP-UX。</p>
<p>2、系统要求php4 or php5autoconfautomakelibtoolm4eAccelerator 只支持使用 mod_php 或者 fastcgi mode 安装的PHP</p>
<p>3、安装先去eAccelerator官方下载最新版的源码包：<font color="#0000ff">eaccelerator-0.9.5-beta.tar.bz2</font></p>
<div class="hl-surround">
<div class="hl-main">#tar -zxvf ./eaccelerator-0.9.5-beta2.tar.bz2#cd eaccelerator-0.9.5-beta2#export PHP_PREFIX=&quot;/usr/local&quot; （把PHP安装目录导入到环境变量，FreeBSD默认是/usr/local）#$PHP_PREFIX/bin/phpize#./configure --enable-eaccelerator=shared --with-php-config=$PHP_PREFIX/bin/php-config#make#make install</div></div>
<p>4、ini文件配置安装完成，下面开始配置php.ini文件,eAccelerator提供了两种配置和调用方式，分别如下。</p>
<p>安装为 Zend extension 模式：</p>
<div class="hl-surround">
<div class="hl-main">zend_extension=&quot;/usr/local/lib/php/20050922/eaccelerator.so&quot;eaccelerator.shm_size=&quot;16&quot;eaccelerator.cache_dir=&quot;/tmp/eaccelerator&quot;eaccelerator.enable=&quot;1&quot;eaccelerator.optimizer=&quot;1&quot;eaccelerator.check_mtime=&quot;1&quot;eaccelerator.debug=&quot;0&quot;eaccelerator.log_file = &quot;/var/log/httpd/eaccelerator_log&quot;eaccelerator.filter=&quot;&quot;eaccelerator.shm_max=&quot;0&quot;eaccelerator.shm_ttl=&quot;0&quot;eaccelerator.shm_prune_period=&quot;0&quot;eaccelerator.shm_only=&quot;0&quot;eaccelerator.compress=&quot;1&quot;eaccelerator.compress_level=&quot;9&quot;</div></div>
<p>如果你使用了thread safe模式安装的PHP，你必须使用 &ldquo;zend_extension_ts&rdquo; 替换第一行的 &ldquo;zend_extension&rdquo;.</p>
<p>安装为 PHP extension 模式：（这是大部分采用的方式）</p>
<div class="hl-surround">
<div class="hl-main">extension=&quot;eaccelerator.so&quot;eaccelerator.shm_size=&quot;16&quot;eaccelerator.cache_dir=&quot;/tmp/eaccelerator&quot;eaccelerator.enable=&quot;1&quot;eaccelerator.optimizer=&quot;1&quot;eaccelerator.check_mtime=&quot;1&quot;eaccelerator.debug=&quot;0&quot;eaccelerator.log_file = &quot;/var/log/httpd/eaccelerator_log&quot;eaccelerator.filter=&quot;&quot;eaccelerator.shm_max=&quot;0&quot;eaccelerator.shm_ttl=&quot;0&quot;eaccelerator.shm_prune_period=&quot;0&quot;eaccelerator.shm_only=&quot;0&quot;eaccelerator.compress=&quot;1&quot;eaccelerator.compress_level=&quot;9&quot;</div></div>
<p>有关php.ini文件的详细配置说明，请参照源码目录的README文档或者访问官方文档：<font color="#0000ff">ini setting</font></p>
<p>完成安装配置后，我们最后要创建缓存目录</p>
<div class="hl-surround">
<div class="hl-main">#mkdir /tmp/eaccelerator#chmod 777 /tmp/eaccelerator</div></div>
<p>5、验证安装结果通过浏览器访问您的phpinfo()页面或者运行 php -i 得到php配置信息，里面如果看到类似下面的信息就表示安装成功了。</p>
<div class="hl-surround">
<div class="hl-main">This program makes use of the Zend Scripting Language Engine:Zend Engine v2.1.0, Copyright (c) 1998-2006 Zend Technologies with eAccelerator v0.9.5-beta2, Copyright (c) 2004-2006 eAccelerator, by eAccelerator</div></div>
<p>我的机器上同时还安装了Zend Optimizer3.0.1，所以看到的信息如下：</p>
<div class="hl-surround">
<div class="hl-main">This program makes use of the Zend Scripting Language Engine:Zend Engine v2.1.0, Copyright (c) 1998-2006 Zend Technologies with eAccelerator v0.9.5-beta2, Copyright (c) 2004-2006 eAccelerator, by eAccelerator with Zend Extension Manager v1.0.10, Copyright (c) 2003-2006, by Zend Technologies with Zend Optimizer v3.0.1, Copyright (c) 1998-2006, by Zend Technologies</div></div>
<p>如果你打开了eAccelerator的debug选项，可以从日志中看到类似下面的信息</p>
<div class="hl-surround">
<div class="hl-main">#tail /var/log/httpd/eAccelerator_logEACCELERATOR hit: &quot;/var/www/toplee.com/blog/index.php&quot;EACCELERATOR hit: &quot;/var/www/toplee.com/blog/wp-blog-header.php&quot;EACCELERATOR hit: &quot;/var/www/toplee.com/blog/wp-config.php&quot;EACCELERATOR hit: &quot;/var/www/toplee.com/blog/wp-settings.php&quot;EACCELERATOR hit: &quot;/var/www/toplee.com/blog/wp-content/plugins/wp-cache/wp-cache-phase1.php&quot;...</div></div>
<p>以上信息表示文件都得到了缓存和命中。</p>
<p>至此，我们就完成了全部的安装和配置，好好享受eAccelerator带给你的惊喜吧，根据Michael的测试，效果的确相当的好。</p>
<p>三、在PHP中可以使用eAccelerator的API开发</p>
<p>1、API和文档说明：</p>
<p>eAccelerator提供了便捷便捷而又稳定的本机缓存实现方式，由于大部分代码实现基于共享内存，所以只能在*nix平台中使用，Windows平台Michael就暂时不知道何时有这方面的支持了。eAccelerator提供如下的API接口和文件：（下述文件均在源码包的doc/php/目录下）</p>
<p>文件列表：</p>
<div class="hl-surround">
<div class="hl-main">cache.phpdasm.phpencoder.phpinfo.phploader.phpsession.phpshared_memory.php</div></div>
<p>接口列表：</p>
<div class="hl-surround">
<div class="hl-main">array eaccelerator_cached_scripts ()void eaccelerator_cache_output (string $key, string $eval_code, [int $ttl = 0])void eaccelerator_cache_page (string $key, [int $ttl = 0])void eaccelerator_cache_result (string $key, string $code, [int $ttl = 0])void eaccelerator_caching (boolean $flag)void eaccelerator_clean ()void eaccelerator_clear ()array eaccelerator_dasm_file (mixed $filename)mixed eaccelerator_encode (mixed $src, [mixed $prefix = &#39;&#39;], [string $pre_content = &#39;&#39;], [string $post_content = &#39;&#39;])void eaccelerator_gc ()mixed eaccelerator_get (string $key)array eaccelerator_info ()array eaccelerator_list_keys ()void eaccelerator_load ()boolean eaccelerator_lock (string $key)void eaccelerator_optimizer (boolean $flag)void eaccelerator_purge ()boolean eaccelerator_put (string $key, mixed $value, [int $ttl = 0])array eaccelerator_removed_scripts ()boolean eaccelerator_rm (string $key)void eaccelerator_rm_page (string $key)boolean eaccelerator_set_session_handlers ()boolean eaccelerator_unlock (string $key)</div></div>
<p>有关上述文档详细说明请参考官方文档：<font color="#0000ff">API Documents</font></p>
<p>下面有部分网友翻译后的接口说明：</p>
<div class="hl-surround">
<div class="hl-main">eaccelerator_put($key, $value, $ttl=0) 将 $value 以 $key 为键名存进缓存(php4下支持对像类型，看源码好像zend2里不支持了)，$ttl 是这个缓存的生命周期，单位是秒，省略该参数或指定为 0 表示不限时，直到服务器重启清空为止。eaccelerator_get($key) 根据 $key 从缓存中返回相应的 eaccelerator_put() 存进去的数据，如果这项缓存已经过期或不存在那么返回值是 NULLeaccelerator_rm($key) 根据 $key 移除缓存eaccelerator_gc() 移除清理所有已过期的 keyeaccelerator_lock($key) 为 $key 加上锁定操作，以保证多进程多线程操作时数据的同步。需要调用 eaccelerator_unlock($key) 来释放这个锁或等待程序请求结束时自动释放这个锁。 例如: &lt;?php eaccelerator_lock(&quot;count&quot;); eaccelerator_put(&quot;count&quot;,eaccelerator_get(&quot;count&quot;)+1)); ?&gt;eaccelerator_unlock($key) 根据 $key 释放锁eaccelerator_cache_output($key, $eval_code, $ttl=0) 将 $eval_code 代码的输出缓存 $ttl 秒，（$ttl参数同 eacclerator_put） 例如： &lt;?php eaccelerator_cache_output(&#39;test&#39;, &#39;echo time(); phpinfo();&#39;, 30); ?&gt;eaccelerator_cache_result($key, $eval_code, $ttl=0) 将 $eval_code 代码的执行结果缓存 $ttl 秒，（$ttl参数同 eacclerator_put），类似 cache_output 例如： &lt;?php eaccelerator_cache_result(&#39;test&#39;, &#39; time() . &quot;Hello&quot;;&#39;, 30); ?&gt;eaccelerator_cache_page($key, $ttl=0) 将当前整页缓存 $ttl 秒。 例如： &lt;?php eaccelerator_cache_page($_SERVER[&#39;PHP_SELF&#39;].&#39;?GET=&#39;.serialize($_GET),30); echo time(); phpinfo(); ?&gt;eaccelerator_rm_page($key) 删除由 eaccelerator_cache_page() 执行的缓存，参数也是 $key</div></div>
<p>2、PHP代码中使用eAccelerator加速</p>
<p>下面有一个测试的代码，你可以测试一下eAccelerator强大的威力：（该代码在 cli 模式下可能无效）</p>
<div class="hl-surround">
<div class="hl-main">&lt;?phpclass test_cache { var $pro = &#39;hello&#39;; function test_cache() { echo &quot;Object Created!&lt;br&gt;\n&quot;; } function func() { echo &#39;, the world!&#39;; } function now($t) { echo date(&#39;Y-m-d H:i:s&#39;, $t); }}$tt = eaccelerator_get(&quot;test_tt&quot;);if (!$tt){ $tt = new test_cache; eaccelerator_put(&quot;test_tt&quot;, $tt); echo &quot;no cached!&lt;br&gt;\n&quot;;}else { echo &quot;cached&lt;br&gt;\n&quot;;}echo $tt-&gt;pro;$tt-&gt;func();$tt-&gt;now(time() + 86400);?&gt;</div></div>
<p>另外，据说在著名的vBulletin 3.60Beta版里面已经集成了对eAccelerator的支持，下面是一段来自vBulletin里面的代码</p>
<p>代码如下:</p>
<pre>

<code>// ############################################################################# 
// eAccelerator 

/** 
* Class for fetching and initializing the vBulletin datastore from eAccelerator 
* 
* @package vBulletin 
* @version $Revision: 0.1 $ 
* @date $Date: 2005/06/12 13:14:18 $ 
*/ 
class vB_Datastore_eAccelerator extends vB_Datastore 
{ 
/** 
* Fetches the contents of the datastore from eAccelerator 
* 
* @param array Array of items to fetch from the datastore 
* 
* @return void 
*/ 
function fetch($itemarray) 
{ 
if (!function_exists('eaccelerator_get')) 
{ 
trigger_error("eAccelerator not installed", E_USER_ERROR); 
} 

foreach ($this-&gt;defaultitems AS $item) 
{ 
$this-&gt;do_fetch($item); 
} 

if (is_array($itemarray)) 
{ 
foreach ($itemarray AS $item) 
{ 
$this-&gt;do_fetch($item); 
} 
} 

$this-&gt;check_options(); 

// set the version number variable 
$this-&gt;registry-&gt;versionnumber =&amp; $this-&gt;registry-&gt;options['templateversion']; 
} 

/** 
* Fetches the data from shared memory and detects errors 
* 
* @param string title of the datastore item 
* 
* @return void 
*/ 
function do_fetch($title) 
{ 
$data = eaccelerator_get($title); 
if ($data === null) 
{ // appears its not there, lets grab the data, lock the shared memory and put it in 
$data = ''; 
$dataitem = $this-&gt;dbobject-&gt;query_first(" 
SELECT title, data FROM " . TABLE_PREFIX . "datastore 
WHERE title = '" . $this-&gt;dbobject-&gt;escape_string($title) ."' 
"); 
if (!empty($dataitem['title'])) 
{ 
$data =&amp; $dataitem['data']; 
$this-&gt;build($dataitem['title'], $dataitem['data']); 
} 
} 
$this-&gt;register($title, $data); 
} 




/** 
* Updates the appropriate cache file 
* 
* @param string title of the datastore item 
* 
* @return void 
*/ 
function build($title, $data) 
{ 
if (!function_exists('eaccelerator_put')) 
{ 
trigger_error("eAccelerator not installed", E_USER_ERROR); 
} 
eaccelerator_lock($title); 
eaccelerator_put($title, $data); 
eaccelerator_unlock($title); 
} 
}
</code></pre>四、附录和参考资料eAccelerator 官方网站 ：http://eaccelerator.netWebsites using eAccelerator ?http://www.advfn.com/ (2006/03/03) Advanced Financial Network, serves over 7 million page hits per day.http://www.domaincity.co.uk/ (2005/01/29) Andrew Hutchings - Linux Guru - Just a quick message to say we are now using eaccelerator as a replacement for mmcache on 2 of our 3 node round robin clusters, 2.5million hits per day. We will be doubling this in the next few week, as well as implementing new clusters.http://www.ets-online.de/ (2005/02/07) Denny Reeh - System Developer - The e/t/s didactic media provides an elearning server (Distance Learning System) written in PHP. We are hosting the systems for our customers mainly by ourself. So we have 5 live-servers (freebsd, apache2, php4, eaccelerator) with 5.5 million hits per month. First without eAccelerator we should have installed more servers for good performance and secondly we improve the customer convenience by quartering the medium response time of a script.http://www.gorgoyle.com/ (2005/08/03) Gorgoyle.com is Yet Another Debian Personal Server with just a few lost Internet wanderers passing by, powered by a glorious Celeron 433 that needed some fresh air&hellip; With eAccelerator the result is quite impressive: users say the server speed is now 10000% higher (no joke!) So thank you all and keep up the good work!!! Server: eAccelerator 0.9.5 beta 1 Apache/2.0.55 (Debian) mod_python/3.1.3 Python/2.3.5 PHP/4.4.2-1 mod_ssl/2.0.55 OpenSSL/0.9.8a mod_perl/2.0.2http://www.mafia-inc.de/ (2005/05/24) The Mafia-Incorporated is a succesfull Browser game with around 2.500.000 page impressions each day and over 5000 users. Server: PHP Version 4.3.10-9, eAccelerator 0.9.2a, Debian , Apache 2.0.53http://www.mondespersistants.com/ (2005/01/07) An other game oriented french website with 6 000 000 pageloads monthly. http://guildes.mondespersistants.com is a full PHP5 oo development. Theses websites are running under freebsd / apache 1.3 / php 5.0.3 / eaccelerator 0.9.2http://www.moviemaze.de/ (2005/12/09) Markus Ostertag - Movie Maze is a large german online-magazine with trailer, wallpaper, reviews, news and much more. Currently we use three servers (Suse &amp; Debian with Apache 2, PHP4) with eAccelerator and provide more than 3TB data to ~1 Mio. users each month.http://www.rtvslo.si (2005/01/04) The Slovenian National RTV Station and its news/misc portal with forums. Over 3500 users and more than 37000 forum messages in a year. Two round-robin servers for the masses, and an administrator server. 6 000 000 pageloads monthly.http://www.shroomery.org/ (2006/03/28) A site about mushrooms and mycology, serving 20,000,000 pages per month. Web and database server are identical dual 64-bit Xeons with 4GB and SCSI RAID5 running Gentoo. eAccelerator help keep our page generation time under .1 second!http://www.sourceforge.net/ (2005/04/25) SourceForge.net is the world&#39;s largest Open Source software development web site, hosting more than 100,000 projects and over 1,000,000 registered users with a centralized resource for managing projects, issues, communications, and code. SourceForge.net has the largest repository of Open Source code and applications available on the Internet, and hosts more Open Source development products than any other site or network worldwide. SourceForge.net provides a wide variety of services to projects we host, and to the Open Source community. eAccelerator is used on the webserver cluster for their frontpage.Companies offering hosting with eAccelerator enabled ?http://lylix.net/ (2006/04/29) Offering webhosting w/ Apache/2.0.55, PHP 5.0.5, and eAccelerator 0.9.5 beta1 on Gentoo Linux servers. Also a provider of quality Virtual Private Server (VPS) hosting, including 32 and 64-bit platforms. Most VPS images have a pre-installed LAMP environment w/ eAccelerator installed and configured.http://www.ulyssis.org A student organisation which provides shell and internet services for students at very cheap prices.
<p></p>

<p>注：关于PHP加速 eAccelerator配置和使用的简单示例的内容就先介绍到这里，更多相关文章的可以留意</span>                                     
		    	</div>
		    	<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>代码注释</div>
			    <div class="panel-content">
			    <span></span>                                     
		    	</div>

			</div>

			<!-- END ROW -->
			<div class="newsPage">
				<div class="newsPageTurn">
				    <span><a>上一篇</a><a href='/php/biji/111725.html'>php订单的解决办法</a><a>下一篇</a><a href='/php/biji/111750.html'>php简单的封装图片上传解决办法</a></span>
				</div>
			</div>
		</div>


<div id="author-box">
    <h3>作者：喵哥笔记</h3>
        <div class="author-info">
            <div class="author-avatar">
                <img src="/skin1/picture/01.jpg" alt="IDC笔记" class="avatar" width="64" height="64">
            </div>
        <div class="author-description">
            <p>学的不仅是技术，更是梦想！</p>
            <ul class="author-social follows nb">
            	<li>
                    <a target="_blank" href="/" title="IDC笔记">IDC笔记</a>
                </li>
            </ul>
        </div>
        <div class="clear"></div>
    </div>
</div>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
<!-- container-fluid -->
	</div>
<!-- content -->
	<footer class="footer">
	© 2020 IDC笔记 <i class="mdi mdi-heart text-danger"></i>. | 备案号：<a href="https://beian.miit.gov.cn/">辽ICP备18000516号</a>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?674585fbbd2294d3faf910f668ea91b4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

	</footer>
</div>

</div>
<!-- END wrapper -->
<!-- jQuery  -->
<script src="/skin1/js/jquery.min.js"></script>
<script src="/skin1/js/bootstrap.bundle.min.js"></script>
<script src="/skin1/js/metismenu.min.js"></script>
<script src="/skin1/js/jquery.slimscroll.js"></script>
<script src="/skin1/js/waves.min.js"></script>
<!--Morris Chart-->
<script src="/skin1/js/morris.min.js"></script>
<script src="/skin1/js/raphael.min.js"></script>
<script src="/skin1/js/dashboard.init.js"></script>
<script src="/skin1/js/app.js"></script>
<script src="/foot.js"></script>
</body>
</html>