<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title>javascript使用smipleChart实现简单图表_PHP教程_IDC笔记</title>
    <meta name="keywords" content="PHP,PHP笔记,PHP教程" />
    <meta name="description" content="支持 线性图 区域图 柱状图 饼图<br />
支持多浏览器<br />
用到的是svg  vml<br />
http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;<br />
<br />
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtm" />
    <meta content="Responsive admin theme build on top of Bootstrap 4" name="description" />
    <meta content="idcnote.com" name="author" />
    <link rel="shortcut icon" href="/skin1/images/favicon.ico">
    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="/skin1/css/morris.css">
    <link href="/skin1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/metismenu.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/icons.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/style.css" rel="stylesheet" type="text/css">
<link href="/SyntaxHighlighter/shCoreDefault.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/SyntaxHighlighter/shCore.js"></script>
<script type="text/javascript">
 SyntaxHighlighter.all();
</script>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
</head>
<body>
<!-- Begin page -->
		<div id="wrapper">
			<!-- Top Bar Start -->
			<div class="topbar">
				<!-- LOGO -->
				<div class="topbar-left">
					<a href="/" class="logo">
						<span class="logo-light">
                            <i class="mdi mdi-camera-control"></i>IDC笔记
                        </span>
						<span class="logo-sm">
                            <i class="mdi mdi-camera-control"></i>
                        </span>
					</a>
				</div>
				<nav class="navbar-custom">
					<ul class="navbar-right list-inline float-right mb-0">
						<!--<li class="dropdown notification-list list-inline-item d-none d-md-inline-block">
							<a class="nav-link waves-effect" href="#" id="btn-fullscreen">
								<i class="mdi mdi-arrow-expand-all noti-icon"></i>
							</a>
						</li>
						<li class="dropdown notification-list list-inline-item">
							<div class="dropdown notification-list nav-pro-img">
								<a class="dropdown-toggle nav-link arrow-none nav-user" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
									<img src="/skin1/picture/user-4.jpg" alt="user" class="rounded-circle">
								</a>
								<div class="dropdown-menu dropdown-menu-right profile-dropdown ">
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-account-circle"></i> Profile</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-wallet"></i> Wallet</a>
									<a class="dropdown-item d-block" href="#">
										<span class="badge badge-success float-right">11</span>
										<i class="mdi mdi-settings"></i> Settings</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-lock-open-outline"></i> Lock screen</a>
									<div class="dropdown-divider"></div>
									<a class="dropdown-item text-danger" href="#">
										<i class="mdi mdi-power text-danger"></i> Logout</a>
								</div>
							</div>
						</li>
						-->
					</ul>
					<ul class="list-inline menu-left mb-0">
						<li class="float-left">
							<button class="button-menu-mobile open-left waves-effect">
                            <i class="mdi mdi-menu"></i>
                        </button>
						</li>
						<li class="d-none d-md-inline-block">
							<form role="search" class="app-search">
								<div class="form-group mb-0">
									<input type="text" class="form-control" placeholder="Search..">
									<button type="submit"><i class="fa fa-search"></i></button>
								</div>
							</form>
						</li>
					</ul>
				</nav>
			</div>
<!-- ========== Left Sidebar Start ========== -->
<div class="left side-menu">
    <div class="slimscroll-menu" id="remove-scroll">
    <!--- Sidemenu -->
    <div id="sidebar-menu">
    <!-- Left Menu Start -->
    <ul class="metismenu" id="side-menu">
			<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP简介			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jianjie/1.html">PHP简介</a></li><li><a href="/php/jianjie/2.html">PHP用途</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP基本语法			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yufa/3.html">分离HTML</a></li><li><a href="/php/yufa/4.html">指令分隔符</a></li><li><a href="/php/yufa/5.html">PHP注释</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类型			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpleixing/6.html">PHP类型简介</a></li><li><a href="/php/phpleixing/7.html">PHP类型之布尔类型</a></li><li><a href="/php/phpleixing/8.html">PHP类型之整型</a></li><li><a href="/php/phpleixing/9.html">PHP类型之浮点型</a></li><li><a href="/php/phpleixing/10.html">PHP类型之字符串</a></li><li><a href="/php/phpleixing/11.html">PHP类型之数组</a></li><li><a href="/php/phpleixing/12.html">PHP类型之对象</a></li><li><a href="/php/phpleixing/13.html">PHP类型之资源类型</a></li><li><a href="/php/phpleixing/14.html">PHP类型之NULL</a></li><li><a href="/php/phpleixing/15.html">PHP类型之伪类型</a></li><li><a href="/php/phpleixing/16.html">PHP类型之类型判别</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP变量			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbianliang/17.html">PHP变量之基础</a></li><li><a href="/php/phpbianliang/18.html">PHP变量之预定义变量</a></li><li><a href="/php/phpbianliang/19.html">PHP变量之变量范围</a></li><li><a href="/php/phpbianliang/20.html">PHP变量之可变变量</a></li><li><a href="/php/phpbianliang/21.html">PHP变量之外部变量</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP运算符			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yunsuanfu/22.html">PHP运算符优先级</a></li><li><a href="/php/yunsuanfu/23.html">算术运算符</a></li><li><a href="/php/yunsuanfu/24.html">赋值运算符</a></li><li><a href="/php/yunsuanfu/25.html">位运算符</a></li><li><a href="/php/yunsuanfu/26.html">比较运算符</a></li><li><a href="/php/yunsuanfu/27.html">错误控制运算符</a></li><li><a href="/php/yunsuanfu/28.html">执行运算符</a></li><li><a href="/php/yunsuanfu/29.html">递增/递减运算符</a></li><li><a href="/php/yunsuanfu/30.html">逻辑运算符</a></li><li><a href="/php/yunsuanfu/31.html">字符串运算符</a></li><li><a href="/php/yunsuanfu/32.html">数组运算符</a></li><li><a href="/php/yunsuanfu/33.html">类型运算符</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP控制结构			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jiegou/34.html">PHP控制结构之if</a></li><li><a href="/php/jiegou/35.html">PHP控制结构之else</a></li><li><a href="/php/jiegou/36.html">PHP控制结构之elseif/else if</a></li><li><a href="/php/jiegou/37.html">PHP控制结构之替代语法</a></li><li><a href="/php/jiegou/38.html">PHP控制结构之while</a></li><li><a href="/php/jiegou/39.html">PHP控制结构之do-while</a></li><li><a href="/php/jiegou/40.html">PHP控制结构之for</a></li><li><a href="/php/jiegou/41.html">PHP控制结构之foreach</a></li><li><a href="/php/jiegou/42.html">PHP控制结构之break</a></li><li><a href="/php/jiegou/43.html">PHP控制结构之continue</a></li><li><a href="/php/jiegou/44.html">PHP控制结构之switch</a></li><li><a href="/php/jiegou/45.html">PHP控制结构之declare</a></li><li><a href="/php/jiegou/46.html">PHP控制结构之return</a></li><li><a href="/php/jiegou/47.html">PHP控制结构之require</a></li><li><a href="/php/jiegou/48.html">PHP控制结构之include</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/hanshu/52.html">用户自定义函数</a></li><li><a href="/php/hanshu/53.html">函数的参数</a></li><li><a href="/php/hanshu/54.html">返回值</a></li><li><a href="/php/hanshu/55.html">可变函数</a></li><li><a href="/php/hanshu/56.html">内部（内置）函数</a></li><li><a href="/php/hanshu/57.html">匿名函数</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类与对象			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpduixiang/58.html">类与对象前言</a></li><li><a href="/php/phpduixiang/59.html">基本概念</a></li><li><a href="/php/phpduixiang/60.html">属性</a></li><li><a href="/php/phpduixiang/61.html">类常量</a></li><li><a href="/php/phpduixiang/62.html">自动加载对象</a></li><li><a href="/php/phpduixiang/63.html">构造函数和析构函数</a></li><li><a href="/php/phpduixiang/64.html">访问控制</a></li><li><a href="/php/phpduixiang/65.html">对象继承</a></li><li><a href="/php/phpduixiang/66.html">Static关键字</a></li><li><a href="/php/phpduixiang/67.html">抽象类</a></li><li><a href="/php/phpduixiang/68.html">接口</a></li><li><a href="/php/phpduixiang/69.html">Traits</a></li><li><a href="/php/phpduixiang/70.html">重载</a></li><li><a href="/php/phpduixiang/71.html">对象迭代</a></li><li><a href="/php/phpduixiang/72.html">设计模式</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP异常处理			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yichang/81.html">异常处理</a></li><li><a href="/php/yichang/82.html">扩展PHP内置的异常处理类</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数库按分类			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpku/83.html">数组</a></li><li><a href="/php/phpku/84.html">Classes/Objects</a></li><li><a href="/php/phpku/85.html">Date/Time</a></li><li><a href="/php/phpku/86.html">Directories</a></li><li><a href="/php/phpku/87.html">错误处理</a></li><li><a href="/php/phpku/88.html">Program execution</a></li><li><a href="/php/phpku/89.html">Filesystem</a></li><li><a href="/php/phpku/90.html">Filter</a></li><li><a href="/php/phpku/91.html">Function Handling</a></li><li><a href="/php/phpku/92.html">PHP 选项/信息</a></li><li><a href="/php/phpku/93.html">Mail</a></li><li><a href="/php/phpku/94.html">Math</a></li><li><a href="/php/phpku/95.html">Misc.</a></li><li><a href="/php/phpku/96.html">Network</a></li><li><a href="/php/phpku/97.html">输出控制</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> php基础			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbiji/108377.html"></a></li><li><a href="/php/phpbiji/108376.html"></a></li><li><a href="/php/phpbiji/108380.html"></a></li><li><a href="/php/phpbiji/108379.html"></a></li><li><a href="/php/phpbiji/108378.html"></a></li><li><a href="/php/phpbiji/108381.html"></a></li><li><a href="/php/phpbiji/108382.html"></a></li><li><a href="/php/phpbiji/108384.html"></a></li><li><a href="/php/phpbiji/108383.html"></a></li><li><a href="/php/phpbiji/108385.html"></a></li><li><a href="/php/phpbiji/108386.html"></a></li><li><a href="/php/phpbiji/108388.html"></a></li><li><a href="/php/phpbiji/108387.html"></a></li><li><a href="/php/phpbiji/108389.html"></a></li><li><a href="/php/phpbiji/108391.html"></a></li>		</ul>
	</li>
		<li>
	    <a href="/php/biji/" class="waves-effect">
		    <i class="icon-share"></i>
		    <span>PHP笔记
		       	<span class="float-right menu-arrow">
		       	<i class="mdi mdi-chevron-right"></i>
		       	</span>
		    </span>
	    </a>
	</li>
	</ul>
</div>
<!-- Sidebar -->
<div class="clearfix"></div>
</div>
<!-- Sidebar -left -->
</div>
<!-- Left Sidebar End -->
<!-- Start right Content here -->
<div class="content-page">
	<div class="content">
		<div class="container-fluid">
			<div class="page-title-box">
				<div class="row align-items-center">
					<div class="col-sm-6">
						<h1 class="page-title">javascript使用smipleChart实现简单图表</h1>
					</div>
				</div>
				<!-- end row -->
			</div>
			<!-- end page-title -->
			<!-- START ROW -->
			<div class="panel panel-forbid">
				<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>内容摘要</div>
			    <div class="panel-content">
			    <span>支持 线性图 区域图 柱状图 饼图<br />
支持多浏览器<br />
用到的是svg  vml<br />
http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;<br />
<br />
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtm</span>                                     
		    	</div>
			    <div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>文章正文</div>
			    <div class="panel-content">
			    <span><p>支持 线性图 区域图 柱状图 饼图</p>
<p>支持多浏览器</p>
<p>用到的是svg&nbsp; vml</p>
<p><div class="codetitle"><span>http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;<br />
&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;<br />
&lt;head&gt;<br />
&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8" /&gt;<br />
&lt;title&gt;smipleChart&lt;/title&gt;<br />
&lt;style type="text/css"&gt;<br />
.cc{<br />
height:450px; width:800px; border:1px solid #999; position:relative; margin:20px;<br />
}<br />
&lt;/style&gt;<br />
&lt;/head&gt;<br />
&lt;body&gt;<br />
&lt;div id='t'&gt;&lt;/div&gt;<br />
&lt;div id='t1'&gt;&lt;/div&gt;<br />
&lt;div id='line' class="cc"&gt;&lt;/div&gt;<br />
&lt;div id='area' class="cc"&gt;&lt;/div&gt;<br />
&lt;div id='zhu' class="cc"&gt;&lt;/div&gt;<br />
&lt;div id='zhu1' class="cc" style="height:600px;"&gt;&lt;/div&gt;<br />
&lt;div id='segmentx' class="cc"&gt;&lt;/div&gt;<br />
&lt;div id='segmenty' class="cc"&gt;&lt;/div&gt;<br />
&lt;div id='pie' class="cc"&gt;&lt;/div&gt;<br />
&lt;div id='pies' class="cc"&gt;&lt;/div&gt;<br />
&lt;div id='vv' class="cc" style='height:300px; width:520px;'&gt;&lt;/div&gt;<br />
&lt;script type="text/javascript"&gt;<br />
(function(doc,undefined){<br />
&nbsp;var win&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = this,<br />
&nbsp;&nbsp;uuuid&nbsp;&nbsp;&nbsp;&nbsp; = -1,&nbsp;<br />
&nbsp;&nbsp;hasSVG&nbsp;&nbsp;&nbsp; = win.SVGAngle || doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure", "1.1"),<br />
&nbsp;&nbsp;isIE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = /msie/i.test(navigator.userAgent) && !win.opera,<br />
&nbsp;&nbsp;path&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = hasSVG&#63;'d':'path',<br />
&nbsp;&nbsp;seal&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = hasSVG&#63;'z':'e',<br />
&nbsp;&nbsp;math&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = Math,<br />
&nbsp;&nbsp;mathRound = math.round,<br />
&nbsp;&nbsp;mathFloor = math.floor,<br />
&nbsp;&nbsp;mathCeil&nbsp; = math.ceil,<br />
&nbsp;&nbsp;mathMax&nbsp;&nbsp; = math.max,<br />
&nbsp;&nbsp;mathMin&nbsp;&nbsp; = math.min,<br />
&nbsp;&nbsp;mathAbs&nbsp;&nbsp; = math.abs,<br />
&nbsp;&nbsp;mathCos&nbsp;&nbsp; = math.cos,<br />
&nbsp;&nbsp;mathSin&nbsp;&nbsp; = math.sin,&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;M&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = 'M',<br />
&nbsp;&nbsp;L&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = 'L';<br />
&nbsp;win.$$ = function(Id){<br />
&nbsp;&nbsp;return document.getElementById(Id);<br />
&nbsp;};<br />
&nbsp;win.extend = function(){<br />
&nbsp;&nbsp;var target = arguments[0] || {}, i = 1, length = arguments.length, deep = true, options;<br />
&nbsp;&nbsp;if ( typeof target === "boolean" ) {<br />
&nbsp;&nbsp;&nbsp;deep = target;<br />
&nbsp;&nbsp;&nbsp;target = arguments[1] || {};<br />
&nbsp;&nbsp;&nbsp;i = 2;<br />
&nbsp;&nbsp;}<br />
&nbsp;&nbsp;if ( typeof target !== "object" && Object.prototype.toString.call(target)!="[object Function]")<br />
&nbsp;&nbsp;&nbsp;target = {};<br />
&nbsp;&nbsp;for(;i&lt;length;i++){<br />
&nbsp;&nbsp;&nbsp;if ( (options = arguments[ i ]) != null )<br />
&nbsp;&nbsp;&nbsp;&nbsp;for(var name in options){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var src = target[ name ], copy = options[ name ];<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( target === copy )<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( deep && copy && typeof copy === "object" && !copy.nodeType ){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;target[ name ] = arguments.callee( deep, src || ( copy.length != null &#63; [ ] : { } ), copy );<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else if(copy !== undefined)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;target[ name ] = copy;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;<br />
&nbsp;&nbsp;}<br />
&nbsp;&nbsp;return target;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br />
&nbsp;};<br />
&nbsp;<br />
&nbsp;win.each =&nbsp; function ( object, callback, args ) {&nbsp; <br />
&nbsp;&nbsp;var name, i = 0, length = object.length;&nbsp; <br />
&nbsp;&nbsp;if ( args ) {<br />
&nbsp;&nbsp;&nbsp;args = Array.prototype.slice.call(arguments).slice(2);<br />
&nbsp;&nbsp;&nbsp;if ( length === undefined ) {&nbsp; <br />
&nbsp;&nbsp;&nbsp;&nbsp;for ( name in object )&nbsp; <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( callback.apply( object[ name ],[name,object[ name ]].concat(args) ) === false )&nbsp; <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;&nbsp; <br />
&nbsp;&nbsp;&nbsp;} else<br />
&nbsp;&nbsp;&nbsp;&nbsp;for ( ; i &lt; length; i++)&nbsp; <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( callback.apply( object[ i ],[i,object[ i ]].concat(args)) === false )&nbsp;&nbsp; //<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;&nbsp; <br />
&nbsp;&nbsp;} else {&nbsp;&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp;if ( length === undefined ) {&nbsp; <br />
&nbsp;&nbsp;&nbsp;&nbsp;for ( name in object )&nbsp; <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( callback.call( object[ name ], name, object[ name ] ) === false )&nbsp; <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;&nbsp; <br />
&nbsp;&nbsp;&nbsp;} else<br />
&nbsp;&nbsp;&nbsp;&nbsp;for ( var value = object[0];&nbsp; <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i &lt; length && callback.call( value, i, value ) !== false; value = object[++i] ){}&nbsp; <br />
&nbsp;&nbsp;}&nbsp; <br />
&nbsp;&nbsp;return object;&nbsp; <br />
&nbsp;}; <br />
&nbsp;<br />
&nbsp;win.contains = function(p,c){<br />
&nbsp;&nbsp;if(!p||!c)return false;<br />
&nbsp;&nbsp;if(p===c)return true;<br />
&nbsp;&nbsp;return isIE<br />
&nbsp;&nbsp;&nbsp;&#63; p.contains(c)<br />
&nbsp;&nbsp;&nbsp;: p.compareDocumentPosition(c)==20<br />
&nbsp;&nbsp;&nbsp;&nbsp;&#63; true<br />
&nbsp;&nbsp;&nbsp;&nbsp;: false;<br />
&nbsp;};<br />
//---------------------------------------------------------------<br />
&nbsp;function processPoint( x ){<br />
&nbsp;&nbsp;return isIE &#63; ~~x.toFixed(0) : ~~x.toFixed(0) + 0.5;<br />
&nbsp;};<br />
&nbsp;function calTextLen(txt, cssStr){<br />
&nbsp;&nbsp;var span = doc.createElement('span');<br />
&nbsp;&nbsp;if(cssStr){<br />
&nbsp;&nbsp;&nbsp;typeof cssStr === 'string' <br />
&nbsp;&nbsp;&nbsp;&nbsp;&#63; span.style.cssText = cssStr <br />
&nbsp;&nbsp;&nbsp;&nbsp;: extend(span.style,cssStr);<br />
&nbsp;&nbsp;}else{<br />
&nbsp;&nbsp;&nbsp;extend(span.style,{<br />
&nbsp;&nbsp;&nbsp;&nbsp;fontSiz&nbsp;&nbsp;&nbsp; : '12px',<br />
&nbsp;&nbsp;&nbsp;&nbsp;fontFamily : '"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif'&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;});<br />
&nbsp;&nbsp;}<br />
&nbsp;&nbsp;span.innerHTML = txt || '';&nbsp;<br />
&nbsp;&nbsp;span.style.visibility = 'hidden'; <br />
&nbsp;&nbsp;doc.body.appendChild(span);&nbsp;&nbsp;<br />
&nbsp;&nbsp;var width&nbsp; = span.offsetWidth,<br />
&nbsp;&nbsp;&nbsp;height = span.offsetHeight;<br />
&nbsp;&nbsp;doc.body.removeChild(span);<br />
&nbsp;&nbsp;return {w:width,h:height};<br />
&nbsp;};<br />
&nbsp;function angle(r,center,o,jingdu){<br />
&nbsp;&nbsp;var hudu = Math.PI*2*(o/360),<br />
&nbsp;&nbsp;&nbsp;x = center[0]+ r*Math.sin(hudu),<br />
&nbsp;&nbsp;&nbsp;y = center[1]+ -r*Math.cos(hudu);<br />
&nbsp;&nbsp;return [x.toFixed(jingdu||0),y.toFixed(jingdu||0)];&nbsp;&nbsp; <br />
&nbsp;}<br />
&nbsp;function xx(a,b,lineNum){<br />
&nbsp;&nbsp;var t&nbsp;&nbsp; = 1000,<br />
&nbsp;&nbsp;&nbsp;stf = ((b*t-a*t)/lineNum)/t,<br />
&nbsp;&nbsp;&nbsp;arr = [1,2,2.5,5,10],<br />
&nbsp;&nbsp;&nbsp;c&nbsp;&nbsp; = 1,<br />
&nbsp;&nbsp;&nbsp;v;<br />
//&nbsp;&nbsp;&nbsp; 分割线的基数是&nbsp;[1,2,2.5,5,10] 这个步骤是查找 间隔 属于哪个范围<br />
&nbsp;&nbsp;if(stf&lt;arr[0]){<br />
&nbsp;&nbsp;&nbsp;while( stf&lt;arr[0] ){<br />
&nbsp;&nbsp;&nbsp;&nbsp;c = c*10;<br />
&nbsp;&nbsp;&nbsp;&nbsp;arr[0]=arr[0]/c;&nbsp;<br />
&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;each([1,2,2.5,5,10],function(i,o){<br />
&nbsp;&nbsp;&nbsp;&nbsp;arr[i]= o/c;<br />
&nbsp;&nbsp;&nbsp;});<br />
&nbsp;&nbsp;}else if(stf&gt;arr[4]){<br />
&nbsp;&nbsp;&nbsp;while( stf&gt;arr[4] ){<br />
&nbsp;&nbsp;&nbsp;&nbsp;c = c*10;<br />
&nbsp;&nbsp;&nbsp;&nbsp;arr[4] = arr[4]*c;<br />
&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;each([1,2,2.5,5,10],function(i,o){<br />
&nbsp;&nbsp;&nbsp;arr[i]= o*c;<br />
&nbsp;&nbsp;&nbsp;}); <br />
&nbsp;&nbsp;}<br />
&nbsp;<br />
//上面找到间隔后 找到间隔中最接近的一个&nbsp;<br />
&nbsp;&nbsp;each(arr,function(i,o){<br />
&nbsp;&nbsp;&nbsp;if(stf&lt;=o){<br />
&nbsp;&nbsp;&nbsp;&nbsp;v = o;<br />
&nbsp;&nbsp;&nbsp;&nbsp;return false;<br />
&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;}); <br />
&nbsp;&nbsp;var bj&nbsp; = (mathAbs(a)*t)/(v*t),<br />
&nbsp;&nbsp;&nbsp;ba&nbsp; = 0,<br />
&nbsp;&nbsp;&nbsp;isZ = bj!==parseInt(bj);<br />
&nbsp;&nbsp;isZ<br />
&nbsp;&nbsp;&nbsp;&&a&gt;0<br />
&nbsp;&nbsp;&nbsp;&nbsp;&#63; ba = -a%v*t<br />
&nbsp;&nbsp;&nbsp;&nbsp;: ba = (mathAbs(a)%v-v)*t;&nbsp;&nbsp;<br />
&nbsp;&nbsp;<br />
&nbsp;&nbsp;<br />
&nbsp;&nbsp;a = (a*t+ba)/t;<br />
&nbsp;&nbsp;b = (b*t+(b%v===0&#63;0:(v-b%v))*t)/t;<br />
&nbsp;&nbsp;<br />
&nbsp;&nbsp;//看看还剩几条线没有画<br />
&nbsp;&nbsp;var num = Math.max(0,lineNum - Math.round((b-a)/v));<br />
&nbsp;&nbsp;if(a&gt;=0){<br />
&nbsp;&nbsp;<br />
&nbsp;&nbsp;//坐标比较整数化&nbsp;<br />
&nbsp;&nbsp;&nbsp;if(a!=0&&num!=0&&a%10!==0){<br />
&nbsp;&nbsp;&nbsp;&nbsp;while(a!=0&&num!=0){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a = (a*t-v*t)/t;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num--;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if((a*t-v*num*t)/10000&gt;0&&a%10===0)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;if(num!=0){<br />
&nbsp;&nbsp;&nbsp;&nbsp;while(num!==0){<br />
&nbsp;&nbsp;&nbsp;&nbsp;b = (b*t+v*t)/t<br />
&nbsp;&nbsp;&nbsp;&nbsp;num--; <br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;<br />
&nbsp;&nbsp;}else{<br />
&nbsp;&nbsp;&nbsp;//坐标比较整数化&nbsp;<br />
&nbsp;&nbsp;&nbsp;if(b&lt;0&&num!=0){<br />
&nbsp;&nbsp;&nbsp;&nbsp;while(b!=0&&num!=0&&b%10!==0){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b = (b*t+v*t)/t;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num--;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if((b*t+v*num*t)/t&lt;0&&b%10===0)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break; <br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;if(num!=0){<br />
&nbsp;&nbsp;&nbsp;&nbsp;while(num!==0){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a = (a*t-v*t)/t<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num--; <br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;}<br />
&nbsp;&nbsp;return {min:a,max:b,stf:v};<br />
&nbsp;}&nbsp;<br />
//---------------------------------------------------------------------------------------------------------------<br />
//对svg vml元素的一些创建 修改属性 样式 删除 ==&nbsp; 一些的操作<br />
&nbsp;win.vector = function(){};<br />
&nbsp;vector.prototype = {<br />
&nbsp;&nbsp;$c : function(graphic,nodeName){<br />
&nbsp;&nbsp;&nbsp;this.element = this[0] = doc.createElementNS('http://www.w3.org/2000/svg', nodeName);&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;this.graphic = graphic;<br />
&nbsp;&nbsp;&nbsp;return this;<br />
&nbsp;&nbsp;},<br />
&nbsp;&nbsp;attr:&nbsp;function(hash,val){<br />
&nbsp;&nbsp;&nbsp;var elem&nbsp;&nbsp;&nbsp; = this.element,<br />
&nbsp;&nbsp;&nbsp;&nbsp;key,<br />
&nbsp;&nbsp;&nbsp;&nbsp;value;<br />
&nbsp;&nbsp;&nbsp;if(typeof hash === 'string'){<br />
&nbsp;&nbsp;&nbsp;&nbsp;if(val === undefined){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return elem.getAttribute(hash);<br />
&nbsp;&nbsp;&nbsp;&nbsp;}else{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elem.setAttribute(hash, val);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return this;<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;} else {<br />
&nbsp;&nbsp;&nbsp;&nbsp;for(key in hash){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value = hash[key];<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(key === path){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value && value.join<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&&(value = value.join(' '));<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/(NaN|&nbsp; |^$)/.test(value)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&&(value = 'M 0 0');<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elem.setAttribute(key, value)&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;return this;<br />
&nbsp;&nbsp;},<br />
&nbsp;&nbsp;css: &nbsp;function(hash){<br />
&nbsp;&nbsp;&nbsp;for(var key in hash){<br />
&nbsp;&nbsp;&nbsp;&nbsp;isIE && key == "opacity"<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#63; this[0].style['filter'] = "alpha(opacity="+ hash[key] * 100+")"<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: this[0].style[key] = hash[key];<br />
&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;return this;<br />
&nbsp;&nbsp;},<br />
&nbsp;&nbsp;on: function(eventName, handler){<br />
&nbsp;&nbsp;&nbsp;var self = this;<br />
&nbsp;&nbsp;&nbsp;/*this.element.addEventListener(eventName,function(){<br />
&nbsp;&nbsp;&nbsp;&nbsp;handler.call(self)<br />
&nbsp;&nbsp;&nbsp;},false);*/<br />
&nbsp;&nbsp;&nbsp;this.element['on' + eventName] = function(e){<br />
&nbsp;&nbsp;&nbsp;&nbsp;e = e || win.event;<br />
&nbsp;&nbsp;&nbsp;&nbsp;handler.call(self,e);<br />
&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;return this;<br />
&nbsp;&nbsp;},<br />
&nbsp;&nbsp;appendTo:&nbsp;function(parent){<br />
&nbsp;&nbsp;&nbsp;if(parent){<br />
&nbsp;&nbsp;&nbsp;&nbsp;parent.element<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#63; parent.element.appendChild(this.element)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: parent.appendChild(this.element)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;} else {<br />
&nbsp;&nbsp;&nbsp;&nbsp;this.graphic.container.appendChild(this.element);<br />
&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;return this;<br />
&nbsp;&nbsp;},<br />
&nbsp;&nbsp;addText: function(str){<br />
&nbsp;&nbsp;&nbsp;var elem = this.element;<br />
&nbsp;&nbsp;&nbsp;if(elem.nodeName === 'text'){<br />
&nbsp;&nbsp;&nbsp;&nbsp;elem.appendChild(doc.createTextNode(str+''));<br />
&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;return this;<br />
&nbsp;&nbsp;},<br />
&nbsp;&nbsp;setOpacity : function(v){<br />
&nbsp;&nbsp;&nbsp;this.attr('fill-opacity',v);<br />
&nbsp;&nbsp;&nbsp;return this;<br />
&nbsp;&nbsp;},<br />
&nbsp;&nbsp;setSize : function(v){<br />
&nbsp;&nbsp;&nbsp;this[0].nodeName==='circle'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&#63; this.attr('r',4+(v===0&#63;0:2))<br />
&nbsp;&nbsp;&nbsp;&nbsp;: this.attr({'stroke-width':v});<br />
&nbsp;&nbsp;&nbsp;return this;<br />
&nbsp;&nbsp;},<br />
&nbsp;&nbsp;toFront: function() {<br />
&nbsp;&nbsp;&nbsp;this[0].parentNode.appendChild(this[0]);<br />
&nbsp;&nbsp;&nbsp;return this;<br />
&nbsp;&nbsp;},&nbsp;&nbsp;<br />
&nbsp;&nbsp;show:&nbsp;function(){<br />
&nbsp;&nbsp;&nbsp;this[0].style.display = 'block';<br />
&nbsp;&nbsp;&nbsp;return this;<br />
&nbsp;&nbsp;},<br />
&nbsp;&nbsp;hide:&nbsp;function(){<br />
&nbsp;&nbsp;&nbsp;this[0].style.display = 'none';<br />
&nbsp;&nbsp;&nbsp;return this;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;},<br />
&nbsp;&nbsp;destroy : function(){<br />
&nbsp;&nbsp;&nbsp;//销毁节点......................<br />
&nbsp;&nbsp;&nbsp;var node = this[0] || this;<br />
&nbsp;&nbsp;&nbsp;node.onmouseover = node.onmouseout = node.onclick = null;<br />
&nbsp;&nbsp;&nbsp;node.parentNode<br />
&nbsp;&nbsp;&nbsp;&nbsp;&&node.parentNode.removeChild(node);<br />
&nbsp;&nbsp;&nbsp;return this;<br />
&nbsp;&nbsp;}<br />
&nbsp;};<br />
//---------------------------------------------------------------------------------------------------------------<br />
//---------------------------------------------------------------------------------------------------<br />
//如果是vml修改其中的一些方法&nbsp;<br />
&nbsp;if(!hasSVG){<br />
//-------------创建vml环境-----------------&nbsp;<br />
&nbsp;&nbsp;doc.createStyleSheet().addRule(".vml", "behavior:url(#default#VML);display:inline-block;position:absolute;left:0px;top:0px");<br />
&nbsp;&nbsp;!doc.namespaces.vml && !+"\v1";<br />
&nbsp;&nbsp;doc.namespaces.add("vml", "urn:schemas-microsoft-com:vml");&nbsp;&nbsp;<br />
&nbsp;&nbsp;<br />
//-------------修改一些方法-----------------<br />
&nbsp;&nbsp;extend(vector.prototype,{<br />
&nbsp;&nbsp;&nbsp;$c : function(graphic,nodeName){<br />
&nbsp;&nbsp;&nbsp;&nbsp;var name = nodeName || 'shape';&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;this.element= this[0] = (name === 'div' || name === 'span')<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#63; doc.createElement(name)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: doc.createElement('&lt;vml:'+name+' class="vml"&gt;');&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;this.graphic = graphic;<br />
&nbsp;&nbsp;&nbsp;&nbsp;return this;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;},<br />
&nbsp;&nbsp;&nbsp;/*on : function(eventName, handler){<br />
&nbsp;&nbsp;&nbsp;&nbsp;var self = this;<br />
&nbsp;&nbsp;&nbsp;&nbsp;this.element.attachEvent("on" + eventName,function(){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handler.call(self);<br />
&nbsp;&nbsp;&nbsp;&nbsp;});<br />
&nbsp;&nbsp;&nbsp;&nbsp;return this;<br />
&nbsp;&nbsp;&nbsp;},*/<br />
&nbsp;&nbsp;&nbsp;addText : function(txt){<br />
&nbsp;&nbsp;&nbsp;&nbsp;this[0].innerHTML = txt || '';<br />
&nbsp;&nbsp;&nbsp;&nbsp;return this;<br />
&nbsp;&nbsp;&nbsp;},<br />
&nbsp;&nbsp;&nbsp;setSize : function(v){<br />
&nbsp;&nbsp;&nbsp;&nbsp;this[0].strokeWeight = v;<br />
&nbsp;&nbsp;&nbsp;&nbsp;return this;<br />
&nbsp;&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;setOpacity : function(v){<br />
&nbsp;&nbsp;&nbsp;&nbsp;this.opacity.opacity=v;<br />
&nbsp;&nbsp;&nbsp;&nbsp;return this;<br />
&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;<br />
&nbsp;&nbsp;});<br />
&nbsp;}<br />
//---------------------------------------------------------------------------------------------------<br />
//画图类 <br />
//------------------------------------------------------------<br />
&nbsp;win.smipleChart = function(){<br />
&nbsp;&nbsp;this.init.apply(this,arguments);<br />
&nbsp;};<br />
&nbsp;smipleChart.list&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = [];<br />
&nbsp;smipleChart.timer&nbsp;&nbsp;&nbsp;&nbsp; = null;<br />
&nbsp;smipleChart.lazyLoad&nbsp; = function(id){<br />
&nbsp;&nbsp;id&nbsp; = id || '0' <br />
&nbsp;&nbsp;smipleChart.list[id]<br />
&nbsp;&nbsp;&nbsp;&&smipleChart.list[id].loadMe();<br />
&nbsp;};<br />
&nbsp;smipleChart.prototype = {<br />
&nbsp;&nbsp;options : {<br />
&nbsp;&nbsp;&nbsp;charts : {<br />
&nbsp;&nbsp;&nbsp;&nbsp;paddingRight : 20,<br />
&nbsp;&nbsp;&nbsp;&nbsp;radius : 200,<br />
&nbsp;&nbsp;&nbsp;&nbsp;style&nbsp; : {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fontFamily : '"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fontSize&nbsp;&nbsp; : '12px',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;background : '#FFFFFF'<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;},<br />
&nbsp;&nbsp;&nbsp;title : {<br />
&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp; : '',<br />
&nbsp;&nbsp;&nbsp;&nbsp;y&nbsp;&nbsp;&nbsp;&nbsp; : 10,<br />
&nbsp;&nbsp;&nbsp;&nbsp;style : {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fontFamily:'Verdana,Arial,Helvetica,sans-serif',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fontSize:'16px',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fontWeight:'bold'<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;},<br />
&nbsp;&nbsp;&nbsp;subTitle : {<br />
&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;: '',<br />
&nbsp;&nbsp;&nbsp;&nbsp;y&nbsp;&nbsp;: 30,<br />
&nbsp;&nbsp;&nbsp;&nbsp;style&nbsp;&nbsp; : {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fontFamily:'Verdana,Arial,Helvetica,sans-serif',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fontSize:'12px',&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;color: '#111'&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;},<br />
&nbsp;&nbsp;&nbsp;yUnit : {<br />
&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp; : '',<br />
&nbsp;&nbsp;&nbsp;&nbsp;style : {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fontFamily:'Verdana,Arial,Helvetica,sans-serif',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fontSize:'12px',&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;color: '#111'<br />
&nbsp;&nbsp;&nbsp;&nbsp;},<br />
&nbsp;&nbsp;&nbsp;&nbsp;lineNum :10<br />
&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;},<br />
&nbsp;&nbsp;init : function(container,options){<br />
&nbsp;&nbsp;&nbsp;clearTimeout(smipleChart.timer)<br />
&nbsp;&nbsp;&nbsp;var self&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = this;<br />
&nbsp;&nbsp;&nbsp;this.width&nbsp;&nbsp;&nbsp; = container.offsetWidth;<br />
&nbsp;&nbsp;&nbsp;this.height&nbsp;&nbsp; = container.offsetHeight;<br />
&nbsp;&nbsp;&nbsp;this.currList = {};<br />
&nbsp;&nbsp;&nbsp;this.uuuid&nbsp;&nbsp;&nbsp; = ++uuuid; <br />
&nbsp;&nbsp;&nbsp;this.timer&nbsp;&nbsp;&nbsp; = null;<br />
&nbsp;&nbsp;&nbsp;//主要画图组的集合 形式<br />
&nbsp;&nbsp;&nbsp;//{id : {dom:xx,show:true}}<br />
&nbsp;&nbsp;&nbsp;this.mainGroup = {};<br />
&nbsp;&nbsp;&nbsp;//分段的时候要用到的&nbsp; 知道哪些是隐藏了的&nbsp; 因为要涉及到重绘<br />
&nbsp;&nbsp;&nbsp;this.hideList&nbsp; = {};<br />
&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;//svg 里面画图 必须有一个svg标签 vml就用div了<br />
&nbsp;&nbsp;&nbsp;this.container = hasSVG <br />
&nbsp;&nbsp;&nbsp;&nbsp;&#63; new vector().$c(1,'svg')<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.attr({<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xmlns&nbsp;&nbsp; : 'http://www.w3.org/2000/svg',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version : '1.1',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width : this.width,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;height : this.height<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.css({fontSize : '12px'})<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.appendTo(container)<br />
&nbsp;&nbsp;&nbsp;&nbsp;: new vector().$c(1,'div')<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.css({<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fontSize : '12px',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width&nbsp;&nbsp;&nbsp; : this.width +'px',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;height&nbsp;&nbsp; : this.height+'px'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.appendTo(container);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;this.loading = container.appendChild(doc.createElement('img'));<br />
&nbsp;&nbsp;&nbsp;this.loading.setAttribute('src','http://images.cnblogs.com/cnblogs_com/wtcsy/192373/r_loading.gif');<br />
&nbsp;&nbsp;&nbsp;this.loading.style.position = 'absolute';<br />
&nbsp;&nbsp;&nbsp;this.loading.style.top&nbsp; = container.offsetHeight/2- this.loading.offsetHeight/2+'px';<br />
&nbsp;&nbsp;&nbsp;this.loading.style.left = container.offsetWidth/2- this.loading.offsetWidth/2+'px';<br />
&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;var c&nbsp;&nbsp;&nbsp;&nbsp; = extend(true,{},this.options),<br />
&nbsp;&nbsp;&nbsp;&nbsp;opts&nbsp; = this.opts = extend(true,c,options),<br />
&nbsp;&nbsp;&nbsp;&nbsp;style = extend(opts.charts.style,{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width&nbsp; : this.width,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;height : this.height<br />
&nbsp;&nbsp;&nbsp;&nbsp;});<br />
&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;smipleChart.list[this.uuuid] = this;&nbsp;<br />
&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;smipleChart.timer = setTimeout(function(){<br />
&nbsp;&nbsp;&nbsp;&nbsp;smipleChart.lazyLoad();<br />
&nbsp;&nbsp;&nbsp;},200);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;},<br />
&nbsp;&nbsp;loadMe : function(){<br />
&nbsp;&nbsp;&nbsp;var opts&nbsp; = this.opts,<br />
&nbsp;&nbsp;&nbsp;&nbsp;self&nbsp; = this,<br />
&nbsp;&nbsp;&nbsp;&nbsp;type&nbsp; = opts.charts.type;<br />
&nbsp;&nbsp;&nbsp;this.container = this.container<br />
&nbsp;&nbsp;&nbsp;&nbsp;.on('mouseout',function(e){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var elem = e.relatedTarget || e.toElement;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!contains(this[0],elem)){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.hideTooltip();<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.currList.dot<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&&self.currList.dot.setSize(0);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.currList.line<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&&self.currList.line.setSize(1.5);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.currList = {};&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;})<br />
&nbsp;&nbsp;&nbsp;&nbsp;.css({display:'none'})[0];<br />
&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;//计算绘画盘子的时候需要的一些参数<br />
&nbsp;&nbsp;&nbsp;this.getDrawArea()<br />
&nbsp;&nbsp;&nbsp;&nbsp;.createTooltip()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //创建提示信息的框框<br />
&nbsp;&nbsp;&nbsp;&nbsp;.drawTitle()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //画标题<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //画盘子<br />
&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;'line,area,pie'.indexOf(type)&gt;=0<br />
&nbsp;&nbsp;&nbsp;&nbsp;&&(opts.charts.panel = 'x');<br />
&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;' pie,pies'.indexOf(type)&lt;0<br />
&nbsp;&nbsp;&nbsp;&nbsp;&&this.drawPanel();<br />
&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;this.drawLegend(opts.legend.type);&nbsp; //画色块条<br />
&nbsp;&nbsp;&nbsp;var type = {<br />
&nbsp;&nbsp;&nbsp;&nbsp;line&nbsp;&nbsp;&nbsp; : 'drawLine',<br />
&nbsp;&nbsp;&nbsp;&nbsp;area&nbsp;&nbsp;&nbsp; : 'drawArea',<br />
&nbsp;&nbsp;&nbsp;&nbsp;columns : 'drawColumns',<br />
&nbsp;&nbsp;&nbsp;&nbsp;pie&nbsp;&nbsp;&nbsp;&nbsp; : 'drawPie',<br />
&nbsp;&nbsp;&nbsp;&nbsp;pies&nbsp;&nbsp;&nbsp; : 'drawPies',<br />
&nbsp;&nbsp;&nbsp;&nbsp;segment : 'drawSegment'<br />
&nbsp;&nbsp;&nbsp;}[opts.charts.type];<br />
&nbsp;&nbsp;&nbsp;//开始画图..............<br />
&nbsp;&nbsp;&nbsp;this[type]();<br />
&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;//删除节点<br />
&nbsp;&nbsp;&nbsp;this.loading.parentNode.removeChild(this.loading);<br />
&nbsp;&nbsp;&nbsp;//断开引用<br />
&nbsp;&nbsp;&nbsp;this.loading = null;<br />
&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;this.container.style.display = '';<br />
&nbsp;&nbsp;&nbsp;setTimeout(function(){<br />
&nbsp;&nbsp;&nbsp;&nbsp;smipleChart.lazyLoad((++self.uuuid)+'');<br />
&nbsp;&nbsp;&nbsp;},10)<br />
&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;},<br />
&nbsp;&nbsp;createElement : function(nodeName){<br />
&nbsp;&nbsp;&nbsp;return new vector().$c(this,nodeName);<br />
&nbsp;&nbsp;},<br />
&nbsp;&nbsp;group: function(name){<br />
&nbsp;&nbsp;&nbsp;return this.createElement(hasSVG&#63;'g':'div').attr('mark',name);<br />
&nbsp;&nbsp;},<br />
&nbsp;&nbsp;getDrawArea : function(){<br />
&nbsp;&nbsp;&nbsp;var opts&nbsp;&nbsp;&nbsp;&nbsp; = this.opts,<br />
&nbsp;&nbsp;&nbsp;&nbsp;width&nbsp;&nbsp;&nbsp; = this.width,<br />
&nbsp;&nbsp;&nbsp;&nbsp;height&nbsp;&nbsp; = this.height,<br />
&nbsp;&nbsp;&nbsp;&nbsp;title&nbsp;&nbsp;&nbsp; = opts.title,<br />
&nbsp;&nbsp;&nbsp;&nbsp;subTitle = opts.subTitle,<br />
&nbsp;&nbsp;&nbsp;&nbsp;area&nbsp;&nbsp;&nbsp;&nbsp; = {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 去掉坐标轴左边的刻度文本宽度(预估) 80为定值 左边只留80的间距<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;areaWidth&nbsp; : width - 80,&nbsp; <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 去掉坐标轴底下的文本和标线的高度<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;areaHeight : height - 40,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//原点的X位置&nbsp; 下面会计算到<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;startX : 0,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//原点的Y位置&nbsp; 下面会计算到<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;startY : 0,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//中心的x坐标 画饼图的时候需要知道圆心的位置<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;centerX: 0,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//中心的y坐标 画饼图的时候需要知道圆心的位置<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;centerY: 0<br />
&nbsp;&nbsp;&nbsp;&nbsp;};<br />
&nbsp;&nbsp;&nbsp;//如果主标题存在 减去主标题的高度 否则 减去10的高<br />
&nbsp;&nbsp;&nbsp;area.areaHeight -=(title.text !== '')<br />
&nbsp;&nbsp;&nbsp;&nbsp;&#63; title.y<br />
&nbsp;&nbsp;&nbsp;&nbsp;: 10;<br />
&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;// 去掉副标题高度<br />
&nbsp;&nbsp;&nbsp;area.areaHeight -=(subTitle.text !== '')<br />
&nbsp;&nbsp;&nbsp;&nbsp;&#63; subTitle.y<br />
&nbsp;&nbsp;&nbsp;&nbsp;: 10<br />
&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;area.startX = 80;<br />
&nbsp;&nbsp;&nbsp;area.startY = height - 40;<br />
&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;//圆心的位置<br />
&nbsp;&nbsp;&nbsp;area.centerX = width / 2;<br />
&nbsp;&nbsp;&nbsp;area.centerY = height / 2;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;//右边留一些空隙<br />
&nbsp;&nbsp;&nbsp;area.areaWidth -=20;<br />
&nbsp;&nbsp;&nbsp;//上边也留一些间距<br />
&nbsp;&nbsp;&nbsp;area.areaHeight -=15;<br />
&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;opts.area = area;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;return this;<br />
&nbsp;&nbsp;},<br />
&nbsp;&nbsp;drawTitle : function(){&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;var opts&nbsp;&nbsp; = this.opts,<br />
&nbsp;&nbsp;&nbsp;&nbsp;self&nbsp;&nbsp; = this,<br />
&nbsp;&nbsp;&nbsp;&nbsp;arr&nbsp;&nbsp;&nbsp; = [opts.title,opts.subTitle,opts.yUnit],<br />
&nbsp;&nbsp;&nbsp;&nbsp;//3个标题坐标的位置的基本参数<br />
&nbsp;&nbsp;&nbsp;&nbsp;config = [<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x : this.width / 2,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y : opts.title.y<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x : this.width / 2,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y : opts.subTitle.y&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x : opts.yUnit.x,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y : this.height / 2 - 20&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;],<br />
&nbsp;&nbsp;&nbsp;&nbsp;tpanel = this.group('title')<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.appendTo();<br />
&nbsp;&nbsp;&nbsp;each(arr,function(i,title){<br />
&nbsp;&nbsp;&nbsp;&nbsp;var text = title.text;<br />
&nbsp;&nbsp;&nbsp;&nbsp;if(text){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var elem = self.baseDraw.span(self,{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'text-anchor':'left',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x : mathMax(config[i].x - calTextLen(text,title.style).w/2,10),<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y : config[i].y<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},calTextLen(title.text,title.style).h)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.css(title.style)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.addText(text)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.appendTo(tpanel);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//如果为2的时候 就说明是副标题&nbsp; 将它竖过来<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(i===2){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hasSVG<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#63; elem.attr({transform : 'rotate(270, '+(opts.yUnit.x+10)+', ' + self.height / 2 + ')'})<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: (elem.element.style.filter ='progid:DXImageTransform.Microsoft.BasicImage(rotation=3)')&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<br />
&nbsp;&nbsp;&nbsp;});&nbsp;<br />
&nbsp;&nbsp;&nbsp;return this;<br />
&nbsp;&nbsp;},<br />
//画盘子&nbsp; 比较麻烦<br />
&nbsp;&nbsp;drawPanel : function(type){<br />
&nbsp;&nbsp;&nbsp;var&nbsp;opts = this.opts,<br />
&nbsp;&nbsp;&nbsp;&nbsp;self = this,<br />
&nbsp;&nbsp;&nbsp;&nbsp;area = opts.area,<br />
&nbsp;&nbsp;&nbsp;&nbsp;chartsType = opts.charts.type,<br />
&nbsp;&nbsp;&nbsp;&nbsp;isSegment&nbsp; = chartsType === 'segment',<br />
&nbsp;&nbsp;&nbsp;&nbsp;//盘子的类型 是横盘子 还是纵盘子<br />
&nbsp;&nbsp;&nbsp;&nbsp;type = opts.charts.panel || 'x';<br />
&nbsp;&nbsp;&nbsp;// 底板<br />
&nbsp;&nbsp;&nbsp;var drawAreaWidth&nbsp; = area.areaWidth,<br />
&nbsp;&nbsp;&nbsp;&nbsp;drawAreaHeight = area.areaHeight, <br />
&nbsp;&nbsp;&nbsp;&nbsp;//原点的坐标<br />
&nbsp;&nbsp;&nbsp;&nbsp;startX = area.startX,<br />
&nbsp;&nbsp;&nbsp;&nbsp;startY = area.startY;<br />
&nbsp;&nbsp;&nbsp;var allData&nbsp; = [],<br />
&nbsp;&nbsp;&nbsp;&nbsp;minValue = 0,<br />
&nbsp;&nbsp;&nbsp;&nbsp;maxValue = 10,<br />
&nbsp;&nbsp;&nbsp;&nbsp;//线的条数 只能在1到10之间<br />
&nbsp;&nbsp;&nbsp;&nbsp;lineNum&nbsp; = mathMin(10,mathMax(opts.yUnit.lineNum,1)),<br />
&nbsp;&nbsp;&nbsp;&nbsp;staff;<br />
&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;//组合所有的数据<br />
&nbsp;&nbsp;&nbsp;each(opts.chartData,function(i,o){<br />
&nbsp;&nbsp;&nbsp;&nbsp;// 如果是柱状图 是对所有的数据求和<br />
&nbsp;&nbsp;&nbsp;&nbsp;isSegment<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#63; each(o.data,function(j,d){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;allData[j]<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#63; allData[j] = allData[j] + (~~d)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: allData[j] = ~~d;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: allData = allData.concat(o.data)<br />
&nbsp;&nbsp;&nbsp;});<br />
&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;//给所有的数据排序&nbsp; 为了下面求最大值 最小值<br />
&nbsp;&nbsp;&nbsp;allData.sort(function(a,b){return a-b});<br />
&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;//求出最大值 最小值<br />
&nbsp;&nbsp;&nbsp;maxValue = allData[allData.length - 1];<br />
&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;each(allData,function(i,o){<br />
&nbsp;&nbsp;&nbsp;&nbsp;if(o!==null){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;minValue = o;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return false;<br />
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;});&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;//主盘子容器<br />
&nbsp;&nbsp;&nbsp;var panel = this.group('panel').appendTo();<br />
&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;var result = xx(minValue,maxValue,lineNum),<br />
&nbsp;&nbsp;&nbsp;&nbsp;min&nbsp;&nbsp;&nbsp; = result.min,<br />
&nbsp;&nbsp;&nbsp;&nbsp;max&nbsp;&nbsp;&nbsp; = result.max,<br />
&nbsp;&nbsp;&nbsp;&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = result.stf;<br />
&nbsp;&nbsp;&nbsp;isSegment<br />
&nbsp;&nbsp;&nbsp;&nbsp;&&(min = 0);&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;//表示画的是横坐标 或者是双坐标<br />
&nbsp;&nbsp;&nbsp;if(type.toLowerCase()==='x'){<br />
&nbsp;&nbsp;&nbsp;&nbsp;//横坐标单位间隔<br />
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;xPices = drawAreaWidth / opts.xUnit.units.length,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//单位间隔的中心点<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;offset = xPices / 2,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yPices = drawAreaHeight / lineNum;<br />
&nbsp;&nbsp;&nbsp;<br />
&nbsp;//--------------------------------画横向的点和文字---------------------------------------------------------<br />
&nbsp;&nbsp;&nbsp;&nbsp;var y = hasSVG&#63;5:10,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t = 1000,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;span;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;each(opts.xUnit.units,function(i,d){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.baseDraw.path(self,{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;border&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 1,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;borderColor : '#C0C0C0',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isfill&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : false,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;path&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : [<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;M, <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;processPoint(startX + (i * xPices)), <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;processPoint(startY), <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;L,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;processPoint(startX + (i*xPices)),<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;processPoint(startY + 5)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;appendTo(panel);<br />
&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;span = self.baseDraw.span(self,{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;&nbsp; : startX + offset + (i * xPices),<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y&nbsp;&nbsp; : startY+y,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'text-anchor':'middle'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.css({<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fontFamily : 'Verdana,Arial,Helvetica,sans-serif',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fontSize&nbsp;&nbsp; : '12px'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.addText(opts.xUnit.units[i])<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.appendTo(panel)[0];<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!hasSVG<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&&(span.style.left = parseInt(span.style.left) - span.offsetWidth/2+'px');<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;});<br />
//--------------------------------画纵向的点和文字-----------------------------------------------------------------------&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;for(i=0;i&lt;=lineNum;i++){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.baseDraw.path(self,{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;border&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 1,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;borderColor : '#C0C0C0',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isfill&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : false,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;path&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : [M, startX, processPoint(startY - (i * yPices)), L, processPoint(startX + drawAreaWidth), processPoint(startY - (i *yPices))]<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.css({zIndex:-10})&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.appendTo(panel);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var span = self.baseDraw.span(self,{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x : startX - 15,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y : startY - i * yPices-calTextLen(min+i*f+'').h/2,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'text-anchor':'middle'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.css({<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'font-family' : 'Verdana,Arial,Helvetica,sans-serif',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'font-size'&nbsp;&nbsp; : '12px',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; width&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : '40px',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; display&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 'block',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; textAlign&nbsp;&nbsp;&nbsp;&nbsp; : 'right'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.addText((min*t+(i*t*f/t)*t)/t+'')<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.appendTo(panel)[0];<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!hasSVG){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;span.style.top&nbsp; = parseInt(span.style.top) + span.offsetHeight/2 -5+'px';<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;span.style.left = parseInt(span.style.left) -35+'px'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;}else{<br />
&nbsp;&nbsp;&nbsp;&nbsp;//横坐标单位间隔<br />
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;yPices = drawAreaHeight / (opts.xUnit.units.length),<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//单位间隔的中心点<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;offset = Math.round(yPices / 2),<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = hasSVG &#63; 25 : 70,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y&nbsp;&nbsp;&nbsp;&nbsp; = hasSVG &#63; 0 : 5,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;span<br />
&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;each(opts.xUnit.units,function(i,d){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.baseDraw.path(self,{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;border&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 1,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;borderColor : '#C0C0C0',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isfill&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : false,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;path&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : [<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;M,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;processPoint(startX-5),<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;processPoint(startY-i * yPices),<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;L,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;processPoint(startX),<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;processPoint(startY-i * yPices),<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.appendTo(panel);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;span = self.baseDraw.span(self,{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;&nbsp; : startX - x,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y&nbsp;&nbsp; : startY -i * yPices-offset-calTextLen(d).h/2 + y,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'text-anchor':'middle'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.css({<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fontFamily:'Verdana,Arial,Helvetica,sans-serif',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fontSize:'12px',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; width&nbsp;&nbsp; : '60px',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; textAlign:'right'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.addText(d)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.appendTo(panel)&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;});<br />
&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;var xPices = drawAreaWidth / lineNum;<br />
&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;for(var i=0;i&lt;=lineNum;i++){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.baseDraw.path(self,{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;border&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 1,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;borderColor : '#C0C0C0',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isfill&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : false,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;path&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : [<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;M, <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;processPoint(startX + (i * xPices)), <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;processPoint(startY), <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;L, <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;processPoint(startX + (i*xPices)),<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;processPoint(startY - drawAreaHeight)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;appendTo(panel);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.baseDraw.span(self,{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;&nbsp; : startX - calTextLen(min+i*f+'').w/2 + i * xPices,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y&nbsp;&nbsp; : startY,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'text-anchor':'left'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.css({<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fontFamily:'Verdana,Arial,Helvetica,sans-serif',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fontSize:'12px'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.addText(min+i*f+'')<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.appendTo(panel);&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;}<br />
//-----------------------------------------------------------------------------------------------------&nbsp;<br />
&nbsp;&nbsp;&nbsp;//因为起点很可能不是从0开始的&nbsp; 所以在起点的时候要要加上到0那部分的值<br />
&nbsp;&nbsp;&nbsp;var jianju =0;<br />
&nbsp;&nbsp;&nbsp;if(min&gt;0)jianju = min;<br />
&nbsp;&nbsp;&nbsp;if(max&lt;0)jianju = max;<br />
&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;startX = opts.charts.panel==='x' &#63; startX :startX-xPices*(min/f);<br />
&nbsp;&nbsp;&nbsp;startY = opts.charts.panel==='x' &#63; startY + yPices*(min/f) : startY;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;opts.draw = {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;startX&nbsp; : startX,&nbsp; // X 轴起点<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;startY&nbsp; : startY ,&nbsp; // Y 轴起点<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xPices&nbsp; : xPices,&nbsp; // X 轴每份的宽度<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yPices&nbsp; : yPices,&nbsp; // Y 轴每份的宽度<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;offset&nbsp; : offset,&nbsp; // X 单分中心点位置偏移量<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jianjuY : jianju*yPices/f,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jianjuX : jianju*xPices/f,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;feed&nbsp;&nbsp;&nbsp; : f&nbsp;&nbsp;&nbsp; // Y 轴的每份有多少&nbsp;<br />
&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;return this;<br />
&nbsp;&nbsp;},<br />
&nbsp;&nbsp;createTooltip : function(){<br />
&nbsp;&nbsp;&nbsp;//一个组<br />
&nbsp;&nbsp;&nbsp;this.tipC = this.group('tip')<br />
&nbsp;&nbsp;&nbsp;&nbsp;.css({zIndex: 200,height:'20px',width:'20px',position:'absolute'})<br />
&nbsp;&nbsp;&nbsp;&nbsp;.appendTo()<br />
&nbsp;&nbsp;&nbsp;&nbsp;.hide()<br />
&nbsp;&nbsp;&nbsp;//画一个框框baseDraw&nbsp;<br />
&nbsp;&nbsp;&nbsp;this.tipBox = this.baseDraw.rect(this,{arc:0.22,fill:'#fff',border:2,borderColor:'#606060'})<br />
&nbsp;&nbsp;&nbsp;&nbsp;.appendTo(this.tipC)<br />
&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;//因为svg里面的g可以直接定位 但是vml里面的group渲染很慢 所以改div&nbsp; 所以这里的父不一洋<br />
&nbsp;&nbsp;&nbsp;var p = isIE &#63;this.tipBox :this.tipC;<br />
&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;this.tipTxtContainer = this.baseDraw.text(this,{fill:'#000000',x:5,y:19,'text-anchor':'left'})<br />
&nbsp;&nbsp;&nbsp;&nbsp;.css({<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fontFamily:'Verdana,Arial,Helvetica,sans-serif',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fontSize:'12px',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; background: '#FFF'<br />
&nbsp;&nbsp;&nbsp;&nbsp;})<br />
&nbsp;&nbsp;&nbsp;&nbsp;.appendTo(p);<br />
&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;this.tipText = doc.createTextNode('');<br />
&nbsp;&nbsp;&nbsp;this.tipTxtContainer[0].appendChild(this.tipText);<br />
&nbsp;&nbsp;&nbsp;return this;<br />
&nbsp;&nbsp;},<br />
&nbsp;&nbsp;showTooltip : function(obj, x, y,data){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;/*var txt&nbsp; = obj.name +':' + data,<br />
&nbsp;&nbsp;&nbsp;&nbsp;size = calTextLen(txt,this.tipTxtContainer[0].style.cssText),<br />
&nbsp;&nbsp;&nbsp;&nbsp;pos&nbsp; = {x : x - (size.w + 5 * 2)/2 ,y : y - 32};<br />
&nbsp;&nbsp;&nbsp;this.tipC<br />
&nbsp;&nbsp;&nbsp;&nbsp;.toFront()<br />
&nbsp;&nbsp;&nbsp;&nbsp;.show();<br />
&nbsp;&nbsp;&nbsp;if(hasSVG){<br />
&nbsp;&nbsp;&nbsp;&nbsp;this.tipC.attr({transform:'translate('+pos.x+','+pos.y+')'});<br />
&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;this.tipBox<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.attr({width&nbsp; : size.w + 5 * 2,height : size.h + 5 * 2,stroke : obj.color||'#606060'});<br />
&nbsp;&nbsp;&nbsp;}else{<br />
&nbsp;&nbsp;&nbsp;&nbsp;this.tipC.css({left:pos.x,top:pos.y});<br />
&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;this.tipBox<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.css({width:size.w + 5 * 2,height : size.h + 5 * 2})<br />
&nbsp;&nbsp;&nbsp;&nbsp;this.tipBox[0].strokeColor = obj.color||'#000';&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;this.tipText.nodeValue = txt || '';*/<br />
&nbsp;&nbsp;&nbsp;clearTimeout(this.timer);<br />
&nbsp;&nbsp;&nbsp;var txt&nbsp; = obj.name +':' + data,<br />
&nbsp;&nbsp;&nbsp;&nbsp;self = this,<br />
&nbsp;&nbsp;&nbsp;&nbsp;size = calTextLen(txt,this.tipTxtContainer[0].style.cssText),<br />
&nbsp;&nbsp;&nbsp;&nbsp;pos&nbsp; = {x : x - (size.w + 5 * 2)/2 ,y : y - 32};<br />
&nbsp;&nbsp;&nbsp;if(hasSVG){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;self.tipBox<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.attr({width&nbsp; : size.w + 5 * 2,height : size.h + 5 * 2,stroke : obj.color||'#606060'});<br />
&nbsp;&nbsp;&nbsp;}else{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;self.tipBox<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.css({width:size.w + 5 * 2,height : size.h + 5 * 2})<br />
&nbsp;&nbsp;&nbsp;&nbsp;self.tipBox[0].strokeColor = obj.color||'#000';&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;this.tipText.nodeValue = txt || '';<br />
&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;if(this.tipC[0].style.display === 'none'){<br />
&nbsp;&nbsp;&nbsp;&nbsp;hasSVG<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#63; self.tipC.attr({transform:'translate('+pos.x+','+pos.y+')',pos:pos.x+'-'+pos.y})<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: self.tipC.attr({pos:pos.x+'-'+pos.y}).css({left:pos.x,top:pos.y});<br />
&nbsp;&nbsp;&nbsp;&nbsp;this.tipC<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.toFront()<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.show();<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;}else{<br />
&nbsp;&nbsp;&nbsp;&nbsp;var move = function(t,b,c,d){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;return c*(t/=d)*t + b;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;},<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t = 0,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b = self.tipC.attr('pos').split('-'),<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c = [pos.x,pos.y],<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d = 5;<br />
&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;this.timer = setInterval(function(){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(t&lt;d){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t++;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var x = move(t,~~b[0],(~~c[0])-(~~b[0]),d),<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y = move(t,~~b[1],(~~c[1])-(~~b[1]),d);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hasSVG<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#63; self.tipC.attr({transform:'translate('+x+','+y+')',pos:x+'-'+y})<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: self.tipC.attr({pos:x+'-'+y}).css({left:x,top:y});<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clearTimeout(self.timer);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;},1);<br />
&nbsp;&nbsp;&nbsp;};&nbsp;<br />
&nbsp;&nbsp;},<br />
&nbsp;&nbsp;hideTooltip: function(){<br />
&nbsp;&nbsp;&nbsp;this.tipC.hide();<br />
&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;drawLegend : function(type,redraw){<br />
&nbsp;&nbsp;&nbsp;var self&nbsp;&nbsp; = this,<br />
&nbsp;&nbsp;&nbsp;&nbsp;opts&nbsp;&nbsp; = this.opts,<br />
&nbsp;&nbsp;&nbsp;&nbsp;isLine = opts.charts.type === 'line', <br />
&nbsp;&nbsp;&nbsp;&nbsp;//颜色块的大小<br />
&nbsp;&nbsp;&nbsp;&nbsp;t_width&nbsp; = 20,<br />
&nbsp;&nbsp;&nbsp;&nbsp;t_height = 20,<br />
&nbsp;&nbsp;&nbsp;&nbsp;//块之间的距离<br />
&nbsp;&nbsp;&nbsp;&nbsp;t_space&nbsp; = 5,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;datas&nbsp;&nbsp;&nbsp; = opts.chartData,<br />
&nbsp;&nbsp;&nbsp;&nbsp;len&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = datas.length,<br />
&nbsp;&nbsp;&nbsp;&nbsp;css&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = opts.legend.style,<br />
&nbsp;&nbsp;&nbsp;&nbsp;//最大长度 如果是纵着的 需要最大的长度<br />
&nbsp;&nbsp;&nbsp;&nbsp;maxWidth = 10,<br />
&nbsp;&nbsp;&nbsp;&nbsp;maxHeight= 30,<br />
&nbsp;&nbsp;&nbsp;&nbsp;//这个东西的位置<br />
&nbsp;&nbsp;&nbsp;&nbsp;orig_pos = opts.legend.pos&#63;opts.legend.pos:[2,2],<br />
&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;//显示隐藏组的函数<br />
&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;&nbsp; = function(i){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var g = self.mainGroup['chart'+i],<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;issegment = opts.charts.type==='segment';<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(g.show){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g.chart.hide();<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g.show = false;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hasSVG<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#63; this.attr({fill:'#ccc'})<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: this[0].style.color = '#ccc';<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//如果是分段图&nbsp; 是会涉及到重画的<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(issegment){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.hideList[i] ='';<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var mainGroup = self.mainGroup;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(var name in mainGroup){&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var parent = mainGroup[name].chart,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nodes&nbsp; = parent[0].childNodes,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;len&nbsp;&nbsp;&nbsp; = nodes.length;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//销毁图上面画的东西<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(var i = len-1;i&gt;=0;i--){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vector.prototype.destroy.call(nodes[i])<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//重画&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.drawSegment();<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<br />
&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g.chart.show();<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g.show = true;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hasSVG<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#63; this.attr({fill:'#000'})<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: this[0].style.color = '#000'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(issegment){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete self.hideList[i];<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var mainGroup = self.mainGroup;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(var name in mainGroup){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var parent = mainGroup[name].chart,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nodes&nbsp; = parent[0].childNodes,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;len&nbsp;&nbsp;&nbsp; = nodes.length;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(var i = len-1;i&gt;=0;i--){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vector.prototype.destroy.call(nodes[i])<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<br />
&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.drawSegment();<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;},<br />
&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;arr = [];<br />
&nbsp;&nbsp;&nbsp;type = type ||'lateral';&nbsp;<br />
&nbsp;&nbsp;&nbsp;var legendPanel = self.group('Legend')<br />
&nbsp;&nbsp;&nbsp;&nbsp;.appendTo();<br />
&nbsp;&nbsp;&nbsp;if(type==='lateral'){<br />
&nbsp;&nbsp;&nbsp;&nbsp;//如果是横着的<br />
&nbsp;&nbsp;&nbsp;&nbsp;var top&nbsp; = orig_pos[1] + 5,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;th&nbsp;&nbsp; = hasSVG&#63;0:3,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;left = orig_pos[0] + 5; <br />
&nbsp;&nbsp;&nbsp;&nbsp;each(datas, function(i,d){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;left = i===0 &#63; left : t_space+left;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//计算所有left的位置<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//如果是线性图&nbsp; 按线性图的方式画图<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isLine){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.baseDraw.path(self,{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;border&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 1.5,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;borderColor : d.color,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isfill&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : false,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;path&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : [<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;M,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;left.toFixed(0),<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(top+10).toFixed(0),<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;L,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(left+25).toFixed(0),<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(top+10).toFixed(0)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; })<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .appendTo(legendPanel);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.baseDraw[d.dotType || 'circle'](self,{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x : left+12,&nbsp;&nbsp;&nbsp; &nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y : top+10,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r : 4,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fillColor : d.color<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.appendTo(legendPanel);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.baseDraw.rect(self,{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 0.1,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fill&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : d.color,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;border&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 1,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;borderColor : d.color,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;left&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : left,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;top&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : top,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : t_width+'px',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;height&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : t_height+'px'&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.appendTo(legendPanel)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;left = left + t_width+2 + t_space;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var w = calTextLen(d.name,css).w<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.baseDraw.span(self,{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'text-anchor':'left',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x : left,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y : top+th<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.css(extend(css,{cursor:'pointer'}))<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.on('click',function(){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handle.call(this,i);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.addText(d.name)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.appendTo(legendPanel);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;left = left + w;<br />
&nbsp;&nbsp;&nbsp;&nbsp;});<br />
&nbsp;&nbsp;&nbsp;&nbsp;this.baseDraw.rect(this,{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 0.1,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fill&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 'none',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;border&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 1.5,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;borderColor : '#666666',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : left+ t_space- orig_pos[0],<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;height&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : maxHeight,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;left&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : orig_pos[0],<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;top&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : orig_pos[1]<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.appendTo(legendPanel);<br />
&nbsp;&nbsp;&nbsp;}else{<br />
&nbsp;&nbsp;&nbsp;&nbsp;var top&nbsp; = orig_pos[1] + 5,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;th&nbsp;&nbsp; = hasSVG&#63;0:3,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;left = orig_pos[0] + 5;<br />
&nbsp;&nbsp;&nbsp;&nbsp;each(datas, function(i,d){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;top = i===0 &#63; top : t_space + top;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.baseDraw.rect(self,{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 0.1,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fill&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : d.color,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;border&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 1,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;borderColor : d.color,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;left&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : left,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;top&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : top,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : t_width+'px',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;height&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : t_height+'px'&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.appendTo(legendPanel);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var h = calTextLen(d.name,css).h;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.baseDraw.span(self,{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'text-anchor':'left',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x : left+t_width+2+t_space,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y : top+th<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.css(extend(css,{cursor:'pointer'}))<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.addText(d.name)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.on('click',function(){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//如果是多层饼图 不行进隐藏&nbsp;&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(opts.charts.type==='pies')return;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handle.call(this,i);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.appendTo(legendPanel);&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;top = top + h+ t_space;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxWidth = Math.max(maxWidth,calTextLen(d.name,css).w);<br />
&nbsp;&nbsp;&nbsp;&nbsp;});&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;this.baseDraw.rect(this,{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 0.1,<br />
&nbsp;&nbsp
<hr></span>                                     
		    	</div>
		    	<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>代码注释</div>
			    <div class="panel-content">
			    <span></span>                                     
		    	</div>

			</div>

			<!-- END ROW -->
			<div class="newsPage">
				<div class="newsPageTurn">
				    <span><a>上一篇</a><a href='/php/biji/86412.html'>升级必死 wp手机切勿升级Win10 Mobile 10536</a><a>下一篇</a><a href='/php/biji/86414.html'>VMware克隆Linux提示找不到eth0的解决方法</a></span>
				</div>
			</div>
		</div>


<div id="author-box">
    <h3>作者：喵哥笔记</h3>
        <div class="author-info">
            <div class="author-avatar">
                <img src="/skin1/picture/01.jpg" alt="IDC笔记" class="avatar" width="64" height="64">
            </div>
        <div class="author-description">
            <p>学的不仅是技术，更是梦想！</p>
            <ul class="author-social follows nb">
            	<li>
                    <a target="_blank" href="/" title="IDC笔记">IDC笔记</a>
                </li>
            </ul>
        </div>
        <div class="clear"></div>
    </div>
</div>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
<!-- container-fluid -->
	</div>
<!-- content -->
	<footer class="footer">
	© 2020 IDC笔记 <i class="mdi mdi-heart text-danger"></i>. | 备案号：<a href="https://beian.miit.gov.cn/">辽ICP备18000516号</a>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?674585fbbd2294d3faf910f668ea91b4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

	</footer>
</div>

</div>
<!-- END wrapper -->
<!-- jQuery  -->
<script src="/skin1/js/jquery.min.js"></script>
<script src="/skin1/js/bootstrap.bundle.min.js"></script>
<script src="/skin1/js/metismenu.min.js"></script>
<script src="/skin1/js/jquery.slimscroll.js"></script>
<script src="/skin1/js/waves.min.js"></script>
<!--Morris Chart-->
<script src="/skin1/js/morris.min.js"></script>
<script src="/skin1/js/raphael.min.js"></script>
<script src="/skin1/js/dashboard.init.js"></script>
<script src="/skin1/js/app.js"></script>
<script src="/foot.js"></script>
</body>
</html>