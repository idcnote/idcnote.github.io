<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title>分享40条Android开发的优化建议_PHP教程_IDC笔记</title>
    <meta name="keywords" content="PHP,PHP笔记,PHP教程" />
    <meta name="description" content="以下是开始Android编程的好方法：<br />
        1、找一些与你想开发的功能类似的代码；<br />
        2、调整它，尝试让它变成你想要的；<br />
        3、回顾开发中遇到的问题<br />
        4、使用S" />
    <meta content="Responsive admin theme build on top of Bootstrap 4" name="description" />
    <meta content="idcnote.com" name="author" />
    <link rel="shortcut icon" href="/skin1/images/favicon.ico">
    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="/skin1/css/morris.css">
    <link href="/skin1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/metismenu.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/icons.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/style.css" rel="stylesheet" type="text/css">
<link href="/SyntaxHighlighter/shCoreDefault.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/SyntaxHighlighter/shCore.js"></script>
<script type="text/javascript">
 SyntaxHighlighter.all();
</script>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
</head>
<body>
<!-- Begin page -->
		<div id="wrapper">
			<!-- Top Bar Start -->
			<div class="topbar">
				<!-- LOGO -->
				<div class="topbar-left">
					<a href="/" class="logo">
						<span class="logo-light">
                            <i class="mdi mdi-camera-control"></i>IDC笔记
                        </span>
						<span class="logo-sm">
                            <i class="mdi mdi-camera-control"></i>
                        </span>
					</a>
				</div>
				<nav class="navbar-custom">
					<ul class="navbar-right list-inline float-right mb-0">
						<!--<li class="dropdown notification-list list-inline-item d-none d-md-inline-block">
							<a class="nav-link waves-effect" href="#" id="btn-fullscreen">
								<i class="mdi mdi-arrow-expand-all noti-icon"></i>
							</a>
						</li>
						<li class="dropdown notification-list list-inline-item">
							<div class="dropdown notification-list nav-pro-img">
								<a class="dropdown-toggle nav-link arrow-none nav-user" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
									<img src="/skin1/picture/user-4.jpg" alt="user" class="rounded-circle">
								</a>
								<div class="dropdown-menu dropdown-menu-right profile-dropdown ">
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-account-circle"></i> Profile</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-wallet"></i> Wallet</a>
									<a class="dropdown-item d-block" href="#">
										<span class="badge badge-success float-right">11</span>
										<i class="mdi mdi-settings"></i> Settings</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-lock-open-outline"></i> Lock screen</a>
									<div class="dropdown-divider"></div>
									<a class="dropdown-item text-danger" href="#">
										<i class="mdi mdi-power text-danger"></i> Logout</a>
								</div>
							</div>
						</li>
						-->
					</ul>
					<ul class="list-inline menu-left mb-0">
						<li class="float-left">
							<button class="button-menu-mobile open-left waves-effect">
                            <i class="mdi mdi-menu"></i>
                        </button>
						</li>
						<li class="d-none d-md-inline-block">
							<form role="search" class="app-search">
								<div class="form-group mb-0">
									<input type="text" class="form-control" placeholder="Search..">
									<button type="submit"><i class="fa fa-search"></i></button>
								</div>
							</form>
						</li>
					</ul>
				</nav>
			</div>
<!-- ========== Left Sidebar Start ========== -->
<div class="left side-menu">
    <div class="slimscroll-menu" id="remove-scroll">
    <!--- Sidemenu -->
    <div id="sidebar-menu">
    <!-- Left Menu Start -->
    <ul class="metismenu" id="side-menu">
			<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP简介			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jianjie/1.html">PHP简介</a></li><li><a href="/php/jianjie/2.html">PHP用途</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP基本语法			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yufa/3.html">分离HTML</a></li><li><a href="/php/yufa/4.html">指令分隔符</a></li><li><a href="/php/yufa/5.html">PHP注释</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类型			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpleixing/6.html">PHP类型简介</a></li><li><a href="/php/phpleixing/7.html">PHP类型之布尔类型</a></li><li><a href="/php/phpleixing/8.html">PHP类型之整型</a></li><li><a href="/php/phpleixing/9.html">PHP类型之浮点型</a></li><li><a href="/php/phpleixing/10.html">PHP类型之字符串</a></li><li><a href="/php/phpleixing/11.html">PHP类型之数组</a></li><li><a href="/php/phpleixing/12.html">PHP类型之对象</a></li><li><a href="/php/phpleixing/13.html">PHP类型之资源类型</a></li><li><a href="/php/phpleixing/14.html">PHP类型之NULL</a></li><li><a href="/php/phpleixing/15.html">PHP类型之伪类型</a></li><li><a href="/php/phpleixing/16.html">PHP类型之类型判别</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP变量			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbianliang/17.html">PHP变量之基础</a></li><li><a href="/php/phpbianliang/18.html">PHP变量之预定义变量</a></li><li><a href="/php/phpbianliang/19.html">PHP变量之变量范围</a></li><li><a href="/php/phpbianliang/20.html">PHP变量之可变变量</a></li><li><a href="/php/phpbianliang/21.html">PHP变量之外部变量</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP运算符			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yunsuanfu/22.html">PHP运算符优先级</a></li><li><a href="/php/yunsuanfu/23.html">算术运算符</a></li><li><a href="/php/yunsuanfu/24.html">赋值运算符</a></li><li><a href="/php/yunsuanfu/25.html">位运算符</a></li><li><a href="/php/yunsuanfu/26.html">比较运算符</a></li><li><a href="/php/yunsuanfu/27.html">错误控制运算符</a></li><li><a href="/php/yunsuanfu/28.html">执行运算符</a></li><li><a href="/php/yunsuanfu/29.html">递增/递减运算符</a></li><li><a href="/php/yunsuanfu/30.html">逻辑运算符</a></li><li><a href="/php/yunsuanfu/31.html">字符串运算符</a></li><li><a href="/php/yunsuanfu/32.html">数组运算符</a></li><li><a href="/php/yunsuanfu/33.html">类型运算符</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP控制结构			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jiegou/34.html">PHP控制结构之if</a></li><li><a href="/php/jiegou/35.html">PHP控制结构之else</a></li><li><a href="/php/jiegou/36.html">PHP控制结构之elseif/else if</a></li><li><a href="/php/jiegou/37.html">PHP控制结构之替代语法</a></li><li><a href="/php/jiegou/38.html">PHP控制结构之while</a></li><li><a href="/php/jiegou/39.html">PHP控制结构之do-while</a></li><li><a href="/php/jiegou/40.html">PHP控制结构之for</a></li><li><a href="/php/jiegou/41.html">PHP控制结构之foreach</a></li><li><a href="/php/jiegou/42.html">PHP控制结构之break</a></li><li><a href="/php/jiegou/43.html">PHP控制结构之continue</a></li><li><a href="/php/jiegou/44.html">PHP控制结构之switch</a></li><li><a href="/php/jiegou/45.html">PHP控制结构之declare</a></li><li><a href="/php/jiegou/46.html">PHP控制结构之return</a></li><li><a href="/php/jiegou/47.html">PHP控制结构之require</a></li><li><a href="/php/jiegou/48.html">PHP控制结构之include</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/hanshu/52.html">用户自定义函数</a></li><li><a href="/php/hanshu/53.html">函数的参数</a></li><li><a href="/php/hanshu/54.html">返回值</a></li><li><a href="/php/hanshu/55.html">可变函数</a></li><li><a href="/php/hanshu/56.html">内部（内置）函数</a></li><li><a href="/php/hanshu/57.html">匿名函数</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类与对象			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpduixiang/58.html">类与对象前言</a></li><li><a href="/php/phpduixiang/59.html">基本概念</a></li><li><a href="/php/phpduixiang/60.html">属性</a></li><li><a href="/php/phpduixiang/61.html">类常量</a></li><li><a href="/php/phpduixiang/62.html">自动加载对象</a></li><li><a href="/php/phpduixiang/63.html">构造函数和析构函数</a></li><li><a href="/php/phpduixiang/64.html">访问控制</a></li><li><a href="/php/phpduixiang/65.html">对象继承</a></li><li><a href="/php/phpduixiang/66.html">Static关键字</a></li><li><a href="/php/phpduixiang/67.html">抽象类</a></li><li><a href="/php/phpduixiang/68.html">接口</a></li><li><a href="/php/phpduixiang/69.html">Traits</a></li><li><a href="/php/phpduixiang/70.html">重载</a></li><li><a href="/php/phpduixiang/71.html">对象迭代</a></li><li><a href="/php/phpduixiang/72.html">设计模式</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP异常处理			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yichang/81.html">异常处理</a></li><li><a href="/php/yichang/82.html">扩展PHP内置的异常处理类</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数库按分类			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpku/83.html">数组</a></li><li><a href="/php/phpku/84.html">Classes/Objects</a></li><li><a href="/php/phpku/85.html">Date/Time</a></li><li><a href="/php/phpku/86.html">Directories</a></li><li><a href="/php/phpku/87.html">错误处理</a></li><li><a href="/php/phpku/88.html">Program execution</a></li><li><a href="/php/phpku/89.html">Filesystem</a></li><li><a href="/php/phpku/90.html">Filter</a></li><li><a href="/php/phpku/91.html">Function Handling</a></li><li><a href="/php/phpku/92.html">PHP 选项/信息</a></li><li><a href="/php/phpku/93.html">Mail</a></li><li><a href="/php/phpku/94.html">Math</a></li><li><a href="/php/phpku/95.html">Misc.</a></li><li><a href="/php/phpku/96.html">Network</a></li><li><a href="/php/phpku/97.html">输出控制</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> php基础			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbiji/108377.html"></a></li><li><a href="/php/phpbiji/108376.html"></a></li><li><a href="/php/phpbiji/108380.html"></a></li><li><a href="/php/phpbiji/108379.html"></a></li><li><a href="/php/phpbiji/108378.html"></a></li><li><a href="/php/phpbiji/108381.html"></a></li><li><a href="/php/phpbiji/108382.html"></a></li><li><a href="/php/phpbiji/108384.html"></a></li><li><a href="/php/phpbiji/108383.html"></a></li><li><a href="/php/phpbiji/108385.html"></a></li><li><a href="/php/phpbiji/108386.html"></a></li><li><a href="/php/phpbiji/108388.html"></a></li><li><a href="/php/phpbiji/108387.html"></a></li><li><a href="/php/phpbiji/108389.html"></a></li><li><a href="/php/phpbiji/108391.html"></a></li>		</ul>
	</li>
		<li>
	    <a href="/php/biji/" class="waves-effect">
		    <i class="icon-share"></i>
		    <span>PHP笔记
		       	<span class="float-right menu-arrow">
		       	<i class="mdi mdi-chevron-right"></i>
		       	</span>
		    </span>
	    </a>
	</li>
	</ul>
</div>
<!-- Sidebar -->
<div class="clearfix"></div>
</div>
<!-- Sidebar -left -->
</div>
<!-- Left Sidebar End -->
<!-- Start right Content here -->
<div class="content-page">
	<div class="content">
		<div class="container-fluid">
			<div class="page-title-box">
				<div class="row align-items-center">
					<div class="col-sm-6">
						<h1 class="page-title">分享40条Android开发的优化建议</h1>
					</div>
				</div>
				<!-- end row -->
			</div>
			<!-- end page-title -->
			<!-- START ROW -->
			<div class="panel panel-forbid">
				<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>内容摘要</div>
			    <div class="panel-content">
			    <span>以下是开始Android编程的好方法：<br />
        1、找一些与你想开发的功能类似的代码；<br />
        2、调整它，尝试让它变成你想要的；<br />
        3、回顾开发中遇到的问题<br />
        4、使用S</span>                                     
		    	</div>
			    <div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>文章正文</div>
			    <div class="panel-content">
			    <span><p><strong>以下是开始Android编程的好方法：</strong></p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; 1、找一些与你想开发的功能类似的代码；</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; 2、调整它，尝试让它变成你想要的；</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; 3、回顾开发中遇到的问题</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; 4、使用StackOverflow来解决遇到的问题</p>
<p>对每个你想实现的东西重复上述过程。采用这种方法能够激励你，因为你在保持不断迭代更新，在这个过程里面你会学到很多。当然，当你发布应用的时候你还要去做一些更深入的东西。</p>
<p>从一些能够正常编译的代码到成为一个应用程序，这是一个质的飞跃，比起iOS，Android则表现的更加明显。当iOS应用发布的时候，实际上只是在一种设备之间跳跃，对iOS很多机型而言都很相似，同样大小的屏幕，并且都有良好的硬件支撑，95%上机型运行相同版本的iOS操作系统。然而在Android应用中，并不会遇到这种情况。</p>
<p>我们的程序必须能够应对一切：包括不同的屏幕、处理器、定制操作系统、API以及其他任何带Android操作系统的设备。</p>
<p><strong>以下是我认为对Android比较好的一些建议。</strong></p>
<p><strong>目标屏幕尺寸及解决办法</strong></p>
<p>在Android的大世界里有超过100种不同的屏幕尺寸，当然，解决屏幕适配的方法也很多。为了进行Android的屏幕适配，你需要确定以下两件事情：</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; 1、对不同的屏幕分辨率和尺寸有一个良好的布局和结构来适应它</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; 2、UI图像能够适应不同分辨率的手机</p>
<p>这些都是独立的任务，也许你有一个超级的tablet布局，但布局上的图片看起来很糟。接下来我会依次讨论它们。</p>
<p><strong>为不同的屏幕尺寸设计布局</strong></p>
<p><strong>1、一般用ScrollView+ListView轻松搞定它</strong></p>
<p>当我们有一系列不同屏幕尺寸的手机时，它们之间最大的不同就是屏幕的高度。因此ScrollView和ListView通常显示良好，虽然有时侯它们并不能完全覆盖整个屏幕。在OpenSignal中的Dashboard标签下我们可以看到所有东西，他们不需要滑动，然而对于许多高级控件来说，滑动展示并非一件坏事。如果你能够让你的应用适配各种不同尺寸的手机，那就很完美了，否则这两个控件会让你用最小的代价来保证你的应用适配大多数不同的屏幕尺寸。<br />
</p>
<p><br />
</p>
<p>Dashboard风格的就不需要滚动<br />
</p>
<p><strong>2、使用文件夹结构</strong></p>
<p>Android 的res文件夹结构非常强大, 它允许开发者更改图片、文字、布局文件、尺寸规格、颜色等资源。下面的例子展示了在res文件夹的用处:<br />
</p>
<p><br />
</p>
<p>在values-small文件夹中有一个 bools.xml 文件, 文件中有以下几行代码：</p>
<pre class="html" name="code" snippet_file_name="blog_20160322_1_3778455" code_snippet_id="1620261">
&lt;resources&gt; &lt;bool name="small_screen"&gt;true&lt;/bool&gt;&lt;/resources&gt;</pre>
<p>在代码中可以进行调用：</p>
<pre class="java" name="code" snippet_file_name="blog_20160322_2_125148" code_snippet_id="1620261">
if(getResources().getBoolean(R.bool.small_screen)){ getSupportActionBar().hide();}</pre>
<p>在小屏幕设备中把boolean值设为true，因而将ActionBar隐藏以节省空间。这段代码正是牛逼的ActionBarSherlock 扩展库中的一部分，稍后会谈到他。在values-sw360dp文件夹中，存放屏幕宽度为360dp的res文件。相应代码如下：</p>
<pre class="html" name="code" snippet_file_name="blog_20160322_3_8315004" code_snippet_id="1620261">
&lt;resources&gt; &lt;bool name="small_screen"&gt;false&lt;/bool&gt;&lt;/resources&gt;</pre>
<p>在大屏幕设备上ActionBar就置为可见状态。</p>
<p>我们并不一定需要将 bools.xml 文件放入 values-sw400dp 文件夹中, 因为Android操作系统会自动按相应路径搜索. 例如一个设备宽 600dp (600/160=3.75 英寸) 操作系统会在values-sw600dp 和其对应文件夹中搜索 bools.xml 文件, 若没有找到则搜索 values-sw400dp 文件夹，再没找到就搜索 values-sw360dp 文件夹，以此类推。</p>
<p><strong>3、160dp = 1英寸。320 dp = 2英寸。dp = dip。</strong></p>
<p><strong>4、你可以用这些目录结构技巧来应付所有资源类型。</strong></p>
<p>比如xml布局用指定的大小来解决，例如layout-sw360dp目录可以适配目标宽是360dp的机型，如果还需要支持横竖屏的话可以采用以下目录：</p>
<pre class="plain" name="code" snippet_file_name="blog_20160322_4_5076401" code_snippet_id="1620261">
layout-sw360dp-landlayout-sw360dp-port</pre>
<p>等等，如果你有一半的用户是阿拉伯的，那就将布局文件改为下面这样：</p>
<pre class="plain" name="code" snippet_file_name="blog_20160322_5_1314410" code_snippet_id="1620261">
layout-sw360dp-landlayout-sw360dp-portlayout-sw360dp-land-arlayout-sw360dp-port-ar</pre>
<p>前两个文件夹的布局可以适用于所有语言，后两个的-ar表示阿拉伯语。&nbsp;</p>
<p><strong>5、res资源命名规则：</strong><br />
</p>
<pre class="plain" name="code" snippet_file_name="blog_20160322_6_2535909" code_snippet_id="1620261">
XXX      // 没有后缀，默认适用于Nexus One，Droid 2,S2 XXX-sw360dp    // 比较大的手机 – Galaxy Nexus, S3, S4 XXX-sw600dp    // 7" 平板 XXX-sw720dp    // 10" 平板</pre>
<p>在Kindle设备有点不同的地方，如下所示：<br />
</p>
<pre class="plain" name="code" snippet_file_name="blog_20160322_7_4313816" code_snippet_id="1620261">
XXX-large-mdpi    // kindle fire 7"XXX-large-hdpi    // kindle fire 7" HD </pre>
<p><strong>6、如果你不想这样布局的话，可以采用 dimens.xml 文件。</strong></p>
<p>如果你刚才用心看了，你就会发现刚才我的values目录里有很多dimens.xml，因为我更喜欢在布局文件里设置值，在每一个xml布局文件里我通常喜欢这么做：</p>
<pre class="html" name="code" snippet_file_name="blog_20160322_8_7835826" code_snippet_id="1620261">
&lt;ImageView android:layout_centerHorizontal="true" android:layout_marginTop="@dimen/small_margin" android:layout_width="@dimen/dashBoardWidth" android:layout_height="@dimen/dashBoardHeight" android:id="@+id/dashboard"/&gt;</pre>
<p>small_margin的值是在dimen.xml文件里面定义的：</p>
<pre class="html" name="code" snippet_file_name="blog_20160322_9_4073836" code_snippet_id="1620261">
&lt;resources&gt; &lt;dimen name="small_margin"&gt;4dp&lt;/dimen&gt;&lt;/resources&gt;</pre>
<p>这个4dp变量写在所有dimen文件里。我有一个Excel文件，里面创建了所有不同尺寸的定义。也许你会有个疑问：为什么不让Android操作系统来处理这些屏幕适配的问题？为什么不用一个values目录和一个layout目录来代替所有写死的值呢？那当然是可以的，如果设置得当，都会得到所有的尺寸，但是对于有些元素并没有那么容易就能得到尺寸。</p>
<p><strong>7、让空白大小大于图像大小，让图像大小大于按钮大小。</strong></p>
<p>如果将按钮，多选框，切换控件放大后是很丑的。一个100dip(0.63")大小的按钮是不想在平板上显示为原来两倍宽度200dip(1.25")的，原因是屏幕变大了，但是这不代表平板是给巨人用的。我们可以这么做，在按钮和图片扩展的位置添加空白。</p>
<p><strong>8、用GraphicalLayout工具快速预览。</strong>GraphicalLayout是一种WYSIWG XML编辑器。不过我喜欢直接写代码，而不是拖放控件而丢弃的编程，但在添加一些元素之后，可以在GraphicalLayout的下拉选择菜单里选择不同屏幕尺寸进行测试。<br />
</p>
<p><br />
</p>
<p><strong>9、不要对所有的图片进行缩放。</strong></p>
<p>用布局文件来适应不同屏幕尺寸的方法只是成功的一半，布局里的控件(如：图片)也要能在高分辨率屏幕下良好展示。比较简单的方式就是创建一套完整的图片目录让它们与各种drawable目录进行匹配。<br />
drawable-sw600dp-ldpi <br />
drawable-sw600dp-mdpi <br />
drawable-sw600dp-hdpi <br />
drawable-sw600dp-xhdpi <br />
drawable-sw600dp-xxhdpi等等...</p>
<p>然而其实并不需要这样做，一般来说有drawble-ldpi, drawable-hdpi等目录就足够了，并不需要将所有的都加上。<br />
</p>
<p><strong>10、尽量避免使用位图(bitmap)(jpg、png)。</strong></p>
<p>对于一些图标来说，位图是个不错的选择，因为它们使用简单。但是如果可以避免使用位图，你可以节省很多空间，采用不同的方法也可以达到很好的结果。</p>
<p>11、用XML进行绘图。位图都可以用XML绘图来代替的，虽然XML绘图不是万能的，但是它的方便性还是使我感到震惊，在Android开发文档中有详细的介绍，下面举个简单例子：</p>
<pre class="html" name="code" snippet_file_name="blog_20160322_10_6375130" code_snippet_id="1620261">
 &lt;shape  xmlns:android="http://schemas.android.com/apk/res/android"  android:shape="rectangle" &gt;  &lt;corners   android:bottomRightRadius="14dp"   android:bottomLeftRadius="14dp"   android:topLeftRadius="14dp"   android:topRightRadius="14dp"/&gt;  &lt;gradient   android:startColor="@color/off_white"   android:endColor="@color/pale_yellow"   android:angle="270"   android:type="linear"/&gt;  &lt;stroke   android:width="4dp"   android:color="@color/osm_darkerblue"/&gt; &lt;/shape&gt;</pre>
<p>上面代码定义了一个圆角矩形，一个有渐变的边(深蓝)。你可以在布局文件引用他，并且它适应任何屏幕。用它可以做出理想的按钮背景。</p>
<p><strong>12、采用更多XML绘图。</strong></p>
<p>再来个用XML绘图制作出能更加让你兴奋的例子，下面的雷达效果看起来是不是更加的复杂呢：</p>
<p></p>
<p>不使用位图对于UI是没有坏处的(icon图标例外)。<br />
</p>
<p><strong>13、还是XML绘图(如果有必要，那就用位图)。</strong></p>
<p>那我们怎样画一个酷炫的天气图标-让灯泡动态的根据光的强度来调节其亮度，以及如何在点击后让它旋转呢？这里我们用位图和XML结合起来做个例子：</p>
<p><br />
</p>
<p>灯泡我们用PNG图：icon_magnitude_min(一个空的灯泡)和icon_magnitude_max(最高亮度的灯泡)，然后我们动态的裁剪后者。为了实现这个目标我是这样做的：<br />
</p>
<pre class="html" name="code" snippet_file_name="blog_20160322_11_9025089" code_snippet_id="1620261">
 &lt;layer-list xmlns:android="http://schemas.android.com/apk/res/android"&gt;  &lt;item   android:drawable="@drawable/icon_magnitude_min" /&gt;  &lt;item &gt;   &lt;clip    android:clipOrientation="vertical"    android:drawable="@drawable/icon_magnitude_max"    android:gravity="top" /&gt;  &lt;/item&gt; &lt;/layer-list&gt;</pre>
<p>在java程序中进行引用，用于控制光的强度。</p>
<p><strong>14、为什么要用9-patch(当你可以用xml、drawables的时候)&#63;&nbsp;</strong></p>
<p>Android具有使用.9文件来定义drawables的选择，有些教程阐述了怎样用它们来做一个按钮，这样可以在拉伸的时候保持几个边角的大小不变 (并且避免了像素处理)。如果你已经知道怎样使用.9，可能是从web设计中学会的，那么它们或许值得一用。如果你对9-patches并不熟悉，建议你保持原样。如果你想适应一些诸如圆角或者颜色，这就像回到了图像编辑器的时代。许多用.9实现的效果也可以通过XML实现。<br />
</p>
<p><strong>15、通过重写onDraw()方法实现自定义控件。</strong></p>
<p>有些事情XML并不能完全实现，我们在OpenSignal和WeatherSignal中画过许多图像，为此有许多的库，但是我们要为自定义图像自己编写代码。这很有趣，或许你永远也不需要做这个，但为了使图像高度动态并实现自定义，这经常是唯一可行的办法。</p>
<p><strong>16、在不能使用XML的地方使用SVG。</strong></p>
<p>有时候覆盖onDraw()并勤勤恳恳的为自定义view编写代码画出需要的线条与弧线是过于技术化了。毕竟有一种矢量图像语言Scalable Vector Graphics（可扩展矢量图形）。它也是史上最酷的Android应用之一——Androidify的动力来源。事实上他们创建这个库就是为了那款应用，他们将它发布在这里：SVG for Android 。这也就是我们在OpenSignal中画仪表盘所用到的。</p>
<p><strong>17、对SVG文件GZip压缩，将它们变得更小它们就会处理的更快。</strong></p>
<p><strong>18、SVG库也并非支持一切. 在一些特定的alpha通道中似乎不能正常工作，你甚至不得不在代码中将它们移除。</strong></p>
<p><strong>达到在Android所有版本里展示一致的目标</strong><br />
</p>
<p><strong>19、在一些android系统里（如TouchWhizz/HTC Sense/MotoBlur等等），默认的Button和其他UI组件会跟谷歌原生系统里的看起来差别很大。</strong>我希望这不是真的，但事实却是如此。</p>
<p><strong>20、自定义UI控件。</strong></p>
<p>为了保证你的app在所有的设备里看起来是一样的效果，你将需要自定义所有的东西。这其实没有你想象中那么难，只要你做到了，你将能更加好地把握你的app的展示外观。</p>
<p><strong>21、Selectors是创建Button的利器。</strong></p>
<p>我们在上面提到了如何在XML里定义button的背景，但是你将如何创建一个当按下去会改变的button呢？很简单，像下面那样在xml文件里定义背景。该xml文件能够改变Button的点击状态与正常状态。</p>
<pre class="html" name="code" snippet_file_name="blog_20160322_12_1675048" code_snippet_id="1620261">
&lt;&#63;xml version="1.0" encoding="utf-8"&#63;&gt;&lt;selector xmlns:android="http://schemas.android.com/apk/res/android"&gt; &lt;item android:state_pressed="true" android:drawable="@drawable/btn_bg_selected" /&gt; &lt;item android:state_focused="true" android:drawable="@drawable/btn_bg" /&gt; &lt;item android:drawable="@drawable/btn_bg" /&gt; &lt;!-- default --&gt;&lt;/selector&gt;</pre>
<p><strong>22、在Honeycomb之前的版本里并没有ActionBar及很多animation样式的，所以可以使用ActionBarSherlock以及NineOldAndroids来代替。</strong></p>
<p>Jake Wharton写的Android开源组件都是API向下兼容的精心杰作。更让人欣慰的是，ABS 拥有强大的功能用来定义ActionBar。</p>
<p><strong>把响应速度作为目标</strong><br />
</p>
<p><strong>23、在运行慢的手机上测试。</strong></p>
<p>你将在运行慢的手机上发现很多问题，即使它让你抓狂，因为没人会喜欢运行慢的程序。</p>
<p><strong>24、尽量减少XML布局层次。</strong></p>
<p>更多的层次意味着系统将为解析你的代码付出更多的工作，这将会让图像渲染的更慢。</p>
<p><strong>25、用Android Lint检查程序。</strong></p>
<p>在工程目录上右键选择Eclipse&gt;Android Tools&gt;Run Lint。它将会得到应用的一些相关信息，并能提高程序的运行速度，或者它能让你得代码更加清爽。</p>
<p><strong>26、Android Lint可以得到错误信息。</strong></p>
<p>它可以给你的代码提供很详细的信息，并在你出错之前就可以给做出提示。</p>
<p><strong>27、用&lt;merge&gt;可以帮助你减少视图层次结构。</strong></p>
<p>这是一种简单的方式来去除多余的层次。好的文章都对此有所解释，而且在 Android Developer中它也显得与众不同。</p>
<p><strong>28、用HierarchyViewer可以直观的看到你布局的层次。</strong></p>
<p>这个智能的工具可以显示布局中有多少层次，而且可以提示出那些可以让程序变慢。</p>
<p><strong>29、如果可以尽量用RelativeLayout。</strong></p>
<p>AbsoluteLayout已经过期了，就不要用了。你经常会遇到在RelativeLayout和LinearLayout中做出选择的情况，那就直接用RelativeLayouot吧，因为它可以让你减少视图层次。比如，你想实现一个如下视图：</p>
<p>A Box 在屏幕左半边 | B Box在屏幕右半边</p>
<p>你首先会想到这么做：</p>
<pre class="java" name="code" snippet_file_name="blog_20160322_13_736957" code_snippet_id="1620261">
 &lt;LinearLayout  android:layout_width="match_parent"  android:layout_height="wrap_content"  android:orientation="horizontal"&gt;  &lt;TextView   android:layout_width="0dip"   android:layout_height="wrap_content"   android:layout_weight="1"   android:text="Box A takes up left half of the screen" /&gt;  &lt;TextView   android:layout_width="0dip"   android:layout_height="wrap_content"   android:layout_weight="1"   android:text="Box B takes up left half of the screen" /&gt; &lt;/LinearLayout&gt;</pre>
<p>代码没问题，其实你也可以这么做：</p>
<pre class="java" name="code" snippet_file_name="blog_20160322_14_3038251" code_snippet_id="1620261">
 &lt;RelativeLayout  android:layout_width="match_parent"  android:layout_height="wrap_content"  android:orientation="horizontal"&gt;  &lt;TextView   android:layout_width="match_parent"   android:layout_height="wrap_content"   android:layout_toLeftOf="@+id/dummy_center"   android:text="Box A takes up left half of the screen" /&gt;  &lt;View   android:id="@+id/dummy_center"   android:layout_width="0dip"   android:layout_height="0dip"   android:layout_gravity="center" /&gt;  &lt;TextView   android:layout_width="match_parent"   android:layout_height="wrap_content"   android:layout_toRightOf="@+id/dummy_center"   android:text="Box B takes up left half of the screen" /&gt; &lt;/RelativeLayout&gt;</pre>
<p>第二个表单比第一个难看的多，事实上是相当的糟糕：我们已经介绍过一个完整的新元素了。但是假如我们要给每个Box里加入一个图片，一般的我们将这样做：<br />
A Box在屏幕左半边 图片 | B Box在屏幕右半边 图片<br />
用第一中方法，你得创建一个有两个层次的LinearLayout，如果用第二种方法，你可以直接在同一个RelativeLayout中加入图片，比如要指定第一个图片必须在“dummy_center”的左边，而且一个TextView A必须也在其左侧。那么你就得用7个元素3个视图层次了(LinearLayout 方式)，而(RelativeLayout方式)只用6个元素2个层次，这样所有的工作添加完成。</p>
<p><strong>30、用一些扩展工具如DDMS。</strong></p>
<p>这可以帮助你发现一些不必要的网络调用、查看电池使用量、垃圾回收信息，状态变化(例子：当回调onStop和onDestroy时)等。LittleEye是我目前比较喜欢的工具。&nbsp;</p>
<p><strong>31、用AsyncTasks。</strong></p>
<p>Anroid工程团队受够了人们经常在UI线程里面实现网络调用(注：耗时操作，容易阻塞UI刷新)，所以他们实现了一些可产生编译级错误信息的API。但是仍然在很多app中的一些工作会拖垮UI线程，我们要考虑到UI布局要快以及提高UI的响应性。</p>
<p><strong>目标机器空间小</strong><br />
</p>
<p><strong>32、一些Aandroid设备有100mb空间大小的限制。</strong></p>
<p>现在情况已有变化了，但是仍然有很多用户还会担心5Mb大小的app会浪费空间。如果你可以选择将app装入SD卡的话，这就不是问题了，但如果你的app需要在onBoot里启动的话你就不能装入SD卡了(例子：如一些窗体小部件).甚至对于一些新的设备，如果能很快的下载一个小的APK的话，用户还是很高兴的。<br />
</p>
<p><strong>33、用XML资源（我发誓上次我已经说过了），这将比PNG资源节省很多空间。</strong></p>
<p>当你仅仅需要一个可以满足很多屏幕大小的配置时，一个XML文件会比能实现同样功能的PNG省空间。</p>
<p><strong>34、如果要用PNG，最好优化一下(用PNGCrush或ImageOptim)</strong></p>
<p><strong>目标Bug</strong></p>
<p><strong>35、在Android控制台里检查所有被自动检测出来的bug。</strong></p>
<p><strong>36、ProGuard现在是默认启动着的。</strong></p>
<p>Proguard太好用了 (提高你app的速度和降低文件大小)，但这也让StackTraces 非常难以处理。你将需要重新追踪你的StackTraces，因此你将需要继续保留在每次构建中创建的Proguard的映射文件。我把它们都放到以代码版本号命名的文件夹里。</p>
<p><strong>37、为了显示StackTraces里的行数，你需要修改ProGuard的配置。</strong></p>
<p>确认你的proguard.cfg拥有下面这句话： <br />
&nbsp; &nbsp; -keepattributes SourceFile,LineNumberTable</p>
<p><strong>38、使用staged rollouts。测试5%的基础用户，并且观察bug报告。</strong></p>
<p><strong>39、使用真实设备测试平台。</strong></p>
<p>Device Anywhere and Perfecto Mobile提供了虚拟测试平台，在那里，你可以使用真正的移动设备。我发现他们有一些不好的地方，假如连续不断地进行测试的话，会导致有一些不好的情况发生。如果你在办公的环境里工作，或者有一些Android开发的好友，那么去启动一个“设备池”吧。</p>
<p><strong>40、多写代码少写博客。</strong></p>
<p>其实不是的, 分享就是关爱, 我只是想不出第40条写什么罢了。</p>
<p>英文原文：http://opensignal.com/blog/2013/07/30/40-developer-tips-for-android-optimization/</p>
<p>以上就是本文的全部内容，希望对大家的学习有所帮助，也希望大家多多支持phpstudy。</p>
<hr></span>                                     
		    	</div>
		    	<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>代码注释</div>
			    <div class="panel-content">
			    <span></span>                                     
		    	</div>

			</div>

			<!-- END ROW -->
			<div class="newsPage">
				<div class="newsPageTurn">
				    <span><a>上一篇</a><a href='/php/biji/89820.html'>JavaScript setTimeout使用闭包功能实现定时打印数值</a><a>下一篇</a><a href='/php/biji/89822.html'>有关首行首字下沉的实现原理及代码</a></span>
				</div>
			</div>
		</div>


<div id="author-box">
    <h3>作者：喵哥笔记</h3>
        <div class="author-info">
            <div class="author-avatar">
                <img src="/skin1/picture/01.jpg" alt="IDC笔记" class="avatar" width="64" height="64">
            </div>
        <div class="author-description">
            <p>学的不仅是技术，更是梦想！</p>
            <ul class="author-social follows nb">
            	<li>
                    <a target="_blank" href="/" title="IDC笔记">IDC笔记</a>
                </li>
            </ul>
        </div>
        <div class="clear"></div>
    </div>
</div>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
<!-- container-fluid -->
	</div>
<!-- content -->
	<footer class="footer">
	© 2020 IDC笔记 <i class="mdi mdi-heart text-danger"></i>. | 备案号：<a href="https://beian.miit.gov.cn/">辽ICP备18000516号</a>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?674585fbbd2294d3faf910f668ea91b4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

	</footer>
</div>

</div>
<!-- END wrapper -->
<!-- jQuery  -->
<script src="/skin1/js/jquery.min.js"></script>
<script src="/skin1/js/bootstrap.bundle.min.js"></script>
<script src="/skin1/js/metismenu.min.js"></script>
<script src="/skin1/js/jquery.slimscroll.js"></script>
<script src="/skin1/js/waves.min.js"></script>
<!--Morris Chart-->
<script src="/skin1/js/morris.min.js"></script>
<script src="/skin1/js/raphael.min.js"></script>
<script src="/skin1/js/dashboard.init.js"></script>
<script src="/skin1/js/app.js"></script>
<script src="/foot.js"></script>
</body>
</html>