<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title>关于Unsupported major.minor version 49.0的错误解决办法_PHP教程_IDC笔记</title>
    <meta name="keywords" content="PHP,PHP笔记,PHP教程" />
    <meta name="description" content="在装2个不同版本JDK时遇到了这个问题，在网上钩了一吧！查到一个讲解比较好的资料。<br />
<br />
<br />
一：要解决的问题<br />
我们在尝鲜 JDK1.5 的时候，相信不少人遇到过 Unsupported major.minor ver" />
    <meta content="Responsive admin theme build on top of Bootstrap 4" name="description" />
    <meta content="idcnote.com" name="author" />
    <link rel="shortcut icon" href="/skin1/images/favicon.ico">
    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="/skin1/css/morris.css">
    <link href="/skin1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/metismenu.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/icons.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/style.css" rel="stylesheet" type="text/css">
<link href="/SyntaxHighlighter/shCoreDefault.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/SyntaxHighlighter/shCore.js"></script>
<script type="text/javascript">
 SyntaxHighlighter.all();
</script>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
</head>
<body>
<!-- Begin page -->
		<div id="wrapper">
			<!-- Top Bar Start -->
			<div class="topbar">
				<!-- LOGO -->
				<div class="topbar-left">
					<a href="/" class="logo">
						<span class="logo-light">
                            <i class="mdi mdi-camera-control"></i>IDC笔记
                        </span>
						<span class="logo-sm">
                            <i class="mdi mdi-camera-control"></i>
                        </span>
					</a>
				</div>
				<nav class="navbar-custom">
					<ul class="navbar-right list-inline float-right mb-0">
						<!--<li class="dropdown notification-list list-inline-item d-none d-md-inline-block">
							<a class="nav-link waves-effect" href="#" id="btn-fullscreen">
								<i class="mdi mdi-arrow-expand-all noti-icon"></i>
							</a>
						</li>
						<li class="dropdown notification-list list-inline-item">
							<div class="dropdown notification-list nav-pro-img">
								<a class="dropdown-toggle nav-link arrow-none nav-user" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
									<img src="/skin1/picture/user-4.jpg" alt="user" class="rounded-circle">
								</a>
								<div class="dropdown-menu dropdown-menu-right profile-dropdown ">
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-account-circle"></i> Profile</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-wallet"></i> Wallet</a>
									<a class="dropdown-item d-block" href="#">
										<span class="badge badge-success float-right">11</span>
										<i class="mdi mdi-settings"></i> Settings</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-lock-open-outline"></i> Lock screen</a>
									<div class="dropdown-divider"></div>
									<a class="dropdown-item text-danger" href="#">
										<i class="mdi mdi-power text-danger"></i> Logout</a>
								</div>
							</div>
						</li>
						-->
					</ul>
					<ul class="list-inline menu-left mb-0">
						<li class="float-left">
							<button class="button-menu-mobile open-left waves-effect">
                            <i class="mdi mdi-menu"></i>
                        </button>
						</li>
						<li class="d-none d-md-inline-block">
							<form role="search" class="app-search">
								<div class="form-group mb-0">
									<input type="text" class="form-control" placeholder="Search..">
									<button type="submit"><i class="fa fa-search"></i></button>
								</div>
							</form>
						</li>
					</ul>
				</nav>
			</div>
<!-- ========== Left Sidebar Start ========== -->
<div class="left side-menu">
    <div class="slimscroll-menu" id="remove-scroll">
    <!--- Sidemenu -->
    <div id="sidebar-menu">
    <!-- Left Menu Start -->
    <ul class="metismenu" id="side-menu">
			<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP简介			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jianjie/1.html">PHP简介</a></li><li><a href="/php/jianjie/2.html">PHP用途</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP基本语法			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yufa/3.html">分离HTML</a></li><li><a href="/php/yufa/4.html">指令分隔符</a></li><li><a href="/php/yufa/5.html">PHP注释</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类型			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpleixing/6.html">PHP类型简介</a></li><li><a href="/php/phpleixing/7.html">PHP类型之布尔类型</a></li><li><a href="/php/phpleixing/8.html">PHP类型之整型</a></li><li><a href="/php/phpleixing/9.html">PHP类型之浮点型</a></li><li><a href="/php/phpleixing/10.html">PHP类型之字符串</a></li><li><a href="/php/phpleixing/11.html">PHP类型之数组</a></li><li><a href="/php/phpleixing/12.html">PHP类型之对象</a></li><li><a href="/php/phpleixing/13.html">PHP类型之资源类型</a></li><li><a href="/php/phpleixing/14.html">PHP类型之NULL</a></li><li><a href="/php/phpleixing/15.html">PHP类型之伪类型</a></li><li><a href="/php/phpleixing/16.html">PHP类型之类型判别</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP变量			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbianliang/17.html">PHP变量之基础</a></li><li><a href="/php/phpbianliang/18.html">PHP变量之预定义变量</a></li><li><a href="/php/phpbianliang/19.html">PHP变量之变量范围</a></li><li><a href="/php/phpbianliang/20.html">PHP变量之可变变量</a></li><li><a href="/php/phpbianliang/21.html">PHP变量之外部变量</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP运算符			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yunsuanfu/22.html">PHP运算符优先级</a></li><li><a href="/php/yunsuanfu/23.html">算术运算符</a></li><li><a href="/php/yunsuanfu/24.html">赋值运算符</a></li><li><a href="/php/yunsuanfu/25.html">位运算符</a></li><li><a href="/php/yunsuanfu/26.html">比较运算符</a></li><li><a href="/php/yunsuanfu/27.html">错误控制运算符</a></li><li><a href="/php/yunsuanfu/28.html">执行运算符</a></li><li><a href="/php/yunsuanfu/29.html">递增/递减运算符</a></li><li><a href="/php/yunsuanfu/30.html">逻辑运算符</a></li><li><a href="/php/yunsuanfu/31.html">字符串运算符</a></li><li><a href="/php/yunsuanfu/32.html">数组运算符</a></li><li><a href="/php/yunsuanfu/33.html">类型运算符</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP控制结构			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jiegou/34.html">PHP控制结构之if</a></li><li><a href="/php/jiegou/35.html">PHP控制结构之else</a></li><li><a href="/php/jiegou/36.html">PHP控制结构之elseif/else if</a></li><li><a href="/php/jiegou/37.html">PHP控制结构之替代语法</a></li><li><a href="/php/jiegou/38.html">PHP控制结构之while</a></li><li><a href="/php/jiegou/39.html">PHP控制结构之do-while</a></li><li><a href="/php/jiegou/40.html">PHP控制结构之for</a></li><li><a href="/php/jiegou/41.html">PHP控制结构之foreach</a></li><li><a href="/php/jiegou/42.html">PHP控制结构之break</a></li><li><a href="/php/jiegou/43.html">PHP控制结构之continue</a></li><li><a href="/php/jiegou/44.html">PHP控制结构之switch</a></li><li><a href="/php/jiegou/45.html">PHP控制结构之declare</a></li><li><a href="/php/jiegou/46.html">PHP控制结构之return</a></li><li><a href="/php/jiegou/47.html">PHP控制结构之require</a></li><li><a href="/php/jiegou/48.html">PHP控制结构之include</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/hanshu/52.html">用户自定义函数</a></li><li><a href="/php/hanshu/53.html">函数的参数</a></li><li><a href="/php/hanshu/54.html">返回值</a></li><li><a href="/php/hanshu/55.html">可变函数</a></li><li><a href="/php/hanshu/56.html">内部（内置）函数</a></li><li><a href="/php/hanshu/57.html">匿名函数</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类与对象			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpduixiang/58.html">类与对象前言</a></li><li><a href="/php/phpduixiang/59.html">基本概念</a></li><li><a href="/php/phpduixiang/60.html">属性</a></li><li><a href="/php/phpduixiang/61.html">类常量</a></li><li><a href="/php/phpduixiang/62.html">自动加载对象</a></li><li><a href="/php/phpduixiang/63.html">构造函数和析构函数</a></li><li><a href="/php/phpduixiang/64.html">访问控制</a></li><li><a href="/php/phpduixiang/65.html">对象继承</a></li><li><a href="/php/phpduixiang/66.html">Static关键字</a></li><li><a href="/php/phpduixiang/67.html">抽象类</a></li><li><a href="/php/phpduixiang/68.html">接口</a></li><li><a href="/php/phpduixiang/69.html">Traits</a></li><li><a href="/php/phpduixiang/70.html">重载</a></li><li><a href="/php/phpduixiang/71.html">对象迭代</a></li><li><a href="/php/phpduixiang/72.html">设计模式</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP异常处理			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yichang/81.html">异常处理</a></li><li><a href="/php/yichang/82.html">扩展PHP内置的异常处理类</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数库按分类			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpku/83.html">数组</a></li><li><a href="/php/phpku/84.html">Classes/Objects</a></li><li><a href="/php/phpku/85.html">Date/Time</a></li><li><a href="/php/phpku/86.html">Directories</a></li><li><a href="/php/phpku/87.html">错误处理</a></li><li><a href="/php/phpku/88.html">Program execution</a></li><li><a href="/php/phpku/89.html">Filesystem</a></li><li><a href="/php/phpku/90.html">Filter</a></li><li><a href="/php/phpku/91.html">Function Handling</a></li><li><a href="/php/phpku/92.html">PHP 选项/信息</a></li><li><a href="/php/phpku/93.html">Mail</a></li><li><a href="/php/phpku/94.html">Math</a></li><li><a href="/php/phpku/95.html">Misc.</a></li><li><a href="/php/phpku/96.html">Network</a></li><li><a href="/php/phpku/97.html">输出控制</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> php基础			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbiji/108377.html"></a></li><li><a href="/php/phpbiji/108376.html"></a></li><li><a href="/php/phpbiji/108380.html"></a></li><li><a href="/php/phpbiji/108379.html"></a></li><li><a href="/php/phpbiji/108378.html"></a></li><li><a href="/php/phpbiji/108381.html"></a></li><li><a href="/php/phpbiji/108382.html"></a></li><li><a href="/php/phpbiji/108384.html"></a></li><li><a href="/php/phpbiji/108383.html"></a></li><li><a href="/php/phpbiji/108385.html"></a></li><li><a href="/php/phpbiji/108386.html"></a></li><li><a href="/php/phpbiji/108388.html"></a></li><li><a href="/php/phpbiji/108387.html"></a></li><li><a href="/php/phpbiji/108389.html"></a></li><li><a href="/php/phpbiji/108391.html"></a></li>		</ul>
	</li>
		<li>
	    <a href="/php/biji/" class="waves-effect">
		    <i class="icon-share"></i>
		    <span>PHP笔记
		       	<span class="float-right menu-arrow">
		       	<i class="mdi mdi-chevron-right"></i>
		       	</span>
		    </span>
	    </a>
	</li>
	</ul>
</div>
<!-- Sidebar -->
<div class="clearfix"></div>
</div>
<!-- Sidebar -left -->
</div>
<!-- Left Sidebar End -->
<!-- Start right Content here -->
<div class="content-page">
	<div class="content">
		<div class="container-fluid">
			<div class="page-title-box">
				<div class="row align-items-center">
					<div class="col-sm-6">
						<h1 class="page-title">关于Unsupported major.minor version 49.0的错误解决办法</h1>
					</div>
				</div>
				<!-- end row -->
			</div>
			<!-- end page-title -->
			<!-- START ROW -->
			<div class="panel panel-forbid">
				<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>内容摘要</div>
			    <div class="panel-content">
			    <span>在装2个不同版本JDK时遇到了这个问题，在网上钩了一吧！查到一个讲解比较好的资料。<br />
<br />
<br />
一：要解决的问题<br />
我们在尝鲜 JDK1.5 的时候，相信不少人遇到过 Unsupported major.minor ver</span>                                     
		    	</div>
			    <div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>文章正文</div>
			    <div class="panel-content">
			    <span><p>在装2个不同版本JDK时遇到了这个问题，在网上钩了一吧！查到一个讲解比较好的资料。<br />
</p>
<p><span style="color: #0000ff">一：要解决的问题</span></p>
<p>我们在尝鲜 JDK1.5 的时候，相信不少人遇到过 Unsupported major.minor version 49.0 错误，当时定会茫然不知所措。因为刚开始那会儿，网上与此相关的中文资料还不多，现在好了，网上一找就知道是如何解决，大多会告诉你要使用 JDK 1.4 重新编译。那么至于为什么，那个 major.minor 究竟为何物呢？这就是本篇来讲的内容，以使未错而先知。</p>
<p>我觉得我是比较幸运的，因为在遇到那个错误之前已研读过《深入 Java 虚拟机》第二版，英文原书名为《Inside the Java Virtual Machine》( Second Edition)，看时已知晓 major.minor 藏匿于何处，但没有切身体会，待到与 Unsupported major.minor version 49.0 真正会面试，正好是给我验证了一个事实。</p>
<p>首先我们要对 Unsupported major.minor version 49.0 建立的直接感觉是：JDK1.5 编译出来的类不能在 JVM 1.4 下运行，必须编译成 JVM 1.4 下能运行的类。(当然，也许你用的还是 JVM 1.3 或 JVM 1.2，那么就要编译成目标 JVM 能认可的类)。这也解决问题的方向。</p>
<p><span style="color: #0000ff">二：major.minor 栖身于何处</span></p>
<p>何谓 major.minor，且又居身于何处呢？先感性认识并找到 major.minor 来。</p>
<p>写一个 Java Hello World! 代码，然后用 JDK 1.5 的编译器编译成，HelloWorld.java</p>
<div class="phpstudycode">
<pre class="brush:js;">
package com.unmi;  
public class HelloWorld  
{  
  public static void main(String[] args)  
  {  
    System.out.println("Hello, World!");  
  }  
} 
package com.unmi;public class HelloWorld{ public static void main(String[] args) { System.out.println("Hello, World!"); }}</pre>
</div>
<p>用 JDK 1.5 的 javac -d .&nbsp; HelloWorld.java 编译出来的字节码 HelloWorld.class 用 UltraEdit 打开来的内容如图所示：</p>
<p style="text-align: center">&nbsp;</p>
<p>从上图中我们看出来了什么是 major.minor version 了，它相当于一个软件的主次版本号，只是在这里是标识的一个 Java Class 的主版本号和次版本号，同时我们看到 minor_version 为 0x0000，major_version 为 0x0031，转换为十制数分别为0 和 49，即 major.minor 就是 49.0 了。</p>
<p><span style="color: #0000ff">三：何谓 major.minor 以及何用</span></p>
<p>Class 文件的第 5-8 字节为 minor_version 和 major_version。Java class 文件格式可能会加入新特性。class 文件格式一旦发生变化，版本号也会随之变化。对于 JVM 来说，版本号确定了特定的 class 文件格式，通常只有给定主版本号和一系列次版本号后，JVM 才能够读取 class 文件。如果 class 文件的版本号超出了 JVM 所能处理的有效范围，JVM 将不会处理该 class 文件。</p>
<p>在 Sun 的 JDK 1.0.2 发布版中，JVM 实现支持从 45.0 到 45.3 的 class 文件格式。在所有 JDK 1.1 发布版中的 JVM 都能够支持版本从 45.0 到 45.65535 的 class 文件格式。在 Sun 的 1.2 版本的 SDK 中，JVM 能够支持从版本 45.0 到46.0 的 class 文件格式。</p>
<p>1.0 或 1.2 版本的编译器能够产生版本号为 45.3 的 class 文件。在 Sun 的 1.2 版本 SDK 中，Javac 编译器默认产生版本号为 45.3&nbsp; 的 class 文件。但如果在 javac 命令行中指定了 -target 1.2 标志，1.2 版本的编译器将产生版本号为 46.0 的 class 文件。1.0 或 1.1 版本的 JVM 上不能运行使用-target 1.2 标志所产生的 class 文件。</p>
<p>JVM 实现的 第二版中修改了对 class 文件主版本号和次版本号的解释。对于第二版而言，class 文件的主版本号与 Java 平台主发布版的版本号保持一致(例如：在 Java 2 平台发布版上，主版本号从 45 升至 46)，次版本号与特定主平台发布版的各个发布版相关。因此，尽管不同的 class 文件格式可以由不同的版本号表示，但版本号不一样并不代表 class 文件格式不同。版本号不同的原因可能只是因为 class 文件由不同发布版本的 java 平台产生，可能 class 文件的格式并没有改变。</p>
<p>上面三段节选自《深入 Java 虚拟机》，啰嗦一堆，JDK 1.2 开启了 Java 2 的时代，但那个年代仍然离我们很远，我们当中很多少直接跳在 JDK 1.4 上的，我也差不多，只是项目要求不得不在一段时间里委屈在 JDK 1.3 上。不过大致我们可以得到的信息就是每个版本的 JDK 编译器编译出的 class 文件中都带有一个版本号，不同的 JVM 能接受一个范围 class 版本号，超出范围则要出错。不过一般都是能向后兼容的，知道 Sun 在做 Solaris 的一句口号吗？保持对先前版本的 100% 二进制兼容性，这也是对客户的投资保护。</p>
<p><span style="color: #0000ff">四：其他确定 class 的 major.minor version 办法</span></p>
<p><strong>1）Eclipse 中查看</strong></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Eclipse 3.3 加入的新特征，当某个类没有关联到源代码，打开它会显示比较详细的类信息，当然还未到源码级别了，看下图是打开 2.0 spring.jar 中 ClasspathXmlApplicationContext.class 显示的信息</p>
<p style="text-align: center">&nbsp;</p>
<p><strong>2）命令 javap -verbose</strong></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 对于编译出的 class 文件用 javap -verbose 能显示出类的 major.minor 版本，见下图：</p>
<p style="text-align: center">&nbsp;</p>
<p><strong>3)&nbsp; MANIFEST 文件</strong></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 把 class 打成的 JAR 包中都会有文件 META-INF\MANIFEST，这个文件一般会有编译器的信息，下面列几个包的 META-INF\MANIFEST 文件内容大家看看</p>
<div class="phpstudycode">
<pre class="brush:js;">
·Velocity-1.5.jar 的 META-INFO\MANIFEST 部份内容
         Manifest-Version: 1.0
         Ant-Version: Apache Ant 1.7.0
         Created-By: Apache Ant
         Package: org.apache.velocity
         Build-Jdk: 1.4.2_08
         Extension-Name: velocity</pre>
</div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 我们看到是用 ant 打包，构建用的JDK是 1.4.2_08，用 1.4 编译的类在 1.4 JVM 中当然能运行。如果那人用 1.5 的 JDK 来编译，然后用 JDK 1.4+ANT 来打包就太无聊了。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ·2.0 spring.jar 的 META-INFO\MANIFEST 部份内容&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
<div class="phpstudycode">
<pre class="brush:js;">
  Manifest-Version: 1.0
         Ant-Version: Apache Ant 1.6.5
         Created-By: 1.5.0_08-b03 (Sun Microsystems Inc.)
         Implementation-Title: Spring Framework</pre>
</div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 这下要注意啦，它是用的 JDK 1.5 来编译的，那么它是否带了 -target 1.4 或 -target 1.3 来编译的呢？确实是的，可以查看类的二进制文件，这是最保险的。所在 spring-2.0.jar 也可以在 1.4 JVM 中加载执行。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ·自已一个项目中用 ant 打的 jar 包的 META-INFO\MANIFEST&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
<div class="phpstudycode">
<pre class="brush:js;">
 Manifest-Version: 1.0
         Ant-Version: Apache Ant 1.7.0
         Created-By: 1.4.2-b28 (Sun Microsystems Inc.)</pre>
</div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 用的是 JDK 1.4 构建打包的。</p>
<p>第一第二种办法能明确知道 major.minor version，而第三种方法应该也没问题，但是碰到变态构建就难说了，比如谁把那个 META-INFO\MANIFEST 打包后换了也未可知。直接查看类的二进制文件的方法可以万分保证，准确无误，就是工具篡改我也认了。</p>
<p><span style="color: #0000ff">五：编译器比较及症节之所在</span></p>
<p>现在不妨从 JDK 1.1 到 JDK 1.7 编译器编译出的 class 的默认 minor.major version 吧。（又走到 Sun 的网站上翻腾出我从来都没用过的古董来）</p>
<p>&nbsp;
<table border="1" width="700" align="center" style="border-bottom: silver 1px solid; border-left: silver 1px solid; text-transform: none; background-color: rgb(255,255,255); text-indent: 0px; letter-spacing: normal; border-collapse: collapse; font: 12px/18px Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; white-space: normal; color: rgb(0,0,0); border-top: silver 1px solid; border-right: silver 1px solid; word-spacing: 0px; -webkit-text-stroke-width: 0px">
<tbody>
<tr>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">JDK 编译器版本</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">target 参数</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">十六进制 minor.major</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">十进制 minor.major</td>
</tr>
<tr>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">jdk1.1.8</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">不能带 target 参数</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">00 03&nbsp; &nbsp;00 2D</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">45.3</td>
</tr>
<tr>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">jdk1.2.2</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">不带(默认为 -target 1.1)</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">00 03&nbsp; &nbsp;00 2D</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">45.3</td>
</tr>
<tr>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">jdk1.2.2</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">-target 1.2</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">00 00&nbsp;&nbsp; 00 2E</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">46.0</td>
</tr>
<tr>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">jdk1.3.1_19</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">不带(默认为 -target 1.1)</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">00 03&nbsp; &nbsp;00 2D</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">45.3</td>
</tr>
<tr>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">jdk1.3.1_19</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">-target 1.3</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">00 00&nbsp;&nbsp; 00 2F</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">47.0</td>
</tr>
<tr>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">j2sdk1.4.2_10</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">不带(默认为 -target 1.2)</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">00 00&nbsp;&nbsp; 00 2E</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">46.0</td>
</tr>
<tr>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">j2sdk1.4.2_10</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">-target 1.4</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">00 00&nbsp;&nbsp; 00 30</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">48.0</td>
</tr>
<tr>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">jdk1.5.0_11</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">不带(默认为 -target 1.5)</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">00 00&nbsp;&nbsp; 00 31</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">49.0</td>
</tr>
<tr>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">jdk1.5.0_11</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">-target 1.4 -source 1.4</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">00 00&nbsp;&nbsp; 00 30</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">48.0</td>
</tr>
<tr>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">jdk1.6.0_01</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">不带(默认为 -target 1.6)</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">00 00&nbsp;&nbsp; 00 32</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">50.0</td>
</tr>
<tr>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">jdk1.6.0_01</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">-target 1.5</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">00 00&nbsp;&nbsp; 00 31</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">49.0</td>
</tr>
<tr>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">jdk1.6.0_01</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">-target 1.4 -source 1.4</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">00 00&nbsp;&nbsp; 00 30</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">48.0</td>
</tr>
<tr>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">jdk1.7.0</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">不带(默认为 -target 1.6)</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">00 00&nbsp;&nbsp; 00 32</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">50.0</td>
</tr>
<tr>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">jdk1.7.0</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">-target 1.7</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">00 00&nbsp;&nbsp; 00 33</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">51.0</td>
</tr>
<tr>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">jdk1.7.0</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">-target 1.4 -source 1.4</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">00 00&nbsp;&nbsp; 00 30</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">48.0</td>
</tr>
<tr>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">Apache Harmony 5.0M3</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">不带(默认为 -target 1.2)</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">00 00&nbsp;&nbsp; 00 2E</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">46.0</td>
</tr>
<tr>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">Apache Harmony 5.0M3</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">-target 1.4</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">00 00&nbsp;&nbsp; 00 30</td>
<td style="border-bottom: silver 1px solid; border-left: silver 1px solid; padding-bottom: 3px; padding-left: 3px; padding-right: 3px; border-collapse: collapse; font-size: 12px; border-top: silver 1px solid; border-right: silver 1px solid; padding-top: 3px">48.0</td>
</tr>
</tbody>
</table>
</p>
<p><strong>上面比较是 Windows 平台下的 JDK 编译器的情况，我们可以此作些总结：</strong></p>
<p>1) -target 1.1 时 有次版本号，target 为 1.2 及以后都只用主版本号了，次版本号为 0</p>
<p>2) 从 1.1 到 1.4 语言差异比较小，所以 1.2 到 1.4 默认的 target 都不是自身相对应版本</p>
<p>3) 1.5 语法变动很大，所以直接默认 target 就是 1.5。也因为如此用 1.5 的 JDK 要生成目标为 1.4 的代码，光有 -target 1.4 不够，必须同时带上 -source 1.4，指定源码的兼容性，1.6/1.7 JDk 生成目标为 1.4 的代码也如此。</p>
<p>4) 1.6 编译器显得较为激进，默认参数就为 -target 1.6。因为 1.6 和 1.5 的语法无差异，所以用 -target 1.5 时无需跟着 -source 1.5。</p>
<p>5) 注意 1.7 编译的默认 target 为 1.6</p>
<p>6) 其他第三方的 JDK 生成的 Class 文件格式版本号同对应 Sun 版本 JDK</p>
<p>7) 最后一点最重要的，某个版本的 JVM 能接受 class 文件的最大主版本号不能超过对应 JDK 带相应 target 参数编译出来的 class 文件的版本号。</p>
<p>上面那句话有点长，一口气读过去不是很好理解，举个例子：1.4 的 JVM 能接受最大的 class 文件的主版本号不能超过用 1.4 JDK 带参数 -target 1.4 时编译出的 class 文件的主版本号，也就是 48。</p>
<p>因为 1.5 JDK 编译时默认 target 为 1.5，出来的字节码 major.minor version 是 49.0，所以 1.4 的 JVM 是无法接受的，只有抛出错误。</p>
<p>那么又为什么从 1.1 到 1.2、从 1.2 到 1.3 或者从 1.3 到 1.4 的 JDK 升级不会发生 Unsupported major.minor version 的错误呢，那是因为 1.2/1.3/1.4 都保持了很好的二进制兼容性，看看 1.2/1.3/1.4 的默认 target 分别为 1.1/1.1/1.2 就知道了，也就是默认情况下1.4 JDK 编译出的 class 文件在 JVM 1.2 下都能加载执行，何况于 JVM 1.3 呢？（当然要去除使用了新版本扩充的 API 的因素）</p>
<p><span style="color: #0000ff">六：找到问题解决的方法</span></p>
<p>那么现在如果碰到这种问题该知道如何解决了吧，还会像我所见到有些兄弟那样，去找个 1.4 的 JDK 下载安装，然后用其重新编译所有的代码吗？其实大可不必如此费神，我们一定还记得 javac 还有个 -target 参数，对啦，可以继续使用 1.5 JDK，编译时带上参数 -target 1.4 -source 1.4 就 OK 啦，不过你一定要对哪些 API 是 1.5 JDK 加入进来的了如指掌，不能你的 class 文件拿到 JVM 1.4 下就会 method not found。目标 JVM 是 1.3 的话，编译选项就用 -target 1.3 -source 1.3 了。</p>
<p>相应的如果使用 ant ，它的 javac 任务也可对应的选择 target 和 source</p>
<div class="phpstudycode">
<pre class="brush:js;">
&lt;javac target="1.4" source="1.4" ............................/&gt;</pre>
</div>
<p>如果是在开发中，可以肯定的是现在真正算得上是 JAVA IDE 对于工程也都有编译选项设置目标代码的。例如 Eclipse 的项目属性中的 Java Compiler 设置，如图</p>
<p style="text-align: center">&nbsp;</p>
<p>自已设定编译选项，你会看到选择不同的 compiler compliance level 是，Generated class files compatibility 和 Source compatibility 也在变，你也可以手动调整那两项，手动设置后你就不用很在乎用的什么版本的编译器了，只要求他生成我们希望的字节码就行了，再引申一下就是即使源代码是用 VB 写的，只要能编译成 JVM 能执行的字节码都不打紧。在其他的 IDE 也能找到相应的设置对话框的。</p>
<p>其他时候，你一定要知道当前的 JVM 是什么版本，能接受的字节码主版本号是多少（可对照前面那个表）。获息当前 JVM 版本有两种途径：</p>
<p>第一：如果你是直接用 java 命令在控制台执行程序，可以用 java -version 查看当前的 JVM 版本，然后确定能接受的 class 文件版本</p>
<p>第二：如果是在容器中执行，而不能明确知道会使用哪个 JVM，那么可以在容器中执行的程序中加入代码　System.getProperty("java.runtime.version"); 或 System.getProperty("java.class.version")，获得 JVM 版本和能接受的 class 的版本号。</p>
<p>最后一绝招，如果你不想针对低版本的 JVM 用 target 参数重新编译所有代码；如果你仍然想继续在代码中用新的 API 的话；更有甚者，你还用了 JDK 1.5 的新特性，譬如泛型、自动拆装箱、枚举等的话，那你用 -target 1.4 -source 1.4 就没法编译通过，不得不重新整理代码。那么告诉你最后一招，不需要再从源代码着手，直接转换你所正常编译出的字节码，继续享用那些新的特性，新的 API，那就是：请参考之前的一篇日志：Retrotranslator让你用JDK1.5的特性写出的代码能在JVM1.4中运行 ，我就是这么用的，做好测试就不会有问题的。</p>
<p><span style="color: #0000ff">七：再议一个实际发生的相关问题</span></p>
<p>这是一个因为拷贝 Tomcat 而产生的 Unsupported major.minor version 49.0 错误。情景是：我本地安装的是 JDK 1.5，然后在网上找了一个 EXE 的 Tomcat 安装文件安装了并且可用。后来同事要一个 Tomcat，不想下载或安装，于是根据我以往的经验是把我的 Tomcat 整个目录拷给他应该就行了，结果是拿到他那里浏览 jsp 文件都出现 Unsupported major.minor version 49.0 错误，可以确定的是他安装的是 1.4 的 JDK，但我还是有些纳闷，先前对这个问题还颇有信心的我傻眼了。惯性思维是编译好的 class 文件拿到低版本的 JVM 会出现如是异常，可现并没有用已 JDK 1.5 编译好的类要执行啊。</p>
<p>后来仔细看异常信息，终于发现了 %TOMCAT_HOME%\common\lib\tools.jar 这一眉目，因为 jsp 文件需要依赖它来编译，打来这个 tools.jar 中的一个 class 文件来看看，49.0，很快我就明白原来这个文件是在我的机器上安装 Tomcat 时由 Tomcat 安装程序从 %JDK1.5%\lib 目录拷到 Tomcat 的 lib 目录去的，造成在同事机器上编译 JSP 时是 1.4 的 JVM 配搭着 49.0 的 tools.jar，那能不出错，于是找来 1.4&nbsp; JDK 的 tools.jar 替换了 Tomcat 的就 OK 啦。</p>
<p><span style="color: #0000ff">八：小结</span></p>
<p>其实理解 major.minor 就像是我们可以这么想像，同样是微软件的程序，32 位的应用程序不能拿到 16 位系统中执行那样。</p>
<p>如果我们发布前了解到目标 JVM 版本，知道怎么从 java class 文件中看出 major.minor 版本来，就不用等到服务器报出异常才着手去解决，也就能预知到可能发生的问题。</p>
<p>其他时候遇到这个问题应具体解决，总之问题的根由是低版本的&nbsp; JVM 无法加载高版本的 class 文件造成的，找到高版本的 class 文件处理一下就行了</p>
<p><span style="color: #ff0000">下面是关于Tomcat 运行第一个servlet时发生Unsupported major.minor version 52.0错误的解决办法</span></p>
<p>使用Tomcat运行第一个servlet程序是发生如图错误：</p>
<p style="text-align: center"><a href="http://images2015.cnblogs.com/blog/436101/201511/436101-20151127100822390-728155967.png"></a></p>
<p>查找资料后发现是由于使用高版本的jdk编译的项目运行在低版本的jre上，决解办法是编译的jdk和运行的jre版本一致。</p>
<p>查看Tomcat使用的jre确实和编译时使用的不一致（当初安装了两个jdk）;</p>
<p style="text-align: center"><a href="http://images2015.cnblogs.com/blog/436101/201511/436101-20151127102015968-967847378.png"></a></p>
<p style="text-align: center"><a href="http://images2015.cnblogs.com/blog/436101/201511/436101-20151127102030906-1725138931.png"></a></p>
<p>后面把Tomcat的jre改为1.8就可正常运行：</p>
<p style="text-align: center"><a href="http://images2015.cnblogs.com/blog/436101/201511/436101-20151127102043796-130739990.png"></a><br />
</p>
<p>no art, however minor, demands less than total dedication if you want to excel in it.</p>
<hr></span>                                     
		    	</div>
		    	<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>代码注释</div>
			    <div class="panel-content">
			    <span></span>                                     
		    	</div>

			</div>

			<!-- END ROW -->
			<div class="newsPage">
				<div class="newsPageTurn">
				    <span><a>上一篇</a><a href='/php/biji/101409.html'>css display inline block 兼容性问题写法</a><a>下一篇</a><a href='/php/biji/101411.html'>jQuery获得IE版本不准确webbrowser的解决方法</a></span>
				</div>
			</div>
		</div>


<div id="author-box">
    <h3>作者：喵哥笔记</h3>
        <div class="author-info">
            <div class="author-avatar">
                <img src="/skin1/picture/01.jpg" alt="IDC笔记" class="avatar" width="64" height="64">
            </div>
        <div class="author-description">
            <p>学的不仅是技术，更是梦想！</p>
            <ul class="author-social follows nb">
            	<li>
                    <a target="_blank" href="/" title="IDC笔记">IDC笔记</a>
                </li>
            </ul>
        </div>
        <div class="clear"></div>
    </div>
</div>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
<!-- container-fluid -->
	</div>
<!-- content -->
	<footer class="footer">
	© 2020 IDC笔记 <i class="mdi mdi-heart text-danger"></i>. | 备案号：<a href="https://beian.miit.gov.cn/">辽ICP备18000516号</a>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?674585fbbd2294d3faf910f668ea91b4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

	</footer>
</div>

</div>
<!-- END wrapper -->
<!-- jQuery  -->
<script src="/skin1/js/jquery.min.js"></script>
<script src="/skin1/js/bootstrap.bundle.min.js"></script>
<script src="/skin1/js/metismenu.min.js"></script>
<script src="/skin1/js/jquery.slimscroll.js"></script>
<script src="/skin1/js/waves.min.js"></script>
<!--Morris Chart-->
<script src="/skin1/js/morris.min.js"></script>
<script src="/skin1/js/raphael.min.js"></script>
<script src="/skin1/js/dashboard.init.js"></script>
<script src="/skin1/js/app.js"></script>
<script src="/foot.js"></script>
</body>
</html>