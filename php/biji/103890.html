<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title>Linux折腾记（四）：Linux桌面系统字体配置详解_PHP教程_IDC笔记</title>
    <meta name="keywords" content="PHP,PHP笔记,PHP教程" />
    <meta name="description" content="字体显示效果测试<br />
<br />
文字：<br />

<br />
复制代码代码如下:<br />
这一段是为了测试宋体字的显示效果，包括宋体里面自带的英文字体，&ldquo;This is english,how does it look like?&rdquo;。这一行" />
    <meta content="Responsive admin theme build on top of Bootstrap 4" name="description" />
    <meta content="idcnote.com" name="author" />
    <link rel="shortcut icon" href="/skin1/images/favicon.ico">
    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="/skin1/css/morris.css">
    <link href="/skin1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/metismenu.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/icons.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/style.css" rel="stylesheet" type="text/css">
<link href="/SyntaxHighlighter/shCoreDefault.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/SyntaxHighlighter/shCore.js"></script>
<script type="text/javascript">
 SyntaxHighlighter.all();
</script>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
</head>
<body>
<!-- Begin page -->
		<div id="wrapper">
			<!-- Top Bar Start -->
			<div class="topbar">
				<!-- LOGO -->
				<div class="topbar-left">
					<a href="/" class="logo">
						<span class="logo-light">
                            <i class="mdi mdi-camera-control"></i>IDC笔记
                        </span>
						<span class="logo-sm">
                            <i class="mdi mdi-camera-control"></i>
                        </span>
					</a>
				</div>
				<nav class="navbar-custom">
					<ul class="navbar-right list-inline float-right mb-0">
						<!--<li class="dropdown notification-list list-inline-item d-none d-md-inline-block">
							<a class="nav-link waves-effect" href="#" id="btn-fullscreen">
								<i class="mdi mdi-arrow-expand-all noti-icon"></i>
							</a>
						</li>
						<li class="dropdown notification-list list-inline-item">
							<div class="dropdown notification-list nav-pro-img">
								<a class="dropdown-toggle nav-link arrow-none nav-user" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
									<img src="/skin1/picture/user-4.jpg" alt="user" class="rounded-circle">
								</a>
								<div class="dropdown-menu dropdown-menu-right profile-dropdown ">
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-account-circle"></i> Profile</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-wallet"></i> Wallet</a>
									<a class="dropdown-item d-block" href="#">
										<span class="badge badge-success float-right">11</span>
										<i class="mdi mdi-settings"></i> Settings</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-lock-open-outline"></i> Lock screen</a>
									<div class="dropdown-divider"></div>
									<a class="dropdown-item text-danger" href="#">
										<i class="mdi mdi-power text-danger"></i> Logout</a>
								</div>
							</div>
						</li>
						-->
					</ul>
					<ul class="list-inline menu-left mb-0">
						<li class="float-left">
							<button class="button-menu-mobile open-left waves-effect">
                            <i class="mdi mdi-menu"></i>
                        </button>
						</li>
						<li class="d-none d-md-inline-block">
							<form role="search" class="app-search">
								<div class="form-group mb-0">
									<input type="text" class="form-control" placeholder="Search..">
									<button type="submit"><i class="fa fa-search"></i></button>
								</div>
							</form>
						</li>
					</ul>
				</nav>
			</div>
<!-- ========== Left Sidebar Start ========== -->
<div class="left side-menu">
    <div class="slimscroll-menu" id="remove-scroll">
    <!--- Sidemenu -->
    <div id="sidebar-menu">
    <!-- Left Menu Start -->
    <ul class="metismenu" id="side-menu">
			<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP简介			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jianjie/1.html">PHP简介</a></li><li><a href="/php/jianjie/2.html">PHP用途</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP基本语法			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yufa/3.html">分离HTML</a></li><li><a href="/php/yufa/4.html">指令分隔符</a></li><li><a href="/php/yufa/5.html">PHP注释</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类型			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpleixing/6.html">PHP类型简介</a></li><li><a href="/php/phpleixing/7.html">PHP类型之布尔类型</a></li><li><a href="/php/phpleixing/8.html">PHP类型之整型</a></li><li><a href="/php/phpleixing/9.html">PHP类型之浮点型</a></li><li><a href="/php/phpleixing/10.html">PHP类型之字符串</a></li><li><a href="/php/phpleixing/11.html">PHP类型之数组</a></li><li><a href="/php/phpleixing/12.html">PHP类型之对象</a></li><li><a href="/php/phpleixing/13.html">PHP类型之资源类型</a></li><li><a href="/php/phpleixing/14.html">PHP类型之NULL</a></li><li><a href="/php/phpleixing/15.html">PHP类型之伪类型</a></li><li><a href="/php/phpleixing/16.html">PHP类型之类型判别</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP变量			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbianliang/17.html">PHP变量之基础</a></li><li><a href="/php/phpbianliang/18.html">PHP变量之预定义变量</a></li><li><a href="/php/phpbianliang/19.html">PHP变量之变量范围</a></li><li><a href="/php/phpbianliang/20.html">PHP变量之可变变量</a></li><li><a href="/php/phpbianliang/21.html">PHP变量之外部变量</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP运算符			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yunsuanfu/22.html">PHP运算符优先级</a></li><li><a href="/php/yunsuanfu/23.html">算术运算符</a></li><li><a href="/php/yunsuanfu/24.html">赋值运算符</a></li><li><a href="/php/yunsuanfu/25.html">位运算符</a></li><li><a href="/php/yunsuanfu/26.html">比较运算符</a></li><li><a href="/php/yunsuanfu/27.html">错误控制运算符</a></li><li><a href="/php/yunsuanfu/28.html">执行运算符</a></li><li><a href="/php/yunsuanfu/29.html">递增/递减运算符</a></li><li><a href="/php/yunsuanfu/30.html">逻辑运算符</a></li><li><a href="/php/yunsuanfu/31.html">字符串运算符</a></li><li><a href="/php/yunsuanfu/32.html">数组运算符</a></li><li><a href="/php/yunsuanfu/33.html">类型运算符</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP控制结构			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jiegou/34.html">PHP控制结构之if</a></li><li><a href="/php/jiegou/35.html">PHP控制结构之else</a></li><li><a href="/php/jiegou/36.html">PHP控制结构之elseif/else if</a></li><li><a href="/php/jiegou/37.html">PHP控制结构之替代语法</a></li><li><a href="/php/jiegou/38.html">PHP控制结构之while</a></li><li><a href="/php/jiegou/39.html">PHP控制结构之do-while</a></li><li><a href="/php/jiegou/40.html">PHP控制结构之for</a></li><li><a href="/php/jiegou/41.html">PHP控制结构之foreach</a></li><li><a href="/php/jiegou/42.html">PHP控制结构之break</a></li><li><a href="/php/jiegou/43.html">PHP控制结构之continue</a></li><li><a href="/php/jiegou/44.html">PHP控制结构之switch</a></li><li><a href="/php/jiegou/45.html">PHP控制结构之declare</a></li><li><a href="/php/jiegou/46.html">PHP控制结构之return</a></li><li><a href="/php/jiegou/47.html">PHP控制结构之require</a></li><li><a href="/php/jiegou/48.html">PHP控制结构之include</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/hanshu/52.html">用户自定义函数</a></li><li><a href="/php/hanshu/53.html">函数的参数</a></li><li><a href="/php/hanshu/54.html">返回值</a></li><li><a href="/php/hanshu/55.html">可变函数</a></li><li><a href="/php/hanshu/56.html">内部（内置）函数</a></li><li><a href="/php/hanshu/57.html">匿名函数</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类与对象			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpduixiang/58.html">类与对象前言</a></li><li><a href="/php/phpduixiang/59.html">基本概念</a></li><li><a href="/php/phpduixiang/60.html">属性</a></li><li><a href="/php/phpduixiang/61.html">类常量</a></li><li><a href="/php/phpduixiang/62.html">自动加载对象</a></li><li><a href="/php/phpduixiang/63.html">构造函数和析构函数</a></li><li><a href="/php/phpduixiang/64.html">访问控制</a></li><li><a href="/php/phpduixiang/65.html">对象继承</a></li><li><a href="/php/phpduixiang/66.html">Static关键字</a></li><li><a href="/php/phpduixiang/67.html">抽象类</a></li><li><a href="/php/phpduixiang/68.html">接口</a></li><li><a href="/php/phpduixiang/69.html">Traits</a></li><li><a href="/php/phpduixiang/70.html">重载</a></li><li><a href="/php/phpduixiang/71.html">对象迭代</a></li><li><a href="/php/phpduixiang/72.html">设计模式</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP异常处理			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yichang/81.html">异常处理</a></li><li><a href="/php/yichang/82.html">扩展PHP内置的异常处理类</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数库按分类			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpku/83.html">数组</a></li><li><a href="/php/phpku/84.html">Classes/Objects</a></li><li><a href="/php/phpku/85.html">Date/Time</a></li><li><a href="/php/phpku/86.html">Directories</a></li><li><a href="/php/phpku/87.html">错误处理</a></li><li><a href="/php/phpku/88.html">Program execution</a></li><li><a href="/php/phpku/89.html">Filesystem</a></li><li><a href="/php/phpku/90.html">Filter</a></li><li><a href="/php/phpku/91.html">Function Handling</a></li><li><a href="/php/phpku/92.html">PHP 选项/信息</a></li><li><a href="/php/phpku/93.html">Mail</a></li><li><a href="/php/phpku/94.html">Math</a></li><li><a href="/php/phpku/95.html">Misc.</a></li><li><a href="/php/phpku/96.html">Network</a></li><li><a href="/php/phpku/97.html">输出控制</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> php基础			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbiji/108377.html"></a></li><li><a href="/php/phpbiji/108376.html"></a></li><li><a href="/php/phpbiji/108380.html"></a></li><li><a href="/php/phpbiji/108379.html"></a></li><li><a href="/php/phpbiji/108378.html"></a></li><li><a href="/php/phpbiji/108381.html"></a></li><li><a href="/php/phpbiji/108382.html"></a></li><li><a href="/php/phpbiji/108384.html"></a></li><li><a href="/php/phpbiji/108383.html"></a></li><li><a href="/php/phpbiji/108385.html"></a></li><li><a href="/php/phpbiji/108386.html"></a></li><li><a href="/php/phpbiji/108388.html"></a></li><li><a href="/php/phpbiji/108387.html"></a></li><li><a href="/php/phpbiji/108389.html"></a></li><li><a href="/php/phpbiji/108391.html"></a></li>		</ul>
	</li>
		<li>
	    <a href="/php/biji/" class="waves-effect">
		    <i class="icon-share"></i>
		    <span>PHP笔记
		       	<span class="float-right menu-arrow">
		       	<i class="mdi mdi-chevron-right"></i>
		       	</span>
		    </span>
	    </a>
	</li>
	</ul>
</div>
<!-- Sidebar -->
<div class="clearfix"></div>
</div>
<!-- Sidebar -left -->
</div>
<!-- Left Sidebar End -->
<!-- Start right Content here -->
<div class="content-page">
	<div class="content">
		<div class="container-fluid">
			<div class="page-title-box">
				<div class="row align-items-center">
					<div class="col-sm-6">
						<h1 class="page-title">Linux折腾记（四）：Linux桌面系统字体配置详解</h1>
					</div>
				</div>
				<!-- end row -->
			</div>
			<!-- end page-title -->
			<!-- START ROW -->
			<div class="panel panel-forbid">
				<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>内容摘要</div>
			    <div class="panel-content">
			    <span>字体显示效果测试<br />
<br />
文字：<br />

<br />
复制代码代码如下:<br />
这一段是为了测试宋体字的显示效果，包括宋体里面自带的英文字体，&ldquo;This is english,how does it look like?&rdquo;。这一行</span>                                     
		    	</div>
			    <div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>文章正文</div>
			    <div class="panel-content">
			    <span><p><strong>字体显示效果测试</strong></p>
<p></p>
<p>文字：</p>
<p><br><div class="msgheader"><div class="right"><span style="CURSOR: pointer" onclick="copycode(getid('phpcode13'));"><u>复制代码</u></span></div>代码如下:</div><div class="msgborder" id="phpcode13"><br />这一段是为了测试宋体字的显示效果，包括宋体里面自带的英文字体，&ldquo;This is english,how does it look like?&rdquo;。这一行是小字。后面几个字是加粗的宋体。标点符号&ldquo;，。：；！&rdquo;<br />　　这一段是为了测试黑体字的显示效果，包括黑体里面自带的英文字体，&ldquo;This is english,how does it look like?&rdquo;。这一行是小字。标点符号&ldquo;，。：；！&rdquo;。微软雅黑是什么样子的呢&ldquo;，。：！&rdquo;？<br />　　This paragraph shows how does serif english fonts look like,包括英文里面夹杂中文的显示效果。Is serif same as Times New roman?<br />　　This paragraph shows how does sans-serif english fonts look like,包括英文里面夹杂中文的显示效果。Is sans-serif same as Arial?<br />　　This paragraph shows how does ui fonts look like，还有专门的界面字体，比如Windows中的Tahoma字体：File-&gt;New-&gt;New Project。<br />　　　　#include &lt;stdio.h&gt;<br />　　　　int main(){<br />　　　　　　return 0;//很显然这是为了测试等宽字体<br />　　　　}&lt;/p&gt;
&lt;p&gt;　　　　#include &lt;stdio.h&gt;　　//观察下面的代码了解monospace是否等于Courier New<br />　　　　int main(){<br />　　　　　　return 0;<br />　　　　}<br /></div></p>
<strong>字体的分类及其用途</strong>
<p>　　在文章最开始的一个部分（也就是这部分之前的内容），我特意写了一些文字用来测试各种字体的显示效果。这些测试文本我在HTML源代码模式下经过仔细修改。第1段的字体都是设置为宋体，包括其中的英文、小字及加粗的字。第2段除了最后一句外，其余的字体都设置为黑体，包括英文及小字；最后一句字体设置为微软雅黑，是为了对比微软雅黑和普通黑体的效果。第3段除了最后一句外，其余的字体都设置为Serif，包括其中的中文；最后一句字体设置为Times New Roman。第4段除了最后一句外，其余的是Sans-Serif，最后一句是Arial。第5段的字体都是设置为Tahoma。最后的两块代码，第1块代码的字体设置为monospace，第2块代码的字体设置为Courier New。为什么这样设置，我后面会配合图片逐一讲解。下面，需要先了解字体的分类及其用途。</p>
<p>　　1、英文字体分为三类，分别是有衬线字体（serif）、无衬线字体（sans-serif）和等宽字体（monospace）。Serif是有衬线字体，意思是在字的笔画开始、结束的地方有额外的装饰，而且笔画的粗细会有所不同。Sans-serif就没有这些额外的装饰，而且笔画的粗细差不多。在传统的正文印刷中，普遍认为衬线体能带来更佳的可读性（相比无衬线体），尤其是在大段落的文章中，衬线增加了阅读时对字母的视觉参照。而无衬线体往往被用在标题、较短的文字段落或者一些通俗读物中。相比严肃正经的衬线体，无衬线体给人一种休闲轻松的感觉。同时，由于无衬线字体笔画比较饱满，所以比较适合电脑屏幕显示，在印刷和打印中，可以用无衬线字体做标题、加粗字体等表示强调。等宽字体就不用多说啦，主要用于终端字体或编程。</p>
<p>　　2、中文字体可以参照英文字体进行分类，由于中文都是等宽的，所以就只需要区分有衬线（serif）和无衬线（sans-serif）。中文的宋体、仿宋就相当于英文的serif，所以用于传统印刷和打印效果比较好。而中文的黑体、楷体、圆体等字体相当于英文的sans-serif，用于电脑屏幕的显示效果比较好，也可以用在印刷和打印中做标题和粗体字。</p>
<p>　　3、Serif字体的经典代表有Georgia和Times New Roman，sans-serif字体的经典代表有Arial和Verdana，monospace字体的经典代表有Courier New和DejaVu Sans Mono。</p>
电脑中的字体显示技术
<p>　　电脑中的字体既是一门艺术，也是一门技术。要将屏幕上的字体显示得好看难度可不小。字体可以表示为点阵（bitmap），也可以表示为轮廓（outline）。点阵字体不能缩放，轮廓字体可以随意缩放。</p>
<p>　　1、要获得锐利清晰的效果，小字必须显示为点阵（bitmap），大字可以显示为轮廓；</p>
<p>　　2、显示轮廓字体时，为了让字体边缘显得比较光滑，需要对字体边缘进行抗锯齿（anti-alias）；</p>
<p>　　3、为了获得更好的效果，字体设计厂家在设计字体的时候，会对字体进行微调（hinting）。字体微调是一项耗时耗力的工作，所以就产生了自动微调技术（autohint）；</p>
<p>　　4、为了让字体在液晶显示器上获得更好的效果（主要也是为了字体边缘光滑），产生了次像素平滑技术（subpixle），微软的ClearType技术也属于次像素平滑技术的一种。所谓次像素，是指每个像素中的单独的R、G、B分量，所以次像素平滑用好了，字体边缘看起来会更平滑，如果用不好，字体边缘就会显得花花绿绿。也正是因为CRT显示器和液晶显示器每个像素的组成方式不一样，所以在CRT显示器中不能开次像素平滑。</p>
<p>　　5、增加屏幕的dpi，可以增加画字的像素，从而获得更平滑的显示效果。比如在传统的96dpi的电脑显示器上，一个9pt的字符用12个像素绘制，一个12pt的字符用16个像素绘制，使用轮廓字体确实很难做到平滑。但是在目前的安卓手机、苹果iPad等设备上，高分辨率的润眼屏都在300dpi以上，画一个12pt的字符可以用50多个像素，字体平滑自然不是问题，根本不需要使用点阵、微调、抗锯齿、次像素等技术。我认为，随着显示器硬件技术的发展，以上技术都将成为浮云。<br /></p>
<p align="center"></p>
<p>　　以上图片是字体测试段落在Win7系统中的显示效果。除了标题和小字外，其它的字体都是12pt。可以看到，12pt的宋体字和serif的英文字体显示为点阵，所以获得了清晰锐利的效果。而黑体、微软雅黑和sans-serif字体都没有点阵，但是由于sans-serif本身笔画饱满，所以也获得了不错的显示效果。据说微软雅黑每个字造价100美元，专为ClearType技术而设计，但是从效果上看，并不比普通黑体强多少。</p>
<p>　　前面讲过，serif和sans-serif是字体的分类名，而不是具体的字体名。Times New Roman是Windows下最经典的serif字体，但是从上图可以看出它并不是serif字体的首选字体，设置为serif的字体和设置为Times New Roman的字体显示不一样，但是都是很漂亮的有衬线字体，serif的中文选择了一种和宋体不同的点阵字体。Arial字体是最经典的无衬线字体，从图中可以看出设置为sans-serif和设置为Arial的字体显示效果相同。只是sans-serif的中文被宋体的点阵代替了。Tahoma字体的显示效果和sans-serif只是宽度上略有不同，但是依然很饱满。</p>
<p>　　使用Ctrl+鼠标滑轮可以缩放网页。将网页放大后显示，可以查看轮廓字体的显示效果，如下图：<br /></p>
<p align="center"></p>
<p>　　（注意：我文中的图片都不是原始大小，可以通过Ctrl+鼠标滑轮放大后观看，也可以在新窗口中打开图片观看。）</p>
<strong>Linux中的字体</strong>
<p>　　下面，通过大量的图片直观地感受不同的字体以及不同的字体显示技术会带来什么样的效果。<br /></p>
<p align="center"></p>
<p>　　上图是CentOS 5中的显示效果，是不是觉得字体很虚？系统菜单中的字体倒是很锐利。其实在Fedora 9之前，Red Hat系列的Linux发行版中文字体显示都很模糊。也正是因为这个原因，我曾经有一段时间偏向于使用中科红旗的Linux。CentOS中的字体显示发虚的原因就是因为它的小字没有使用点阵。</p>
<p>　　小字使用轮廓字体就会发虚，大字使用轮廓字体效果就要好得多。使用Ctrl+鼠标滑轮将网页放大，可以看到大字显示很清晰饱满。如下图：<br /></p>
<p align="center"></p>
<p>　　CentOS 5中的字体显示还有一个奇怪的现象，那就是它认为serif的中文应该是楷体，而且它的sans-serif也显示的是有衬线字体，很显然这是不对的。而且由于历史的原因，它没有黑体。如下图：<br /></p>
<p align="center"></p>
<p>　　CentOS系统中对中文的支持主要依赖于2001年文鼎向开源界贡献的两套字体：文鼎PL中楷和文鼎PL细上海宋，如下图：<br /></p>
<p align="center"></p>
<p>　　下面来看看Ubuntu中的显示效果。从下图中可以看到，Ubuntu侧重于sans-serif和黑体，除了明确指定serif和Times New Roman的字体外，其余全部显示为sans-serif和黑体。而且没有点阵。这进一步印证了我前面说的黑体适合屏幕显示、宋体适合打印和印刷。在系统中全部显示黑体虽然不会丢失文字的信息，但是肯定会影响美观。Ubuntu没有正确地为monospace选择等宽字体，但是对Courier New倒是选择了一个很漂亮的等宽字体进行替代。<br /></p>
<p align="center"></p>
<p>　　使用Ctrl+鼠标滚轮将网页放大，看到清晰饱满的字体，如下图：<br /></p>
<p align="center"></p>
<p>　　对于界面字体，Windows下有Tahoma，Ubuntu下也有专用的界面字体，该字体就叫Ubuntu，是开源的。自Ubuntu 14.04开始，已经没有采用文泉驿的黑体了，而是改用Droid Sans Fallback，没错，就是Google花钱为Android系统设计的字体。反正该字体也没点阵，我觉得显示效果也就那样。</p>
<p>　　下面再来看看Fedora 20，该系统也是以黑体为主。从下面的图片中可以看到，除了Times New Roman，其它的字体显示都是一个样。<br /></p>
<p align="center"></p>
<p align="center">　　小字是点阵，放大后，显示为黑体，如下图：<br /></p>
<p>　　查看Fedora 20系统，可以看到它还是安装了AR PL UMing，也就是宋体，但是它没有使用，而且它没有安装楷体，虽然它的软件源中有cjkuni-ukai。它使用的黑体是文泉驿系列。<br /></p>
<p align="center"></p>
<p>　　之前发表的几篇随笔都是在Ubuntu 14.04下完成的，这次我决定换到Fedora 20系统下。晒一下我的桌面，如下图：<br /></p>
<p align="center"></p>
<p>　　从AR PL这几个字符可以看出，AR PL UMing和文鼎贡献的那两套字体是一脉相承的。确实如此，只不过是经过合并、修改、增加了日语韩语及香港常用字型后，更名为CJKUniFonts，据说含有点阵。从名字可以看出，有了这套字体，中日韩都可以搞定。CentOS 6的主打字体就是它。如下图，小字有点阵，清晰锐利：<br /></p>
<p align="center"></p>
<p align="center">　　放大后，显示轮廓字体，不过好像缺了黑体，如下图：<br /></p>
<p>　　这套字体唯一的缺点就是它的标点符号，逗号和句号经常跑到一行的中间，而不是一行的底部。这都不是什么大事儿，其实，微软雅黑的引号也不漂亮，不是吗？</p>
<p>　　CentOS 6中已经有了文泉驿，如下图，之所以没有显示黑体不是因为没有黑体，而是因为没有正确配置：<br /></p>
<p align="center"></p>
<p>　　通过上面一系列的截图，可以看到各个操作系统都使用了哪些中文字体，也展现出了各个操作系统在字体配置方面的缺陷。从另一个方面，也反映出了挑选字体的趋势。可以总结如下：</p>
<p>　　1、Linux系统中的宋体最早只有文鼎贡献的细上海宋，而且还没有点阵。后来发展到CJKUniFonts，宋体才有了点阵，它的字体名叫AR PL UMing，在Linux系统上想要使用宋体，就全靠它了。但是CJKUniFonts的点阵似乎不太符合我们的习惯，好在文泉驿有非常漂亮的点阵字体，虽然只覆盖了9pt到12pt的范围。</p>
<p>　　2、Linux系统中最开始黑体缺乏，现在大家都认识到了黑体在屏幕显示中具有较好的效果，于是就黑体泛滥了。微软花大价钱请人设计的微软雅黑是黑体，开源字体文泉驿做的也是黑体，Google花钱请人做的Droid Sans Fallback还是黑体。Ubuntu用黑体，Fedora也用黑体。可以说，文泉驿选择黑体作为切入点真的是选对了，也确实是我们广大Linux使用者的福音。</p>
<p>　　3、即使是最新的Linux发行版，如Ubuntu 14和Fedora 20，其字体设置也不合理，对serif、sans-serif、宋体、黑体的理解都不正确。所以，对于字体，我们还是得自己配置。</p>
字体配置实战
<p>　　下面，将以Fedora 20为例，自己动手将它配置为正确的显示效果。目前，在Linux系统上配置字体的工具是Fontconfig。 </p>
<p><strong>　　为什么是Fontconfig</strong></p>
<p>　　感谢这个时代，曾经混乱不堪的字体配置方法终于被Fontconfig一统江湖。在Linux中，字体配置曾经各自为政、混乱不堪，XServer、Xft、GTK、GTK2、QT等等各自采用不同的配置手段，字体引擎也有Type1、FreeType等。目前，可以认为在Linux系统中只需要配置FontConfig即可。</p>
<p>　　XOrg的官方网站上的文档说明：XOrg中有两种字体系统，一种字体系统是XServer自带的字体系统，另一种就是Xft，而且XOrg官方建议所有的界面库的开发者首选Xft字体系统；对于字体引擎，现在只剩下FreeType了，Type1的功能已经合并到了FreeType中。FreeDesktop.org的官方网站上有Xft、Freetype以及Fontconfig的文档，虽然很简略，但是也提到：Xft1.0及以前的版本，需要通过XftConfig文件来配置字体，从Xft1.1以后，都采用Fontconfig来配置字体；Fontconfig的文档也说它只负责字体的配置，不负责字体的显示。</p>
<p>　　So，配置Linux中的字体，我们只用理会Fontconfig，还有疑问吗？</p>
<p><strong>　　学习Fontconfig</strong></p>
<p>　　学习Fontconfig的最佳方式是阅读man fonts.conf手册页，其次，就是阅读/etc/fonts/conf.d目录下的配置文件，从实例中学习。</p>
<p>　　Fontconfig的功能就是帮助应用程序选择字体并指导字体的显示效果（只能说指导，因为具体的显示由Xft、Freetype等说了算），用什么策略选择字体及用什么选项显示字体，通过配置文件来指定。Fontconfig对配置文件进行两遍扫描，第一遍对应用程序传递给Fontconfig的字体列表（称为pattern）进行操作，通过添加、删除、替换pattern中的字体名，让应用程序得到相应的字体；第二遍对已经选择的字体进行操作，这时一般不改字体名了，而是对抗锯齿（antialias）、微调（hinting）、自动微调（autohint）、微调级别（hintstyle）以及次像素平滑（rgba）等属性进行控制。</p>
<p>　　Fontconfig配置文件的语法，这个不用我在这里唠叨，看man fonts.conf手册页即可，一点也不难，它的很多元素，如match、target、test、edit、string、bool、double、const等，本身就是自解释的，看到这个单词就知道它是什么意思。它的原则就是对每一个&lt;match...&gt;...&lt;/match&gt;，通过&lt;test...&gt;...&lt;/test&gt;来选择要编辑的元素，然后使用&lt;edit...&gt;...&lt;/edit&gt;来对该元素进行编辑。</p>
<strong>配置Fedora 20</strong>
<p>　　Fontconfig首先读取的配置文件是/etc/fonts/fonts.conf，然后，根据/etc/fonts/fonts.conf里面的&lt;include&gt;...&lt;/include&gt;信息来加载其它的配置文件。Fedora 20默认是加载/etc/fonts/conf.d目录下的所有文件。当然，/etc/fonts/conf.d目录下的文件太多了，引入了很多其实没有必要的复杂性。对于我这种追求简洁的人，我直接就把它改了，让/etc/fonts/conf.d下的文件去见鬼，从我自己的主目录的fonts.conf.d目录下加载配置文件吧。如下图，我注释掉了第71行，增加了第72行：<br /></p>
<p align="center"></p>
<p>　　下面正式开始写配置文件。</p>
<p>　　<strong>第一步：将不标准的字体分类命名更改为标准的字体分类命名</strong></p>
<p>　　英文的字体分类有serif、sans-serif和monospace，中文的分类有&ldquo;宋体&rdquo;和&ldquo;黑体&rdquo;，但我们不能保证别人在请求字体的时候拼写都是准确的，比如有可能拼写成&ldquo;sans serif&rdquo;或&ldquo;sans&rdquo;、&ldquo;mono&rdquo;等，中文也可能写成繁体&ldquo;宋體&rdquo;、&ldquo;黑體&rdquo;或者拼音&ldquo;SongTi&rdquo;、&ldquo;HeiTi&rdquo;等，为了后面配置文件的简洁，这些不标准的分类名要先替换成标准的分类名。</p>
<p>　　英文的分类名的标准化/etc/fonts/fonts.conf这个主配置文件（就是我上面截图的那个文件）已经做了，其完整代码如下：</p>
<p><br><div class="msgheader"><div class="right"><span style="CURSOR: pointer" onclick="copycode(getid('phpcode14'));"><u>复制代码</u></span></div>代码如下:</div><div class="msgborder" id="phpcode14"><br />&lt;?xml version="1.0"?&gt;<br />&lt;!DOCTYPE fontconfig SYSTEM "fonts.dtd"&gt;<br />&lt;!-- /etc/fonts/fonts.conf file to configure system font access --&gt;<br />&lt;fontconfig&gt;&lt;/p&gt;
&lt;p&gt;&lt;!--<br /> DO NOT EDIT THIS FILE.<br /> IT WILL BE REPLACED WHEN FONTCONFIG IS UPDATED.<br /> LOCAL CHANGES BELONG IN 'local.conf'.&lt;/p&gt;
&lt;p&gt; The intent of this standard configuration file is to be adequate for<br /> most environments. If you have a reasonably normal environment and<br /> have found problems with this configuration, they are probably<br /> things that others will also want fixed. Please submit any<br /> problems to the fontconfig bugzilla system located at fontconfig.org&lt;/p&gt;
&lt;p&gt; Note that the normal 'make install' procedure for fontconfig is to<br /> replace any existing fonts.conf file with the new version. Place<br /> any local customizations in local.conf which this file references.&lt;/p&gt;
&lt;p&gt; Keith Packard<br />--&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- Font directory list --&gt;&lt;/p&gt;
&lt;p&gt; &lt;dir&gt;/usr/share/fonts&lt;/dir&gt;<br /> &lt;dir&gt;/usr/share/X11/fonts/Type1&lt;/dir&gt; &lt;dir&gt;/usr/share/X11/fonts/TTF&lt;/dir&gt; &lt;dir&gt;/usr/local/share/fonts&lt;/dir&gt;<br /> &lt;dir prefix="xdg"&gt;fonts&lt;/dir&gt;<br /> &lt;!-- the following element will be removed in the future --&gt;<br /> &lt;dir&gt;~/.fonts&lt;/dir&gt;&lt;/p&gt;
&lt;p&gt;&lt;!--<br /> Accept deprecated 'mono' alias, replacing it with 'monospace'<br />--&gt;<br /> &lt;match target="pattern"&gt;<br /> &lt;test qual="any" name="family"&gt;<br /> &lt;string&gt;mono&lt;/string&gt;<br /> &lt;/test&gt;<br /> &lt;edit name="family" mode="assign" binding="same"&gt;<br /> &lt;string&gt;monospace&lt;/string&gt;<br /> &lt;/edit&gt;<br /> &lt;/match&gt;&lt;/p&gt;
&lt;p&gt;&lt;!--<br /> Accept alternate 'sans serif' spelling, replacing it with 'sans-serif'<br />--&gt;<br /> &lt;match target="pattern"&gt;<br /> &lt;test qual="any" name="family"&gt;<br /> &lt;string&gt;sans serif&lt;/string&gt;<br /> &lt;/test&gt;<br /> &lt;edit name="family" mode="assign" binding="same"&gt;<br /> &lt;string&gt;sans-serif&lt;/string&gt;<br /> &lt;/edit&gt;<br /> &lt;/match&gt;&lt;/p&gt;
&lt;p&gt;&lt;!--<br /> Accept deprecated 'sans' alias, replacing it with 'sans-serif'<br />--&gt;<br /> &lt;match target="pattern"&gt;<br /> &lt;test qual="any" name="family"&gt;<br /> &lt;string&gt;sans&lt;/string&gt;<br /> &lt;/test&gt;<br /> &lt;edit name="family" mode="assign" binding="same"&gt;<br /> &lt;string&gt;sans-serif&lt;/string&gt;<br /> &lt;/edit&gt;<br /> &lt;/match&gt;&lt;/p&gt;
&lt;p&gt;&lt;!--<br /> Load local system customization file<br />--&gt;<br />&lt;!-- &lt;include ignore_missing="yes"&gt;fonts.conf.d&lt;/incllude&gt; --&gt;<br /> &lt;include ignore_missing="yes"&gt;~/fonts.conf.d&lt;/include&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- Font cache directory list --&gt;&lt;/p&gt;
&lt;p&gt; &lt;cachedir&gt;/var/cache/fontconfig&lt;/cachedir&gt;<br /> &lt;cachedir prefix="xdg"&gt;fontconfig&lt;/cachedir&gt;<br /> &lt;!-- the following element will be removed in the future --&gt;<br /> &lt;cachedir&gt;~/.fontconfig&lt;/cachedir&gt;&lt;/p&gt;
&lt;p&gt; &lt;config&gt;<br />&lt;!--<br /> These are the default Unicode chars that are expected to be blank<br /> in fonts. All other blank chars are assumed to be broken and<br /> won't appear in the resulting charsets<br /> --&gt;<br /> &lt;blank&gt;<br /> &lt;int&gt;0x0020&lt;/int&gt; &lt;!-- SPACE --&gt;<br /> &lt;int&gt;0x00A0&lt;/int&gt; &lt;!-- NO-BREAK SPACE --&gt;<br /> &lt;int&gt;0x00AD&lt;/int&gt; &lt;!-- SOFT HYPHEN --&gt;<br /> &lt;int&gt;0x034F&lt;/int&gt; &lt;!-- COMBINING GRAPHEME JOINER --&gt;<br /> &lt;int&gt;0x0600&lt;/int&gt; &lt;!-- ARABIC NUMBER SIGN --&gt;<br /> &lt;int&gt;0x0601&lt;/int&gt; &lt;!-- ARABIC SIGN SANAH --&gt;<br /> &lt;int&gt;0x0602&lt;/int&gt; &lt;!-- ARABIC FOOTNOTE MARKER --&gt;<br /> &lt;int&gt;0x0603&lt;/int&gt; &lt;!-- ARABIC SIGN SAFHA --&gt;<br /> &lt;int&gt;0x06DD&lt;/int&gt; &lt;!-- ARABIC END OF AYAH --&gt;<br /> &lt;int&gt;0x070F&lt;/int&gt; &lt;!-- SYRIAC ABBREVIATION MARK --&gt;<br /> &lt;int&gt;0x115F&lt;/int&gt; &lt;!-- HANGUL CHOSEONG FILLER --&gt;<br /> &lt;int&gt;0x1160&lt;/int&gt; &lt;!-- HANGUL JUNGSEONG FILLER --&gt;<br /> &lt;int&gt;0x1680&lt;/int&gt; &lt;!-- OGHAM SPACE MARK --&gt;<br /> &lt;int&gt;0x17B4&lt;/int&gt; &lt;!-- KHMER VOWEL INHERENT AQ --&gt;<br /> &lt;int&gt;0x17B5&lt;/int&gt; &lt;!-- KHMER VOWEL INHERENT AA --&gt;<br /> &lt;int&gt;0x180E&lt;/int&gt; &lt;!-- MONGOLIAN VOWEL SEPARATOR --&gt;<br /> &lt;int&gt;0x2000&lt;/int&gt; &lt;!-- EN QUAD --&gt;<br /> &lt;int&gt;0x2001&lt;/int&gt; &lt;!-- EM QUAD --&gt;<br /> &lt;int&gt;0x2002&lt;/int&gt; &lt;!-- EN SPACE --&gt;<br /> &lt;int&gt;0x2003&lt;/int&gt; &lt;!-- EM SPACE --&gt;<br /> &lt;int&gt;0x2004&lt;/int&gt; &lt;!-- THREE-PER-EM SPACE --&gt;<br /> &lt;int&gt;0x2005&lt;/int&gt; &lt;!-- FOUR-PER-EM SPACE --&gt;<br /> &lt;int&gt;0x2006&lt;/int&gt; &lt;!-- SIX-PER-EM SPACE --&gt;<br /> &lt;int&gt;0x2007&lt;/int&gt; &lt;!-- FIGURE SPACE --&gt;<br /> &lt;int&gt;0x2008&lt;/int&gt; &lt;!-- PUNCTUATION SPACE --&gt;<br /> &lt;int&gt;0x2009&lt;/int&gt; &lt;!-- THIN SPACE --&gt;<br /> &lt;int&gt;0x200A&lt;/int&gt; &lt;!-- HAIR SPACE --&gt;<br /> &lt;int&gt;0x200B&lt;/int&gt; &lt;!-- ZERO WIDTH SPACE --&gt;<br /> &lt;int&gt;0x200C&lt;/int&gt; &lt;!-- ZERO WIDTH NON-JOINER --&gt;<br /> &lt;int&gt;0x200D&lt;/int&gt; &lt;!-- ZERO WIDTH JOINER --&gt;<br /> &lt;int&gt;0x200E&lt;/int&gt; &lt;!-- LEFT-TO-RIGHT MARK --&gt;<br /> &lt;int&gt;0x200F&lt;/int&gt; &lt;!-- RIGHT-TO-LEFT MARK --&gt;<br /> &lt;int&gt;0x2028&lt;/int&gt; &lt;!-- LINE SEPARATOR --&gt;<br /> &lt;int&gt;0x2029&lt;/int&gt; &lt;!-- PARAGRAPH SEPARATOR --&gt;<br /> &lt;int&gt;0x202A&lt;/int&gt; &lt;!-- LEFT-TO-RIGHT EMBEDDING --&gt;<br /> &lt;int&gt;0x202B&lt;/int&gt; &lt;!-- RIGHT-TO-LEFT EMBEDDING --&gt;<br /> &lt;int&gt;0x202C&lt;/int&gt; &lt;!-- POP DIRECTIONAL FORMATTING --&gt;<br /> &lt;int&gt;0x202D&lt;/int&gt; &lt;!-- LEFT-TO-RIGHT OVERRIDE --&gt;<br /> &lt;int&gt;0x202E&lt;/int&gt; &lt;!-- RIGHT-TO-LEFT OVERRIDE --&gt;<br /> &lt;int&gt;0x202F&lt;/int&gt; &lt;!-- NARROW NO-BREAK SPACE --&gt;<br /> &lt;int&gt;0x205F&lt;/int&gt; &lt;!-- MEDIUM MATHEMATICAL SPACE --&gt;<br /> &lt;int&gt;0x2060&lt;/int&gt; &lt;!-- WORD JOINER --&gt;<br /> &lt;int&gt;0x2061&lt;/int&gt; &lt;!-- FUNCTION APPLICATION --&gt;<br /> &lt;int&gt;0x2062&lt;/int&gt; &lt;!-- INVISIBLE TIMES --&gt;<br /> &lt;int&gt;0x2063&lt;/int&gt; &lt;!-- INVISIBLE SEPARATOR --&gt;<br /> &lt;int&gt;0x206A&lt;/int&gt; &lt;!-- INHIBIT SYMMETRIC SWAPPING --&gt;<br /> &lt;int&gt;0x206B&lt;/int&gt; &lt;!-- ACTIVATE SYMMETRIC SWAPPING --&gt;<br /> &lt;int&gt;0x206C&lt;/int&gt; &lt;!-- INHIBIT ARABIC FORM SHAPING --&gt;<br /> &lt;int&gt;0x206D&lt;/int&gt; &lt;!-- ACTIVATE ARABIC FORM SHAPING --&gt;<br /> &lt;int&gt;0x206E&lt;/int&gt; &lt;!-- NATIONAL DIGIT SHAPES --&gt;<br /> &lt;int&gt;0x206F&lt;/int&gt; &lt;!-- NOMINAL DIGIT SHAPES --&gt;<br /> &lt;int&gt;0x2800&lt;/int&gt; &lt;!-- BRAILLE PATTERN BLANK --&gt;<br /> &lt;int&gt;0x3000&lt;/int&gt; &lt;!-- IDEOGRAPHIC SPACE --&gt;<br /> &lt;int&gt;0x3164&lt;/int&gt; &lt;!-- HANGUL FILLER --&gt;<br /> &lt;int&gt;0xFEFF&lt;/int&gt; &lt;!-- ZERO WIDTH NO-BREAK SPACE --&gt;<br /> &lt;int&gt;0xFFA0&lt;/int&gt; &lt;!-- HALFWIDTH HANGUL FILLER --&gt;<br /> &lt;int&gt;0xFFF9&lt;/int&gt; &lt;!-- INTERLINEAR ANNOTATION ANCHOR --&gt;<br /> &lt;int&gt;0xFFFA&lt;/int&gt; &lt;!-- INTERLINEAR ANNOTATION SEPARATOR --&gt;<br /> &lt;int&gt;0xFFFB&lt;/int&gt; &lt;!-- INTERLINEAR ANNOTATION TERMINATOR --&gt;<br /> &lt;/blank&gt;<br />&lt;!--<br /> Rescan configuration every 30 seconds when FcFontSetList is called<br /> --&gt;<br /> &lt;rescan&gt;<br /> &lt;int&gt;30&lt;/int&gt;<br /> &lt;/rescan&gt;<br /> &lt;/config&gt;&lt;/p&gt;
&lt;p&gt;&lt;/fontconfig&gt;&lt;/p&gt;
&lt;p&gt;/etc/fonts/fonts.conf<br /></div></p>
<p>　　中文的分类名标准化：</p>
<p><br><div class="msgheader"><div class="right"><span style="CURSOR: pointer" onclick="copycode(getid('phpcode15'));"><u>复制代码</u></span></div>代码如下:</div><div class="msgborder" id="phpcode15"><br />&lt;?xml version="1.0"?&gt;<br />&lt;!DOCTYPE fontconfig SYSTEM "fonts.dtd"&gt;<br />&lt;fontconfig&gt;<br /> &lt;match target="pattern"&gt;<br /> &lt;test qual="any" name="family"&gt;<br /> &lt;string&gt;宋體&lt;/string&gt;<br /> &lt;/test&gt;<br /> &lt;edit name="family" mode="assign" binding="same"&gt;<br /> &lt;string&gt;宋体&lt;/string&gt;<br /> &lt;/edit&gt;<br /> &lt;/match&gt;<br /> &lt;match target="pattern"&gt;<br /> &lt;test qual="any" name="family"&gt;<br /> &lt;string&gt;SongTi&lt;/string&gt;<br /> &lt;/test&gt;<br /> &lt;edit name="family" mode="assign" binding="same"&gt;<br /> &lt;string&gt;宋体&lt;/string&gt;<br /> &lt;/edit&gt;<br /> &lt;/match&gt;<br /> &lt;match target="pattern"&gt;<br /> &lt;test qual="any" name="family"&gt;<br /> &lt;string&gt;黑體&lt;/string&gt;<br /> &lt;/test&gt;<br /> &lt;edit name="family" mode="assign" binding="same"&gt;<br /> &lt;string&gt;黑体&lt;/string&gt;<br /> &lt;/edit&gt;<br /> &lt;/match&gt;<br /> &lt;match target="pattern"&gt;<br /> &lt;test qual="any" name="family"&gt;<br /> &lt;string&gt;HeiTi&lt;/string&gt;<br /> &lt;/test&gt;<br /> &lt;edit name="family" mode="assign" binding="same"&gt;<br /> &lt;string&gt;黑体&lt;/string&gt;<br /> &lt;/edit&gt;<br /> &lt;/match&gt;<br />&lt;/fontconfig&gt;&lt;/p&gt;
&lt;p&gt;~/fonts.conf.d/01-standardize-chinese-font-class.conf<br /></div></p>
<p>　　<strong>第二步：对英文字体进行分类</strong></p>
<p>　　请注意，我只对英文字体进行分类。对英文字体进行分类的目的是为了给相应的英文字体搭配正确的中文，比如字体为Arial的英文句子中，如果出现中文就应该用黑体，而字体为Times New Roman的英文句子中，如果出现中文当然应该用宋体。等宽的英文字体嘛，whatever，反正中文字都一样宽，哪个顺眼就用哪个吧。对于中文其实也可以分类，然后搭配不同的英文字体。但是我认为，中文的字体中一般都包含有英文字符，用原装的即可，没有必要替换。所以，不对中文进行分类。其代码如下：</p>
<p><br><div class="msgheader"><div class="right"><span style="CURSOR: pointer" onclick="copycode(getid('phpcode16'));"><u>复制代码</u></span></div>代码如下:</div><div class="msgborder" id="phpcode16"><br />&lt;?xml version="1.0"?&gt;<br />&lt;!DOCTYPE fontconfig SYSTEM "fonts.dtd"&gt;<br />&lt;fontconfig&gt;<br />&lt;!--<br /> Serif faces<br /> --&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Bitstream Vera Serif&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;serif&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;DejaVu Serif&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;serif&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Liberation Serif&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;serif&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Times New Roman&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;serif&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Times&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;serif&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Nimbus Roman No9 L&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;serif&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Luxi Serif&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;serif&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Thorndale AMT&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;serif&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Thorndale&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;serif&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Georgia&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;serif&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Garamond&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;serif&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Palatino Linotype&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;serif&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Trebuchet MS&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;serif&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br />&lt;!--<br /> Sans-serif faces<br /> --&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Bitstream Vera Sans&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;sans-serif&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;DejaVu Sans&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;sans-serif&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Liberation Sans&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;sans-serif&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Arial&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;sans-serif&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Helvetica&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;sans-serif&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Verdana&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;sans-serif&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Albany AMT&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;sans-serif&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Albany&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;sans-serif&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Nimbus Sans L&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;sans-serif&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Luxi Sans&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;sans-serif&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Tahoma&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;sans-serif&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br />&lt;!--<br /> Monospace faces<br /> --&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Bitstream Vera Sans Mono&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;monospace&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;DejaVu Sans Mono&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;monospace&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Liberation Mono&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;monospace&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Inconsolata&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;monospace&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Courier New&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;monospace&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Courier&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;monospace&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Andale Mono&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;monospace&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Luxi Mono&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;monospace&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Cumberland AMT&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;monospace&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Cumberland&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;monospace&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Nimbus Mono L&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;monospace&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br />&lt;!--<br /> Fantasy faces<br /> --&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Impact&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;fantasy&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Copperplate Gothic Std&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;fantasy&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Cooper Std&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;fantasy&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Bauhaus Std&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;fantasy&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br />&lt;!--<br /> Cursive faces<br /> --&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;ITC Zapf Chancery Std&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;cursive&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Zapfino&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;cursive&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;Comic Sans MS&lt;/family&gt;<br /> &lt;accept&gt;&lt;family&gt;cursive&lt;/family&gt;&lt;/accept&gt;<br /> &lt;/alias&gt;&lt;/p&gt;
&lt;p&gt;&lt;/fontconfig&gt;&lt;/p&gt;
&lt;p&gt;~/fonts.conf.d/02-classify-english-fonts.conf<br /></div></p>
<p>　　<strong>第三步：所有不认识的英文字体都分类为sans-serif</strong></p>
<p>　　世界上字体那么多，不是每一个都想得到的啦。对于所有不认识的字体，都认为它是sans-serif。其代码如下：</p>
<p><br><div class="msgheader"><div class="right"><span style="CURSOR: pointer" onclick="copycode(getid('phpcode17'));"><u>复制代码</u></span></div>代码如下:</div><div class="msgborder" id="phpcode17"><br />&lt;?xml version="1.0"?&gt;<br />&lt;!DOCTYPE fontconfig SYSTEM "fonts.dtd"&gt;<br />&lt;fontconfig&gt;<br />&lt;!--<br /> If the font still has no generic name, add sans-serif<br /> --&gt;<br /> &lt;match target="pattern"&gt;<br /> &lt;test qual="all" name="family" compare="not_eq"&gt;<br /> &lt;string&gt;sans-serif&lt;/string&gt;<br /> &lt;/test&gt;<br /> &lt;test qual="all" name="family" compare="not_eq"&gt;<br /> &lt;string&gt;serif&lt;/string&gt;<br /> &lt;/test&gt;<br /> &lt;test qual="all" name="family" compare="not_eq"&gt;<br /> &lt;string&gt;monospace&lt;/string&gt;<br /> &lt;/test&gt;<br /> &lt;test qual="all" name="family" compare="not_eq"&gt;<br /> &lt;string&gt;宋体&lt;/string&gt;<br /> &lt;/test&gt;&lt;test qual="all" name="family" compare="not_eq"&gt;<br /> &lt;string&gt;黑体&lt;/string&gt;<br /> &lt;/test&gt;<br /> &lt;edit name="family" mode="append_last"&gt;<br /> &lt;string&gt;sans-serif&lt;/string&gt;<br /> &lt;/edit&gt;<br /> &lt;/match&gt;<br />&lt;/fontconfig&gt;&lt;/p&gt;
&lt;p&gt;~/fonts.conf.d/03-treat-unclassified-fonts-as-sansserif.conf<br /></div></p>
<p align="center">　　到这里，所有的分类工作完成。使用fc-pattern命令可以看到字体名被替换的过程。如下图：<br /></p>
<p>　　比如，当应用程序请求字体的pattern为&ldquo;Time New Roman&rdquo;时，pattern被更改为&ldquo;Times New Roman&rdquo; &ldquo;serif&rdquo;；当应用程序请求字体的pattern为&ldquo;微软雅黑，不认识的字体&rdquo;时，&ldquo;sans-serif&rdquo;被添加到了pattern的最后面。这也是字体分类的原理，就是将字体的类名添加到列表的后面。在Fontconfig的配置语法中，&lt;alias&gt;是&lt;match&gt;的一种简化写法，如果需要测试和替换的只是字体名的话，使用&lt;alias&gt;就更简单。如果使用&lt;alias&gt;，则&lt;prefer&gt;表示添加到所选字体的前面，&lt;accept&gt;表示添加到所选字体的后面，&lt;default&gt;表示添加到字体列表的最后。在这里选择用&lt;accept&gt;而没有用&lt;default&gt;的原因是，如果用&lt;default&gt;，每次都是把分类名添加到最后，遇到比较奇怪的pattern（比如上图中的最后一个测试）就会造成混乱。</p>
<p>　　<strong>第四步：对每一个字体分类，指定自己喜欢的字体</strong></p>
<p>　　对每一个分类都可以指定一个字体列表，排在越前面的优先级越高。在每一个分类的最后指定一个中文字体的分类，当句子中出现中文时，前面的英文字体中肯定找不到相应的字符啦，这时就会一个一个往字体列表的后面找，直到在最后的中文字体里找到。代码如下：</p>
<p><br><div class="msgheader"><div class="right"><span style="CURSOR: pointer" onclick="copycode(getid('phpcode18'));"><u>复制代码</u></span></div>代码如下:</div><div class="msgborder" id="phpcode18"><br />&lt;?xml version="1.0"?&gt;<br />&lt;!DOCTYPE fontconfig SYSTEM "fonts.dtd"&gt;<br />&lt;fontconfig&gt;<br /> &lt;alias binding="strong"&gt;<br /> &lt;family&gt;serif&lt;/family&gt;<br /> &lt;prefer&gt;<br /> &lt;family&gt;Georgia&lt;/family&gt;<br /> &lt;family&gt;Times New Roman&lt;/family&gt;<br /> &lt;family&gt;Bitstream Vera Serif&lt;/family&gt;<br /> &lt;family&gt;DejaVu Serif&lt;/family&gt;<br /> &lt;family&gt;Thorndale AMT&lt;/family&gt;<br /> &lt;family&gt;Luxi Serif&lt;/family&gt;<br /> &lt;family&gt;Nimbus Roman No9 L&lt;/family&gt;<br /> &lt;family&gt;Times&lt;/family&gt;<br /> &lt;family&gt;宋体&lt;/family&gt;<br /> &lt;/prefer&gt;<br /> &lt;/alias&gt;<br /> &lt;alias binding="strong"&gt;<br /> &lt;family&gt;sans-serif&lt;/family&gt;<br /> &lt;prefer&gt;<br /> &lt;family&gt;Arial&lt;/family&gt;<br /> &lt;family&gt;Verdana&lt;/family&gt;<br /> &lt;family&gt;Bitstream Vera Sans&lt;/family&gt;<br /> &lt;family&gt;DejaVu Sans&lt;/family&gt;<br /> &lt;family&gt;Albany AMT&lt;/family&gt;<br /> &lt;family&gt;Luxi Sans&lt;/family&gt;<br /> &lt;family&gt;Nimbus Sans L&lt;/family&gt;<br /> &lt;family&gt;Helvetica&lt;/family&gt;<br /> &lt;family&gt;Lucida Sans Unicode&lt;/family&gt;<br /> &lt;family&gt;BPG Glaho International&lt;/family&gt; <br /> &lt;family&gt;Tahoma&lt;/family&gt; <br /> &lt;family&gt;黑体&lt;/family&gt;<br /> &lt;/prefer&gt;<br /> &lt;/alias&gt;<br /> &lt;alias binding="strong"&gt;<br /> &lt;family&gt;monospace&lt;/family&gt;<br /> &lt;prefer&gt;<br /> &lt;family&gt;DejaVu Sans Mono&lt;/family&gt;<br /> &lt;family&gt;Courier New&lt;/family&gt;<br /> &lt;family&gt;Bitstream Vera Sans Mono&lt;/family&gt;<br /> &lt;family&gt;Inconsolata&lt;/family&gt;<br /> &lt;family&gt;Andale Mono&lt;/family&gt;<br /> &lt;family&gt;Cumberland AMT&lt;/family&gt;<br /> &lt;family&gt;Luxi Mono&lt;/family&gt;<br /> &lt;family&gt;Nimbus Mono L&lt;/family&gt;<br /> &lt;family&gt;Courier&lt;/family&gt;<br /> &lt;family&gt;文泉驿等宽正黑&lt;/family&gt;<br /> &lt;/prefer&gt;<br /> &lt;/alias&gt;<br /> &lt;alias binding="strong"&gt;<br /> &lt;family&gt;宋体&lt;/family&gt;<br /> &lt;prefer&gt;<br /> &lt;family&gt;AR PL UMing CN&lt;/family&gt;<br /> &lt;family&gt;AR PL UMing HK&lt;/family&gt;<br /> &lt;family&gt;AR PL UMing TW&lt;/family&gt;<br /> &lt;family&gt;AR PL UMing TW MBE&lt;/family&gt;<br /> &lt;/prefer&gt;<br /> &lt;/alias&gt;<br /> &lt;alias binding="strong"&gt;<br /> &lt;family&gt;黑体&lt;/family&gt;<br /> &lt;prefer&gt;<br /> &lt;family&gt;文泉驿正黑&lt;/family&gt;<br /> &lt;/prefer&gt;<br /> &lt;/alias&gt;<br />&lt;!--<br /> Fantasy faces<br /> --&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;fantasy&lt;/family&gt;<br /> &lt;prefer&gt;<br /> &lt;family&gt;Impact&lt;/family&gt;<br /> &lt;family&gt;Copperplate Gothic Std&lt;/family&gt;<br /> &lt;family&gt;Cooper Std&lt;/family&gt;<br /> &lt;family&gt;Bauhaus Std&lt;/family&gt;<br /> &lt;/prefer&gt;<br /> &lt;/alias&gt;<br />&lt;!--<br /> Cursive faces<br /> --&gt;<br /> &lt;alias&gt;<br /> &lt;family&gt;cursive&lt;/family&gt;<br /> &lt;prefer&gt;<br /> &lt;family&gt;Comic Sans MS&lt;/family&gt;<br /> &lt;family&gt;ITC Zapf Chancery Std&lt;/family&gt;<br /> &lt;family&gt;Zapfino&lt;/family&gt;<br /> &lt;/prefer&gt;<br /> &lt;/alias&gt;&lt;/p&gt;
&lt;p&gt;&lt;/fontconfig&gt;&lt;/p&gt;
&lt;p&gt;~/fonts.conf.d/04-prefer-fonts-for-each-class.conf<br /></div></p>
<p>　　在这个配置中，依然使用&lt;alias&gt;，通过把具体的字体名添加到类名的前面来填实字体分类。填实字体分类后，通过fc-pattern命令，可以测试Fontconfig如何选择字体，如下图：<br /></p>
<p align="center"></p>
<p>　　到这一步，我的Fedora系统已经能够正确选择各种分类中的字体了。打开浏览器，用上一篇的开头测试一下字体的显示效果，如下图：<br /></p>
<p align="center"></p>
<p align="center">　　放大后的效果：<br /></p>
<p>　　从图片中可以看出，经过前面的配置，浏览器已经可以正确区分宋体、黑体，可以区分serif和sans-serif。对于等宽字体，也用上了漂亮的DejaVu Sans Mono。而且宋体的小字还有点阵。看似比较完美了，但是依然有几个小问题：</p>
<p>　　1、宋体的小字有点阵，但AR PL UMing自带的点阵真心不好看；</p>
<p>　　2、黑体的小字没有点阵，虽然黑体比较饱满，没有点阵也不会发虚，但是有点阵还是更好，而且应用程序菜单中的中文也从点阵变成了不是点阵；</p>
<p>　　3、宋体的加粗部分没有正确显示。</p>
<p>　　所以，还需要进一步的设置工作。</p>
<p>　　<strong>第五步：控制字体的显示属性</strong></p>
<p>　　上一篇已经论述过，要让字体显示得好看也是一个技术活。所以对字体的显示属性要详细控制啦。Gnome-tweak-tool只能整体指定少量几个属性，如hintstyle和次像素平滑，很显然是不够用的。如下图：<br /></p>
<p align="center"></p>
<p align="center">　　而且我的系统中用来画字的dpi都不对，只有75，如下图（另一个测试字体配置的利器fc-match的运行效果）：<br /></p>
<p>　　这样字体画出来肯定偏小。事实上我的显示器dpi比96都要高20%左右。所以得改。为了跟随主流，还是改成96dpi好了。</p>
<p>　　我控制字体属性的思路：</p>
<p>　　1、著名厂家设计的字体，开hinting，开源的粗制滥造的字体就用autohint好了；目前系统中用的字体似乎名头都很响，所以全局开hinting，hintstyle设为hintslight。</p>
<p>　　2、英文字体全局开次像素平滑，全局开抗锯齿，如果在使用过程中发现有哪个字体边缘显示为花花绿绿的话，就单独关闭这个字体的次像素平滑。</p>
<p>　　3、小于7.5像素的字就关闭hinting，这也是目前开源界的主流做法。</p>
<p>　　4、中文关闭次像素平滑，除非用的是微软雅黑之类专为次像素平滑设计的字体；很显然不在正版Windows中用微软雅黑是违法的，所以中文关闭次像素平滑。</p>
<p>　　代码如下：</p>
<p><br><div class="msgheader"><div class="right"><span style="CURSOR: pointer" onclick="copycode(getid('phpcode19'));"><u>复制代码</u></span></div>代码如下:</div><div class="msgborder" id="phpcode19"><br />&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br />&lt;!DOCTYPE fontconfig SYSTEM "../fonts.dtd"&gt;<br />&lt;fontconfig&gt;<br /> &lt;match target="pattern"&gt;<br /> &lt;edit name="dpi" mode="assign"&gt;<br /> &lt;double&gt;96&lt;/double&gt;<br /> &lt;/edit&gt;<br /> &lt;/match&gt;<br /> &lt;match target="font"&gt;<br /> &lt;edit name="hinting" mode="assign"&gt;<br /> &lt;bool&gt;true&lt;/bool&gt;<br /> &lt;/edit&gt;<br /> &lt;/match&gt;<br /> &lt;match target="font"&gt;<br /> &lt;edit name="autohint" mode="assign"&gt;<br /> &lt;bool&gt;false&lt;/bool&gt;<br /> &lt;/edit&gt;<br /> &lt;/match&gt;<br /> &lt;match target="font"&gt;<br /> &lt;edit name="hintstyle" mode="assign"&gt;<br /> &lt;const&gt;hintslight&lt;/const&gt;<br /> &lt;/edit&gt;<br /> &lt;/match&gt;<br /> &lt;match target="font"&gt;<br /> &lt;edit name="antialias" mode="assign"&gt;<br /> &lt;bool&gt;true&lt;/bool&gt;<br /> &lt;/edit&gt;<br /> &lt;/match&gt;<br /> &lt;match target="font"&gt;<br /> &lt;edit name="rgba" mode="assign"&gt;<br /> &lt;const&gt;rgb&lt;/const&gt;<br /> &lt;/edit&gt;<br /> &lt;/match&gt;<br /> &lt;match target="font"&gt;<br /> &lt;edit name="lcdfilter" mode="assign"&gt;<br /> &lt;const&gt;lcdlight&lt;/const&gt;<br /> &lt;/edit&gt;<br /> &lt;/match&gt;&lt;/p&gt;
&lt;p&gt; &lt;match target="font"&gt;<br /> &lt;test compare="less" name="pixelsize"&gt;<br /> &lt;double&gt;7.5&lt;/double&gt;<br /> &lt;/test&gt;<br /> &lt;edit name="hinting"&gt;<br /> &lt;bool&gt;false&lt;/bool&gt;<br /> &lt;/edit&gt;<br /> &lt;/match&gt;<br /> &lt;match target="font"&gt;<br /> &lt;test name="family" compare="contains"&gt; <br /> &lt;string&gt;AR PL UMing&lt;/string&gt;<br /> &lt;/test&gt;<br /> &lt;edit name="rgba"&gt;<br /> &lt;const&gt;none&lt;/const&gt;<br /> &lt;/edit&gt;<br /> &lt;/match&gt;<br /> &lt;match target="font"&gt;<br /> &lt;test name="family" compare="contains"&gt;<br /> &lt;string&gt;正黑&lt;/string&gt;<br /> &lt;/test&gt;<br /> &lt;edit name="rgba"&gt;<br /> &lt;const&gt;none&lt;/const&gt;<br /> &lt;/edit&gt;<br /> &lt;/match&gt;<br />&lt;/fontconfig&gt;&lt;/p&gt;
&lt;p&gt;~/fonts.conf.d/05-dpi-and-hinting.conf<br /></div></p>
<p>　　再来测试一下，如下图：<br /></p>
<p align="center"></p>
<p>　　<strong>第六步：为中文选择点阵字体</strong></p>
<p>　　上一篇中论述过，小字不用点阵，看起来会发虚。所以中文应该选择点阵。文泉驿点阵正黑不错，系统本身就有安装。文泉驿点阵宋体需要另外安装，如下图：<br /></p>
<p align="center"></p>
<p>　　代码如下：</p>
<p><br><div class="msgheader"><div class="right"><span style="CURSOR: pointer" onclick="copycode(getid('phpcode20'));"><u>复制代码</u></span></div>代码如下:</div><div class="msgborder" id="phpcode20"><br />&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br />&lt;!DOCTYPE fontconfig SYSTEM "../fonts.dtd"&gt;<br />&lt;fontconfig&gt;<br /> &lt;match target="pattern"&gt;<br /> &lt;test name="family" compare="contains"&gt;<br /> &lt;string&gt;AR PL UMing&lt;/string&gt;<br /> &lt;/test&gt;<br /> &lt;edit name="family" mode="prepend" binding="strong"&gt;<br /> &lt;string&gt;WenQuanYi Bitmap Song&lt;/string&gt;<br /> &lt;/edit&gt;<br /> &lt;/match&gt;<br /> &lt;match target="pattern"&gt;<br /> &lt;test name="family"&gt;<br /> &lt;string&gt;文泉驿正黑&lt;/string&gt;<br /> &lt;/test&gt;<br /> &lt;edit name="family" mode="prepend" binding="strong"&gt;<br /> &lt;string&gt;文泉驿点阵正黑&lt;/string&gt;<br /> &lt;/edit&gt;<br /> &lt;/match&gt;<br /> &lt;match target="pattern"&gt;<br /> &lt;test name="family"&gt;<br /> &lt;string&gt;文泉驿等宽正黑&lt;/string&gt;<br /> &lt;/test&gt;<br /> &lt;edit name="family" mode="prepend"&gt;<br /> &lt;string&gt;文泉驿点阵正黑&lt;/string&gt;<br /> &lt;/edit&gt;<br /> &lt;/match&gt;<br /> &lt;match target="font"&gt;<br /> &lt;test name="family"&gt; <br /> &lt;string&gt;文泉驿点阵正黑&lt;/string&gt;<br /> &lt;/test&gt;<br /> &lt;test compare="less_eq" name="pixelsize"&gt;<br /> &lt;double&gt;16&lt;/double&gt;<br /> &lt;/test&gt;<br /> &lt;test compare="more_eq" name="pixelsize"&gt;<br /> &lt;double&gt;12&lt;/double&gt;<br /> &lt;/test&gt;<br /> &lt;edit name="antialias"&gt;<br /> &lt;bool&gt;false&lt;/bool&gt;<br /> &lt;/edit&gt;<br /> &lt;/match&gt;<br />&lt;/fontconfig&gt;&lt;/p&gt;
&lt;p&gt;~/fonts.conf.d/06-chinese-bitmap.conf<br /></div></p>
<p>　　以上代码通过将文泉驿点阵宋体添加到AR PL UMing的前面来实现替换掉AR PL UMing自己的点阵，通过将文泉驿点阵正黑添加到文泉驿正黑和文泉驿等宽正黑的前面来显示点阵正黑。文泉驿的点阵只包含12px到16px的范围，对该范围大小的文泉驿正黑关闭抗锯齿。把控制台字体调到monospace-12，可以看到控制台中的中文使用点阵，如下图：<br /></p>
<p align="center"></p>
<p>　　写到这里，我不得不提到另外一个问题，就是&lt;edit...binding=&quot;?&quot;&gt;...&lt;/edit&gt;中binding究竟应该设置为什么的问题。binding属性有几种选择，分别是binding=&quot;strong&quot;、binding=&quot;weak&quot;和binding=&quot;same&quot;。如果该属性设置不合理，则会出现这样的问题：明明使用fc-pattern查看的时候是文泉驿点阵宋体排在AR PL UMing前面，是DejaVu Sans Mono排在文泉驿等宽正黑前面，但是使用fc-match匹配的时候，偏偏首选的是AR PL UMing和文泉驿等宽正黑。为什么会这样呢？这是因为Fontconfig选择字体的时候不仅仅只看字体名的排列顺序，还要综合考虑一种字体能覆盖的字符集和字体大小范围，所以，在前面的例子中，虽然文泉驿点阵宋体排在AR PL UMing前面，但是它覆盖的字体大小范围只有12px到16px，DejaVu&nbsp;Sans Mono虽然排在文泉驿等宽正黑前面，但是其覆盖的字符集不包含中日韩文，所以Fontconfig就会首选排在后面的字体。为了解决这个问题，就必须把binding属性设置为strong，这样，不管什么情况都首选排在前面的字体，只有遇到该字体不能胜任的字符时才选择后面的字体。在我的配置文件中，我都是一路strong到底。</p>
<p>　　<strong>第七步：对没有包含斜体和粗体的字体自动合成斜体和粗体</strong></p>
<p>　　代码如下：</p>
<p><br /><br><div class="msgheader"><div class="right"><span style="CURSOR: pointer" onclick="copycode(getid('phpcode21'));"><u>复制代码</u></span></div>代码如下:</div><div class="msgborder" id="phpcode21"><br />&lt;?xml version="1.0"?&gt;<br />&lt;!DOCTYPE fontconfig SYSTEM "fonts.dtd"&gt;<br />&lt;fontconfig&gt;<br />&lt;!-- <br /> Artificial oblique for fonts without an italic or oblique version<br /> --&gt;<br /> <br /> &lt;match target="font"&gt;<br /> &lt;!-- check to see if the font is roman --&gt;<br /> &lt;test name="slant"&gt;<br /> &lt;const&gt;roman&lt;/const&gt;<br /> &lt;/test&gt;<br /> &lt;!-- check to see if the pattern requested non-roman --&gt;<br /> &lt;test target="pattern" name="slant" compare="not_eq"&gt;<br /> &lt;const&gt;roman&lt;/const&gt;<br /> &lt;/test&gt;<br /> &lt;!-- multiply the matrix to slant the font --&gt;<br /> &lt;edit name="matrix" mode="assign"&gt;<br /> &lt;times&gt;<br /> &lt;name&gt;matrix&lt;/name&gt;<br /> &lt;matrix&gt;&lt;double&gt;1&lt;/double&gt;&lt;double&gt;0.2&lt;/double&gt;<br /> &lt;double&gt;0&lt;/double&gt;&lt;double&gt;1&lt;/double&gt;<br /> &lt;/matrix&gt;<br /> &lt;/times&gt;<br /> &lt;/edit&gt;<br /> &lt;!-- pretend the font is oblique now --&gt;<br /> &lt;edit name="slant" mode="assign"&gt;<br /> &lt;const&gt;oblique&lt;/const&gt;<br /> &lt;/edit&gt;<br /> &lt;!-- and disable embedded bitmaps for artificial oblique --&gt;<br /> &lt;edit name="embeddedbitmap" mode="assign"&gt;<br /> &lt;bool&gt;false&lt;/bool&gt;<br /> &lt;/edit&gt;<br /> &lt;/match&gt;&lt;/p&gt;
&lt;p&gt;&lt;!--<br /> Synthetic emboldening for fonts that do not have bold face available<br /> --&gt;&lt;/p&gt;
&lt;p&gt; &lt;match target="font"&gt;<br /> &lt;!-- check to see if the font is just regular --&gt;<br /> &lt;test name="weight" compare="less_eq"&gt;<br /> &lt;const&gt;medium&lt;/const&gt;<br /> &lt;/test&gt;<br /> &lt;!-- check to see if the pattern requests bold --&gt;<br /> &lt;test target="pattern" name="weight" compare="more"&gt;<br /> &lt;const&gt;medium&lt;/const&gt;<br /> &lt;/test&gt;<br /> &lt;!--<br /> set the embolden flag<br /> needed for applications using cairo, e.g. gucharmap, gedit, ...<br /> --&gt;<br /> &lt;edit name="embolden" mode="assign"&gt;<br /> &lt;bool&gt;true&lt;/bool&gt;<br /> &lt;/edit&gt;<br /> &lt;!--<br /> set weight to bold<br /> needed for applications using Xft directly, e.g. Firefox, ...<br /> --&gt;<br /> &lt;edit name="weight" mode="assign"&gt;<br /> &lt;const&gt;bold&lt;/const&gt;<br /> &lt;/edit&gt;<br /> &lt;/match&gt;<br />&lt;/fontconfig&gt;&lt;/p&gt;
&lt;p&gt;~/fonts.conf.d/07-synthetic.conf<br /></div></p>
<p>　　从这段代码可以看出，合成斜体的时候使用了矩阵乘法。另一个在Fontconfig配置文件中使用矩阵乘法的例子是/etc/fonts/conf.d中的第1个配置文件10-scale-bitmap-fonts.conf，它使用矩阵乘法对点阵字体进行缩放，而且如果缩放因子在0.8到1.2之间则不缩放。阅读系统的配置文件是一个学习的好方法，在我的系统中，该文件就仅供学习了，因为我不需要对点阵字体进行缩放。</p>
<p>　　最终效果如下图：<br /></p>
<p align="center"></p>
<p>　　放大后：<br /></p>
<p align="center"></p>
<p>　　结果：小字时，宋体黑体都有点阵，大字时宋体黑体分别用不同的轮廓字体，能正确区分serif和sans-serif，加粗的宋体、等宽字体也能正确显示，应用程序菜单中的字体也恢复到了点阵。</p>
总结
<p>　　展示了Fedora 20配置字体的全过程。虽然没有详细讲解Fontconfig的语法，但是通过代码、截图和fc-pattern以及fc-match命令对字体进行测试，让Fontconfig的配置不言自明。当然，每个人对字体的感受是不一样的，但是只要掌握了Fontconfig的配置方法，适当修改以迎合自己的需求，也是一件简单的事情。也可以将Windows中的字体借过来使用，微软还是一个很靠谱的公司，它的那几个经典的英文字体是开放的，前面有一个截图中展示有Fedora的源中有mscore-fonts软件包，直接安装就可以。</p>
<hr></span>                                     
		    	</div>
		    	<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>代码注释</div>
			    <div class="panel-content">
			    <span></span>                                     
		    	</div>

			</div>

			<!-- END ROW -->
			<div class="newsPage">
				<div class="newsPageTurn">
				    <span><a>上一篇</a><a href='/php/biji/103889.html'>oracle创建数据库和用户的方法</a><a>下一篇</a><a href='/php/biji/103891.html'>php的数组与字符串的转换函数整理汇总</a></span>
				</div>
			</div>
		</div>


<div id="author-box">
    <h3>作者：喵哥笔记</h3>
        <div class="author-info">
            <div class="author-avatar">
                <img src="/skin1/picture/01.jpg" alt="IDC笔记" class="avatar" width="64" height="64">
            </div>
        <div class="author-description">
            <p>学的不仅是技术，更是梦想！</p>
            <ul class="author-social follows nb">
            	<li>
                    <a target="_blank" href="/" title="IDC笔记">IDC笔记</a>
                </li>
            </ul>
        </div>
        <div class="clear"></div>
    </div>
</div>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
<!-- container-fluid -->
	</div>
<!-- content -->
	<footer class="footer">
	© 2020 IDC笔记 <i class="mdi mdi-heart text-danger"></i>. | 备案号：<a href="https://beian.miit.gov.cn/">辽ICP备18000516号</a>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?674585fbbd2294d3faf910f668ea91b4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

	</footer>
</div>

</div>
<!-- END wrapper -->
<!-- jQuery  -->
<script src="/skin1/js/jquery.min.js"></script>
<script src="/skin1/js/bootstrap.bundle.min.js"></script>
<script src="/skin1/js/metismenu.min.js"></script>
<script src="/skin1/js/jquery.slimscroll.js"></script>
<script src="/skin1/js/waves.min.js"></script>
<!--Morris Chart-->
<script src="/skin1/js/morris.min.js"></script>
<script src="/skin1/js/raphael.min.js"></script>
<script src="/skin1/js/dashboard.init.js"></script>
<script src="/skin1/js/app.js"></script>
<script src="/foot.js"></script>
</body>
</html>