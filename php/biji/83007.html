<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title>一千行的MySQL学习笔记汇总_PHP教程_IDC笔记</title>
    <meta name="keywords" content="PHP,PHP笔记,PHP教程" />
    <meta name="description" content="本文详细汇总了MySQL学习中的各类技巧，分享给大家供大家参考。<br />
具体如下：<br />
<br />
<br />
/* 启动MySQL */<br />
net start mysql<br />
<br />
/* 连接与断开服务器 */<br />
mysql -h 地址 -P 端口 -u 用户名 -p" />
    <meta content="Responsive admin theme build on top of Bootstrap 4" name="description" />
    <meta content="idcnote.com" name="author" />
    <link rel="shortcut icon" href="/skin1/images/favicon.ico">
    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="/skin1/css/morris.css">
    <link href="/skin1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/metismenu.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/icons.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/style.css" rel="stylesheet" type="text/css">
<link href="/SyntaxHighlighter/shCoreDefault.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/SyntaxHighlighter/shCore.js"></script>
<script type="text/javascript">
 SyntaxHighlighter.all();
</script>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
</head>
<body>
<!-- Begin page -->
		<div id="wrapper">
			<!-- Top Bar Start -->
			<div class="topbar">
				<!-- LOGO -->
				<div class="topbar-left">
					<a href="/" class="logo">
						<span class="logo-light">
                            <i class="mdi mdi-camera-control"></i>IDC笔记
                        </span>
						<span class="logo-sm">
                            <i class="mdi mdi-camera-control"></i>
                        </span>
					</a>
				</div>
				<nav class="navbar-custom">
					<ul class="navbar-right list-inline float-right mb-0">
						<!--<li class="dropdown notification-list list-inline-item d-none d-md-inline-block">
							<a class="nav-link waves-effect" href="#" id="btn-fullscreen">
								<i class="mdi mdi-arrow-expand-all noti-icon"></i>
							</a>
						</li>
						<li class="dropdown notification-list list-inline-item">
							<div class="dropdown notification-list nav-pro-img">
								<a class="dropdown-toggle nav-link arrow-none nav-user" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
									<img src="/skin1/picture/user-4.jpg" alt="user" class="rounded-circle">
								</a>
								<div class="dropdown-menu dropdown-menu-right profile-dropdown ">
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-account-circle"></i> Profile</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-wallet"></i> Wallet</a>
									<a class="dropdown-item d-block" href="#">
										<span class="badge badge-success float-right">11</span>
										<i class="mdi mdi-settings"></i> Settings</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-lock-open-outline"></i> Lock screen</a>
									<div class="dropdown-divider"></div>
									<a class="dropdown-item text-danger" href="#">
										<i class="mdi mdi-power text-danger"></i> Logout</a>
								</div>
							</div>
						</li>
						-->
					</ul>
					<ul class="list-inline menu-left mb-0">
						<li class="float-left">
							<button class="button-menu-mobile open-left waves-effect">
                            <i class="mdi mdi-menu"></i>
                        </button>
						</li>
						<li class="d-none d-md-inline-block">
							<form role="search" class="app-search">
								<div class="form-group mb-0">
									<input type="text" class="form-control" placeholder="Search..">
									<button type="submit"><i class="fa fa-search"></i></button>
								</div>
							</form>
						</li>
					</ul>
				</nav>
			</div>
<!-- ========== Left Sidebar Start ========== -->
<div class="left side-menu">
    <div class="slimscroll-menu" id="remove-scroll">
    <!--- Sidemenu -->
    <div id="sidebar-menu">
    <!-- Left Menu Start -->
    <ul class="metismenu" id="side-menu">
			<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP简介			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jianjie/1.html">PHP简介</a></li><li><a href="/php/jianjie/2.html">PHP用途</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP基本语法			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yufa/3.html">分离HTML</a></li><li><a href="/php/yufa/4.html">指令分隔符</a></li><li><a href="/php/yufa/5.html">PHP注释</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类型			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpleixing/6.html">PHP类型简介</a></li><li><a href="/php/phpleixing/7.html">PHP类型之布尔类型</a></li><li><a href="/php/phpleixing/8.html">PHP类型之整型</a></li><li><a href="/php/phpleixing/9.html">PHP类型之浮点型</a></li><li><a href="/php/phpleixing/10.html">PHP类型之字符串</a></li><li><a href="/php/phpleixing/11.html">PHP类型之数组</a></li><li><a href="/php/phpleixing/12.html">PHP类型之对象</a></li><li><a href="/php/phpleixing/13.html">PHP类型之资源类型</a></li><li><a href="/php/phpleixing/14.html">PHP类型之NULL</a></li><li><a href="/php/phpleixing/15.html">PHP类型之伪类型</a></li><li><a href="/php/phpleixing/16.html">PHP类型之类型判别</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP变量			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbianliang/17.html">PHP变量之基础</a></li><li><a href="/php/phpbianliang/18.html">PHP变量之预定义变量</a></li><li><a href="/php/phpbianliang/19.html">PHP变量之变量范围</a></li><li><a href="/php/phpbianliang/20.html">PHP变量之可变变量</a></li><li><a href="/php/phpbianliang/21.html">PHP变量之外部变量</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP运算符			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yunsuanfu/22.html">PHP运算符优先级</a></li><li><a href="/php/yunsuanfu/23.html">算术运算符</a></li><li><a href="/php/yunsuanfu/24.html">赋值运算符</a></li><li><a href="/php/yunsuanfu/25.html">位运算符</a></li><li><a href="/php/yunsuanfu/26.html">比较运算符</a></li><li><a href="/php/yunsuanfu/27.html">错误控制运算符</a></li><li><a href="/php/yunsuanfu/28.html">执行运算符</a></li><li><a href="/php/yunsuanfu/29.html">递增/递减运算符</a></li><li><a href="/php/yunsuanfu/30.html">逻辑运算符</a></li><li><a href="/php/yunsuanfu/31.html">字符串运算符</a></li><li><a href="/php/yunsuanfu/32.html">数组运算符</a></li><li><a href="/php/yunsuanfu/33.html">类型运算符</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP控制结构			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jiegou/34.html">PHP控制结构之if</a></li><li><a href="/php/jiegou/35.html">PHP控制结构之else</a></li><li><a href="/php/jiegou/36.html">PHP控制结构之elseif/else if</a></li><li><a href="/php/jiegou/37.html">PHP控制结构之替代语法</a></li><li><a href="/php/jiegou/38.html">PHP控制结构之while</a></li><li><a href="/php/jiegou/39.html">PHP控制结构之do-while</a></li><li><a href="/php/jiegou/40.html">PHP控制结构之for</a></li><li><a href="/php/jiegou/41.html">PHP控制结构之foreach</a></li><li><a href="/php/jiegou/42.html">PHP控制结构之break</a></li><li><a href="/php/jiegou/43.html">PHP控制结构之continue</a></li><li><a href="/php/jiegou/44.html">PHP控制结构之switch</a></li><li><a href="/php/jiegou/45.html">PHP控制结构之declare</a></li><li><a href="/php/jiegou/46.html">PHP控制结构之return</a></li><li><a href="/php/jiegou/47.html">PHP控制结构之require</a></li><li><a href="/php/jiegou/48.html">PHP控制结构之include</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/hanshu/52.html">用户自定义函数</a></li><li><a href="/php/hanshu/53.html">函数的参数</a></li><li><a href="/php/hanshu/54.html">返回值</a></li><li><a href="/php/hanshu/55.html">可变函数</a></li><li><a href="/php/hanshu/56.html">内部（内置）函数</a></li><li><a href="/php/hanshu/57.html">匿名函数</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类与对象			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpduixiang/58.html">类与对象前言</a></li><li><a href="/php/phpduixiang/59.html">基本概念</a></li><li><a href="/php/phpduixiang/60.html">属性</a></li><li><a href="/php/phpduixiang/61.html">类常量</a></li><li><a href="/php/phpduixiang/62.html">自动加载对象</a></li><li><a href="/php/phpduixiang/63.html">构造函数和析构函数</a></li><li><a href="/php/phpduixiang/64.html">访问控制</a></li><li><a href="/php/phpduixiang/65.html">对象继承</a></li><li><a href="/php/phpduixiang/66.html">Static关键字</a></li><li><a href="/php/phpduixiang/67.html">抽象类</a></li><li><a href="/php/phpduixiang/68.html">接口</a></li><li><a href="/php/phpduixiang/69.html">Traits</a></li><li><a href="/php/phpduixiang/70.html">重载</a></li><li><a href="/php/phpduixiang/71.html">对象迭代</a></li><li><a href="/php/phpduixiang/72.html">设计模式</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP异常处理			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yichang/81.html">异常处理</a></li><li><a href="/php/yichang/82.html">扩展PHP内置的异常处理类</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数库按分类			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpku/83.html">数组</a></li><li><a href="/php/phpku/84.html">Classes/Objects</a></li><li><a href="/php/phpku/85.html">Date/Time</a></li><li><a href="/php/phpku/86.html">Directories</a></li><li><a href="/php/phpku/87.html">错误处理</a></li><li><a href="/php/phpku/88.html">Program execution</a></li><li><a href="/php/phpku/89.html">Filesystem</a></li><li><a href="/php/phpku/90.html">Filter</a></li><li><a href="/php/phpku/91.html">Function Handling</a></li><li><a href="/php/phpku/92.html">PHP 选项/信息</a></li><li><a href="/php/phpku/93.html">Mail</a></li><li><a href="/php/phpku/94.html">Math</a></li><li><a href="/php/phpku/95.html">Misc.</a></li><li><a href="/php/phpku/96.html">Network</a></li><li><a href="/php/phpku/97.html">输出控制</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> php基础			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbiji/108377.html"></a></li><li><a href="/php/phpbiji/108376.html"></a></li><li><a href="/php/phpbiji/108380.html"></a></li><li><a href="/php/phpbiji/108379.html"></a></li><li><a href="/php/phpbiji/108378.html"></a></li><li><a href="/php/phpbiji/108381.html"></a></li><li><a href="/php/phpbiji/108382.html"></a></li><li><a href="/php/phpbiji/108384.html"></a></li><li><a href="/php/phpbiji/108383.html"></a></li><li><a href="/php/phpbiji/108385.html"></a></li><li><a href="/php/phpbiji/108386.html"></a></li><li><a href="/php/phpbiji/108388.html"></a></li><li><a href="/php/phpbiji/108387.html"></a></li><li><a href="/php/phpbiji/108389.html"></a></li><li><a href="/php/phpbiji/108391.html"></a></li>		</ul>
	</li>
		<li>
	    <a href="/php/biji/" class="waves-effect">
		    <i class="icon-share"></i>
		    <span>PHP笔记
		       	<span class="float-right menu-arrow">
		       	<i class="mdi mdi-chevron-right"></i>
		       	</span>
		    </span>
	    </a>
	</li>
	</ul>
</div>
<!-- Sidebar -->
<div class="clearfix"></div>
</div>
<!-- Sidebar -left -->
</div>
<!-- Left Sidebar End -->
<!-- Start right Content here -->
<div class="content-page">
	<div class="content">
		<div class="container-fluid">
			<div class="page-title-box">
				<div class="row align-items-center">
					<div class="col-sm-6">
						<h1 class="page-title">一千行的MySQL学习笔记汇总</h1>
					</div>
				</div>
				<!-- end row -->
			</div>
			<!-- end page-title -->
			<!-- START ROW -->
			<div class="panel panel-forbid">
				<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>内容摘要</div>
			    <div class="panel-content">
			    <span>本文详细汇总了MySQL学习中的各类技巧，分享给大家供大家参考。<br />
具体如下：<br />
<br />
<br />
/* 启动MySQL */<br />
net start mysql<br />
<br />
/* 连接与断开服务器 */<br />
mysql -h 地址 -P 端口 -u 用户名 -p</span>                                     
		    	</div>
			    <div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>文章正文</div>
			    <div class="panel-content">
			    <span><p>本文详细汇总了MySQL学习中的各类技巧，分享给大家供大家参考。</p>
<p>具体如下：</p>
<div class="phpstudycode">
<pre class="brush:sql;">
/* 启动MySQL */
net start mysql

/* 连接与断开服务器 */
mysql -h 地址 -P 端口 -u 用户名 -p 密码

/* 跳过权限验证登录MySQL */
mysqld --skip-grant-tables
-- 修改root密码
密码加密函数password()
update mysql.user set password=password('root');

SHOW PROCESSLIST -- 显示哪些线程正在运行
SHOW VARIABLES -- 

/* 数据库操作 */ ------------------
-- 查看当前数据库
  select database();
-- 显示当前时间、用户名、数据库版本
  select now(), user(), version();
-- 创建库
  create database[ if not exists] 数据库名 数据库选项
  数据库选项：
    CHARACTER SET charset_name
    COLLATE collation_name
-- 查看已有库
  show databases[ like 'pattern']
-- 查看当前库信息
  show create database 数据库名
-- 修改库的选项信息
  alter database 库名 选项信息
-- 删除库
  drop database[ if exists] 数据库名
    同时删除该数据库相关的目录及其目录内容

/* 表的操作 */ ------------------
-- 创建表
  create [temporary] table[ if not exists] [库名.]表名 ( 表的结构定义 )[ 表选项]
    每个字段必须有数据类型
    最后一个字段后不能有逗号
    temporary 临时表，会话结束时表自动消失
    对于字段的定义：
      字段名 数据类型 [NOT NULL | NULL] [DEFAULT default_value] [AUTO_INCREMENT] [UNIQUE [KEY] | [PRIMARY] KEY] [COMMENT 'string']
-- 表选项
  -- 字符集
    CHARSET = charset_name
    如果表没有设定，则使用数据库字符集
  -- 存储引擎
    ENGINE = engine_name  
    表在管理数据时采用的不同的数据结构，结构不同会导致处理方式、提供的特性操作等不同
    常见的引擎：InnoDB MyISAM Memory/Heap BDB Merge Example CSV MaxDB Archive
    不同的引擎在保存表的结构和数据时采用不同的方式
    MyISAM表文件含义：.frm表定义，.MYD表数据，.MYI表索引
    InnoDB表文件含义：.frm表定义，表空间数据和日志文件
    SHOW ENGINES -- 显示存储引擎的状态信息
    SHOW ENGINE 引擎名 {LOGS|STATUS} -- 显示存储引擎的日志或状态信息
  -- 数据文件目录
    DATA DIRECTORY = '目录'
  -- 索引文件目录
    INDEX DIRECTORY = '目录'
  -- 表注释
    COMMENT = 'string'
  -- 分区选项
    PARTITION BY ... (详细见手册)
-- 查看所有表
  SHOW TABLES[ LIKE 'pattern']
  SHOW TABLES FROM 表名
-- 查看表机构
  SHOW CREATE TABLE 表名  （信息更详细）
  DESC 表名 / DESCRIBE 表名 / EXPLAIN 表名 / SHOW COLUMNS FROM 表名 [LIKE 'PATTERN']
  SHOW TABLE STATUS [FROM db_name] [LIKE 'pattern']
-- 修改表
  -- 修改表本身的选项
    ALTER TABLE 表名 表的选项
    EG:  ALTER TABLE 表名 ENGINE=MYISAM;
  -- 对表进行重命名
    RENAME TABLE 原表名 TO 新表名
    RENAME TABLE 原表名 TO 库名.表名  （可将表移动到另一个数据库）
    -- RENAME可以交换两个表名
  -- 修改表的字段机构
    ALTER TABLE 表名 操作名
    -- 操作名
      ADD[ COLUMN] 字段名    -- 增加字段
        AFTER 字段名      -- 表示增加在该字段名后面
        FIRST        -- 表示增加在第一个
      ADD PRIMARY KEY(字段名)  -- 创建主键
      ADD UNIQUE [索引名] (字段名)-- 创建唯一索引
      ADD INDEX [索引名] (字段名)  -- 创建普通索引
      ADD 
      DROP[ COLUMN] 字段名    -- 删除字段
      MODIFY[ COLUMN] 字段名 字段属性    -- 支持对字段属性进行修改，不能修改字段名(所有原有属性也需写上)
      CHANGE[ COLUMN] 原字段名 新字段名 字段属性    -- 支持对字段名修改
      DROP PRIMARY KEY  -- 删除主键(删除主键前需删除其AUTO_INCREMENT属性)
      DROP INDEX 索引名  -- 删除索引
      DROP FOREIGN KEY 外键  -- 删除外键

-- 删除表
  DROP TABLE[ IF EXISTS] 表名 ...
-- 清空表数据
  TRUNCATE [TABLE] 表名
-- 复制表结构
  CREATE TABLE 表名 LIKE 要复制的表名
-- 复制表结构和数据
  CREATE TABLE 表名 [AS] SELECT * FROM 要复制的表名
-- 检查表是否有错误
  CHECK TABLE tbl_name [, tbl_name] ... [option] ...
-- 优化表
  OPTIMIZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE tbl_name [, tbl_name] ...
-- 修复表
  REPAIR [LOCAL | NO_WRITE_TO_BINLOG] TABLE tbl_name [, tbl_name] ... [QUICK] [EXTENDED] [USE_FRM]
-- 分析表
  ANALYZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE tbl_name [, tbl_name] ...



/* 数据操作 */ ------------------
-- 增
  INSERT [INTO] 表名 [(字段列表)] VALUES (值列表)[, (值列表), ...]
    -- 如果要插入的值列表包含所有字段并且顺序一致，则可以省略字段列表。
    -- 可同时插入多条数据记录！
    REPLACE 与 INSERT 完全一样，可互换。
  INSERT [INTO] 表名 SET 字段名=值[, 字段名=值, ...]
-- 查
  SELECT 字段列表 FROM 表名[ 其他子句]
    -- 可来自多个表的多个字段
    -- 其他子句可以不使用
    -- 字段列表可以用*代替，表示所有字段
-- 删
  DELETE FROM 表名[ 删除条件子句]
    没有条件子句，则会删除全部
-- 改
  UPDATE 表名 SET 字段名=新值[, 字段名=新值] [更新条件]

/* 字符集编码 */ ------------------
-- MySQL、数据库、表、字段均可设置编码
-- 数据编码与客户端编码不需一致
SHOW VARIABLES LIKE 'character_set_%'  -- 查看所有字符集编码项
  character_set_client    客户端向服务器发送数据时使用的编码
  character_set_results    服务器端将结果返回给客户端所使用的编码
  character_set_connection  连接层编码
SET 变量名 = 变量值
  set character_set_client = gbk;
  set character_set_results = gbk;
  set character_set_connection = gbk;
SET NAMES GBK;  -- 相当于完成以上三个设置
-- 校对集
  校对集用以排序
  SHOW CHARACTER SET [LIKE 'pattern']/SHOW CHARSET [LIKE 'pattern']  查看所有字符集
  SHOW COLLATION [LIKE 'pattern']    查看所有校对集
  charset 字符集编码    设置字符集编码
  collate 校对集编码    设置校对集编码

</pre>
</div>
<p>数据类型（列类型）</p>
<p><strong>1. 数值类型<br />
</strong></p>
<div class="phpstudycode">
<pre class="brush:sql;">
-- a. 整型 ----------
  类型      字节    范围（有符号位）
  tinyint    1字节  -128 ~ 127    无符号位：0 ~ 255
  smallint  2字节  -32768 ~ 32767
  mediumint  3字节  -8388608 ~ 8388607
  int      4字节
  bigint    8字节

  int(M)  M表示总位数
  - 默认存在符号位，unsigned 属性修改
  - 显示宽度，如果某个数不够定义字段时设置的位数，则前面以0补填，zerofill 属性修改
    例：int(5)  插入一个数'123'，补填后为'00123'
  - 在满足要求的情况下，越小越好。
  - 1表示bool值真，0表示bool值假。MySQL没有布尔类型，通过整型0和1表示。常用tinyint(1)表示布尔型。

-- b. 浮点型 ----------
  类型        字节    范围
  float(单精度)    4字节
  double(双精度)  8字节
  浮点型既支持符号位 unsigned 属性，也支持显示宽度 zerofill 属性。
    不同于整型，前后均会补填0.
  定义浮点型时，需指定总位数和小数位数。
    float(M, D)    double(M, D)
    M表示总位数，D表示小数位数。
    M和D的大小会决定浮点数的范围。不同于整型的固定范围。
    M既表示总位数（不包括小数点和正负号），也表示显示宽度（所有显示符号均包括）。
    支持科学计数法表示。
    浮点数表示近似值。

-- c. 定点数 ----------
  decimal  -- 可变长度
  decimal(M, D)  M也表示总位数，D表示小数位数。
  保存一个精确的数值，不会发生数据的改变，不同于浮点数的四舍五入。
  将浮点数转换为字符串来保存，每9位数字保存为4个字节。

</pre>
</div>
<p><strong>2. 字符串类型<br />
</strong></p>
<div class="phpstudycode">
<pre class="brush:sql;">
-- a. char, varchar ----------
  char  定长字符串，速度快，但浪费空间
  varchar  变长字符串，速度慢，但节省空间
  M表示能存储的最大长度，此长度是字符数，非字节数。
  不同的编码，所占用的空间不同。
  char,最多255个字符，与编码无关。
  varchar,最多65535字符，与编码有关。
  一条有效记录最大不能超过65535个字节。
    utf8 最大为21844个字符，gbk 最大为32766个字符，latin1 最大为65532个字符
  varchar 是变长的，需要利用存储空间保存 varchar 的长度，如果数据小于255个字节，则采用一个字节来保存长度，反之需要两个字节来保存。
  varchar 的最大有效长度由最大行大小和使用的字符集确定。
  最大有效长度是65532字节，因为在varchar存字符串时，第一个字节是空的，不存在任何数据，然后还需两个字节来存放字符串的长度，所以有效长度是64432-1-2=65532字节。
  例：若一个表定义为 CREATE TABLE tb(c1 int, c2 char(30), c3 varchar(N)) charset=utf8; 问N的最大值是多少？ 答：(65535-1-2-4-30*3)/3

-- b. blob, text ----------
  blob 二进制字符串（字节字符串）
    tinyblob, blob, mediumblob, longblob
  text 非二进制字符串（字符字符串）
    tinytext, text, mediumtext, longtext
  text 在定义时，不需要定义长度，也不会计算总长度。
  text 类型在定义时，不可给default值

-- c. binary, varbinary ----------
  类似于char和varchar，用于保存二进制字符串，也就是保存字节字符串而非字符字符串。
  char, varchar, text 对应 binary, varbinary, blob.

</pre>
</div>
<p><strong>3. 日期时间类型<br />
</strong>&nbsp;&nbsp;&nbsp; 一般用整型保存时间戳，因为PHP可以很方便的将时间戳进行格式化。<br />
&nbsp;&nbsp;&nbsp; datetime&nbsp;&nbsp;&nbsp; 8字节&nbsp;&nbsp;&nbsp; 日期及时间&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1000-01-01 00:00:00 到 9999-12-31 23:59:59<br />
&nbsp;&nbsp;&nbsp; date&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3字节&nbsp;&nbsp;&nbsp; 日期&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1000-01-01 到 9999-12-31<br />
&nbsp;&nbsp;&nbsp; timestamp&nbsp;&nbsp;&nbsp; 4字节&nbsp;&nbsp;&nbsp; 时间戳&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 19700101000000 到 2038-01-19 03:14:07<br />
&nbsp;&nbsp;&nbsp; time&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3字节&nbsp;&nbsp;&nbsp; 时间&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -838:59:59 到 838:59:59<br />
&nbsp;&nbsp;&nbsp; year&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1字节&nbsp;&nbsp;&nbsp; 年份&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1901 - 2155<br />
&nbsp;&nbsp;&nbsp; <br />
datetime&nbsp;&nbsp;&nbsp; “YYYY-MM-DD hh:mm:ss”<br />
timestamp&nbsp;&nbsp;&nbsp; “YY-MM-DD hh:mm:ss”<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; “YYYYMMDDhhmmss”<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; “YYMMDDhhmmss”<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; YYYYMMDDhhmmss<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; YYMMDDhhmmss<br />
date&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; “YYYY-MM-DD”<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; “YY-MM-DD”<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; “YYYYMMDD”<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; “YYMMDD”<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; YYYYMMDD<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; YYMMDD<br />
time&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; “hh:mm:ss”<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; “hhmmss”<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; hhmmss<br />
year&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; “YYYY”<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; “YY”<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; YYYY<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; YY</p>
<p><strong>4. 枚举和集合<br />
</strong>-- 枚举(enum) ----------<br />
enum(val1, val2, val3...)<br />
&nbsp;&nbsp;&nbsp; 在已知的值中进行单选。最大数量为65535.<br />
&nbsp;&nbsp;&nbsp; 枚举值在保存时，以2个字节的整型(smallint)保存。每个枚举值，按保存的位置顺序，从1开始逐一递增。<br />
&nbsp;&nbsp;&nbsp; 表现为字符串类型，存储却是整型。<br />
&nbsp;&nbsp;&nbsp; NULL值的索引是NULL。<br />
&nbsp;&nbsp;&nbsp; 空字符串错误值的索引值是0。</p>
<p>-- 集合（set） ----------<br />
set(val1, val2, val3...)<br />
&nbsp;&nbsp;&nbsp; create table tab ( gender set('男', '女', '无') );<br />
&nbsp;&nbsp;&nbsp; insert into tab values ('男, 女');<br />
&nbsp;&nbsp;&nbsp; 最多可以有64个不同的成员。以bigint存储，共8个字节。采取位运算的形式。<br />
&nbsp;&nbsp;&nbsp; 当创建表时，SET成员值的尾部空格将自动被删除。</p>
<p><strong>&nbsp;选择类型</strong></p>
<p>-- PHP角度<br />
1. 功能满足<br />
2. 存储空间尽量小，处理效率更高<br />
3. 考虑兼容问题</p>
<p>-- IP存储 ----------<br />
1. 只需存储，可用字符串<br />
2. 如果需计算，查找等，可存储为4个字节的无符号int，即unsigned<br />
&nbsp;&nbsp;&nbsp; 1) PHP函数转换<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ip2long可转换为整型，但会出现携带符号问题。需格式化为无符号的整型。<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 利用sprintf函数格式化字符串<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sprintf("%u", ip2long('192.168.3.134'));<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 然后用long2ip将整型转回IP字符串<br />
&nbsp;&nbsp;&nbsp; 2) MySQL函数转换(无符号整型，UNSIGNED)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; INET_ATON('127.0.0.1') 将IP转为整型<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; INET_NTOA(2130706433) 将整型转为IP<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
<p><strong>列属性（列约束） </strong></p>
<p>1. 主键<br />
&nbsp;&nbsp;&nbsp; - 能唯一标识记录的字段，可以作为主键。<br />
&nbsp;&nbsp;&nbsp; - 一个表只能有一个主键。<br />
&nbsp;&nbsp;&nbsp; - 主键具有唯一性。<br />
&nbsp;&nbsp;&nbsp; - 声明字段时，用 primary key 标识。<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 也可以在字段列表之后声明<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 例：create table tab ( id int, stu varchar(10), primary key (id));<br />
&nbsp;&nbsp;&nbsp; - 主键字段的值不能为null。<br />
&nbsp;&nbsp;&nbsp; - 主键可以由多个字段共同组成。此时需要在字段列表后声明的方法。<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 例：create table tab ( id int, stu varchar(10), age int, primary key (stu, age));</p>
<p>2. unique 唯一索引（唯一约束）<br />
&nbsp;&nbsp;&nbsp; 使得某字段的值也不能重复。<br />
&nbsp;&nbsp;&nbsp; <br />
3. null 约束<br />
&nbsp;&nbsp;&nbsp; null不是数据类型，是列的一个属性。<br />
&nbsp;&nbsp;&nbsp; 表示当前列是否可以为null，表示什么都没有。<br />
&nbsp;&nbsp;&nbsp; null, 允许为空。默认。<br />
&nbsp;&nbsp;&nbsp; not null, 不允许为空。<br />
&nbsp;&nbsp;&nbsp; insert into tab values (null, 'val');<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- 此时表示将第一个字段的值设为null, 取决于该字段是否允许为null<br />
&nbsp;&nbsp;&nbsp; <br />
4. default 默认值属性<br />
&nbsp;&nbsp;&nbsp; 当前字段的默认值。<br />
&nbsp;&nbsp;&nbsp; insert into tab values (default, 'val');&nbsp;&nbsp;&nbsp; -- 此时表示强制使用默认值。<br />
&nbsp;&nbsp;&nbsp; create table tab ( add_time timestamp default current_timestamp );<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- 表示将当前时间的时间戳设为默认值。<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; current_date, current_time</p>
<p>5. auto_increment 自动增长约束<br />
&nbsp;&nbsp;&nbsp; 自动增长必须为索引（主键或unique）<br />
&nbsp;&nbsp;&nbsp; 只能存在一个字段为自动增长。<br />
&nbsp;&nbsp;&nbsp; 默认为1开始自动增长。可以通过表属性 auto_increment = x进行设置，或 alter table tbl auto_increment = x;</p>
<p>6. comment 注释<br />
&nbsp;&nbsp;&nbsp; 例：create table tab ( id int ) comment '注释内容';</p>
<p>7. foreign key 外键约束<br />
&nbsp;&nbsp;&nbsp; 用于限制主表与从表数据完整性。<br />
&nbsp;&nbsp;&nbsp; alter table t1 add constraint `t1_t2_fk` foreign key (t1_id) references t2(id);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- 将表t1的t1_id外键关联到表t2的id字段。<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- 每个外键都有一个名字，可以通过 constraint 指定</p>
<p>&nbsp;&nbsp;&nbsp; 存在外键的表，称之为从表（子表），外键指向的表，称之为主表（父表）。</p>
<p>&nbsp;&nbsp;&nbsp; 作用：保持数据一致性，完整性，主要目的是控制存储在外键表（从表）中的数据。</p>
<p>&nbsp;&nbsp;&nbsp;<strong> MySQL中，可以对InnoDB引擎使用外键约束：<br />
</strong>&nbsp;&nbsp;&nbsp; 语法：<br />
&nbsp;&nbsp;&nbsp; foreign key (外键字段） references 主表名 (关联字段) [主表记录删除时的动作] [主表记录更新时的动作]<br />
&nbsp;&nbsp;&nbsp; 此时需要检测一个从表的外键需要约束为主表的已存在的值。外键在没有关联的情况下，可以设置为null.前提是该外键列，没有not null。</p>
<p>&nbsp;&nbsp;&nbsp; 可以不指定主表记录更改或更新时的动作，那么此时主表的操作被拒绝。<br />
&nbsp;&nbsp;&nbsp; 如果指定了 on update 或 on delete：在删除或更新时，有如下几个操作可以选择：<br />
&nbsp;&nbsp;&nbsp; 1. cascade，级联操作。主表数据被更新（主键值更新），从表也被更新（外键值更新）。主表记录被删除，从表相关记录也被删除。<br />
&nbsp;&nbsp;&nbsp; 2. set null，设置为null。主表数据被更新（主键值更新），从表的外键被设置为null。主表记录被删除，从表相关记录外键被设置成null。但注意，要求该外键列，没有not null属性约束。<br />
&nbsp;&nbsp;&nbsp; 3. restrict，拒绝父表删除和更新。</p>
<p>&nbsp;&nbsp;&nbsp; 注意，<span style="color: #ff0000">外键只被InnoDB存储引擎所支持。其他引擎是不支持的。</span></p>
<p><strong>建表规范</strong></p>
<div class="phpstudycode">
<pre class="brush:sql;">
  -- Normal Format, NF
    - 每个表保存一个实体信息
    - 每个具有一个ID字段作为主键
    - ID主键 + 原子表
  -- 1NF, 第一范式
    字段不能再分，就满足第一范式。
  -- 2NF, 第二范式
    满足第一范式的前提下，不能出现部分依赖。
    消除符合主键就可以避免部分依赖。增加单列关键字。
  -- 3NF, 第三范式
    满足第二范式的前提下，不能出现传递依赖。
    某个字段依赖于主键，而有其他字段依赖于该字段。这就是传递依赖。
    将一个实体信息的数据放在一个表内实现。


/* select */ ------------------

select [all|distinct] select_expr from -&gt; where -&gt; group by [合计函数] -&gt; having -&gt; order by -&gt; limit

a. select_expr
  -- 可以用 * 表示所有字段。
    select * from tb;
  -- 可以使用表达式（计算公式、函数调用、字段也是个表达式）
    select stu, 29+25, now() from tb;
  -- 可以为每个列使用别名。适用于简化列标识，避免多个列标识符重复。
    - 使用 as 关键字，也可省略 as.
    select stu+10 as add10 from tb;

b. from 子句
  用于标识查询来源。
  -- 可以为表起别名。使用as关键字。
    select * from tb1 as tt, tb2 as bb;
  -- from子句后，可以同时出现多个表。
    -- 多个表会横向叠加到一起，而数据会形成一个笛卡尔积。
    select * from tb1, tb2;

c. where 子句
  -- 从from获得的数据源中进行筛选。
  -- 整型1表示真，0表示假。
  -- 表达式由运算符和运算数组成。
    -- 运算数：变量（字段）、值、函数返回值
    -- 运算符：
      =, &lt;=&gt;, &lt;&gt;, !=, &lt;=, &lt;, &gt;=, &gt;, !, &&, ||, 
      in (not) null, (not) like, (not) in, (not) between and, is (not), and, or, not, xor
      is/is not 加上ture/false/unknown，检验某个值的真假
      &lt;=&gt;与&lt;&gt;功能相同，&lt;=&gt;可用于null比较

d. group by 子句, 分组子句
  group by 字段/别名 [排序方式]
  分组后会进行排序。升序：ASC，降序：DESC
  
  以下[合计函数]需配合 group by 使用：
  count 返回不同的非NULL值数目  count(*)、count(字段)
  sum 求和
  max 求最大值
  min 求最小值
  avg 求平均值
  group_concat 返回带有来自一个组的连接的非NULL值的字符串结果。组内字符串连接。

e. having 子句，条件子句
  与 where 功能、用法相同，执行时机不同。
  where 在开始时执行检测数据，对原数据进行过滤。
  having 对筛选出的结果再次进行过滤。
  having 字段必须是查询出来的，where 字段必须是数据表存在的。
  where 不可以使用字段的别名，having 可以。因为执行WHERE代码时，可能尚未确定列值。
  where 不可以使用合计函数。一般需用合计函数才会用 having
  SQL标准要求HAVING必须引用GROUP BY子句中的列或用于合计函数中的列。

f. order by 子句，排序子句
  order by 排序字段/别名 排序方式 [,排序字段/别名 排序方式]...
  升序：ASC，降序：DESC
  支持多个字段的排序。

g. limit 子句，限制结果数量子句
  仅对处理好的结果进行数量限制。将处理好的结果的看作是一个集合，按照记录出现的顺序，索引从0开始。
  limit 起始位置, 获取条数
  省略第一个参数，表示从索引0开始。limit 获取条数

h. distinct, all 选项
  distinct 去除重复记录
  默认为 all, 全部记录


/* UNION */ ------------------
  将多个select查询的结果组合成一个结果集合。
  SELECT ... UNION [ALL|DISTINCT] SELECT ...
  默认 DISTINCT 方式，即所有返回的行都是唯一的
  建议，对每个SELECT查询加上小括号包裹。
  ORDER BY 排序时，需加上 LIMIT 进行结合。
  需要各select查询的字段数量一样。
  每个select查询的字段列表(数量、类型)应一致，因为结果中的字段名以第一条select语句为准。


/* 子查询 */ ------------------
  - 子查询需用括号包裹。
-- from型
  from后要求是一个表，必须给子查询结果取个别名。
  - 简化每个查询内的条件。
  - from型需将结果生成一个临时表格，可用以原表的锁定的释放。
  - 子查询返回一个表，表型子查询。
  select * from (select * from tb where id&gt;0) as subfrom where id&gt;1;
-- where型
  - 子查询返回一个值，标量子查询。
  - 不需要给子查询取别名。
  - where子查询内的表，不能直接用以更新。
  select * from tb where money = (select max(money) from tb);
  -- 列子查询
    如果子查询结果返回的是一列。
    使用 in 或 not in 完成查询
    exists 和 not exists 条件
      如果子查询返回数据，则返回1或0。常用于判断条件。
      select column1 from t1 where exists (select * from t2);
  -- 行子查询
    查询条件是一个行。
    select * from t1 where (id, gender) in (select id, gender from t2);
    行构造符：(col1, col2, ...) 或 ROW(col1, col2, ...)
    行构造符通常用于与对能返回两个或两个以上列的子查询进行比较。

  -- 特殊运算符
  != all()  相当于 not in
  = some()  相当于 in。any 是 some 的别名
  != some()  不等同于 not in，不等于其中某一个。
  all, some 可以配合其他运算符一起使用。


/* 连接查询(join) */ ------------------
  将多个表的字段进行连接，可以指定连接条件。
-- 内连接(inner join)
  - 默认就是内连接，可省略inner。
  - 只有数据存在时才能发送连接。即连接结果不能出现空行。
  on 表示连接条件。其条件表达式与where类似。也可以省略条件（表示条件永远为真）
  也可用where表示连接条件。
  还有 using, 但需字段名相同。 using(字段名)

  -- 交叉连接 cross join
    即，没有条件的内连接。
    select * from tb1 cross join tb2;
-- 外连接(outer join)
  - 如果数据不存在，也会出现在连接结果中。
  -- 左外连接 left join
    如果数据不存在，左表记录会出现，而右表为null填充
  -- 右外连接 right join
    如果数据不存在，右表记录会出现，而左表为null填充
-- 自然连接(natural join)
  自动判断连接条件完成连接。
  相当于省略了using，会自动查找相同字段名。
  natural join
  natural left join
  natural right join

select info.id, info.name, info.stu_num, extra_info.hobby, extra_info.sex from info, extra_info where info.stu_num = extra_info.stu_id;

/* 导入导出 */ ------------------
select * into outfile 文件地址 [控制格式] from 表名;  -- 导出表数据
load data [local] infile 文件地址 [replace|ignore] into table 表名 [控制格式];  -- 导入数据
  生成的数据默认的分隔符是制表符
  local未指定，则数据文件必须在服务器上
  replace 和 ignore 关键词控制对现有的唯一键记录的重复的处理
-- 控制格式
fields  控制字段格式
默认：fields terminated by '\t' enclosed by '' escaped by '\\'
  terminated by 'string'  -- 终止
  enclosed by 'char'    -- 包裹
  escaped by 'char'    -- 转义
  -- 示例：
    SELECT a,b,a+b INTO OUTFILE '/tmp/result.text'
    FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'
    LINES TERMINATED BY '\n'
    FROM test_table;
lines  控制行格式
默认：lines terminated by '\n'
  terminated by 'string'  -- 终止
  
/* insert */ ------------------
select语句获得的数据可以用insert插入。

可以省略对列的指定，要求 values () 括号内，提供给了按照列顺序出现的所有字段的值。
  或者使用set语法。
  insert into tbl_name set field=value,...；

可以一次性使用多个值，采用(), (), ();的形式。
  insert into tbl_name values (), (), ();

可以在列值指定时，使用表达式。
  insert into tbl_name values (field_value, 10+10, now());
可以使用一个特殊值 default，表示该列使用默认值。
  insert into tbl_name values (field_value, default);

可以通过一个查询的结果，作为需要插入的值。
  insert into tbl_name select ...;

可以指定在插入的值出现主键（或唯一索引）冲突时，更新其他非主键列的信息。
  insert into tbl_name values/set/select on duplicate key update 字段=值, …;

/* delete */ ------------------
DELETE FROM tbl_name [WHERE where_definition] [ORDER BY ...] [LIMIT row_count]

</pre>
</div>
<p><strong>按照条件删除</strong></p>
<p>指定删除的最多记录数。Limit</p>
<p>可以通过排序条件删除。order by + limit</p>
<p>支持多表删除，使用类似连接语法。<br />
delete from 需要删除数据多表1，表2 using 表连接操作 条件。</p>
<p>/* truncate */ ------------------<br />
TRUNCATE [TABLE] tbl_name<br />
清空数据<br />
删除重建表</p>
<p><strong>区别：<br />
</strong>1，truncate 是删除表再创建，delete 是逐条删除<br />
2，truncate 重置auto_increment的值。而delete不会<br />
3，truncate 不知道删除了几条，而delete知道。<br />
4，当被用于带分区的表时，truncate 会保留分区</p>
<p><strong>备份与还原</strong></p>
<p>备份，将数据的结构与表内数据保存起来。<br />
利用 mysqldump 指令完成。</p>
<p>-- 导出<br />
1. 导出一张表<br />
　　mysqldump -u用户名 -p密码 库名 表名 &gt; 文件名(D:/a.sql)<br />
2. 导出多张表<br />
　　mysqldump -u用户名 -p密码 库名 表1 表2 表3 &gt; 文件名(D:/a.sql)<br />
3. 导出所有表<br />
　　mysqldump -u用户名 -p密码 库名 &gt; 文件名(D:/a.sql)<br />
4. 导出一个库 <br />
　　mysqldump -u用户名 -p密码 -B 库名 &gt; 文件名(D:/a.sql)</p>
<p>可以-w携带备份条件</p>
<p><strong>-- 导入<br />
</strong>1. 在登录mysql的情况下：<br />
　　source&nbsp; 备份文件<br />
2. 在不登录的情况下<br />
　　mysql -u用户名 -p密码 库名 &lt; 备份文件</p>
<p><strong>视图</strong></p>
<p>什么是视图：<br />
&nbsp;&nbsp;&nbsp; 视图是一个虚拟表，其内容由查询定义。同真实的表一样，视图包含一系列带有名称的列和行数据。但是，视图并不在数据库中以存储的数据值集形式存在。行和列数据来自由定义视图的查询所引用的表，并且在引用视图时动态生成。<br />
&nbsp;&nbsp;&nbsp; 视图具有表结构文件，但不存在数据文件。<br />
&nbsp;&nbsp;&nbsp; 对其中所引用的基础表来说，视图的作用类似于筛选。定义视图的筛选可以来自当前或其它数据库的一个或多个表，或者其它视图。通过视图进行查询没有任何限制，通过它们进行数据修改时的限制也很少。<br />
&nbsp;&nbsp;&nbsp; 视图是存储在数据库中的查询的sql语句，它主要出于两种原因：安全原因，视图可以隐藏一些数据，如：社会保险基金表，可以用视图只显示姓名，地址，而不显示社会保险号和工资数等，另一原因是可使复杂的查询易于理解和使用。</p>
<p>-- 创建视图<br />
CREATE [OR REPLACE] [ALGORITHM = {UNDEFINED | MERGE | TEMPTABLE}] VIEW view_name [(column_list)] AS select_statement<br />
&nbsp;&nbsp;&nbsp; - 视图名必须唯一，同时不能与表重名。<br />
&nbsp;&nbsp;&nbsp; - 视图可以使用select语句查询到的列名，也可以自己指定相应的列名。<br />
&nbsp;&nbsp;&nbsp; - 可以指定视图执行的算法，通过ALGORITHM指定。<br />
&nbsp;&nbsp;&nbsp; - column_list如果存在，则数目必须等于SELECT语句检索的列数</p>
<p>-- 查看结构<br />
&nbsp;&nbsp;&nbsp; SHOW CREATE VIEW view_name</p>
<p>-- 删除视图<br />
&nbsp;&nbsp;&nbsp; - 删除视图后，数据依然存在。<br />
&nbsp;&nbsp;&nbsp; - 可同时删除多个视图。<br />
&nbsp;&nbsp;&nbsp; DROP VIEW [IF EXISTS] view_name ...</p>
<p>-- 修改视图结构<br />
&nbsp;&nbsp;&nbsp; - 一般不修改视图，因为不是所有的更新视图都会映射到表上。<br />
&nbsp;&nbsp;&nbsp; ALTER VIEW view_name [(column_list)] AS select_statement</p>
<p>-- 视图作用<br />
&nbsp;&nbsp;&nbsp; 1. 简化业务逻辑<br />
&nbsp;&nbsp;&nbsp; 2. 对客户端隐藏真实的表结构</p>
<p>-- 视图算法(ALGORITHM)<br />
&nbsp;&nbsp;&nbsp; MERGE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 合并<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 将视图的查询语句，与外部查询需要先合并再执行！<br />
&nbsp;&nbsp;&nbsp; TEMPTABLE&nbsp;&nbsp;&nbsp; 临时表<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 将视图执行完毕后，形成临时表，再做外层查询！<br />
&nbsp;&nbsp;&nbsp; UNDEFINED&nbsp;&nbsp;&nbsp; 未定义(默认)，指的是MySQL自主去选择相应的算法。</p>
<p><strong>事务(transaction) </strong></p>
<p>事务是指逻辑上的一组操作，组成这组操作的各个单元，要不全成功要不全失败。 <br />
&nbsp;&nbsp;&nbsp; - 支持连续SQL的集体成功或集体撤销。<br />
&nbsp;&nbsp;&nbsp; - 事务是数据库在数据晚自习方面的一个功能。<br />
&nbsp;&nbsp;&nbsp; - 需要利用 InnoDB 或 BDB 存储引擎，对自动提交的特性支持完成。<br />
&nbsp;&nbsp;&nbsp; - InnoDB被称为事务安全型引擎。</p>
<p>-- 事务开启<br />
&nbsp;&nbsp;&nbsp; START TRANSACTION; 或者 BEGIN;<br />
&nbsp;&nbsp;&nbsp; 开启事务后，所有被执行的SQL语句均被认作当前事务内的SQL语句。<br />
-- 事务提交<br />
&nbsp;&nbsp;&nbsp; COMMIT;<br />
-- 事务回滚<br />
&nbsp;&nbsp;&nbsp; ROLLBACK;<br />
&nbsp;&nbsp;&nbsp; 如果部分操作发生问题，映射到事务开启前。</p>
<p>-- 事务的特性<br />
&nbsp;&nbsp;&nbsp; 1. 原子性（Atomicity）<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 事务是一个不可分割的工作单位，事务中的操作要么都发生，要么都不发生。<br />
&nbsp;&nbsp;&nbsp; 2. 一致性（Consistency）<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 事务前后数据的完整性必须保持一致。<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - 事务开始和结束时，外部数据一致<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - 在整个事务过程中，操作是连续的<br />
&nbsp;&nbsp;&nbsp; 3. 隔离性（Isolation）<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 多个用户并发访问数据库时，一个用户的事务不能被其它用户的事物所干扰，多个并发事务之间的数据要相互隔离。<br />
&nbsp;&nbsp;&nbsp; 4. 持久性（Durability）<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 一个事务一旦被提交，它对数据库中的数据改变就是永久性的。</p>
<p>-- 事务的实现<br />
&nbsp;&nbsp;&nbsp; 1. 要求是事务支持的表类型<br />
&nbsp;&nbsp;&nbsp; 2. 执行一组相关的操作前开启事务<br />
&nbsp;&nbsp;&nbsp; 3. 整组操作完成后，都成功，则提交；如果存在失败，选择回滚，则会回到事务开始的备份点。</p>
<p>-- 事务的原理<br />
&nbsp;&nbsp;&nbsp; 利用InnoDB的自动提交(autocommit)特性完成。<br />
&nbsp;&nbsp;&nbsp; 普通的MySQL执行语句后，当前的数据提交操作均可被其他客户端可见。<br />
&nbsp;&nbsp;&nbsp; 而事务是暂时关闭“自动提交”机制，需要commit提交持久化数据操作。</p>
<p><strong>注意：<br />
</strong>&nbsp;&nbsp;&nbsp; 1. 数据定义语言（DDL）语句不能被回滚，比如创建或取消数据库的语句，和创建、取消或更改表或存储的子程序的语句。<br />
&nbsp;&nbsp;&nbsp; 2. 事务不能被嵌套</p>
<p>-- 保存点<br />
&nbsp;&nbsp;&nbsp; SAVEPOINT 保存点名称 -- 设置一个事务保存点<br />
&nbsp;&nbsp;&nbsp; ROLLBACK TO SAVEPOINT 保存点名称 -- 回滚到保存点<br />
&nbsp;&nbsp;&nbsp; RELEASE SAVEPOINT 保存点名称 -- 删除保存点</p>
<p>-- InnoDB自动提交特性设置<br />
&nbsp;&nbsp;&nbsp; SET autocommit = 0|1;&nbsp;&nbsp;&nbsp; 0表示关闭自动提交，1表示开启自动提交。<br />
&nbsp;&nbsp;&nbsp; - 如果关闭了，那普通操作的结果对其他客户端也不可见，需要commit提交后才能持久化数据操作。<br />
&nbsp;&nbsp;&nbsp; - 也可以关闭自动提交来开启事务。但与START TRANSACTION不同的是，<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SET autocommit是永久改变服务器的设置，直到下次再次修改该设置。(针对当前连接)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 而START TRANSACTION记录开启前的状态，而一旦事务提交或回滚后就需要再次开启事务。(针对当前事务)</p>
<p><br />
/* 锁表 */<br />
表锁定只用于防止其它客户端进行不正当地读取和写入<br />
MyISAM 支持表锁，InnoDB 支持行锁<br />
-- 锁定<br />
&nbsp;&nbsp;&nbsp; LOCK TABLES tbl_name [AS alias]<br />
-- 解锁<br />
&nbsp;&nbsp;&nbsp; UNLOCK TABLES</p>
<p><strong>触发器</strong></p>
<p>&nbsp;&nbsp;&nbsp; 触发程序是与表有关的命名数据库对象，当该表出现特定事件时，将激活该对象<br />
&nbsp;&nbsp;&nbsp; 监听：记录的增加、修改、删除。</p>
<p>-- 创建触发器<br />
CREATE TRIGGER trigger_name trigger_time trigger_event ON tbl_name FOR EACH ROW trigger_stmt<br />
&nbsp;&nbsp;&nbsp; 参数：<br />
&nbsp;&nbsp;&nbsp; trigger_time是触发程序的动作时间。它可以是 before 或 after，以指明触发程序是在激活它的语句之前或之后触发。<br />
&nbsp;&nbsp;&nbsp; trigger_event指明了激活触发程序的语句的类型<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; INSERT：将新行插入表时激活触发程序<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; UPDATE：更改某一行时激活触发程序<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DELETE：从表中删除某一行时激活触发程序<br />
&nbsp;&nbsp;&nbsp; tbl_name：监听的表，必须是永久性的表，不能将触发程序与TEMPORARY表或视图关联起来。<br />
&nbsp;&nbsp;&nbsp; trigger_stmt：当触发程序激活时执行的语句。执行多个语句，可使用BEGIN...END复合语句结构</p>
<p>-- 删除<br />
DROP TRIGGER [schema_name.]trigger_name</p>
<p>可以使用old和new代替旧的和新的数据<br />
&nbsp;&nbsp;&nbsp; 更新操作，更新前是old，更新后是new.<br />
&nbsp;&nbsp;&nbsp; 删除操作，只有old.<br />
&nbsp;&nbsp;&nbsp; 增加操作，只有new.</p>
<p><strong>注意：<br />
</strong>&nbsp;&nbsp;&nbsp; 1. 对于具有相同触发程序动作时间和事件的给定表，不能有两个触发程序。</p>
<p><br />
-- 字符连接函数<br />
concat(str1[, str2,...])</p>
<p>-- 分支语句<br />
if 条件 then<br />
&nbsp;&nbsp;&nbsp; 执行语句<br />
elseif 条件 then<br />
&nbsp;&nbsp;&nbsp; 执行语句<br />
else<br />
&nbsp;&nbsp;&nbsp; 执行语句<br />
end if;</p>
<p>-- 修改最外层语句结束符<br />
delimiter 自定义结束符号<br />
&nbsp;&nbsp;&nbsp; SQL语句<br />
自定义结束符号</p>
<p>delimiter ;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- 修改回原来的分号</p>
<p>-- 语句块包裹<br />
begin<br />
&nbsp;&nbsp;&nbsp; 语句块<br />
end</p>
<p>-- 特殊的执行<br />
1. 只要添加记录，就会触发程序。<br />
2. Insert into on duplicate key update 语法会触发：<br />
&nbsp;&nbsp;&nbsp; 如果没有重复记录，会触发 before insert, after insert;<br />
&nbsp;&nbsp;&nbsp; 如果有重复记录并更新，会触发 before insert, before update, after update;<br />
&nbsp;&nbsp;&nbsp; 如果有重复记录但是没有发生更新，则触发 before insert, before update<br />
3. Replace 语法 如果有记录，则执行 before insert, before delete, after delete, after insert</p>
<p><br />
/* SQL编程 */ ------------------</p>
<p>--// 局部变量 ----------<br />
-- 变量声明<br />
&nbsp;&nbsp;&nbsp; declare var_name[,...] type [default value] <br />
&nbsp;&nbsp;&nbsp; 这个语句被用来声明局部变量。要给变量提供一个默认值，请包含一个default子句。值可以被指定为一个表达式，不需要为一个常数。如果没有default子句，初始值为null。</p>
<p>-- 赋值<br />
&nbsp;&nbsp;&nbsp; 使用 set 和 select into 语句为变量赋值。</p>
<p>&nbsp;&nbsp;&nbsp; - 注意：在函数内是可以使用全局变量（用户自定义的变量）</p>
<p><br />
--// 全局变量 ----------<br />
-- 定义、赋值<br />
set 语句可以定义并为变量赋值。<br />
set @var = value;<br />
也可以使用select into语句为变量初始化并赋值。这样要求select语句只能返回一行，但是可以是多个字段，就意味着同时为多个变量进行赋值，变量的数量需要与查询的列数一致。<br />
还可以把赋值语句看作一个表达式，通过select执行完成。此时为了避免=被当作关系运算符看待，使用:=代替。（set语句可以使用= 和 :=）。<br />
select @var:=20;<br />
select @v1:=id, @v2=name from t1 limit 1;<br />
select * from tbl_name where @var:=30;</p>
<p>select into 可以将表中查询获得的数据赋给变量。<br />
&nbsp;&nbsp;&nbsp; -| select max(height) into @max_height from tb;</p>
<p>-- 自定义变量名<br />
为了避免select语句中，用户自定义的变量与系统标识符（通常是字段名）冲突，用户自定义变量在变量名前使用@作为开始符号。<br />
@var=10;</p>
<p>&nbsp;&nbsp;&nbsp; - 变量被定义后，在整个会话周期都有效（登录到退出）</p>
<p><br />
--// 控制结构 ----------<br />
-- if语句<br />
if search_condition then <br />
&nbsp;&nbsp;&nbsp; statement_list&nbsp;&nbsp;&nbsp; <br />
[elseif search_condition then<br />
&nbsp;&nbsp;&nbsp; statement_list]<br />
...<br />
[else<br />
&nbsp;&nbsp;&nbsp; statement_list]<br />
end if;</p>
<p>-- case语句<br />
CASE value WHEN [compare-value] THEN result<br />
[WHEN [compare-value] THEN result ...]<br />
[ELSE result]<br />
END</p>
<p><br />
-- while循环<br />
[begin_label:] while search_condition do<br />
&nbsp;&nbsp;&nbsp; statement_list<br />
end while [end_label];</p>
<p>- 如果需要在循环内提前终止 while循环，则需要使用标签；标签需要成对出现。</p>
<p>&nbsp;&nbsp;&nbsp; -- 退出循环<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 退出整个循环 leave<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 退出当前循环 iterate<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 通过退出的标签决定退出哪个循环</p>
<p><br />
--// 内置函数 ----------<br />
-- 数值函数<br />
abs(x)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- 绝对值 abs(-10.9) = 10<br />
format(x, d)&nbsp;&nbsp;&nbsp; -- 格式化千分位数值 format(1234567.456, 2) = 1,234,567.46<br />
ceil(x)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- 向上取整 ceil(10.1) = 11<br />
floor(x)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- 向下取整 floor (10.1) = 10<br />
round(x)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- 四舍五入去整<br />
mod(m, n)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- m%n m mod n 求余 10%3=1<br />
pi()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- 获得圆周率<br />
pow(m, n)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- m^n<br />
sqrt(x)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- 算术平方根<br />
rand()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- 随机数<br />
truncate(x, d)&nbsp;&nbsp;&nbsp; -- 截取d位小数</p>
<p>-- 时间日期函数<br />
now(), current_timestamp();&nbsp;&nbsp;&nbsp;&nbsp; -- 当前日期时间<br />
current_date();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- 当前日期<br />
current_time();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- 当前时间<br />
date('yyyy-mm-dd hh:ii:ss');&nbsp;&nbsp;&nbsp; -- 获取日期部分<br />
time('yyyy-mm-dd hh:ii:ss');&nbsp;&nbsp;&nbsp; -- 获取时间部分<br />
date_format('yyyy-mm-dd hh:ii:ss', '%d %y %a %d %m %b %j');&nbsp;&nbsp;&nbsp; -- 格式化时间<br />
unix_timestamp();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- 获得unix时间戳<br />
from_unixtime();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- 从时间戳获得时间</p>
<p>-- 字符串函数<br />
length(string)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- string长度，字节<br />
char_length(string)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- string的字符个数<br />
substring(str, position [,length])&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- 从str的position开始,取length个字符<br />
replace(str ,search_str ,replace_str)&nbsp;&nbsp;&nbsp; -- 在str中用replace_str替换search_str<br />
instr(string ,substring)&nbsp;&nbsp;&nbsp; -- 返回substring首次在string中出现的位置<br />
concat(string [,...])&nbsp;&nbsp;&nbsp; -- 连接字串<br />
charset(str)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- 返回字串字符集<br />
lcase(string)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- 转换成小写<br />
left(string, length)&nbsp;&nbsp;&nbsp; -- 从string2中的左边起取length个字符<br />
load_file(file_name)&nbsp;&nbsp;&nbsp; -- 从文件读取内容<br />
locate(substring, string [,start_position])&nbsp;&nbsp;&nbsp; -- 同instr,但可指定开始位置<br />
lpad(string, length, pad)&nbsp;&nbsp;&nbsp; -- 重复用pad加在string开头,直到字串长度为length<br />
ltrim(string)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- 去除前端空格<br />
repeat(string, count)&nbsp;&nbsp;&nbsp; -- 重复count次<br />
rpad(string, length, pad)&nbsp;&nbsp;&nbsp; --在str后用pad补充,直到长度为length<br />
rtrim(string)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- 去除后端空格<br />
strcmp(string1 ,string2)&nbsp;&nbsp;&nbsp; -- 逐字符比较两字串大小</p>
<p>-- 流程函数<br />
case when [condition] then result [when [condition] then result ...] [else result] end&nbsp;&nbsp; 多分支<br />
if(expr1,expr2,expr3)&nbsp; 双分支。</p>
<p>-- 聚合函数<br />
count()<br />
sum();<br />
max();<br />
min();<br />
avg();<br />
group_concat()</p>
<p>-- 其他常用函数<br />
md5();<br />
default();</p>
<p><br />
--// 存储函数，自定义函数 ----------<br />
-- 新建<br />
&nbsp;&nbsp;&nbsp; CREATE FUNCTION function_name (参数列表) RETURNS 返回值类型<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 函数体</p>
<p>&nbsp;&nbsp;&nbsp; - 函数名，应该合法的标识符，并且不应该与已有的关键字冲突。<br />
&nbsp;&nbsp;&nbsp; - 一个函数应该属于某个数据库，可以使用db_name.funciton_name的形式执行当前函数所属数据库，否则为当前数据库。<br />
&nbsp;&nbsp;&nbsp; - 参数部分，由"参数名"和"参数类型"组成。多个参数用逗号隔开。<br />
&nbsp;&nbsp;&nbsp; - 函数体由多条可用的mysql语句，流程控制，变量声明等语句构成。<br />
&nbsp;&nbsp;&nbsp; - 多条语句应该使用 begin...end 语句块包含。<br />
&nbsp;&nbsp;&nbsp; - 一定要有 return 返回值语句。</p>
<p>-- 删除<br />
&nbsp;&nbsp;&nbsp; DROP FUNCTION [IF EXISTS] function_name;</p>
<p>-- 查看<br />
&nbsp;&nbsp;&nbsp; SHOW FUNCTION STATUS LIKE 'partten'<br />
&nbsp;&nbsp;&nbsp; SHOW CREATE FUNCTION function_name;</p>
<p>-- 修改<br />
&nbsp;&nbsp;&nbsp; ALTER FUNCTION function_name 函数选项</p>
<p><br />
--// 存储过程，自定义功能 ----------<br />
-- 定义<br />
存储存储过程 是一段代码（过程），存储在数据库中的sql组成。<br />
一个存储过程通常用于完成一段业务逻辑，例如报名，交班费，订单入库等。<br />
而一个函数通常专注与某个功能，视为其他程序服务的，需要在其他语句中调用函数才可以，而存储过程不能被其他调用，是自己执行 通过call执行。</p>
<p>-- 创建<br />
CREATE PROCEDURE sp_name (参数列表)<br />
&nbsp;&nbsp;&nbsp; 过程体</p>
<p>参数列表：不同于函数的参数列表，需要指明参数类型<br />
IN，表示输入型<br />
OUT，表示输出型<br />
INOUT，表示混合型</p>
<p>注意，没有返回值。</p>
<p><br />
/* 存储过程 */ ------------------<br />
存储过程是一段可执行性代码的集合。相比函数，更偏向于业务逻辑。<br />
调用：CALL 过程名<br />
-- 注意<br />
- 没有返回值。<br />
- 只能单独调用，不可夹杂在其他语句中</p>
<p>-- 参数<br />
IN|OUT|INOUT 参数名 数据类型<br />
IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 输入：在调用过程中，将数据输入到过程体内部的参数<br />
OUT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 输出：在调用过程中，将过程体处理完的结果返回到客户端<br />
INOUT&nbsp;&nbsp;&nbsp; 输入输出：既可输入，也可输出</p>
<p>-- 语法<br />
CREATE PROCEDURE 过程名 (参数列表)<br />
BEGIN<br />
&nbsp;&nbsp;&nbsp; 过程体<br />
END</p>
<p><strong>用户和权限管理 </strong></p>
<p>用户信息表：mysql.user<br />
-- 刷新权限<br />
FLUSH PRIVILEGES<br />
-- 增加用户<br />
CREATE USER 用户名 IDENTIFIED BY [PASSWORD] 密码(字符串)<br />
&nbsp;&nbsp;&nbsp; - 必须拥有mysql数据库的全局CREATE USER权限，或拥有INSERT权限。<br />
&nbsp;&nbsp;&nbsp; - 只能创建用户，不能赋予权限。<br />
&nbsp;&nbsp;&nbsp; - 用户名，注意引号：如 'user_name'@'192.168.1.1'<br />
&nbsp;&nbsp;&nbsp; - 密码也需引号，纯数字密码也要加引号<br />
&nbsp;&nbsp;&nbsp; - 要在纯文本中指定密码，需忽略PASSWORD关键词。要把密码指定为由PASSWORD()函数返回的混编值，需包含关键字PASSWORD<br />
-- 重命名用户<br />
RENAME USER old_user TO new_user<br />
-- 设置密码<br />
SET PASSWORD = PASSWORD('密码')&nbsp;&nbsp;&nbsp; -- 为当前用户设置密码<br />
SET PASSWORD FOR 用户名 = PASSWORD('密码')&nbsp;&nbsp;&nbsp; -- 为指定用户设置密码<br />
-- 删除用户<br />
DROP USER 用户名<br />
-- 分配权限/添加用户<br />
GRANT 权限列表 ON 表名 TO 用户名 [IDENTIFIED BY [PASSWORD] 'password']<br />
&nbsp;&nbsp;&nbsp; - all privileges 表示所有权限<br />
&nbsp;&nbsp;&nbsp; - *.* 表示所有库的所有表<br />
&nbsp;&nbsp;&nbsp; - 库名.表名 表示某库下面的某表<br />
-- 查看权限<br />
SHOW GRANTS FOR 用户名<br />
&nbsp;&nbsp;&nbsp; -- 查看当前用户权限<br />
&nbsp;&nbsp;&nbsp; SHOW GRANTS; 或 SHOW GRANTS FOR CURRENT_USER; 或 SHOW GRANTS FOR CURRENT_USER();<br />
-- 撤消权限<br />
REVOKE 权限列表 ON 表名 FROM 用户名<br />
REVOKE ALL PRIVILEGES, GRANT OPTION FROM 用户名&nbsp;&nbsp;&nbsp; -- 撤销所有权限<br />
-- 权限层级<br />
-- 要使用GRANT或REVOKE，您必须拥有GRANT OPTION权限，并且您必须用于您正在授予或撤销的权限。<br />
全局层级：全局权限适用于一个给定服务器中的所有数据库，mysql.user<br />
&nbsp;&nbsp;&nbsp; GRANT ALL ON *.*和 REVOKE ALL ON *.*只授予和撤销全局权限。<br />
数据库层级：数据库权限适用于一个给定数据库中的所有目标，mysql.db, mysql.host<br />
&nbsp;&nbsp;&nbsp; GRANT ALL ON db_name.*和REVOKE ALL ON db_name.*只授予和撤销数据库权限。<br />
表层级：表权限适用于一个给定表中的所有列，mysql.talbes_priv<br />
&nbsp;&nbsp;&nbsp; GRANT ALL ON db_name.tbl_name和REVOKE ALL ON db_name.tbl_name只授予和撤销表权限。<br />
列层级：列权限适用于一个给定表中的单一列，mysql.columns_priv<br />
&nbsp;&nbsp;&nbsp; 当使用REVOKE时，您必须指定与被授权列相同的列。<br />
-- 权限列表<br />
ALL [PRIVILEGES]&nbsp;&nbsp;&nbsp; -- 设置除GRANT OPTION之外的所有简单权限<br />
ALTER&nbsp;&nbsp;&nbsp; -- 允许使用ALTER TABLE<br />
ALTER ROUTINE&nbsp;&nbsp;&nbsp; -- 更改或取消已存储的子程序<br />
CREATE&nbsp;&nbsp;&nbsp; -- 允许使用CREATE TABLE<br />
CREATE ROUTINE&nbsp;&nbsp;&nbsp; -- 创建已存储的子程序<br />
CREATE TEMPORARY TABLES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- 允许使用CREATE TEMPORARY TABLE<br />
CREATE USER&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- 允许使用CREATE USER, DROP USER, RENAME USER和REVOKE ALL PRIVILEGES。<br />
CREATE VIEW&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- 允许使用CREATE VIEW<br />
DELETE&nbsp;&nbsp;&nbsp; -- 允许使用DELETE<br />
DROP&nbsp;&nbsp;&nbsp; -- 允许使用DROP TABLE<br />
EXECUTE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- 允许用户运行已存储的子程序<br />
FILE&nbsp;&nbsp;&nbsp; -- 允许使用SELECT...INTO OUTFILE和LOAD DATA INFILE<br />
INDEX&nbsp;&nbsp;&nbsp;&nbsp; -- 允许使用CREATE INDEX和DROP INDEX<br />
INSERT&nbsp;&nbsp;&nbsp; -- 允许使用INSERT<br />
LOCK TABLES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- 允许对您拥有SELECT权限的表使用LOCK TABLES<br />
PROCESS&nbsp;&nbsp;&nbsp;&nbsp; -- 允许使用SHOW FULL PROCESSLIST<br />
REFERENCES&nbsp;&nbsp;&nbsp; -- 未被实施<br />
RELOAD&nbsp;&nbsp;&nbsp; -- 允许使用FLUSH<br />
REPLICATION CLIENT&nbsp;&nbsp;&nbsp; -- 允许用户询问从属服务器或主服务器的地址<br />
REPLICATION SLAVE&nbsp;&nbsp;&nbsp; -- 用于复制型从属服务器（从主服务器中读取二进制日志事件）<br />
SELECT&nbsp;&nbsp;&nbsp; -- 允许使用SELECT<br />
SHOW DATABASES&nbsp;&nbsp;&nbsp; -- 显示所有数据库<br />
SHOW VIEW&nbsp;&nbsp;&nbsp; -- 允许使用SHOW CREATE VIEW<br />
SHUTDOWN&nbsp;&nbsp;&nbsp; -- 允许使用mysqladmin shutdown<br />
SUPER&nbsp;&nbsp;&nbsp; -- 允许使用CHANGE MASTER, KILL, PURGE MASTER LOGS和SET GLOBAL语句，mysqladmin debug命令；允许您连接（一次），即使已达到max_connections。<br />
UPDATE&nbsp;&nbsp;&nbsp; -- 允许使用UPDATE<br />
USAGE&nbsp;&nbsp;&nbsp; -- “无权限”的同义词<br />
GRANT OPTION&nbsp;&nbsp;&nbsp; -- 允许授予权限</p>
<p><strong>表维护</strong></p>
<p>-- 分析和存储表的关键字分布<br />
ANALYZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE 表名 ...<br />
-- 检查一个或多个表是否有错误<br />
CHECK TABLE tbl_name [, tbl_name] ... [option] ...<br />
option = {QUICK | FAST | MEDIUM | EXTENDED | CHANGED}<br />
-- 整理数据文件的碎片<br />
OPTIMIZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE tbl_name [, tbl_name] ...</p>
<p><strong>杂项</strong></p>
<p>1. 可用反引号（`）为标识符（库名、表名、字段名、索引、别名）包裹，以避免与关键字重名！中文也可以作为标识符！<br />
2. 每个库目录存在一个保存当前数据库的选项文件db.opt。<br />
3. 注释：<br />
&nbsp;&nbsp;&nbsp; 单行注释 # 注释内容<br />
&nbsp;&nbsp;&nbsp; 多行注释 /* 注释内容 */<br />
&nbsp;&nbsp;&nbsp; 单行注释 -- 注释内容&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (标准SQL注释风格，要求双破折号后加一空格符（空格、TAB、换行等）)<br />
4. 模式通配符：<br />
&nbsp;&nbsp;&nbsp; _&nbsp;&nbsp;&nbsp; 任意单个字符<br />
&nbsp;&nbsp;&nbsp; %&nbsp;&nbsp;&nbsp; 任意多个字符，甚至包括零字符<br />
&nbsp;&nbsp;&nbsp; 单引号需要进行转义 \'<br />
5. CMD命令行内的语句结束符可以为 ";", "\G", "\g"，仅影响显示结果。其他地方还是用分号结束。delimiter 可修改当前对话的语句结束符。<br />
6. SQL对大小写不敏感<br />
7. 清除已有语句：\c</p>
<p>希望本文所述对大家的MySQL数据库程序设计有所帮助。</p>
<hr></span>                                     
		    	</div>
		    	<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>代码注释</div>
			    <div class="panel-content">
			    <span></span>                                     
		    	</div>

			</div>

			<!-- END ROW -->
			<div class="newsPage">
				<div class="newsPageTurn">
				    <span><a>上一篇</a><a href='/php/biji/83006.html'>jquery中表单 多选框的一种巧妙写法</a><a>下一篇</a><a href='/php/biji/83008.html'>WordPress中编写自定义存储字段的相关PHP函数解析</a></span>
				</div>
			</div>
		</div>


<div id="author-box">
    <h3>作者：喵哥笔记</h3>
        <div class="author-info">
            <div class="author-avatar">
                <img src="/skin1/picture/01.jpg" alt="IDC笔记" class="avatar" width="64" height="64">
            </div>
        <div class="author-description">
            <p>学的不仅是技术，更是梦想！</p>
            <ul class="author-social follows nb">
            	<li>
                    <a target="_blank" href="/" title="IDC笔记">IDC笔记</a>
                </li>
            </ul>
        </div>
        <div class="clear"></div>
    </div>
</div>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
<!-- container-fluid -->
	</div>
<!-- content -->
	<footer class="footer">
	© 2020 IDC笔记 <i class="mdi mdi-heart text-danger"></i>. | 备案号：<a href="https://beian.miit.gov.cn/">辽ICP备18000516号</a>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?674585fbbd2294d3faf910f668ea91b4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

	</footer>
</div>

</div>
<!-- END wrapper -->
<!-- jQuery  -->
<script src="/skin1/js/jquery.min.js"></script>
<script src="/skin1/js/bootstrap.bundle.min.js"></script>
<script src="/skin1/js/metismenu.min.js"></script>
<script src="/skin1/js/jquery.slimscroll.js"></script>
<script src="/skin1/js/waves.min.js"></script>
<!--Morris Chart-->
<script src="/skin1/js/morris.min.js"></script>
<script src="/skin1/js/raphael.min.js"></script>
<script src="/skin1/js/dashboard.init.js"></script>
<script src="/skin1/js/app.js"></script>
<script src="/foot.js"></script>
</body>
</html>