<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title>高质量PHP代码的50个实用技巧必备（下）_PHP教程_IDC笔记</title>
    <meta name="keywords" content="PHP,PHP笔记,PHP教程" />
    <meta name="description" content="接着上篇《高质量PHP代码的50个实用技巧必备（上）》继续研究。<br />
26. 避免直接写SQL, 抽象之 <br />
<br />
不厌其烦的写了太多如下的语句: <br />
<br />
<br />
<br />
<br />
&lt;span style=&quot;color:#333333;font-family:&#039;&#039;" />
    <meta content="Responsive admin theme build on top of Bootstrap 4" name="description" />
    <meta content="idcnote.com" name="author" />
    <link rel="shortcut icon" href="/skin1/images/favicon.ico">
    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="/skin1/css/morris.css">
    <link href="/skin1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/metismenu.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/icons.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/style.css" rel="stylesheet" type="text/css">
<link href="/SyntaxHighlighter/shCoreDefault.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/SyntaxHighlighter/shCore.js"></script>
<script type="text/javascript">
 SyntaxHighlighter.all();
</script>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
</head>
<body>
<!-- Begin page -->
		<div id="wrapper">
			<!-- Top Bar Start -->
			<div class="topbar">
				<!-- LOGO -->
				<div class="topbar-left">
					<a href="/" class="logo">
						<span class="logo-light">
                            <i class="mdi mdi-camera-control"></i>IDC笔记
                        </span>
						<span class="logo-sm">
                            <i class="mdi mdi-camera-control"></i>
                        </span>
					</a>
				</div>
				<nav class="navbar-custom">
					<ul class="navbar-right list-inline float-right mb-0">
						<!--<li class="dropdown notification-list list-inline-item d-none d-md-inline-block">
							<a class="nav-link waves-effect" href="#" id="btn-fullscreen">
								<i class="mdi mdi-arrow-expand-all noti-icon"></i>
							</a>
						</li>
						<li class="dropdown notification-list list-inline-item">
							<div class="dropdown notification-list nav-pro-img">
								<a class="dropdown-toggle nav-link arrow-none nav-user" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
									<img src="/skin1/picture/user-4.jpg" alt="user" class="rounded-circle">
								</a>
								<div class="dropdown-menu dropdown-menu-right profile-dropdown ">
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-account-circle"></i> Profile</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-wallet"></i> Wallet</a>
									<a class="dropdown-item d-block" href="#">
										<span class="badge badge-success float-right">11</span>
										<i class="mdi mdi-settings"></i> Settings</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-lock-open-outline"></i> Lock screen</a>
									<div class="dropdown-divider"></div>
									<a class="dropdown-item text-danger" href="#">
										<i class="mdi mdi-power text-danger"></i> Logout</a>
								</div>
							</div>
						</li>
						-->
					</ul>
					<ul class="list-inline menu-left mb-0">
						<li class="float-left">
							<button class="button-menu-mobile open-left waves-effect">
                            <i class="mdi mdi-menu"></i>
                        </button>
						</li>
						<li class="d-none d-md-inline-block">
							<form role="search" class="app-search">
								<div class="form-group mb-0">
									<input type="text" class="form-control" placeholder="Search..">
									<button type="submit"><i class="fa fa-search"></i></button>
								</div>
							</form>
						</li>
					</ul>
				</nav>
			</div>
<!-- ========== Left Sidebar Start ========== -->
<div class="left side-menu">
    <div class="slimscroll-menu" id="remove-scroll">
    <!--- Sidemenu -->
    <div id="sidebar-menu">
    <!-- Left Menu Start -->
    <ul class="metismenu" id="side-menu">
			<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP简介			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jianjie/1.html">PHP简介</a></li><li><a href="/php/jianjie/2.html">PHP用途</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP基本语法			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yufa/3.html">分离HTML</a></li><li><a href="/php/yufa/4.html">指令分隔符</a></li><li><a href="/php/yufa/5.html">PHP注释</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类型			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpleixing/6.html">PHP类型简介</a></li><li><a href="/php/phpleixing/7.html">PHP类型之布尔类型</a></li><li><a href="/php/phpleixing/8.html">PHP类型之整型</a></li><li><a href="/php/phpleixing/9.html">PHP类型之浮点型</a></li><li><a href="/php/phpleixing/10.html">PHP类型之字符串</a></li><li><a href="/php/phpleixing/11.html">PHP类型之数组</a></li><li><a href="/php/phpleixing/12.html">PHP类型之对象</a></li><li><a href="/php/phpleixing/13.html">PHP类型之资源类型</a></li><li><a href="/php/phpleixing/14.html">PHP类型之NULL</a></li><li><a href="/php/phpleixing/15.html">PHP类型之伪类型</a></li><li><a href="/php/phpleixing/16.html">PHP类型之类型判别</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP变量			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbianliang/17.html">PHP变量之基础</a></li><li><a href="/php/phpbianliang/18.html">PHP变量之预定义变量</a></li><li><a href="/php/phpbianliang/19.html">PHP变量之变量范围</a></li><li><a href="/php/phpbianliang/20.html">PHP变量之可变变量</a></li><li><a href="/php/phpbianliang/21.html">PHP变量之外部变量</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP运算符			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yunsuanfu/22.html">PHP运算符优先级</a></li><li><a href="/php/yunsuanfu/23.html">算术运算符</a></li><li><a href="/php/yunsuanfu/24.html">赋值运算符</a></li><li><a href="/php/yunsuanfu/25.html">位运算符</a></li><li><a href="/php/yunsuanfu/26.html">比较运算符</a></li><li><a href="/php/yunsuanfu/27.html">错误控制运算符</a></li><li><a href="/php/yunsuanfu/28.html">执行运算符</a></li><li><a href="/php/yunsuanfu/29.html">递增/递减运算符</a></li><li><a href="/php/yunsuanfu/30.html">逻辑运算符</a></li><li><a href="/php/yunsuanfu/31.html">字符串运算符</a></li><li><a href="/php/yunsuanfu/32.html">数组运算符</a></li><li><a href="/php/yunsuanfu/33.html">类型运算符</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP控制结构			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jiegou/34.html">PHP控制结构之if</a></li><li><a href="/php/jiegou/35.html">PHP控制结构之else</a></li><li><a href="/php/jiegou/36.html">PHP控制结构之elseif/else if</a></li><li><a href="/php/jiegou/37.html">PHP控制结构之替代语法</a></li><li><a href="/php/jiegou/38.html">PHP控制结构之while</a></li><li><a href="/php/jiegou/39.html">PHP控制结构之do-while</a></li><li><a href="/php/jiegou/40.html">PHP控制结构之for</a></li><li><a href="/php/jiegou/41.html">PHP控制结构之foreach</a></li><li><a href="/php/jiegou/42.html">PHP控制结构之break</a></li><li><a href="/php/jiegou/43.html">PHP控制结构之continue</a></li><li><a href="/php/jiegou/44.html">PHP控制结构之switch</a></li><li><a href="/php/jiegou/45.html">PHP控制结构之declare</a></li><li><a href="/php/jiegou/46.html">PHP控制结构之return</a></li><li><a href="/php/jiegou/47.html">PHP控制结构之require</a></li><li><a href="/php/jiegou/48.html">PHP控制结构之include</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/hanshu/52.html">用户自定义函数</a></li><li><a href="/php/hanshu/53.html">函数的参数</a></li><li><a href="/php/hanshu/54.html">返回值</a></li><li><a href="/php/hanshu/55.html">可变函数</a></li><li><a href="/php/hanshu/56.html">内部（内置）函数</a></li><li><a href="/php/hanshu/57.html">匿名函数</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类与对象			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpduixiang/58.html">类与对象前言</a></li><li><a href="/php/phpduixiang/59.html">基本概念</a></li><li><a href="/php/phpduixiang/60.html">属性</a></li><li><a href="/php/phpduixiang/61.html">类常量</a></li><li><a href="/php/phpduixiang/62.html">自动加载对象</a></li><li><a href="/php/phpduixiang/63.html">构造函数和析构函数</a></li><li><a href="/php/phpduixiang/64.html">访问控制</a></li><li><a href="/php/phpduixiang/65.html">对象继承</a></li><li><a href="/php/phpduixiang/66.html">Static关键字</a></li><li><a href="/php/phpduixiang/67.html">抽象类</a></li><li><a href="/php/phpduixiang/68.html">接口</a></li><li><a href="/php/phpduixiang/69.html">Traits</a></li><li><a href="/php/phpduixiang/70.html">重载</a></li><li><a href="/php/phpduixiang/71.html">对象迭代</a></li><li><a href="/php/phpduixiang/72.html">设计模式</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP异常处理			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yichang/81.html">异常处理</a></li><li><a href="/php/yichang/82.html">扩展PHP内置的异常处理类</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数库按分类			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpku/83.html">数组</a></li><li><a href="/php/phpku/84.html">Classes/Objects</a></li><li><a href="/php/phpku/85.html">Date/Time</a></li><li><a href="/php/phpku/86.html">Directories</a></li><li><a href="/php/phpku/87.html">错误处理</a></li><li><a href="/php/phpku/88.html">Program execution</a></li><li><a href="/php/phpku/89.html">Filesystem</a></li><li><a href="/php/phpku/90.html">Filter</a></li><li><a href="/php/phpku/91.html">Function Handling</a></li><li><a href="/php/phpku/92.html">PHP 选项/信息</a></li><li><a href="/php/phpku/93.html">Mail</a></li><li><a href="/php/phpku/94.html">Math</a></li><li><a href="/php/phpku/95.html">Misc.</a></li><li><a href="/php/phpku/96.html">Network</a></li><li><a href="/php/phpku/97.html">输出控制</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> php基础			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbiji/108377.html"></a></li><li><a href="/php/phpbiji/108376.html"></a></li><li><a href="/php/phpbiji/108380.html"></a></li><li><a href="/php/phpbiji/108379.html"></a></li><li><a href="/php/phpbiji/108378.html"></a></li><li><a href="/php/phpbiji/108381.html"></a></li><li><a href="/php/phpbiji/108382.html"></a></li><li><a href="/php/phpbiji/108384.html"></a></li><li><a href="/php/phpbiji/108383.html"></a></li><li><a href="/php/phpbiji/108385.html"></a></li><li><a href="/php/phpbiji/108386.html"></a></li><li><a href="/php/phpbiji/108388.html"></a></li><li><a href="/php/phpbiji/108387.html"></a></li><li><a href="/php/phpbiji/108389.html"></a></li><li><a href="/php/phpbiji/108391.html"></a></li>		</ul>
	</li>
		<li>
	    <a href="/php/biji/" class="waves-effect">
		    <i class="icon-share"></i>
		    <span>PHP笔记
		       	<span class="float-right menu-arrow">
		       	<i class="mdi mdi-chevron-right"></i>
		       	</span>
		    </span>
	    </a>
	</li>
	</ul>
</div>
<!-- Sidebar -->
<div class="clearfix"></div>
</div>
<!-- Sidebar -left -->
</div>
<!-- Left Sidebar End -->
<!-- Start right Content here -->
<div class="content-page">
	<div class="content">
		<div class="container-fluid">
			<div class="page-title-box">
				<div class="row align-items-center">
					<div class="col-sm-6">
						<h1 class="page-title">高质量PHP代码的50个实用技巧必备（下）</h1>
					</div>
				</div>
				<!-- end row -->
			</div>
			<!-- end page-title -->
			<!-- START ROW -->
			<div class="panel panel-forbid">
				<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>内容摘要</div>
			    <div class="panel-content">
			    <span>接着上篇《高质量PHP代码的50个实用技巧必备（上）》继续研究。<br />
26. 避免直接写SQL, 抽象之 <br />
<br />
不厌其烦的写了太多如下的语句: <br />
<br />
<br />
<br />
<br />
&lt;span style=&quot;color:#333333;font-family:&#039;&#039;</span>                                     
		    	</div>
			    <div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>文章正文</div>
			    <div class="panel-content">
			    <span><p>接着上篇《高质量PHP代码的50个实用技巧必备（上）》继续研究。</p>
<p><strong>26. 避免直接写SQL, 抽象之 <br />
</strong>不厌其烦的写了太多如下的语句: <br />
</p>
<div class="phpstudycode">
<pre class="brush:php;">
&lt;span style="color:#333333;font-family:''Helvetica, Arial, sans-serif'';"&gt;$query = "INSERT INTO users(name , email , address , phone) VALUES('$name' , '$email' , '$address' , '$phone')";
 $db-&gt;query($query); //call to mysqli_query()&lt;/span&gt;
</pre>
</div>
<p>这不是个建壮的方案. 它有些缺点: <br />
</p>
<ul>
<li><span style="color: #333333"><strong>&gt;&gt;每次都手动转义值 <br />
</strong></span></li>
<li><span style="color: #333333"><strong>&gt;&gt;验证查询是否正确 <br />
</strong></span></li>
<li><span style="color: #333333"><strong>&gt;&gt;查询的错误会花很长时间识别(除非每次都用if-else检查) <br />
</strong></span></li>
<li><span style="color: #333333"><strong>&gt;&gt;很难维护复杂的查询 <br />
</strong></span></li>
</ul>
<p>因此使用函数封装: <br />
</p>
<div class="phpstudycode">
<pre class="brush:php;">
&lt;span style="color:#333333;font-family:''Helvetica, Arial, sans-serif'';"&gt;function insert_record($table_name , $data)
 {
 foreach($data as $key =&gt; $value)
 {
 //mysqli_real_escape_string
 $data[$key] = $db-&gt;mres($value);
 }
 $fields = implode(',' , array_keys($data));
 $values = "'" . implode("','" , array_values($data)) . "'";
 //Final query
 $query = "INSERT INTO {$table}($fields) VALUES($values)";
 return $db-&gt;query($query);
}
 $data = array('name' =&gt; $name , 'email' =&gt; $email , 'address' =&gt; $address , 'phone' =&gt; $phone);
 insert_record('users' , $data);&lt;/span&gt;
</pre>
</div>
<p>看到了吗&#63; 这样会更易读和扩展. record_data 函数小心的处理了转义。最大的优点是数据被预处理为一个数组, 任何语法错误都会被捕获。该函数应该定义在某个database类中, 你可以像 $db-&gt;insert_record这样调用。查看本文, 看看怎样让你处理数据库更容易。类似的也可以编写update,select,delete方法. 试试吧.</p>
<p><strong>27. 將数据库生成的内容缓存到静态文件中 <br />
</strong>如果所有的内容都是从数据库获取的, 它们应该被缓存. 一旦生成了, 就將它们保存在临时文件中. 下次请求该页面时, 可直接从缓存中取, 不用再查数据库. <br />
好处: <br />
<span style="color: #800000"><strong>&gt;&gt;节约php处理页面的时间, 执行更快 <br />
&gt;&gt;更少的数据库查询意味着更少的mysql连接开销 </strong></span></p>
<p><strong>28. 在数据库中保存session <br />
</strong>基于文件的session策略会有很多限制. 使用基于文件的session不能扩展到集群中, 因为session保存在单个服务器中. 但数据库可被多个服务器访问, 这样就可以解决问题. <br />
在数据库中保存session数据, 还有更多好处: <br />
<span style="color: #800000"><strong>&gt;&gt;处理username重复登录问题. 同个username不能在两个地方同时登录. <br />
&gt;&gt;能更准备的查询在线用户状态. </strong></span></p>
<p><strong>29. 避免使用全局变量 <br />
</strong></p>
<ul>
<li><span style="color: #333333"><strong>&gt;&gt;使用 defines/constants <br />
</strong></span></li>
<li><span style="color: #333333"><strong>&gt;&gt;使用函数获取值 <br />
</strong></span></li>
<li><span style="color: #333333"><strong>&gt;&gt;使用类并通过$this访问 </strong></span></li>
</ul>
<p><strong>30. 在head中使用base标签 <br />
</strong>没听说过&#63; 请看下面:</p>
<div class="phpstudycode">
<pre class="brush:xhtml;">
&lt;head&gt;
 &lt;base href="http://www.domain.com/store/"&gt;
 &lt;/head&gt;
 &lt;body&gt;
 &lt;img src="happy.jpg" /&gt;
 &lt;/body&gt;
 &lt;/html&gt;
</pre>
</div>
<p>base 标签非常有用. 假设你的应用分成几个子目录, 它们都要包括相同的导航菜单.</p>
<ul>
<li><span style="color: #333333"><strong>www.domain.com/store/home.php <br />
</strong></span></li>
<li><span style="color: #333333"><strong>www.domain.com/store/products/ipad.php </strong></span><strong><br />
</strong></li>
</ul>
<p>在首页中, 可以写:</p>
<div class="phpstudycode">
<pre class="brush:xhtml;">
&lt;a href="home.php"&gt;Home&lt;/a&gt;
&lt;a href="products/ipad.php"&gt;Ipad&lt;/a&gt;

</pre>
</div>
<p>但在你的ipad.php不得不写成:</p>
<div class="phpstudycode">
<pre class="brush:php;">
&lt;span style="color:#333333;font-family:''Helvetica, Arial, sans-serif'';"&gt;&lt;a href="../home.php"&gt;Home&lt;/a&gt;
 &lt;a href="ipad.php"&gt;Ipad&lt;/a&gt;&lt;/span&gt;</pre>
</div>
<p>因为目录不一样. 有这么多不同版本的导航菜单要维护, 很糟糕啊。因此, 请使用base标签. <br />
</p>
<div class="phpstudycode">
<pre class="brush:php;">
&lt;span style="color:#333333;font-family:''Helvetica, Arial, sans-serif'';"&gt;&lt;head&gt;
 &lt;base href="http://www.domain.com/store/"&gt;
 &lt;/head&gt;
 &lt;body&gt;
 &lt;a href="home.php"&gt;Home&lt;/a&gt;
 &lt;a href="products/ipad.php"&gt;Ipad&lt;/a&gt;
 &lt;/body&gt;
 &lt;/html&gt;&lt;/span&gt;
</pre>
</div>
<p>现在, 这段代码放在应用的各个目录文件中行为都一致.</p>
<p><strong>31. 永远不要將 error_reporting 设为 0 <br />
</strong>关闭不相的错误报告. E_FATAL 错误是很重要的.</p>
<div class="phpstudycode">
<pre class="brush:php;">
&lt;span style="color:#333333;font-family:'Helvetica, Arial, sans-serif';"&gt;ini_set('display_errors', 1);
 error_reporting(~E_WARNING & ~E_NOTICE & ~E_STRICT);&lt;/span&gt;

</pre>
</div>
<p><strong>32. 注意平台体系结构 <br />
</strong>integer在32位和64位体系结构中长度是不同的. 因此某些函数如 strtotime 的行为会不同. <br />
在64位的机器中, 你会看到如下的输出.</p>
<div class="phpstudycode">
<pre class="brush:php;">
&lt;span style="color:#333333;font-family:''Helvetica, Arial, sans-serif'';"&gt;$ php -a 
 Interactive shell 
 php &gt; echo strtotime("0000-00-00 00:00:00"); 
 -62170005200 
 php &gt; echo strtotime('1000-01-30'); 
 -30607739600 
 php &gt; echo strtotime('2100-01-30'); 
 4104930600&lt;/span&gt; 

</pre>
</div>
<p>但在32位机器中, 它们將是bool(false). 查看这里, 了解更多.</p>
<p><strong>33. 不要过分依赖 set_time_limit <br />
</strong>如果你想限制最小时间, 可以使用下面的脚本:</p>
<div class="phpstudycode">
<pre class="brush:php;">
&lt;span style="color:#333333;font-family:''Helvetica, Arial, sans-serif'';"&gt;set_time_limit(30);
 //Rest of the code&lt;/span&gt;</pre>
</div>
<p>高枕无忧吗&#63; 注意任何外部的执行, 如系统调用,socket操作, 数据库操作等, 就不在set_time_limits的控制之下. <br />
因此, 就算数据库花费了很多时间查询, 脚本也不会停止执行. 视情况而定.</p>
<p><strong>34. 使用扩展库 <br />
</strong>一些例子: <br />
</p>
<ul>
<li><span style="color: #333333"><strong>&gt;&gt;mPDF — 能通过html生成pdf文档 <br />
</strong></span></li>
<li><span style="color: #333333"><strong>&gt;&gt;PHPExcel — 读写excel <br />
</strong></span></li>
<li><span style="color: #333333"><strong>&gt;&gt;PhpMailer — 轻松处理发送包含附近的邮件 <br />
</strong></span></li>
<li><span style="color: #333333"><strong>&gt;&gt;pChart — 使用php生成报表 </strong></span></li>
</ul>
<p>使用开源库完成复杂任务, 如生成pdf, ms-excel文件, 报表等.</p>
<p><strong>35. 使用MVC框架 <br />
</strong>是时候使用像 codeigniter 这样的MVC框架了. MVC框架并不强迫你写面向对象的代码. 它们仅將php代码与html分离. <br />
</p>
<ul>
<li><span style="color: #333333"><strong>&gt;&gt;明确区分php和html代码. 在团队协作中有好处, 设计师和程序员可以同时工作. <br />
</strong></span></li>
<li><span style="color: #333333"><strong>&gt;&gt;面向对象设计的函数能让你更容易维护 <br />
</strong></span></li>
<li><span style="color: #333333"><strong>&gt;&gt;内建函数完成了很多工作, 你不需要重复编写 <br />
</strong></span></li>
<li><span style="color: #333333"><strong>&gt;&gt;开发大的应用是必须的 <br />
</strong></span></li>
<li><span style="color: #333333"><strong>&gt;&gt;很多建议, 技巧和hack已被框架实现了 </strong></span></li>
</ul>
<p><strong>36. 时常看看 phpbench <br />
</strong>phpbench 提供了些php基本操作的基准测试结果, 它展示了一些徽小的语法变化是怎样导致巨大差异的. <br />
查看php站点的评论, 有问题到IRC提问, 时常阅读开源代码, 使用Linux开发.</p>
<p><strong>37. 如何正确的创建一个网站的Index页面</strong> <br />
创建每一个网站时，建立网站的index页面是首要做的事情之一。如果你是一个PHP新手，在编写index页面时典型的做法是只对index页面所需的内容进行编程，其它链接创建另一个页面。不过，如果想学习一种更高效的方式来实现PHP编程，可以采用“index.php&#63;page=home”模式，许多网站都在采用这种模式。</p>
<p><strong>38. 使用Request Global Array抓取数据 </strong><br />
实际上我们没有任何理由使用$_GET和$_POST数组来抓取数值。$_REQUEST这个全局数组能够让你获取一个get或form请求。因此，多数情况下解析数据的更高效代码大体如下：</p>
<div class="phpstudycode">
<pre class="brush:php;">
$action = isset($_REQUEST['action']) &#63; $_REQUEST['action'] : 0;

</pre>
</div>
<p><strong>39. 利用var_dump进行PHP代码调试 <br />
</strong>如果你在寻找php调试技术，我必须说var_dump应该是你要找的目标。在显示php信息方面这个命令可以满足你的所有需要。而调试代码的多数情况与得到PHP中的数值有关。</p>
<p><strong>40. PHP处理代码逻辑，Smarty处理展现层 <br />
</strong>Smarty是一个使用PHP写出来的模板PHP模板引擎，是目前业界最著名的PHP模板引擎之一。它分离了逻辑代码和外在的内容，提供了一种易于管理和使用的方法，用来将原本与HTML代码混杂在一起PHP代码逻辑分离。简单的讲，目的就是要使PHP程序员同前端人员分离，使程序员改变程序的逻辑内容不会影响到前端人员的页面设计，前端人员重新修改页面不会影响到程序的程序逻辑，这在多人合作的项目中显的尤为重要。</p>
<p><strong>41. 的确需要使用全局数值时，创建一个Config文件 <br />
</strong>动辄创建全局数值是一种糟糕的做法，不过有时候实际情况的确又需要这么做。对于数据库表或数据库连接信息使用全局数值是一个不错的想法，但不要在你的PHP代码中频繁使用全局数值。另外，更好的一种做法是把你的全局变量存放在一个config.php文件中。</p>
<p><strong>42. 如果未定义，禁止访问！ <br />
</strong>如果你正确的创建了页面，那么任何其他人没有理由访问index.php或home.php之外的index.php页面。一旦index.php被访问后，你可以通过获得变量的方式来打开需要的页面。你的index页面应该包含类似的以下代码：</p>
<div class="phpstudycode">
<pre class="brush:php;">
define('yourPage',1);

</pre>
</div>
<p>然后，其它页面应该包含：</p>
<div class="phpstudycode">
<pre class="brush:php;">
if (!defined('yourPage')) die('Access Denied');</pre>
</div>
<p>这么做的目的是防止直接访问你的其它php页面。这样，任何试图不通过index.php访问其它网页的人，将得到“访问被拒绝”的消息。</p>
<p><strong>43. 创建一个数据库类 <br />
</strong>如果你正在进行数据库编程（在PHP中非常常见的任务），一个不错的想法是创建一个数据库类来处理任何数据库管理功能。示例代码如下： <br />
</p>
<div class="phpstudycode">
<pre class="brush:php;">
public function dbExec($query)  
    
 {  
    
   $result = $this-&gt;db-&gt;exec($query);  
    
   if (PEAR::isError($result))  
    
     errorRedirect($result-&gt;getMessage(), true);  
    
   else 
    
     return $result;  
    
 }
</pre>
</div>
<p>这个函数仅接收一个查询语句并对其执行。它还处理可能出现的任何错误。你还可以在这儿包含审核代码，不过我更喜欢使用一个类似的审核函数： <br />
</p>
<div class="phpstudycode">
<pre class="brush:php;">
// checks if arguments given are integer values not less than 0 - has multiple arguments  
    
 function sanitizeInput()  
    
 {  
    
   $numargs = func_num_args();  
    
   $arg_list = func_get_args();  
    
   for ($i = 0; $i &lt; $numargs; $i++) {  
    
     if (!is_numeric($arg_list[$i]) || $arg_list[$i] &lt; 0)  
    
       errorRedirect("Unexpected variable value", true);  
    
   }  
    
 }
</pre>
</div>
<p><strong>44. 一个php文件处理输入，一个class.php文件处理具体功能 <br />
</strong>不让代码变得混乱的一个重要方法是：获取用户输入后，将其重定向到其它函数来进行处理。原理非常简单，php文件获得我们需要的任何输入，然后将其执行重定向到类文件中的一个函数。举例来讲，假设有一个类似“index.php&#63;page=profile&action=display”的URL。由profile.php来检索该网址并得到操作是“display”。然后使用一个简单的switch函数，我们来执行真正的显示函数： <br />
</p>
<div class="phpstudycode">
<pre class="brush:php;">
require_once PROJECTROOT.'libs/messages.class.php';  
    
$message = new Message();  
    
switch ($action) 
    
{ 
    
  case 'display': 
    
    $message-&gt;display(); 
    
    break;  
    
...



</pre>
</div>
<p>如上所示，我使用了一个消息类，然后开始进行switch检查。$message只是被类中的调用函数使用的一个对象。</p>
<p><strong>45. 了解你的SQL语句，并总是对其审查（Sanitize） <br />
</strong>正如我以前所提到的，任何php网站中最重要的部分有99%的可能是数据库。因此，你需要非常熟悉如何正确的使用sql。学会关联表和更多高级技术。下面我将展示一个使用MySQL的函数示例，并使用本文第7条函数进行审查。 <br />
</p>
<div class="phpstudycode">
<pre class="brush:php;">
private function getSentMessages($id)  
    
 {  
    
$this-&gt;util-&gt;sanitizeInput($id);  
    
  $pm_table = $GLOBALS['config']['privateMsg'];  
    
 $users = $GLOBALS['config']['users'];  
    
   $sql = "SELECT PM.*, USR.username as name_sender FROM $pm_table PM, $users USR  
    
     WHERE id_sender = '$id' AND sender_purge = FALSE AND USR.id = PM.id_receiver AND is_read = TRUE  
    
     ORDER BY date_sent DESC";  
    
 $result = $this-&gt;dbQueryAll($sql);  
    
  return $result;  
    
 }
</pre>
</div>
<p>首先，我们对用户输入进行检查（通过一个GET变量传递消息id），然后我们执行我们的SQL命令。注意这儿SQL的用法。你需要了解如何使用别名和关联表。</p>
<p><strong>46. 当你只需要一个对象时，使用单例模式 <br />
</strong>在PHP中相当常见的一种情形时，我们只需要创建一个对象一次，然后在我们的整个程序中使用它。一个很好的例子就是smarty变量，一旦被初始化后就可以在任何地方使用。这种情形的一个很好实现方案就是单例模式。示例代码如下： <br />
</p>
<div class="phpstudycode">
<pre class="brush:php;">
function smartyObject()  
    
 {  
    
   if ($GLOBALS['config']['SmartyObj'] == 0)  
    
   {  
    
     $smarty = new SmartyGame();  
    
     $GLOBALS['config']['SmartyObj'] = $smarty;  
    
   }  
    
   else 
    
     $smarty = $GLOBALS['config']['SmartyObj'];  
    
   return $smarty;  
    
 }
</pre>
</div>
<p>注意，我们拥有一个全局smarty变量（该示例中它在config.php中被初始化），如果它的值为0，我们将创建一个新smarty对象。否则，它意味着该对象已经被创建，我们只需要返回它。</p>
<p><strong>47. 关于PHP重定向 <br />
</strong><span style="color: #800000"><strong>方法一：</strong></span>header("Location:index.php"); <br />
<span style="color: #800000"><strong>方法二：</strong></span>echo"&lt;script&gt;window.location=\"$PHP_SELF\";&lt;/script&gt;"; <br />
<span style="color: #800000"><strong>方法三：</strong></span>echo"&lt;METAHTTP-EQUIV=\"Refresh\"CONTENT=\"0;URL=index.php\"&gt;";</p>
<p><strong>48. 获取访问者浏览器 <br />
</strong></p>
<div class="phpstudycode">
<pre class="brush:php;">
functionbrowse_infor()
{
$browser="";$browserver="";
$Browsers=array("Lynx","MOSAIC","AOL","Opera","JAVA","MacWeb","WebExplorer","OmniWeb");
$Agent=$GLOBALS["HTTP_USER_AGENT"];
for($i=0;$i&lt;=7;$i++)
{
if(strpos($Agent,$Browsers[$i]))
{
$browser=$Browsers[$i];
$browserver="";
}
}
if(ereg("Mozilla",$Agent)&&!ereg("MSIE",$Agent))
{
$temp=explode("(",$Agent);$Part=$temp[0];
$temp=explode("/",$Part);$browserver=$temp[1];
$temp=explode("",$browserver);$browserver=$temp[0];
$browserver=preg_replace("/([\d\.]+)/","\1",$browserver);
$browserver="$browserver";
$browser="NetscapeNavigator";
}
if(ereg("Mozilla",$Agent)&&ereg("Opera",$Agent))
{
$temp=explode("(",$Agent);$Part=$temp[1];
$temp=explode(")",$Part);$browserver=$temp[1];
$temp=explode("",$browserver);$browserver=$temp[2];
$browserver=preg_replace("/([\d\.]+)/","\1",$browserver);
$browserver="$browserver";
$browser="Opera";
}
if(ereg("Mozilla",$Agent)&&ereg("MSIE",$Agent))
{
$temp=explode("(",$Agent);$Part=$temp[1];
$temp=explode(";",$Part);$Part=$temp[1];
$temp=explode("",$Part);$browserver=$temp[2];
$browserver=preg_replace("/([\d\.]+)/","\1",$browserver);
$browserver="$browserver";
$browser="InternetExplorer";
}
if($browser!="")
{
$browseinfo="$browser$browserver";
}
else
{
$browseinfo="Unknown";
}
return$browseinfo;
}
//调用方法$browser=browseinfo();直接返回结果
</pre>
</div>
<p><strong>49.获取访问者操作系统 <br />
</strong></p>
<div class="phpstudycode">
<pre class="brush:php;">
functionosinfo(){
$os="";
$Agent=$GLOBALS["HTTP_USER_AGENT"];
if(eregi('win',$Agent)&&strpos($Agent,'95')){
$os="Windows95";
}
elseif(eregi('win9x',$Agent)&&strpos($Agent,'4.90')){
$os="WindowsME";
}
elseif(eregi('win',$Agent)&&ereg('98',$Agent)){
$os="Windows98";
}
elseif(eregi('win',$Agent)&&eregi('nt5\.0',$Agent)){
$os="Windows2000";
}
elseif(eregi('win',$Agent)&&eregi('nt',$Agent)){
$os="WindowsNT";
}
elseif(eregi('win',$Agent)&&eregi('nt5\.1',$Agent)){
$os="WindowsXP";
}
elseif(eregi('win',$Agent)&&ereg('32',$Agent)){
$os="Windows32";
}
elseif(eregi('linux',$Agent)){
$os="Linux";
}
elseif(eregi('unix',$Agent)){
$os="Unix";
}
elseif(eregi('sun',$Agent)&&eregi('os',$Agent)){
$os="SunOS";
}
elseif(eregi('ibm',$Agent)&&eregi('os',$Agent)){
$os="IBMOS/2";
}
elseif(eregi('Mac',$Agent)&&eregi('PC',$Agent)){
$os="Macintosh";
}
elseif(eregi('PowerPC',$Agent)){
$os="PowerPC";
}
elseif(eregi('AIX',$Agent)){
$os="AIX";
}
elseif(eregi('HPUX',$Agent)){
$os="HPUX";
}
elseif(eregi('NetBSD',$Agent)){
$os="NetBSD";
}
elseif(eregi('BSD',$Agent)){
$os="BSD";
}
elseif(ereg('OSF1',$Agent)){
$os="OSF1";
}
elseif(ereg('IRIX',$Agent)){
$os="IRIX";
}
elseif(eregi('FreeBSD',$Agent)){
$os="FreeBSD";
}
if($os=='')$os="Unknown";
return$os;
}
//调用方法$os=os_infor();



</pre>
</div>
<p><strong>50. 文件格式类 <br />
</strong></p>
<div class="phpstudycode">
<pre class="brush:php;">
$mime_types=array(
'gif'=&gt;'image/gif',
'jpg'=&gt;'image/jpeg',
'jpeg'=&gt;'image/jpeg',
'jpe'=&gt;'image/jpeg',
'bmp'=&gt;'image/bmp',
'png'=&gt;'image/png',
'tif'=&gt;'image/tiff',
'tiff'=&gt;'image/tiff',
'pict'=&gt;'image/x-pict',
'pic'=&gt;'image/x-pict',
'pct'=&gt;'image/x-pict',
'tif'=&gt;'image/tiff',
'tiff'=&gt;'image/tiff',
'psd'=&gt;'image/x-photoshop',
  
'swf'=&gt;'application/x-shockwave-flash',
'js'=&gt;'application/x-javascript',
'pdf'=&gt;'application/pdf',
'ps'=&gt;'application/postscript',
'eps'=&gt;'application/postscript',
'ai'=&gt;'application/postscript',
'wmf'=&gt;'application/x-msmetafile',
  
'css'=&gt;'text/css',
'htm'=&gt;'text/html',
'html'=&gt;'text/html',
'txt'=&gt;'text/plain',
'xml'=&gt;'text/xml',
'wml'=&gt;'text/wml',
'wbmp'=&gt;'image/vnd.wap.wbmp',
  
'mid'=&gt;'audio/midi',
'wav'=&gt;'audio/wav',
'mp3'=&gt;'audio/mpeg',
'mp2'=&gt;'audio/mpeg',
  
'avi'=&gt;'video/x-msvideo',
'mpeg'=&gt;'video/mpeg',
'mpg'=&gt;'video/mpeg',
'qt'=&gt;'video/quicktime',
'mov'=&gt;'video/quicktime',
  
'lha'=&gt;'application/x-lha',
'lzh'=&gt;'application/x-lha',
'z'=&gt;'application/x-compress',
'gtar'=&gt;'application/x-gtar',
'gz'=&gt;'application/x-gzip',
'gzip'=&gt;'application/x-gzip',
'tgz'=&gt;'application/x-gzip',
'tar'=&gt;'application/x-tar',
'bz2'=&gt;'application/bzip2',
'zip'=&gt;'application/zip',
'arj'=&gt;'application/x-arj',
'rar'=&gt;'application/x-rar-compressed',
  
'hqx'=&gt;'application/mac-binhex40',
'sit'=&gt;'application/x-stuffit',
'bin'=&gt;'application/x-macbinary',
  
'uu'=&gt;'text/x-uuencode',
'uue'=&gt;'text/x-uuencode',
  
'latex'=&gt;'application/x-latex',
'ltx'=&gt;'application/x-latex',
'tcl'=&gt;'application/x-tcl',
  
'pgp'=&gt;'application/pgp',
'asc'=&gt;'application/pgp',
'exe'=&gt;'application/x-msdownload',
'doc'=&gt;'application/msword',
'rtf'=&gt;'application/rtf',
'xls'=&gt;'application/vnd.ms-excel',
'ppt'=&gt;'application/vnd.ms-powerpoint',
'mdb'=&gt;'application/x-msaccess',
'wri'=&gt;'application/x-mswrite',
);
5、php生成excel文档
&lt;&#63;
header("Content-type:application/vnd.ms-excel");
header("Content-Disposition:filename=test.xls");
echo"test1\t";
echo"test2\t\n";
echo"test1\t";
echo"test2\t\n";
echo"test1\t";
echo"test2\t\n";
echo"test1\t";
echo"test2\t\n";
echo"test1\t";
echo"test2\t\n";
echo"test1\t";
echo"test2\t\n";
&#63;&gt;

//改动相应文件头就可以输出.doc.xls等文件格式了 
</pre>
</div>
<p>以上就是本文的全部内容，大家结合前一篇进行深入学习，一定会有所收获。</p>
<hr></span>                                     
		    	</div>
		    	<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>代码注释</div>
			    <div class="panel-content">
			    <span></span>                                     
		    	</div>

			</div>

			<!-- END ROW -->
			<div class="newsPage">
				<div class="newsPageTurn">
				    <span><a>上一篇</a><a href='/php/biji/91311.html'>Mail.app增强插件：Universal Mailer介绍</a><a>下一篇</a><a href='/php/biji/91313.html'>Android布局之RelativeLayout相对布局</a></span>
				</div>
			</div>
		</div>


<div id="author-box">
    <h3>作者：喵哥笔记</h3>
        <div class="author-info">
            <div class="author-avatar">
                <img src="/skin1/picture/01.jpg" alt="IDC笔记" class="avatar" width="64" height="64">
            </div>
        <div class="author-description">
            <p>学的不仅是技术，更是梦想！</p>
            <ul class="author-social follows nb">
            	<li>
                    <a target="_blank" href="/" title="IDC笔记">IDC笔记</a>
                </li>
            </ul>
        </div>
        <div class="clear"></div>
    </div>
</div>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
<!-- container-fluid -->
	</div>
<!-- content -->
	<footer class="footer">
	© 2020 IDC笔记 <i class="mdi mdi-heart text-danger"></i>. | 备案号：<a href="https://beian.miit.gov.cn/">辽ICP备18000516号</a>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?674585fbbd2294d3faf910f668ea91b4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

	</footer>
</div>

</div>
<!-- END wrapper -->
<!-- jQuery  -->
<script src="/skin1/js/jquery.min.js"></script>
<script src="/skin1/js/bootstrap.bundle.min.js"></script>
<script src="/skin1/js/metismenu.min.js"></script>
<script src="/skin1/js/jquery.slimscroll.js"></script>
<script src="/skin1/js/waves.min.js"></script>
<!--Morris Chart-->
<script src="/skin1/js/morris.min.js"></script>
<script src="/skin1/js/raphael.min.js"></script>
<script src="/skin1/js/dashboard.init.js"></script>
<script src="/skin1/js/app.js"></script>
<script src="/foot.js"></script>
</body>
</html>