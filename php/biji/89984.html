<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title>php实现mysql数据库操作类分享_PHP教程_IDC笔记</title>
    <meta name="keywords" content="PHP,PHP笔记,PHP教程" />
    <meta name="description" content="复制代码 代码如下:&lt;?php/*数据库操作类*/class Mysql{ private $LocalHost = &#039;localhost&#039;; private $LoaclUser = &#039;root&#039;; private $LocalPass = &#039;123456&#039;; private $Local" />
    <meta content="Responsive admin theme build on top of Bootstrap 4" name="description" />
    <meta content="idcnote.com" name="author" />
    <link rel="shortcut icon" href="/skin1/images/favicon.ico">
    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="/skin1/css/morris.css">
    <link href="/skin1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/metismenu.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/icons.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/style.css" rel="stylesheet" type="text/css">
<link href="/SyntaxHighlighter/shCoreDefault.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/SyntaxHighlighter/shCore.js"></script>
<script type="text/javascript">
 SyntaxHighlighter.all();
</script>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
</head>
<body>
<!-- Begin page -->
		<div id="wrapper">
			<!-- Top Bar Start -->
			<div class="topbar">
				<!-- LOGO -->
				<div class="topbar-left">
					<a href="/" class="logo">
						<span class="logo-light">
                            <i class="mdi mdi-camera-control"></i>IDC笔记
                        </span>
						<span class="logo-sm">
                            <i class="mdi mdi-camera-control"></i>
                        </span>
					</a>
				</div>
				<nav class="navbar-custom">
					<ul class="navbar-right list-inline float-right mb-0">
						<!--<li class="dropdown notification-list list-inline-item d-none d-md-inline-block">
							<a class="nav-link waves-effect" href="#" id="btn-fullscreen">
								<i class="mdi mdi-arrow-expand-all noti-icon"></i>
							</a>
						</li>
						<li class="dropdown notification-list list-inline-item">
							<div class="dropdown notification-list nav-pro-img">
								<a class="dropdown-toggle nav-link arrow-none nav-user" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
									<img src="/skin1/picture/user-4.jpg" alt="user" class="rounded-circle">
								</a>
								<div class="dropdown-menu dropdown-menu-right profile-dropdown ">
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-account-circle"></i> Profile</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-wallet"></i> Wallet</a>
									<a class="dropdown-item d-block" href="#">
										<span class="badge badge-success float-right">11</span>
										<i class="mdi mdi-settings"></i> Settings</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-lock-open-outline"></i> Lock screen</a>
									<div class="dropdown-divider"></div>
									<a class="dropdown-item text-danger" href="#">
										<i class="mdi mdi-power text-danger"></i> Logout</a>
								</div>
							</div>
						</li>
						-->
					</ul>
					<ul class="list-inline menu-left mb-0">
						<li class="float-left">
							<button class="button-menu-mobile open-left waves-effect">
                            <i class="mdi mdi-menu"></i>
                        </button>
						</li>
						<li class="d-none d-md-inline-block">
							<form role="search" class="app-search">
								<div class="form-group mb-0">
									<input type="text" class="form-control" placeholder="Search..">
									<button type="submit"><i class="fa fa-search"></i></button>
								</div>
							</form>
						</li>
					</ul>
				</nav>
			</div>
<!-- ========== Left Sidebar Start ========== -->
<div class="left side-menu">
    <div class="slimscroll-menu" id="remove-scroll">
    <!--- Sidemenu -->
    <div id="sidebar-menu">
    <!-- Left Menu Start -->
    <ul class="metismenu" id="side-menu">
			<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP简介			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jianjie/1.html">PHP简介</a></li><li><a href="/php/jianjie/2.html">PHP用途</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP基本语法			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yufa/3.html">分离HTML</a></li><li><a href="/php/yufa/4.html">指令分隔符</a></li><li><a href="/php/yufa/5.html">PHP注释</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类型			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpleixing/6.html">PHP类型简介</a></li><li><a href="/php/phpleixing/7.html">PHP类型之布尔类型</a></li><li><a href="/php/phpleixing/8.html">PHP类型之整型</a></li><li><a href="/php/phpleixing/9.html">PHP类型之浮点型</a></li><li><a href="/php/phpleixing/10.html">PHP类型之字符串</a></li><li><a href="/php/phpleixing/11.html">PHP类型之数组</a></li><li><a href="/php/phpleixing/12.html">PHP类型之对象</a></li><li><a href="/php/phpleixing/13.html">PHP类型之资源类型</a></li><li><a href="/php/phpleixing/14.html">PHP类型之NULL</a></li><li><a href="/php/phpleixing/15.html">PHP类型之伪类型</a></li><li><a href="/php/phpleixing/16.html">PHP类型之类型判别</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP变量			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbianliang/17.html">PHP变量之基础</a></li><li><a href="/php/phpbianliang/18.html">PHP变量之预定义变量</a></li><li><a href="/php/phpbianliang/19.html">PHP变量之变量范围</a></li><li><a href="/php/phpbianliang/20.html">PHP变量之可变变量</a></li><li><a href="/php/phpbianliang/21.html">PHP变量之外部变量</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP运算符			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yunsuanfu/22.html">PHP运算符优先级</a></li><li><a href="/php/yunsuanfu/23.html">算术运算符</a></li><li><a href="/php/yunsuanfu/24.html">赋值运算符</a></li><li><a href="/php/yunsuanfu/25.html">位运算符</a></li><li><a href="/php/yunsuanfu/26.html">比较运算符</a></li><li><a href="/php/yunsuanfu/27.html">错误控制运算符</a></li><li><a href="/php/yunsuanfu/28.html">执行运算符</a></li><li><a href="/php/yunsuanfu/29.html">递增/递减运算符</a></li><li><a href="/php/yunsuanfu/30.html">逻辑运算符</a></li><li><a href="/php/yunsuanfu/31.html">字符串运算符</a></li><li><a href="/php/yunsuanfu/32.html">数组运算符</a></li><li><a href="/php/yunsuanfu/33.html">类型运算符</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP控制结构			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jiegou/34.html">PHP控制结构之if</a></li><li><a href="/php/jiegou/35.html">PHP控制结构之else</a></li><li><a href="/php/jiegou/36.html">PHP控制结构之elseif/else if</a></li><li><a href="/php/jiegou/37.html">PHP控制结构之替代语法</a></li><li><a href="/php/jiegou/38.html">PHP控制结构之while</a></li><li><a href="/php/jiegou/39.html">PHP控制结构之do-while</a></li><li><a href="/php/jiegou/40.html">PHP控制结构之for</a></li><li><a href="/php/jiegou/41.html">PHP控制结构之foreach</a></li><li><a href="/php/jiegou/42.html">PHP控制结构之break</a></li><li><a href="/php/jiegou/43.html">PHP控制结构之continue</a></li><li><a href="/php/jiegou/44.html">PHP控制结构之switch</a></li><li><a href="/php/jiegou/45.html">PHP控制结构之declare</a></li><li><a href="/php/jiegou/46.html">PHP控制结构之return</a></li><li><a href="/php/jiegou/47.html">PHP控制结构之require</a></li><li><a href="/php/jiegou/48.html">PHP控制结构之include</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/hanshu/52.html">用户自定义函数</a></li><li><a href="/php/hanshu/53.html">函数的参数</a></li><li><a href="/php/hanshu/54.html">返回值</a></li><li><a href="/php/hanshu/55.html">可变函数</a></li><li><a href="/php/hanshu/56.html">内部（内置）函数</a></li><li><a href="/php/hanshu/57.html">匿名函数</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类与对象			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpduixiang/58.html">类与对象前言</a></li><li><a href="/php/phpduixiang/59.html">基本概念</a></li><li><a href="/php/phpduixiang/60.html">属性</a></li><li><a href="/php/phpduixiang/61.html">类常量</a></li><li><a href="/php/phpduixiang/62.html">自动加载对象</a></li><li><a href="/php/phpduixiang/63.html">构造函数和析构函数</a></li><li><a href="/php/phpduixiang/64.html">访问控制</a></li><li><a href="/php/phpduixiang/65.html">对象继承</a></li><li><a href="/php/phpduixiang/66.html">Static关键字</a></li><li><a href="/php/phpduixiang/67.html">抽象类</a></li><li><a href="/php/phpduixiang/68.html">接口</a></li><li><a href="/php/phpduixiang/69.html">Traits</a></li><li><a href="/php/phpduixiang/70.html">重载</a></li><li><a href="/php/phpduixiang/71.html">对象迭代</a></li><li><a href="/php/phpduixiang/72.html">设计模式</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP异常处理			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yichang/81.html">异常处理</a></li><li><a href="/php/yichang/82.html">扩展PHP内置的异常处理类</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数库按分类			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpku/83.html">数组</a></li><li><a href="/php/phpku/84.html">Classes/Objects</a></li><li><a href="/php/phpku/85.html">Date/Time</a></li><li><a href="/php/phpku/86.html">Directories</a></li><li><a href="/php/phpku/87.html">错误处理</a></li><li><a href="/php/phpku/88.html">Program execution</a></li><li><a href="/php/phpku/89.html">Filesystem</a></li><li><a href="/php/phpku/90.html">Filter</a></li><li><a href="/php/phpku/91.html">Function Handling</a></li><li><a href="/php/phpku/92.html">PHP 选项/信息</a></li><li><a href="/php/phpku/93.html">Mail</a></li><li><a href="/php/phpku/94.html">Math</a></li><li><a href="/php/phpku/95.html">Misc.</a></li><li><a href="/php/phpku/96.html">Network</a></li><li><a href="/php/phpku/97.html">输出控制</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> php基础			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbiji/108377.html"></a></li><li><a href="/php/phpbiji/108376.html"></a></li><li><a href="/php/phpbiji/108380.html"></a></li><li><a href="/php/phpbiji/108379.html"></a></li><li><a href="/php/phpbiji/108378.html"></a></li><li><a href="/php/phpbiji/108381.html"></a></li><li><a href="/php/phpbiji/108382.html"></a></li><li><a href="/php/phpbiji/108384.html"></a></li><li><a href="/php/phpbiji/108383.html"></a></li><li><a href="/php/phpbiji/108385.html"></a></li><li><a href="/php/phpbiji/108386.html"></a></li><li><a href="/php/phpbiji/108388.html"></a></li><li><a href="/php/phpbiji/108387.html"></a></li><li><a href="/php/phpbiji/108389.html"></a></li><li><a href="/php/phpbiji/108391.html"></a></li>		</ul>
	</li>
		<li>
	    <a href="/php/biji/" class="waves-effect">
		    <i class="icon-share"></i>
		    <span>PHP笔记
		       	<span class="float-right menu-arrow">
		       	<i class="mdi mdi-chevron-right"></i>
		       	</span>
		    </span>
	    </a>
	</li>
	</ul>
</div>
<!-- Sidebar -->
<div class="clearfix"></div>
</div>
<!-- Sidebar -left -->
</div>
<!-- Left Sidebar End -->
<!-- Start right Content here -->
<div class="content-page">
	<div class="content">
		<div class="container-fluid">
			<div class="page-title-box">
				<div class="row align-items-center">
					<div class="col-sm-6">
						<h1 class="page-title">php实现mysql数据库操作类分享</h1>
					</div>
				</div>
				<!-- end row -->
			</div>
			<!-- end page-title -->
			<!-- START ROW -->
			<div class="panel panel-forbid">
				<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>内容摘要</div>
			    <div class="panel-content">
			    <span>复制代码 代码如下:&lt;?php/*数据库操作类*/class Mysql{ private $LocalHost = &#039;localhost&#039;; private $LoaclUser = &#039;root&#039;; private $LocalPass = &#039;123456&#039;; private $Local</span>                                     
		    	</div>
			    <div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>文章正文</div>
			    <div class="panel-content">
			    <span><P><div class="codetitle"><span><a style="CURSOR: pointer" data="83089" class="copybut" id="copybut83089" onclick="doCopy('code83089')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code83089"><BR>&lt;?php<BR>/*<BR>数据库操作类<BR>*/<BR>class Mysql{<BR>&nbsp;private $LocalHost = 'localhost';<BR>&nbsp;private $LoaclUser = 'root';<BR>&nbsp;private $LocalPass = '123456';<BR>&nbsp;private $LocalBase = 'jiangxibaiyi';<BR>&nbsp;private $LocalCode = 'UTF8';<BR>&nbsp;private $PreFix;<BR>&nbsp;private $Conn;<BR>&nbsp;private $Start&nbsp;&nbsp;&nbsp;&nbsp; = 0;<BR>&nbsp;private $Error&nbsp;&nbsp;&nbsp;&nbsp; = false; //数据库连接状态, false表示未连接或连接不正常<BR>&nbsp;public&nbsp; $Err&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = true;&nbsp; //Sql执行结果<br><br>&nbsp;private $Table;<BR>&nbsp;private $Field&nbsp;&nbsp;&nbsp;&nbsp; = '*';<BR>&nbsp;private $Where&nbsp;&nbsp;&nbsp;&nbsp; = '';<BR>&nbsp;private $Order&nbsp;&nbsp;&nbsp;&nbsp; = '';<br><br>&nbsp;private $PageSize&nbsp; = 0; //分页显示-&gt;每页多少条，0为不分页显示<BR>&nbsp;private $PageCount = 1; //分页显示-&gt;总共有多少条<BR>&nbsp;private $PageNum&nbsp;&nbsp; = 1; //分页显示-&gt;总共有多少页<BR>&nbsp;private $PageNo&nbsp;&nbsp;&nbsp; = 1; //分页显示-&gt;当前第几页<BR>&nbsp;private $PageKey&nbsp;&nbsp; = 'page'; //分页url参数键<BR>&nbsp;private $PageStart = 0; //分页显示-&gt;当前从第几条开始返回<br><br>&nbsp;<BR>&nbsp;private $Select;<BR>&nbsp;private $Rest;<br><br>&nbsp;private $Result&nbsp;&nbsp;&nbsp; = false;//结果集<br><br>&nbsp;public $FormArray = array();<br><br>&nbsp;public $Instr_ID&nbsp; = 0;<BR>&nbsp;private $j =&nbsp; 0;<br><br>&nbsp;<BR>&nbsp;public function Parameter($Loca, $Root, $Pass, $Base, $Code, $PreFix = ''){<BR>&nbsp;&nbsp;$this-&gt;LoaclUser = $Root;<BR>&nbsp;&nbsp;$this-&gt;LocalBase = $Base;<BR>&nbsp;&nbsp;$this-&gt;LocalCode = $Code;<BR>&nbsp;&nbsp;$this-&gt;LocalHost = $Loca;<BR>&nbsp;&nbsp;$this-&gt;LocalPass = $Pass;<BR>&nbsp;&nbsp;$this-&gt;PreFix&nbsp;&nbsp;&nbsp; = $PreFix;<BR>&nbsp;&nbsp;return $this;<BR>&nbsp;}<BR>&nbsp;private function Connection( $Sql ){<BR>&nbsp;&nbsp;!function_exists(mysqli_connect) ? die('查询失败，无法加载mysqli扩展') : null;<BR>&nbsp;&nbsp;$this-&gt;Conn = @new mysqli( $this-&gt;LocalHost, $this-&gt;LoaclUser, $this-&gt;LocalPass, $this-&gt;LocalBase);<BR>&nbsp;&nbsp;$this-&gt;Error = mysqli_connect_errno() == 0 ? true : false;<BR>&nbsp;&nbsp;!$this-&gt;Error ? die('数据库连接错误，请检查数据库连接参数') : null;<BR>&nbsp;&nbsp;$this-&gt;Conn-&gt;query('SET NAMES ' . $this-&gt;LocalCode);<BR>&nbsp;&nbsp;$this-&gt;Rest = $this-&gt;Conn-&gt;query($Sql);<BR>&nbsp;&nbsp;$this-&gt;Err&nbsp; = mysqli_error($this-&gt;Conn);<BR>&nbsp;&nbsp;$this-&gt;Instr_ID = mysqli_insert_id($this-&gt;Conn);<BR>&nbsp;&nbsp;$this-&gt;Rest-&gt;free_result;<BR>&nbsp;&nbsp;$this-&gt;Conn-&gt;close;<BR>&nbsp;&nbsp;$this -&gt; FormArray = '';<BR>&nbsp;&nbsp;return $this;<BR>&nbsp;}<br><br>&nbsp;public function null(){<BR>&nbsp;&nbsp;$this-&gt;PageSize&nbsp; = 0;<BR>&nbsp;&nbsp;//$this-&gt;PageCount = 1;<BR>&nbsp;&nbsp;$this-&gt;PageStart = 1;<BR>&nbsp;&nbsp;$this-&gt;Field&nbsp;&nbsp;&nbsp;&nbsp; = ' * ';<BR>&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Select&nbsp;&nbsp;&nbsp; = '';<BR>&nbsp;&nbsp;unset($this-&gt;Table, $this-&gt;Where,$this-&gt;Order, $this-&gt;Result);<BR>&nbsp;}<br><br>&nbsp;public function Table( $TableName ) {//数据表<BR>&nbsp;&nbsp; $this -&gt; null();<BR>&nbsp;&nbsp; $this-&gt;Table = '`' . $this-&gt;PreFix . $TableName . '`';<BR>&nbsp;&nbsp; return $this;<BR>&nbsp;}<br><br>&nbsp;public function Field( $Array = '*' ) {//数据字段<BR>&nbsp;&nbsp; !empty( $this-&gt;Field ) ? $this-&gt;Field = '' : null;<BR>&nbsp;&nbsp; $Array = explode(',', $Array);<BR>&nbsp;&nbsp; foreach ( $Array as $field ) {<BR>&nbsp;&nbsp; $this-&gt;Field .= !$this-&gt;Start ? '`' . $field . '`' :&nbsp; ', `' . $field . '`';<BR>&nbsp;&nbsp; $this-&gt;Start++;<BR>&nbsp;&nbsp; }<BR>&nbsp;&nbsp; $this-&gt;Start = 0;<BR>&nbsp;&nbsp; return $this;<BR>&nbsp;}<br><br>&nbsp;public function Where( $Where ) {//条件<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Where = ' where ' .$Where;<BR>&nbsp;&nbsp;&nbsp; return $this; <BR>&nbsp;}<br><br>&nbsp;public function Order( $Order ) {//排序<BR>&nbsp;&nbsp; $this-&gt;Order = ' order by ' . $Order;<BR>&nbsp;&nbsp; return $this;<BR>&nbsp;}<br><br>&nbsp;public function pk( $key ) {//分页url参数键<BR>&nbsp;&nbsp; $this-&gt;PageKey = $key;<BR>&nbsp;&nbsp; return $this;<BR>&nbsp;}<br><br>&nbsp;public function Page( $PageSize ) {//分页<BR>&nbsp;&nbsp; $this-&gt;PageSize = $PageSize;<BR>&nbsp;&nbsp; $this-&gt;PageNo&nbsp;&nbsp; = $this-&gt;get( $this-&gt;PageKey );<BR>&nbsp;&nbsp; $this-&gt;PageNo&nbsp;&nbsp; = empty( $this-&gt;PageNo ) || !isset( $this-&gt;PageNo ) || !is_numeric( $this-&gt;PageNo ) || $this-&gt;PageNo &lt; 1 ? 1 : $this-&gt;PageNo;<BR>&nbsp;&nbsp; return $this;<BR>&nbsp;}<br><br>&nbsp;public function post( $Key, $Filter = true ){<BR>&nbsp;&nbsp;return $Filter ? strip_tags($_POST[$Key]) : $_POST[$Key];<BR>&nbsp;}<br><br>&nbsp;public function get( $Key, $Filter = true ){<BR>&nbsp;&nbsp;return $Filter ? strip_tags($_GET[$Key]) : $_GET[$Key];<BR>&nbsp;}<br><br>&nbsp;public function Sel(){<BR>&nbsp;&nbsp;$this-&gt;Select = 'Select ' . $this-&gt;Field . ' from ' . $this-&gt;Table . $this-&gt;Where . $this-&gt;Order;<BR>&nbsp;&nbsp;$this-&gt;Connection( $this-&gt;Select );<BR>&nbsp;&nbsp;if ( $this-&gt;Rest-&gt;num_rows ) {<BR>&nbsp;&nbsp; while ( $Rs = $this-&gt;Rest-&gt;fetch_assoc() ) {<BR>&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Result[] = $Rs;<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp; $DataBase = $this-&gt;Result;<BR>&nbsp;&nbsp;&nbsp; return empty($DataBase) ? false : $DataBase;<BR>&nbsp;}<br><br>&nbsp;public function querys( $Sql = '', $Type = 'not', $biao = false ) {<BR>&nbsp;&nbsp;$this-&gt;Select = $Sql;<BR>&nbsp;&nbsp;$this-&gt;Connection( $this-&gt;Select );<BR>&nbsp;&nbsp;if ( $this-&gt;Rest-&gt;num_rows ) {<BR>&nbsp;&nbsp;&nbsp;&nbsp; if ( !$biao ) {<BR>&nbsp;&nbsp; while ( $Rs = $this-&gt;Rest-&gt;fetch_array() ) {<BR>&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Result[] = !preg_match('/^\d+$/i', $Type) ?&nbsp; $Rs : $Rs[ $Type ];<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;} else {<BR>&nbsp;&nbsp; while ( $Rs = $this-&gt;Rest-&gt;fetch_assoc() ) {<BR>&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Result[] = $Rs;<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;}<BR>&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp; $DataBase = $this-&gt;Result;<BR>&nbsp;&nbsp;&nbsp; return empty($DataBase) ? false : $DataBase;<br><br>&nbsp;}<br><br>&nbsp;public function executes( $Sql = '' ){<BR>&nbsp;&nbsp;$this-&gt;Connection( $Sql&nbsp; );<BR>&nbsp;&nbsp;return $this-&gt;Rest;<BR>&nbsp;}<br><br>&nbsp;<BR>&nbsp;public function exists( $T = '', $F = '', $W = ''){<BR>&nbsp;&nbsp;if ( empty( $F ) ) { return 0; }<BR>&nbsp;&nbsp;$cmd = empty( $W ) ? 'Select sum(' . $F . ') as `baiyinum` from `' . $this-&gt;PreFix . $T .'`' : 'Select sum(' . $F . ') as `baiyinum` from `' . $this-&gt;PreFix . $T .'` Where ' . $W;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Connection( $cmd );<BR>&nbsp;&nbsp;unset( $T, $F, $W, $cmd );<BR>&nbsp;&nbsp;$Rel =&nbsp; $this-&gt;Rest-&gt;fetch_array();<BR>&nbsp;&nbsp;return round( $Rel['baiyinum'], 2 );<BR>&nbsp;}<br><br>&nbsp;<BR>&nbsp;public function ExistsTo( $Bili = 10000, $T = '', $F = '', $W = ''){<BR>&nbsp;&nbsp;if ( empty( $F ) ) { return 0; }<BR>&nbsp;&nbsp;$cmd = empty( $W ) ? 'Select sum(' . $F . ') as `baiyinum` from `' . $this-&gt;PreFix . $T .'`' : 'Select sum(' . $F . ') as `baiyinum` from `' . $this-&gt;PreFix . $T .'` Where ' . $W;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Connection( $cmd );<BR>&nbsp;&nbsp;unset( $T, $F, $W, $cmd );<BR>&nbsp;&nbsp;$Rel =&nbsp; $this-&gt;Rest-&gt;fetch_array();<BR>&nbsp;&nbsp;return round( $Rel['baiyinum'] * $Bili );<BR>&nbsp;}<br><br>&nbsp;<BR>&nbsp;public function Select( $Type = true, $ListNum = 1 ){ //返回记录（数组形式， 返回条数）<BR>&nbsp;&nbsp; $this-&gt;Select = 'Select ' . $this-&gt;Field . ' from ' . $this-&gt;Table . $this-&gt;Where . $this-&gt;Order;<BR>&nbsp;&nbsp; if ( is_numeric( $ListNum ) ) { <BR>&nbsp;&nbsp;if ( $this-&gt;PageSize &gt; 0 ) {<BR>&nbsp;&nbsp;&nbsp;$this-&gt;Connection( $this-&gt;Select );//执行查询<BR>&nbsp;&nbsp;&nbsp;$this-&gt;PageCount =&nbsp; $this-&gt;Rest-&gt;num_rows;//取得记录总数<BR>&nbsp;&nbsp;&nbsp;$this-&gt;PageNum&nbsp;&nbsp; =&nbsp; ceil($this-&gt;PageCount / $this-&gt;PageSize); //总共有多少页<BR>&nbsp;&nbsp;&nbsp;$this-&gt;PageNo&nbsp;&nbsp;&nbsp; = $this-&gt;PageNo &gt; $this-&gt;PageNum ? $this-&gt;PageNum : $this-&gt;PageNo;<BR>&nbsp;&nbsp;&nbsp;$this-&gt;PageStart = ( $this-&gt;PageNo - 1 ) * $this-&gt;PageSize;&nbsp;&nbsp; //当前从第几条开始返回<BR>&nbsp;&nbsp;&nbsp;$this-&gt;Select&nbsp;&nbsp; .= ' limit ' . $this-&gt;PageStart . ', ' .$this-&gt;PageSize; //重新构造sql语句<BR>&nbsp;&nbsp;} else {<BR>&nbsp;&nbsp;&nbsp;$this-&gt;Select&nbsp;&nbsp; .= ' limit ' . $ListNum; //重新构造sql语句<BR>&nbsp;&nbsp;}<BR>&nbsp;&nbsp; } else {<BR>&nbsp;&nbsp;&nbsp;$this-&gt;Select&nbsp;&nbsp; .= ' limit 1'; //重新构造sql语句<BR>&nbsp;&nbsp; }<BR>&nbsp;&nbsp; //echo $this-&gt;Select;<BR>&nbsp;&nbsp; $this-&gt;Connection( $this-&gt;Select );//再次执行查询<BR>&nbsp;&nbsp; if ( $this-&gt;Rest-&gt;num_rows ) {//如果记录存在<BR>&nbsp;&nbsp;if ( $Type ) {<BR>&nbsp;&nbsp;&nbsp; while ( $Rs = $this-&gt;Rest-&gt;fetch_array() ) {<BR>&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Result[] = $Rs;<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;}else{<BR>&nbsp;&nbsp;&nbsp; while ( $Rs = $this-&gt;Rest-&gt;fetch_assoc() ) {<BR>&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Result[] = $Rs;<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;}<BR>&nbsp;&nbsp; }<BR>&nbsp;&nbsp; if ( ( $ListNum == 1 or !is_numeric( $ListNum ) ) && !$this-&gt;PageSize) { $this-&gt;Result = $this-&gt;Result[0]; }<BR>&nbsp;&nbsp; $DataBase = $this-&gt;Result;<BR>&nbsp;&nbsp; return empty($DataBase) ? false : $DataBase;<BR>&nbsp;}<br><br>&nbsp;&nbsp; public function Num() { //返回记录总数<BR>&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Select = 'Select ' . $this-&gt;Field . ' from ' . $this-&gt;Table . $this-&gt;Where . $this-&gt;Order;<BR>&nbsp; $this-&gt;Connection( $this-&gt;Select );//执行查询<BR>&nbsp; return $this-&gt;Rest-&gt;num_rows;//取得记录总数<BR>&nbsp;&nbsp; }<br><br>&nbsp;&nbsp; public function PageNav($NumNav = false ) {&nbsp; //分页<BR>&nbsp; $Action = $this -&gt; get('action');<BR>&nbsp; !empty( $Action ) or $Action =&nbsp; 'index';<BR>&nbsp; $Module = $this -&gt; get('module');<BR>&nbsp; !empty( $Module ) or $Module = 'index';<BR>&nbsp; $NavUrl&nbsp;&nbsp; = '/' . $Module . '/' . $Action . '/' . $this -&gt; PageKey .'/';<BR>&nbsp; $NaIndex&nbsp; = '/' . $Module . '/' . $Action;<BR>&nbsp; $PageHtml = "\n&lt;div class=\"pagenav\"&gt;";<BR>&nbsp; $PageHtml .= '&lt;span&gt;' . $this-&gt;PageCount . '条记录&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ' . $this-&gt;PageNo . '/' . $this-&gt;PageNum . '页&lt;/span&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ';<BR>&nbsp; $this-&gt;PageNo &lt;= 1 or $PageHtml .= "&lt;a href=\"" . $NaIndex . "\"&gt;首页&lt;/a&gt;\n&lt;a href=\"" .&nbsp; $NavUrl . ($this-&gt;PageNo - 1) . "\"&gt;上一页&lt;/a&gt;\n";<BR>&nbsp;if ( $NumNav ) { $PageHtml .= $this-&gt;NumPage($NavUrl); }<BR>&nbsp;$this-&gt;PageNo &gt;= $this-&gt;PageNum or $PageHtml .= "&lt;a href=\"" . $NavUrl. ($this-&gt;PageNo + 1) .&nbsp; "\"&gt;下一页&lt;/a&gt;\n&lt;a href=\"" . $NavUrl . $this-&gt;PageNum . "\"&gt;尾页&lt;/a&gt;\n";<BR>&nbsp;$PageHtml .= "&lt;/div&gt;\n";<BR>&nbsp;return&nbsp; $PageHtml; <BR>&nbsp;&nbsp; }<br><br>&nbsp;&nbsp; private function NumPage( $Can = '' ) { //数字分页<BR>&nbsp;&nbsp;&nbsp; $NumHtml = '';<BR>&nbsp;&nbsp;&nbsp; $First&nbsp;&nbsp; = 1;<BR>&nbsp;&nbsp;&nbsp; $Last&nbsp;&nbsp;&nbsp; = $this-&gt;PageNum;<BR>&nbsp;&nbsp;&nbsp; if ( $this-&gt;PageNum &gt; 5 ) {<BR>&nbsp;&nbsp;&nbsp;&nbsp; if ( $this-&gt;PageNo &lt; $this-&gt;PageNum ) {<BR>&nbsp;&nbsp;&nbsp;&nbsp; $First = $this-&gt;PageNo - 2;<BR>&nbsp;&nbsp;&nbsp;&nbsp; $Last&nbsp; = $this-&gt;PageNo + 2;<BR>&nbsp;&nbsp;&nbsp;&nbsp; }else{<BR>&nbsp;&nbsp;&nbsp;&nbsp; $First = $this-&gt;PageNo - 4;<BR>&nbsp;&nbsp;&nbsp;&nbsp; $Last&nbsp; = $this-&gt;PageNum;<BR>&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; if ( $First &lt; 1 ) { $First&nbsp;&nbsp; = 1; $Last = $First + 4;}<BR>&nbsp;&nbsp;&nbsp; if ( $Last&nbsp; &gt; $this-&gt;PageNum ) { $First&nbsp;&nbsp; = $this-&gt;PageNum - 4; $Last = $this-&gt;PageNum;}<BR>&nbsp;&nbsp;&nbsp; for( $i = $First; $i &lt;= $Last; $i++) {<BR>&nbsp;&nbsp;&nbsp;&nbsp; $NumHtml .= $this-&gt;PageNo != $i ? "\n\t" . '&lt;a href="' . $Can . $i . '"&gt;' . $i . '&lt;/a&gt;' . "\n\t" : "\n\t" .'&lt;a class="hover" disabled="disabled"&gt;' . $i . '&lt;/a&gt;' . "\n\t";<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; unset($Can, $First, $i, $Last);<BR>&nbsp;&nbsp;&nbsp; return $NumHtml;<BR>&nbsp;&nbsp; }<br><br>&nbsp;&nbsp; public function UserPage($NumNav = false, $PageName = 'index', $Mulu = 'user' ) {&nbsp; //会员中心分页<BR>&nbsp;&nbsp;&nbsp;&nbsp; $NavUrl&nbsp;&nbsp; = '/' . $Mulu . '/' . $PageName . '/' . $this-&gt;PageKey . '/';<BR>&nbsp; $PageHtml = "\n&lt;div class=\"pagenav\"&gt;";<BR>&nbsp; $PageHtml .= '&lt;span&gt;' . $this-&gt;PageCount . '条记录&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ' . $this-&gt;PageNo . '/' . $this-&gt;PageNum . '页&lt;/span&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ';<BR>&nbsp; $this-&gt;PageNo &lt;= 1 or $PageHtml .= "&lt;a href=\"" . $NavUrl . "1\"&gt;首页&lt;/a&gt;\n&lt;a href=\"" .&nbsp; $NavUrl . ($this-&gt;PageNo - 1) . "\"&gt;上一页&lt;/a&gt;\n";<BR>&nbsp;if ( $NumNav ) { $PageHtml .= $this-&gt;NumPage($NavUrl); }<BR>&nbsp;$this-&gt;PageNo &gt;= $this-&gt;PageNum or $PageHtml .= "&lt;a href=\"" . $NavUrl. ($this-&gt;PageNo + 1) .&nbsp; "\"&gt;下一页&lt;/a&gt;\n&lt;a href=\"" . $NavUrl . $this-&gt;PageNum . "\"&gt;尾页&lt;/a&gt;\n";<BR>&nbsp;$PageHtml .= "&lt;/div&gt;&lt;div class=\"clear\"&gt;&lt;/div&gt;\n";<BR>&nbsp;return&nbsp; $PageHtml; <BR>&nbsp;&nbsp; }<br><br>&nbsp;&nbsp; <BR>&nbsp;&nbsp; //表单处理开始<br><br>&nbsp;//判断表单时候提交<BR>&nbsp;public function FormIs( $Keys = 'mm' ) {<BR>&nbsp;&nbsp;return $_POST[ $Keys ] == 1 ? true : false;<BR>&nbsp;}<br><br>&nbsp;//post方式获取数据<BR>&nbsp;public function _post( $Keys = '', $TiHuan = '') {<BR>&nbsp;&nbsp;$Values = strip_tags( $_POST[ $Keys ] );<BR>&nbsp;&nbsp;$this-&gt;FormArray[$Keys] = empty( $Values ) ? $TiHuan : $Values;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return&nbsp; empty( $Values ) ? $TiHuan : $Values;<BR>&nbsp;}<br><br>&nbsp;//get方法获取数据<BR>&nbsp;public function _get( $Keys = '', $TiHuan = '') {<BR>&nbsp;&nbsp;$Values = strip_tags( $_GET[ $Keys ] );<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return&nbsp; empty( $Values ) ? $TiHuan : $Values;<BR>&nbsp;}<br><br>&nbsp;//判断是否为数字并且不小于0<BR>&nbsp;public function IsNum( $Num = 0, $Mesg = '参数必须为数字' ) {<BR>&nbsp;&nbsp;if ( is_numeric( $Num ) && !empty( $Num ) && $Num &gt;= 0 ) {<BR>&nbsp;&nbsp;&nbsp;return $Num;<BR>&nbsp;&nbsp;}else{<BR>&nbsp;&nbsp;&nbsp;die( $Mesg );<BR>&nbsp;&nbsp;}<BR>&nbsp;}<br><br>&nbsp;//判断是否为数字并且不小于0返回True/False<BR>&nbsp;public function NumBer( $Num = 0) {<BR>&nbsp;&nbsp; return&nbsp; is_numeric( $Num ) && !empty( $Num ) && $Num &gt;= 0 ? true : false;<BR>&nbsp;}<br><br>&nbsp;//检测相关数据似乎存在<BR>&nbsp;public function IsData($Types = true, $memg = '数据已经存在' ){<BR>&nbsp;&nbsp;$this-&gt;Connection('select ' . $this-&gt;Field . ' from ' . $this-&gt;Table . $this-&gt;Where);<BR>&nbsp;&nbsp;if ( $Types ){<BR>&nbsp;&nbsp;&nbsp;$this-&gt;Rest-&gt;num_rows &gt; 0 ? die( $memg ) : null;<BR>&nbsp;&nbsp;} else {<BR>&nbsp;&nbsp;&nbsp;return $this-&gt;Rest-&gt;num_rows;<BR>&nbsp;&nbsp;}<BR>&nbsp;}<br><br>&nbsp;<BR>&nbsp;//写入数据库记录<BR>&nbsp;public function into( $Mesg = '' ){<BR>&nbsp;&nbsp;!is_array( $this-&gt;FormArray ) ? die( $Mesg ) : null;<BR>&nbsp;&nbsp;$Sql = 'insert into ' . $this-&gt;Table . ' (`';<BR>&nbsp;&nbsp;$I&nbsp;&nbsp; = 0;<BR>&nbsp;&nbsp;foreach ( $this-&gt;FormArray as $Key =&gt; $Val ){<BR>&nbsp;&nbsp;&nbsp;$Duan .= !$I ? $Key . '`' : ', `' . $Key . '`';<BR>&nbsp;&nbsp;&nbsp;if ( is_numeric( $Val ) ){<BR>&nbsp;&nbsp;&nbsp;&nbsp;$Vals .= !$I ? $Val : ', ' . $Val;<BR>&nbsp;&nbsp;&nbsp;}else{<BR>&nbsp;&nbsp;&nbsp;&nbsp;$Vals .= !$I ? '\'' . $Val . '\'' : ', \'' . $Val . '\'';<BR>&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;$I++;<BR>&nbsp;&nbsp;}<BR>&nbsp;&nbsp;$Sql .= $Duan . ') values (' . $Vals . ')';<br><br>&nbsp;&nbsp;//@file_put_contents('1.sql', $Sql, FILE_APPEND);<br><br>&nbsp;&nbsp;$this-&gt;Connection( $Sql );<BR>&nbsp;&nbsp;return !empty( $this-&gt;Err ) ? false : true;<BR>&nbsp;}<br><br>&nbsp;&nbsp; //数组形式写入数据<BR>&nbsp;&nbsp; public function MsgBox( $Table = '', $Filed = array() ) {<BR>&nbsp;&nbsp;&nbsp; $this -&gt; Table($Table);<BR>&nbsp;&nbsp;&nbsp; foreach( $Filed as $Key =&gt; $Val ) {<BR>&nbsp;&nbsp;&nbsp; $this -&gt; FormArray[ $Key ] = $Val; <BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp; return $this -&gt;&nbsp; Into('未取得数据');<BR>&nbsp;&nbsp; }<br><br>&nbsp;&nbsp; //修改数据库记录<BR>&nbsp;&nbsp; public function Edit( $Array = array() ) {<BR>&nbsp;&nbsp;&nbsp; if ( empty( $Array ) ) { $Array = $this -&gt; FormArray; }<BR>&nbsp;&nbsp;&nbsp; if ( !is_array( $Array ) || empty( $Array ) ) {<BR>&nbsp;&nbsp;&nbsp;&nbsp; return false;<BR>&nbsp;&nbsp;&nbsp; } else {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $Sql = 'update ' . $this -&gt; Table . ' set ';<BR>&nbsp;&nbsp;&nbsp; $I&nbsp;&nbsp; = 0;<BR>&nbsp;&nbsp;&nbsp; $Sub = '';<BR>&nbsp;&nbsp;&nbsp; $Huan = array('-' =&gt; '[jian]', '+' =&gt; '[jia]', '*' =&gt; '[cheng]', '/' =&gt; '[chu]');<BR>&nbsp;&nbsp;&nbsp; $Zhan = array('[jian]' =&gt; '-', '[jia]' =&gt; '+', '[cheng]' =&gt; '*', '[chu]' =&gt; '/');</P>
<P>&nbsp;&nbsp;&nbsp; foreach ( $Array as $Files =&gt; $Val ) {<BR>&nbsp;&nbsp;&nbsp;&nbsp; $Val&nbsp; = !is_numeric( $Val ) && !preg_match('/\`\w+\`\s*(\+|\-|\*|\/)/i', $Val) ? '\'' . $Val . '\'' : $Val;<BR>&nbsp;&nbsp;&nbsp;&nbsp; foreach ( $Huan as $key =&gt; $val ){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $Val = str_replace($key, $val, $Val);<BR>&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp;&nbsp; $duan = !$I ? '`' . $Files . '` = ' :&nbsp; ', `' . $Files . '` = ';<BR>&nbsp;&nbsp;&nbsp;&nbsp; $Sub .= $duan . $Val;<BR>&nbsp;&nbsp;&nbsp;&nbsp; $I++;<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; $Sql .= $Sub . $this -&gt; Where;<BR>&nbsp;&nbsp;&nbsp; foreach ( $Zhan as $Fan =&gt; $Hui ) {<BR>&nbsp;&nbsp;&nbsp;&nbsp; $Sql = str_replace($Fan, $Hui, $Sql);<BR>&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; //echo $Sql; die;<br><br>&nbsp;&nbsp;&nbsp; $this -&gt; Connection( $Sql );<BR>&nbsp;&nbsp;&nbsp; unset( $Array, $duan, $Fan, $Files, $Huan, $Hui, $I, $key, $Sql, $Sub, $Val, $Zhan, $val );<BR>&nbsp;&nbsp;&nbsp; return !empty( $this -&gt; Err ) ? false : true;<BR>&nbsp;&nbsp; }<BR>&nbsp;&nbsp; }<br><br>&nbsp;&nbsp; //删除数据库记录<BR>&nbsp;&nbsp; public function del(){<BR>&nbsp;&nbsp;&nbsp; $Sql = 'delete from ' . $this-&gt;Table . $this-&gt;Where;<BR>&nbsp;&nbsp;&nbsp; $this-&gt;Connection( $Sql );<BR>&nbsp;&nbsp;&nbsp; unset($Sql);<BR>&nbsp;&nbsp;&nbsp; return !empty( $this-&gt;Err ) ? false : true;<BR>&nbsp;&nbsp; }<br><br>&nbsp;&nbsp; //表单处理结束<br><br>&nbsp;&nbsp; //页面跳转<BR>&nbsp;&nbsp; public function Msg( $Text = '操作成功' ) {<BR>&nbsp;&nbsp;&nbsp; echo '&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8" /&gt;';<BR>&nbsp;&nbsp;&nbsp; echo '&lt;script type="text/javascript"&gt;<BR>&nbsp; &lt;!--<BR>&nbsp;&nbsp;&nbsp; alert("' . $Text . '");<BR>&nbsp;document.location="' . $_SERVER['HTTP_REFERER'] . '";<BR>&nbsp; //--&gt;&nbsp;&nbsp; <BR>&lt;/script&gt;';<BR>&nbsp;exit;<BR>&nbsp;&nbsp; }<br><br>&nbsp;&nbsp; #取得系统当前时间<BR>&nbsp;&nbsp; public function Times(){<BR>&nbsp;&nbsp;&nbsp; return str_replace('-', '[jian]', date('Y-m-d H:i:s'));<BR>&nbsp;&nbsp; }<br><br>&nbsp;&nbsp; #取得用户IP地址<BR>&nbsp;public function GetIP(){ <BR>&nbsp;&nbsp; if (getenv("HTTP_CLIENT_IP") && strcasecmp(getenv("HTTP_CLIENT_IP"), "unknown")) <BR>&nbsp;&nbsp;&nbsp; $ip = getenv("HTTP_CLIENT_IP"); <BR>&nbsp;&nbsp;else if (getenv("HTTP_X_FORWARDED_FOR") && strcasecmp(getenv("HTTP_X_FORWARDED_FOR"), "unknown")) <BR>&nbsp;&nbsp;&nbsp; $ip = getenv("HTTP_X_FORWARDED_FOR"); <BR>&nbsp;&nbsp;else if (getenv("REMOTE_ADDR") && strcasecmp(getenv("REMOTE_ADDR"), "unknown")) <BR>&nbsp;&nbsp;&nbsp; $ip = getenv("REMOTE_ADDR"); <BR>&nbsp;&nbsp;else if (isset($_SERVER['REMOTE_ADDR']) && $_SERVER['REMOTE_ADDR'] && strcasecmp($_SERVER['REMOTE_ADDR'], "unknown")) <BR>&nbsp;&nbsp;&nbsp; $ip = $_SERVER['REMOTE_ADDR']; <BR>&nbsp;&nbsp;else <BR>&nbsp;&nbsp;&nbsp; $ip = "unknown"; <BR>&nbsp;&nbsp; return($ip); <BR>&nbsp;} <br><br>&nbsp;&nbsp; <BR>&nbsp;&nbsp; //最后关闭数据库连接<BR>&nbsp;&nbsp; public function Close(){<BR>&nbsp;&nbsp;&nbsp; !is_object( $this -&gt; Conn ) or mysqli_close( $this -&gt; Conn );<BR>&nbsp;&nbsp; }<br><br>}<BR></div></P>
<P>使用方法：<BR>声明数据库对象<BR>$Conn = new Mysql;<BR>加载数据库参数<BR>$Conn-&gt;Parameter(数据库服务器, 数据库用户名, 数据库密码, 数据库名称, 数据库编码, 数据库表前缀[可为空]);</P>
<P>上面的代码就已经加载这个类文件进来了，并且初始化了一些数据库连接参数！</P>
<P>下面介绍几个基本是方法函数：<BR>1、 $Conn -&gt; Table();<BR>选择数据表，参数是数据表名称<BR>2、$Conn -&gt; Field();<BR>选择的字段名称，多个用逗号隔开，如不调用这个方法，则返回全部<BR>3、$Conn -&gt; Where();<BR>Sql Where子语句，根据条件筛选<BR>4、$Conn -&gt; Order();<BR>Sql 排序<BR>5、$Conn -&gt; Page(int);<BR>参数是一个正整数数字，如调用这个方法，记录将分页显示<BR>6、$Conn -&gt; Select(布尔值);<BR>执行查询，返回查询结果，如果有，则是一个二维数组，如果无，则返回假，参数可省略，如省略，默认为真，返回的数组包含数字元素<BR>7、$Conn -&gt; Del();<BR>删除记录<BR>8、 $Conn -&gt; Edit(array());<BR>修改记录，参数是一个一维数组，数组键是字段名称，数组值是字段值<BR>9、$Conn -&gt; Into(array());<BR>添加记录，参数是一个一维数组，数组键是字段名称，数组值是字段值。</P>
<P>以上方法可连续调用，比如：<BR><div class="codetitle"><span><a style="CURSOR: pointer" data="74803" class="copybut" id="copybut74803" onclick="doCopy('code74803')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code74803"><BR>$Rult = $Conn -&gt; Table('user') -&gt; Select(); //查询返回user表的所有记录<BR>$Rult = $Conn -&gt; Table('user') -&gt; Page(20) -&gt; Select();//查询返回user表的所有记录，并分页显示，每页20条；<BR></div></P>
<P><BR>&nbsp;</P>
<hr></span>                                     
		    	</div>
		    	<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>代码注释</div>
			    <div class="panel-content">
			    <span></span>                                     
		    	</div>

			</div>

			<!-- END ROW -->
			<div class="newsPage">
				<div class="newsPageTurn">
				    <span><a>上一篇</a><a href='/php/biji/89983.html'>深入PHP FTP类的详解</a><a>下一篇</a><a href='/php/biji/89985.html'>win10手机预览版出现错误代码80073cf6怎么办 win10预览版错误代码80073cf6解决方法</a></span>
				</div>
			</div>
		</div>


<div id="author-box">
    <h3>作者：喵哥笔记</h3>
        <div class="author-info">
            <div class="author-avatar">
                <img src="/skin1/picture/01.jpg" alt="IDC笔记" class="avatar" width="64" height="64">
            </div>
        <div class="author-description">
            <p>学的不仅是技术，更是梦想！</p>
            <ul class="author-social follows nb">
            	<li>
                    <a target="_blank" href="/" title="IDC笔记">IDC笔记</a>
                </li>
            </ul>
        </div>
        <div class="clear"></div>
    </div>
</div>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
<!-- container-fluid -->
	</div>
<!-- content -->
	<footer class="footer">
	© 2020 IDC笔记 <i class="mdi mdi-heart text-danger"></i>. | 备案号：<a href="https://beian.miit.gov.cn/">辽ICP备18000516号</a>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?674585fbbd2294d3faf910f668ea91b4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

	</footer>
</div>

</div>
<!-- END wrapper -->
<!-- jQuery  -->
<script src="/skin1/js/jquery.min.js"></script>
<script src="/skin1/js/bootstrap.bundle.min.js"></script>
<script src="/skin1/js/metismenu.min.js"></script>
<script src="/skin1/js/jquery.slimscroll.js"></script>
<script src="/skin1/js/waves.min.js"></script>
<!--Morris Chart-->
<script src="/skin1/js/morris.min.js"></script>
<script src="/skin1/js/raphael.min.js"></script>
<script src="/skin1/js/dashboard.init.js"></script>
<script src="/skin1/js/app.js"></script>
<script src="/foot.js"></script>
</body>
</html>