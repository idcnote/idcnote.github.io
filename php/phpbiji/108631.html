<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title>php新闻发布系统的解决办法_PHP教程_IDC笔记</title>
    <meta name="keywords" content="PHP,PHP笔记,PHP教程" />
    <meta name="description" content="这篇文章主要为大家详细介绍了php新闻发布系统的简单示例，具有一定的参考价值，可以用来参考一下。<br />
<br />
感兴趣的小伙伴，下面一起跟随php教程的小玲来看看吧！<br />
简单的php新闻发布系统" />
    <meta content="Responsive admin theme build on top of Bootstrap 4" name="description" />
    <meta content="idcnote.com" name="author" />
    <link rel="shortcut icon" href="/skin1/images/favicon.ico">
    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="/skin1/css/morris.css">
    <link href="/skin1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/metismenu.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/icons.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/style.css" rel="stylesheet" type="text/css">
<link href="/SyntaxHighlighter/shCoreDefault.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/SyntaxHighlighter/shCore.js"></script>
<script type="text/javascript">
 SyntaxHighlighter.all();
</script>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
</head>
<body>
<!-- Begin page -->
		<div id="wrapper">
			<!-- Top Bar Start -->
			<div class="topbar">
				<!-- LOGO -->
				<div class="topbar-left">
					<a href="/" class="logo">
						<span class="logo-light">
                            <i class="mdi mdi-camera-control"></i>IDC笔记
                        </span>
						<span class="logo-sm">
                            <i class="mdi mdi-camera-control"></i>
                        </span>
					</a>
				</div>
				<nav class="navbar-custom">
					<ul class="navbar-right list-inline float-right mb-0">
						<!--<li class="dropdown notification-list list-inline-item d-none d-md-inline-block">
							<a class="nav-link waves-effect" href="#" id="btn-fullscreen">
								<i class="mdi mdi-arrow-expand-all noti-icon"></i>
							</a>
						</li>
						<li class="dropdown notification-list list-inline-item">
							<div class="dropdown notification-list nav-pro-img">
								<a class="dropdown-toggle nav-link arrow-none nav-user" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
									<img src="/skin1/picture/user-4.jpg" alt="user" class="rounded-circle">
								</a>
								<div class="dropdown-menu dropdown-menu-right profile-dropdown ">
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-account-circle"></i> Profile</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-wallet"></i> Wallet</a>
									<a class="dropdown-item d-block" href="#">
										<span class="badge badge-success float-right">11</span>
										<i class="mdi mdi-settings"></i> Settings</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-lock-open-outline"></i> Lock screen</a>
									<div class="dropdown-divider"></div>
									<a class="dropdown-item text-danger" href="#">
										<i class="mdi mdi-power text-danger"></i> Logout</a>
								</div>
							</div>
						</li>
						-->
					</ul>
					<ul class="list-inline menu-left mb-0">
						<li class="float-left">
							<button class="button-menu-mobile open-left waves-effect">
                            <i class="mdi mdi-menu"></i>
                        </button>
						</li>
						<li class="d-none d-md-inline-block">
							<form role="search" class="app-search">
								<div class="form-group mb-0">
									<input type="text" class="form-control" placeholder="Search..">
									<button type="submit"><i class="fa fa-search"></i></button>
								</div>
							</form>
						</li>
					</ul>
				</nav>
			</div>
<!-- ========== Left Sidebar Start ========== -->
<div class="left side-menu">
    <div class="slimscroll-menu" id="remove-scroll">
    <!--- Sidemenu -->
    <div id="sidebar-menu">
    <!-- Left Menu Start -->
    <ul class="metismenu" id="side-menu">
			<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP简介			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jianjie/1.html">PHP简介</a></li><li><a href="/php/jianjie/2.html">PHP用途</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP基本语法			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yufa/3.html">分离HTML</a></li><li><a href="/php/yufa/4.html">指令分隔符</a></li><li><a href="/php/yufa/5.html">PHP注释</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类型			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpleixing/6.html">PHP类型简介</a></li><li><a href="/php/phpleixing/7.html">PHP类型之布尔类型</a></li><li><a href="/php/phpleixing/8.html">PHP类型之整型</a></li><li><a href="/php/phpleixing/9.html">PHP类型之浮点型</a></li><li><a href="/php/phpleixing/10.html">PHP类型之字符串</a></li><li><a href="/php/phpleixing/11.html">PHP类型之数组</a></li><li><a href="/php/phpleixing/12.html">PHP类型之对象</a></li><li><a href="/php/phpleixing/13.html">PHP类型之资源类型</a></li><li><a href="/php/phpleixing/14.html">PHP类型之NULL</a></li><li><a href="/php/phpleixing/15.html">PHP类型之伪类型</a></li><li><a href="/php/phpleixing/16.html">PHP类型之类型判别</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP变量			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbianliang/17.html">PHP变量之基础</a></li><li><a href="/php/phpbianliang/18.html">PHP变量之预定义变量</a></li><li><a href="/php/phpbianliang/19.html">PHP变量之变量范围</a></li><li><a href="/php/phpbianliang/20.html">PHP变量之可变变量</a></li><li><a href="/php/phpbianliang/21.html">PHP变量之外部变量</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP运算符			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yunsuanfu/22.html">PHP运算符优先级</a></li><li><a href="/php/yunsuanfu/23.html">算术运算符</a></li><li><a href="/php/yunsuanfu/24.html">赋值运算符</a></li><li><a href="/php/yunsuanfu/25.html">位运算符</a></li><li><a href="/php/yunsuanfu/26.html">比较运算符</a></li><li><a href="/php/yunsuanfu/27.html">错误控制运算符</a></li><li><a href="/php/yunsuanfu/28.html">执行运算符</a></li><li><a href="/php/yunsuanfu/29.html">递增/递减运算符</a></li><li><a href="/php/yunsuanfu/30.html">逻辑运算符</a></li><li><a href="/php/yunsuanfu/31.html">字符串运算符</a></li><li><a href="/php/yunsuanfu/32.html">数组运算符</a></li><li><a href="/php/yunsuanfu/33.html">类型运算符</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP控制结构			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/jiegou/34.html">PHP控制结构之if</a></li><li><a href="/php/jiegou/35.html">PHP控制结构之else</a></li><li><a href="/php/jiegou/36.html">PHP控制结构之elseif/else if</a></li><li><a href="/php/jiegou/37.html">PHP控制结构之替代语法</a></li><li><a href="/php/jiegou/38.html">PHP控制结构之while</a></li><li><a href="/php/jiegou/39.html">PHP控制结构之do-while</a></li><li><a href="/php/jiegou/40.html">PHP控制结构之for</a></li><li><a href="/php/jiegou/41.html">PHP控制结构之foreach</a></li><li><a href="/php/jiegou/42.html">PHP控制结构之break</a></li><li><a href="/php/jiegou/43.html">PHP控制结构之continue</a></li><li><a href="/php/jiegou/44.html">PHP控制结构之switch</a></li><li><a href="/php/jiegou/45.html">PHP控制结构之declare</a></li><li><a href="/php/jiegou/46.html">PHP控制结构之return</a></li><li><a href="/php/jiegou/47.html">PHP控制结构之require</a></li><li><a href="/php/jiegou/48.html">PHP控制结构之include</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/hanshu/52.html">用户自定义函数</a></li><li><a href="/php/hanshu/53.html">函数的参数</a></li><li><a href="/php/hanshu/54.html">返回值</a></li><li><a href="/php/hanshu/55.html">可变函数</a></li><li><a href="/php/hanshu/56.html">内部（内置）函数</a></li><li><a href="/php/hanshu/57.html">匿名函数</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP类与对象			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpduixiang/58.html">类与对象前言</a></li><li><a href="/php/phpduixiang/59.html">基本概念</a></li><li><a href="/php/phpduixiang/60.html">属性</a></li><li><a href="/php/phpduixiang/61.html">类常量</a></li><li><a href="/php/phpduixiang/62.html">自动加载对象</a></li><li><a href="/php/phpduixiang/63.html">构造函数和析构函数</a></li><li><a href="/php/phpduixiang/64.html">访问控制</a></li><li><a href="/php/phpduixiang/65.html">对象继承</a></li><li><a href="/php/phpduixiang/66.html">Static关键字</a></li><li><a href="/php/phpduixiang/67.html">抽象类</a></li><li><a href="/php/phpduixiang/68.html">接口</a></li><li><a href="/php/phpduixiang/69.html">Traits</a></li><li><a href="/php/phpduixiang/70.html">重载</a></li><li><a href="/php/phpduixiang/71.html">对象迭代</a></li><li><a href="/php/phpduixiang/72.html">设计模式</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP异常处理			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/yichang/81.html">异常处理</a></li><li><a href="/php/yichang/82.html">扩展PHP内置的异常处理类</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> PHP函数库按分类			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpku/83.html">数组</a></li><li><a href="/php/phpku/84.html">Classes/Objects</a></li><li><a href="/php/phpku/85.html">Date/Time</a></li><li><a href="/php/phpku/86.html">Directories</a></li><li><a href="/php/phpku/87.html">错误处理</a></li><li><a href="/php/phpku/88.html">Program execution</a></li><li><a href="/php/phpku/89.html">Filesystem</a></li><li><a href="/php/phpku/90.html">Filter</a></li><li><a href="/php/phpku/91.html">Function Handling</a></li><li><a href="/php/phpku/92.html">PHP 选项/信息</a></li><li><a href="/php/phpku/93.html">Mail</a></li><li><a href="/php/phpku/94.html">Math</a></li><li><a href="/php/phpku/95.html">Misc.</a></li><li><a href="/php/phpku/96.html">Network</a></li><li><a href="/php/phpku/97.html">输出控制</a></li>		</ul>
	</li>
		<li>
		<a href="javascript:void(0);" class="waves-effect">
			<i class="icon-share"></i>
			<span> php基础			<span class="float-right menu-arrow">
			<i class="mdi mdi-chevron-right"></i>
			</span> 
			</span>
		</a>
		<ul class="submenu">
			 <li><a href="/php/phpbiji/108377.html"></a></li><li><a href="/php/phpbiji/108376.html"></a></li><li><a href="/php/phpbiji/108380.html"></a></li><li><a href="/php/phpbiji/108379.html"></a></li><li><a href="/php/phpbiji/108378.html"></a></li><li><a href="/php/phpbiji/108381.html"></a></li><li><a href="/php/phpbiji/108382.html"></a></li><li><a href="/php/phpbiji/108384.html"></a></li><li><a href="/php/phpbiji/108383.html"></a></li><li><a href="/php/phpbiji/108385.html"></a></li><li><a href="/php/phpbiji/108386.html"></a></li><li><a href="/php/phpbiji/108388.html"></a></li><li><a href="/php/phpbiji/108387.html"></a></li><li><a href="/php/phpbiji/108389.html"></a></li><li><a href="/php/phpbiji/108391.html"></a></li>		</ul>
	</li>
		<li>
	    <a href="/php/biji/" class="waves-effect">
		    <i class="icon-share"></i>
		    <span>PHP笔记
		       	<span class="float-right menu-arrow">
		       	<i class="mdi mdi-chevron-right"></i>
		       	</span>
		    </span>
	    </a>
	</li>
	</ul>
</div>
<!-- Sidebar -->
<div class="clearfix"></div>
</div>
<!-- Sidebar -left -->
</div>
<!-- Left Sidebar End -->
<!-- Start right Content here -->
<div class="content-page">
	<div class="content">
		<div class="container-fluid">
			<div class="page-title-box">
				<div class="row align-items-center">
					<div class="col-sm-6">
						<h1 class="page-title">php新闻发布系统的解决办法</h1>
					</div>
				</div>
				<!-- end row -->
			</div>
			<!-- end page-title -->
			<!-- START ROW -->
			<div class="panel panel-forbid">
				<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>内容摘要</div>
			    <div class="panel-content">
			    <span>这篇文章主要为大家详细介绍了php新闻发布系统的简单示例，具有一定的参考价值，可以用来参考一下。<br />
<br />
感兴趣的小伙伴，下面一起跟随php教程的小玲来看看吧！<br />
简单的php新闻发布系统</span>                                     
		    	</div>
			    <div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>文章正文</div>
			    <div class="panel-content">
			    <span><p>这篇文章主要为大家详细介绍了php新闻发布系统的简单示例，具有一定的参考价值，可以用来参考一下。</p>

<p>感兴趣的小伙伴，下面一起跟随php教程的小玲来看看吧！</p>
<p>简单的php新闻发布系统教程（第一版）第一讲：用 phpmyadmin 建立数据库首先建立一个数据库，名为 yayu 。在这个数据库下建立一个数据表，名为 news 。下面进入一个重点，那就是在表 news 下建立各个字段。</p>
<p>那么，什么叫字段呢？通俗点，就是一类事物的总称。比如说，所有的新闻发表时间用一个名词来代表（从偶的经验来看，用 phpmyadmin 建立 字段可以用中文，但从习惯来说还是用英文，没办法，计算机美国最牛嘛）。偶们用&ldquo; time &rdquo;来表示。在字段 time 下可以有很多&ldquo;发表时间&rdquo;，那 么如何来区分这些时间呢，这个可以查询其它字段下的内容，比如偶们建立新闻的标题的字段为&ldquo; title &rdquo;， title 字段下的内容按照常理说来是 没有一样的。所以可以通过一个标题来查询这个发表时间。其实我们可以让每个 title 或 time 下的内容都对应一个编号，那就是字段&mdash;&mdash;</p>
<p>&ldquo; id &rdquo;：字段&ldquo; id &rdquo;是一个人们默认的首选字段，其它字段下的内容可以重复出现，但这个字段却是从 1 开始增大的阿拉伯数字。在设置这 个字段时，要设置主键、索引、唯一以及 auto-increment 。这个 auto-increment 就是自动增加的意思。当任一字段增加内容 时，这个字段就自动增加 1 ，也就是说，任一字段都对应一个唯一的 id ，比如 1 、 2 、 0 27 &hellip;&hellip;</p>
<p>下面谈谈新闻部分字段的建立。</p>
<p>1. id ：意义为每个新闻的编号，它是唯一的，类型为 tingint ，这个 tingint 类型无须指定长度，系统默为 4 ；在&ldquo;额外&rdquo;中选择 auto-increment ，并选择主键。</p>
<p>2. author ：意义为作者 （新闻发布人），设置类型为 varchar ，设置这个字段长度时，如果考虑作者均为中国人，则 8 个字节为上限（ 4 个汉字），但如果考虑到作者 可能为外国人， 8 个字节显然太少了，对其它字段也存在同样的问题，在这里偶们把长度设置为 8 吧。</p>
<p>3. title ：意义为新闻标题，类型为 varchar ，长度为 60 吧，属性为 primany key 。</p>
<p>4. content ：意义为新闻的内容，类型为 text 。这个类型无须设置长度了。</p>
<p>5. source ：意义为新闻的来源，类型为 varchar ，长为 60 。</p>
<p>6. date ：意义为发表时间，类型为 datetime ，长度无须设置，属性为 primany key 。</p>
<p>下面补充以下字段类型的相关内容：</p>
<p>1 ． date ：时间和日期类型。时间和日期类型还包括以下：</p>
<p>&oplus; datetime : 0000-00-00 00:00:00</p>
<p>&oplus; date: 0000-00-00</p>
<p>&oplus; timestamp: 00000000000000 （ 14 个 0 ，长度取决于显示尺寸）</p>
<p>&oplus; time: 00:00:00</p>
<p>&oplus; year: 0000</p>
<p>2 ． conten t 字段代表新闻内容，由于其容量可能会很大，因此采用 text 类型（最多支持 65535 字节）</p>
<p>3 ． title 字段设置为 primany key ，如果不会有一条以的新闻具有相同的发表时间， date 字段也可以作为？ primany key ，这样今后对新闻的排序和检索会更加方便。</p>
<p>4 ． text 类型的字段虽然也属于一种字符类型，但其大小不能指定，如果设置长度，则系统会提示 SQL 语句出错。</p>
<p>现在， news 数据表就建立好了。</p>
<p>由于新闻不是所有人都能增加的，只能有管理员来做，所以现在我们再来建立数据表 users 来存放管理员们。</p>
<p>1 ： id ：类型为 tinyint ，额外设置为 auto-increment、主键。</p>
<p>2 ： name ：意义为管理员名称，类型为 varchar ，长为 8 ，属性为 primany key 。</p>
<p>3 ： password ：意义为密码， 类型为 varchar ，长为 32 。</p>
<p>4 ： mail ：一样为邮件地址， 类型为 varchar ，长为 30 。</p>
<p>现在，两个数据库就设置好了，下面偶们进入新闻程序的开发中。</p>
<p>芽雨原创php新闻系统教程（第一版） 第二讲：新闻程序的基础</p>
<p>一．连接数据库的基础</p>
<p>偶们添加、取出、修改、删除新闻都必须首先做一件事，那就是连接主机，选择数据库，向数据库发出请求。否则一切都是纸上谈兵。下面介绍三个重要的 MySQL 语句，分别是： mysql_pconnect( ) （连接主机）， mysql_select_db( ) （选择数据 库）， mysql_query() （向数据库发出请求）。</p>
<p>1 ． mysql_pconnect( )</p>
<p>它的作用是连接主机。</p>
<p>语法为： mysql_pconnect( &ldquo; 要登陆的主机 &rdquo;,&rdquo; 登陆时的用户名 &rdquo;,&rdquo; 密码 &rdquo;);</p>
<p>如 mysql_pconnect( &ldquo;localhost&rdquo;,&rdquo;root&rdquo;,&rdquo;&rdquo;);</p>
<p>其中的&ldquo; localhost &rdquo;、&ldquo; root &rdquo;都是 phpmyadmin 默认下的主机名和用户名，并且密码为空。</p>
<p>同功能的函数还有 mysql_connect( ) 。语法是一样的，区别在于前者开启一个长期连接，且无法使用 mysql_close() 函数关闭，而后者使用完后要用 mysql_close() 及时的关闭。对于一个网站来说，使用前者比后者好。这样可以减轻 MySQL 服务器处理连 接和关闭连接的负担。</p>
<p>这个函数成功连接后，会返回一个连接 ID 。因此，这个函数一般这样写：</p>
<p>$link= mysql_pconnect( );</p>
<p>说到这，补充一个函数 mysql_close() ，</p>
<p>语法为： mysql_close(&ldquo; 要关闭的连接 ID&rdquo;);</p>
<p>比如： mysql_close($link);</p>
<p>注：所有 ( ) 内都为字符串，有 $ 符号时就无须 &rdquo;&rdquo; 了。</p>
<p>2 ． mysql_select_db( )</p>
<p>它的作用是选择一个数据库为当前数据库。以后的操作就都在这个数据库中进行了。这个函数如果执行成功，返回一个 true ，否则返回 false 。</p>
<p>语法为： mysql_select_db( &ldquo; 数据库名称 &rdquo;,&rdquo; 连接的 ID&rdquo;);</p>
<p>第二个参数可以省略，它会自动寻找并连接最后一个使用的连接 ID 。</p>
<p>在本程序中，这个语句偶们写成： mysql_select_db( &ldquo;yayu&rdquo;,$link);</p>
<p>3 ． mysql_query()</p>
<p>它的作用是向服务器发出一个提出请求的字符串。</p>
<p>语法为： mysql_query(&ldquo; 提出问题的字符串 &rdquo;, 连接 ID);</p>
<p>其中第一个参数是一个完整的 MySQL 语句，第二个参数可以省略，偶一般是把它省略的。</p>
<p>在使用这个函数前应该先用 mysql_select_db( ) 指定要使用的数据库。</p>
<p>当提问的字符串是 update 、 insert 或 delete 时，函数返回的结果是 true 或 false ，表明查询是否成功，如果提问字符串是 select 语句则返回一个结果 ID ，如果 select 发生错误，则返回 false 。</p>
<p>了解了上面三个重要的函数后，偶们就可以对数据库发号施令了。那偶们用什么来发号施令呢？下面偶们再来看四个 MySQL 语句吧！</p>
<p>二．向数据库发出请求语句基础知识</p>
<p>它们分别是： insert （向数据库插入数据）、 delete （删除数据表中的数据）、 select （检索数据）、 update （更新数据）。</p>
<p>1 insert （）：向数据库插入数据 。</p>
<p>语法Ａ： insert into 数据表名（字段１，字段２，&hellip;&hellip;） values(&ldquo; 字段１ d 的内容 &rdquo;,&rdquo; 字段的２内容 &rdquo; &hellip;&hellip; )</p>
<p>语法Ｂ： insert into 数据表名 set 字段１ =&rdquo; 字段１的内容 &rdquo;, 字段 2=&rdquo; 字段 2 的内容 &rdquo;, &hellip;&hellip;</p>
<p>对Ａ中，字段名可以省略，但后面的 values 部分的内容必须要和 phpmyadmin 中定义的字段顺序一样。</p>
<p>下面请看例子：</p>
<p>Ａ： insert into news(title,date,author,source,content) values($title,$date,$author,$source,$content)</p>
<p>注：上面的&ldquo; $ &hellip;&hellip;&ldquo;代表了要添加字段的内容，定义时： $ &hellip;&hellip; = 内容 ;</p>
<p>Ｂ： insert into news set title=$title,author=$author</p>
<p>注：如果内容是数字，则 &rdquo;&rdquo; 可以省略。</p>
<p>2 delete （）：删除数据表中的数据</p>
<p>语法： delete from 数据表名 where 指定地点 limit 数字</p>
<p>如果没有&ldquo; where 指定地点&rdquo;则表中所有数据都没了。&ldquo; limit 　数字&rdquo;可以告诉服务器可以删除的最大行数。</p>
<p>例子： delete from news where id=$id limit 1</p>
<p>3. select （） : 检索数据</p>
<p>语法： select 字段名１ , 字段２ , &hellip;&hellip; from 数据表名 where 地点</p>
<p>如果想列出所有记录中所有列的数据，可以使用&ldquo; * &ldquo;代表字段名。</p>
<p>例子：Ａ： select id,author from news where id=$id</p>
<p>Ｂ： select * from news where id=$id</p>
<p>4 update （）：更新数据</p>
<p>语法和 insert 几乎是完全一样的。</p>
<p>如： update news set author=$author,title=$title where id=$id</p>
<p>值得注意的是，使用 update 语句时，要注意使用 where 字句，否则可能会导致大量的数据丢失。比如：</p>
<p>update news set author=&rdquo; 芽雨 &rdquo;</p>
<p>这个操作会使表中所有的作者都变成&ldquo;芽雨&rdquo;了。</p>
<p>再举一个正面的例子，记录管理员的表 users 中，如果有一个字段为 age ，用来存储用户的年龄，一年后，他们要增加一岁，可以使用以下的语句：</p>
<p>update users set age=age+1</p>
<p>太好了，偶们现在已经掌握程序大部分的基础了，还有小部分偶们以后在例子中掌握吧。</p>
<p>现在偶们面临的问题是如何写出算法了。</p>
<p>芽雨原创php新闻系统教程（第一版） 第三讲：新闻程序的算法（一） ------ 添加新闻</p>
<h3>一。添加新闻</h3>
<p>添加新闻既是向数据库添加新的数据。</p>
<p>整个算法是这样的：管理员在表单中填写新闻的内容，包括： title,author,source,content ，另外两个字段 （ id,time ）的内容有服务器完成，当然也要自己写程序，只是不由自己手动而已。提交表单后，用 MySQL 语句将它们添加到数据库中。</p>
<p>下面简单介绍一下表单中 &lt;input&gt; 标签和 &lt;textarea&gt;&lt;/textarea&gt; 标签。</p>
<p>&lt;input&gt; 标签为单行文本框。偶们常用的属性有： name, type 。 name 属性指定了变量的名称，既这个名称代表 了这个 &lt;input&gt; 中的内容。 type 属性指定了 &lt;input&gt; 中内容的性质。如果 type=text ，则为 一般性的文字。如果 type=password ，则这个&ldquo; &lt;input&gt; &rdquo;中的内容在浏览器一律以黑点显示，这样可以在输入内容时不 会在无意中被他人见到而造成数据安全问题。</p>
<p>&lt;textarea&gt;&lt;/textarea&gt; 标签为多行文本框，常用属性为 name 。</p>
<p>在本程序中此段程序如下所示：</p>
<pre>
<code>&lt;input name="author" type="text" size="40" maxlength="20"&gt;</code></pre>
<p>在&ldquo; name=&quot;author&quot; &rdquo;中的 &quot;author&quot; 就代表了&ldquo; &lt;input&gt; &rdquo;中的内容。同样的，这个 &quot;author&quot; 也可以是 &quot;title&quot; 或者其他，值得注意的是，这个 &quot;author&quot; 和字段 author 是不一样的。偶在这个地方提到 两个非常相似的概念：字段 author 和变量 $author （上面的 &rdquo;author&rdquo; 实际上就是 $ author ，因为它代表了 &ldquo; &lt;input&gt; &rdquo;中的内容）。虽然它们几乎是同名的，但可绝对不是一回事。 Author 是数据表 news 里的一个字段名， PHP 用它来有限定的访问 MySQL 中的数据，在程序中是不能用其它的字符替换的；而 $author 是本程序中用户自己设定的变量符号，其值由 &ldquo; &lt;input&gt; &rdquo;中对应元素的 name 属性得到。既然它只是变量符号，偶们就可以使用任意字段，只要保证与表单中对应元素的 name 属性一致就可。之所以选择用与字段名相同的字符，是因为这样偶们就不必再费力去多记一个变量名而已。</p>
<p>偶们再来看 &lt;textarea&gt;&lt;/textarea&gt; 标签中的内容：</p>
<pre>
<code>&lt;textarea name="content" cols="80" rows="15" wrap="HYSICAL"&gt;</code></pre>
<p>这个 &lt;textarea&gt;&lt;/textarea&gt; 中的内容是用来得到 content 字段内容的，因为此字段中的内容太多，所以只能用这个标签了。</p>
<p>当偶们填好这些内容后，只要提交就可以了，那么这一过程又是如何实现的呢？ 下面偶们再来看以下的程序：</p>
<pre>
<code>&lt;input name="submit" type="submit" value=" 提交新闻 "&gt;
&lt;input type="reset" name=" reset" value=" 重写新闻 "&gt;</code></pre>
<p>这里的 type=&quot;submit&quot;/ type=&quot;reset&quot; 分别代表提交和重写新闻。 value 属性的内容在此按钮上显示出来。 name=&quot; reset&quot;/ name=&quot;submit&quot; 中的含义和上面所说的是一样的。</p>
<p>HTML 中的表单（ form ）元素是专门负责也用户进行交互式操作的。当点击类型为 submit 的按钮时，表单中所有的元素都将以变量的形式提交给 action 所指的文件来处理。变量名由该元素的 name 属性来确定。在本程序中这个代码如下：</p>
<pre>
<code>&lt;form action=addnews.php method=post&gt;</code></pre>
<p>在这个地方偶们把处理数据的程序还是放在同一页面（ action=addnews.php ），在 method 属性中偶们令 method=post ，这里的 post 是值传递的方式。那现在偶们就在 action 指定的页面来讨论以下的程序：</p>
<pre>
<code>$author=$_POST["author"];</code></pre>
<p>这里的 $author 是偶们自己定义的变量名， author 是在 &lt;input&gt; 标签中 name 属性中定义的名字。 POST 为 &lt;form&gt; 中 method 定义的值传递方式。通过这种值传递方式得到的数据，偶们一律用 $_POST[&quot; &quot;] 收取。</p>
<p>完整的这类程序如下所示：</p>
<pre>
<code>if(@$_POST["submit"])
{
$author=$_POST["author"];
$department=$_POST["department"];
$title=$_POST["title"];
$content=parsecontent($_POST["content"]);
$date=date("y-m-d H:i");
mysql_query("INSERT INTO news(title,date,author,department,content) VALUES('$title','$date','$author','$department','$content')");
}</code></pre>
<p>其中的 date( ) 函数用法请查看其他书籍。上面一共是 5 个字段，还有一个字段 id 因为偶们在&ldquo;额外&rdquo;中选择了 auto-increment ，所以上面的数据插入到数据库时， id 就自动加 1 了。</p>
<p>当然在这个程序前，必须先连接好数据库，下面的所有与数据库连接的程序也是一样的，必须先连接还数据库。</p>
<p>芽雨原创php新闻系统教程（第一版） 第三讲：新闻程序的算法（二） ------- 显示</p>
<h3>二．显示新闻</h3>
<p>添加新闻后，就可以让别人来看新闻了。</p>
<p>这里的算法是这样的：先在新闻首页上显示新闻的标题及其他附加内容（如发表时间），这可以用循环输出的办法输出所有的新闻的标题。要查看具体新闻的内容时，点击新闻标题的超级链接进入一个新的页面查看这条新闻。</p>
<p>在开始这程序之前，链接好数据库。</p>
<p>当新闻很多时，偶们就要给新闻分页了，偶们设置好每页显示 10 条新闻。</p>
<p>具体的分页程序如下：</p>
<pre>
<code class="language-php">$respage = mysql_query("SELECT COUNT(*) FROM news;"); //$num 是数据库中总纪录数
while($row = mysql_fetch_row($respage))
{
$num = $row[0];
}
$recordnum =10;
$pages = ceil($num/$recordnum); // $recordnum 是每页显示多少条记录， $pages 是一共有多少页
if (@$_GET["page"]) // 获取 url 中的参数 page
{
//$current 是当前页 ,$pre 是前一页的， $next 是后一页， $pre 和 $next 为后面前一页和后一页的连接参数 page 的值
// 如果 url 中的参数为 1 ，把当前页置为 1 前一页， $pre 也为一， $next 为 2
if($_GET["page"]==1)
{
$current = 1;
$pre = 1;
$next = 2;
}else{
// 如果 url 中的参数不为一（不是第一页），就把当前页取值为 url 中获得的参数， $pre 为当前页减 1 ， $next 为加 1
$current = $_GET["page"];
$pre = $current-1;
$next = $current+1;
}
}else {
// 如果 url 中没有参数 page ，当前页置为 1 ， $pre=1,$next=2
$current = 1;
$pre = '1';
$next = 2;
}
$now = ($current-1)*$recordnum;
$echopage = "&lt;table width=450 cellpadding=0 cellspacing=0&gt;&lt;tr&gt;";
$echopage .= "&lt;td&gt;&lt;font&gt;".$pages." 页 &lt;/font&gt;&lt;/td&gt;";
$echopage .= "&lt;td&gt;&lt;font&gt;&lt;a href=".$_SERVER["HP_SELF"]."?page=1&gt; 第一页 &lt;/a&gt;&lt;font&gt;&lt;/td&gt;&lt;td&gt;&lt;font&gt;&lt;a href=".$_SERVER["HP_SELF"]."?page=".$pages."&gt; 最后一页 &lt;/a&gt;&lt;/font&gt;&lt;/td&gt;";
$echopage .= "&lt;td&gt;&lt;font&gt;&lt;a href=".$_SERVER["HP_SELF"]."?page=$pre&gt; 前一页 &lt;/a&gt; &lt;a href=".$_SERVER["PHP_SELF"]."?page=$next&gt; 后一页 &lt;/a&gt;&lt;/font&gt;&lt;/td&gt;";
$echopage .= "&lt;td&gt;&lt;font&gt; 到第 &lt;select name='topage' size='1' onchange='window.location="".$_SERVER["PHP_SELF"]."?page="+this.value'&gt;n";
for($i=1;$i&lt;=$pages;$i++){
if($i==$current)
$echopage .= "&lt;option value='$i' selected&gt;$i&lt;/option&gt;n";
else
$echopage .= "&lt;option value='$i'&gt;$i&lt;/option&gt;n";
}
$echopage .= "&lt;/select&gt; 页 &lt;/font&gt;&lt;/td&gt;";
$echopage .= "&lt;/tr&gt;&lt;/table&gt;";</code></pre>
<p>对这段程序偶就不做详细的讲解了。因为很麻烦，再说这和新闻程序的算法不是一回事，呵呵。在用的时候，偶们在输出的新闻标题后面这样写就可以了：</p>
<p>echo &quot;&lt;td align=&#39;center&#39;&gt;&quot;.$echopage.&quot;&lt;/td&gt;&quot;;</p>
<p>放在后面是因为 $echopage. 里面包含了选择去第几页的程序。</p>
<p>偶们再来看以下程序：</p>
<p>1 ： $sql=&quot;SELECT * FROM news order by id desc LIMIT $now,$recordnum&quot;;</p>
<p>这里的&ldquo; order by id desc &rdquo;意为驱除的记录是按编号由大到小的顺序输出的，换句话说就是新闻的输出总是新发表的在前面。 &ldquo; LIMIT $now,$recordnum &rdquo;限制了新闻输出的数目， id 的大小在 $now,$recordnum 之间，具体 $now,$recordnum 的数值请看上面的分页程序的讲解（粗黑体字部分）。</p>
<p>2 ： $res=mysql_query($sql);</p>
<p>这条语句意思是向服务器发送请求，并将返回的结果保存在 $res 中。</p>
<p>3 ： $rows=fetch_assoc($res);</p>
<p>这条语句意思是将查询结果 $res 的内容拆到一个数组 rows 中。如果 $res 中没有数据，函数返回 false 值。 fetch_assoc( ) 函数的作用和 mysql_fetch_row() 是一样的。</p>
<p>4 ：</p>
<pre>
<code>while($rows)
{
echo "&lt;tr&gt;";
echo "&lt;td align='left' valign='middle'&gt;&lt;img src='../sucai/biaozhi.JPG' width='15' height='15'&gt;&lt;a href='index.php?id=".$rows["id"]."' target=_blank&gt;&lt;font&gt;".$rows["title"]."[".$rows["date"]."]&lt;/font&gt;&lt;/a&gt;&lt;/td&gt;";
echo "&lt;/tr&gt;";
}</code></pre>
<p>while($rows) 便是按 id 的由大到小的顺序输出新闻的。 $rows[&quot;title&quot;] ， $rows[&quot;author&quot;] 就是数组形式的内容了。</p>
<p>下面来谈谈如何查看每一条新闻的内容。</p>
<p>偶们来看看上面第 4 个程序中的：</p>
<pre>
<code>&lt;a href='index.php?id=".$rows["id"]."' target=_blank&gt;&lt;font&gt;".$rows["title"]."[".$rows["date"]."]&lt;/font&gt;&lt;/a&gt;</code></pre>
<p>其中的&ldquo; href=&#39;index.php?id=&quot;.$rows[&quot;id&quot;].&quot;&#39; &rdquo;就是第 $rows[&quot;id&quot;] 条新闻的具体地址了。从上面也可以看出显示具体新闻的程序也在 index.php 中了。当偶们点击这个超级链接时，此程序将参数传递给 PHP 文件中的同名变量。需要注意的是，你只能向动态页面传递参数，而不能传递给 .htm 结尾的静态页面。</p>
<p>那这里所说的参数是指什么呢？上面的&ldquo; index.php?id=&quot;.$rows[&quot;id&quot;].&quot; &rdquo;的&ldquo;？&rdquo;就是变量的开始，&ldquo; id &rdquo;则是变量名，&ldquo; &quot;.$rows[&quot;id&quot;].&quot; &rdquo;就是变量的值了。如果还想向 PHP 文件传递更多的参数，可以用&ldquo; &amp; &rdquo;隔开。例如：</p>
<p>index.php?id=&quot;.$rows[&quot;id&quot;].&quot;&amp; title=&quot;.$rows[&quot;title&quot;].&quot;</p>
<p>在本程序中，偶们得到的变量名为&ldquo; id &rdquo;，现在偶们来分析这段程序吧！</p>
<p>1 ：首先偶们要保证这个 id 在数据库是有数据的，所以偶们用以下语句来判断：</p>
<pre>
<code class="language-php">if(isset($_GET["id"])){ }</code></pre>
<p>这里的 $_GET[&quot;id&quot;] 就是从浏览器地址栏中接受数据的方式。 isset( ) 是判断有无数据的函数。</p>
<p>2 ：如果有数据，偶们就把以下的程序写入上面的&ldquo; { } &rdquo;中。</p>
<pre>
<code class="language-php">$sql= "select * from news where id=".$_GET["id"]."";
$res= mysql_query($sql);
$rows=fetch_assoc($res);
while($rows)
{
echo "&lt;table width=750 cellpading=1 cellspacing=1 border=0 &gt;";
echo "&lt;tr&gt;";
echo "&lt;td colspan='3' valign='middle' align='center'&gt;&lt;font size='+1' color=red&gt;&lt;b&gt;".$rows["title"]."&lt;/b&gt;&lt;/font&gt;&lt;/td&gt;";
echo "&lt;/tr&gt;&lt;br&gt;";
echo "&lt;tr&gt;";
echo "&lt;td width='100%' valign='middle' align='center'&gt;&lt;font color=red size='2'&gt;".$rows["date"]." ".$rows["department"]." ".$rows["author"]."&lt;/font&gt;&lt;/td&gt;";
echo "&lt;tr&gt;";
echo "&lt;tr&gt;";
echo "&lt;td colspan='3'&gt;&lt;hr&gt;&lt;/td&gt;";
echo "&lt;/tr&gt;";
echo "&lt;tr&gt;";
echo "&lt;td colspan='3' valign='middle'&gt;&lt;font&gt; ".$rows["content"]."&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;";
echo "&lt;tr&gt;";
echo "&lt;/table&gt;";
}</code></pre>
<p>相信通过前面的讲解，您一定可以看懂上面的程序了。</p>
<p>芽雨原创php新闻系统教程（第一版） 第五讲：新闻程序的算法（一） --- 修改、删</p>
<h3>三．修改、删除新闻</h3>
<p>和查看新闻的程序一样，偶们要先列出所有的新闻标题，然后在选择具体的新闻进行修改、删除操作。</p>
<p>在这里列出新闻标题时，比 index.php 的程序多了一条语句，那就是输出：</p>
<pre>
<code class="language-html">&lt;a href='editnews.php?id=".$rows["id"]."' target=_self&gt; 修改 &lt;/a&gt;</code></pre>
<p>通过点击这个超级链接，偶们进入具体的修改、删除新闻的程序。</p>
<p>具体的程序如下：</p>
<pre>
<code class="language-php">if(@$_GET["id"])
{
$id = $_GET["id"];
$sql="SELECT * FROM news WHERE id=$id";
$res = mysql_query($sql);
$row=fetch_assoc($res);
$edit = "&lt;form method=post action=takeedit.php&gt;";
$edit .= "&lt;table width=800 cellpadding=0 cellspacing=0 border=1&gt;";
$edit .= "&lt;tr&amp; gt;&lt;td width=150&gt;&lt;font&gt; 第 $id 条新闻 &lt;/font&gt;&lt;/td&gt;&amp; lt;td&gt;&lt;font&gt; 标题 : &lt;input type=text name=title value=".$row["title"]." size=80&gt;&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;";
$edit .= "&lt;tr&gt;&lt;td valign=top width=150 border=0&gt;&lt;font&gt; 作者 &lt;input type=text name=author value=".$row["author"]."&gt;&lt;br&gt; 日期 :&lt;br&gt;".$row["date"]."&lt;/font&gt;&lt;/td&gt;&lt;td&gt;&lt;font size=-2&gt;&lt;textarea cols=90 rows=10 name=content &gt;".$row["content"]."&lt;/textarea&gt;&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;";
$edit .= "&lt;input type=hidden name=id value=$id&gt;";
$edit .= "&lt;input type=submit name=edit value= 修改 &gt;";
$edit .= "&lt;input type=submit name=delete value= 删除 &gt;";
$edit .= "&lt;/form&gt;";
echo $edit;
}</code></pre>
<p>上面&ldquo; if(@$_GET[&quot;id&quot;]) &rdquo;中的&ldquo; @ &rdquo;意思是说禁止函数返回出错提示。这样当程序出现异常时，不至于让普通用户看见那莫名其妙的出错信息。</p>
<p>值得一说的是，偶们把可以修改的内容放在属性 value 中，既&ldquo; value=&quot;.$row[&quot;title&quot;].&quot; &rdquo;等。</p>
<p>在 &lt;form&gt; 标签中把 action 属性设为&ldquo; action=takeedit.php &rdquo;，当偶们提交表单后，由 takeedit.php 对数据库进行操作。</p>
<p>这其中的语句都是偶们在前面提到的，偶就不信你看不懂！！！程序如下：</p>
<pre>
<code class="language-php">if(@$_POST["edit"])
{
$author = $_POST["author"];
$title = $_POST["title"];
$content = $_POST["content"];
$source =$_POST["source "];
$date = date("y-m-d H:i");
mysql_query("UPDATE news SET author='$author',title='$title',content='$content', source =' source',date='$date' WHERE id=$id");
}
if(@$_POST["delete"])
{
mysql_query("DELETE FROM news WHERE id=$id LIMIT 1");
}</code></pre>
<p>芽雨原创php新闻系统教程（第一版） 第六讲：用户管理</p>
<p>在这一部分，偶们来看看如何限制管理新闻程序只让管理员来操作。这包括让管理员注册（这个操作最好用 phpmyadmin 进行，毕竟不能随便让人当管理员嘛）、登陆、保存管理员的信息以便让系统识别他并让他对新闻进行操作、注销。</p>
<p>在这一讲中偶用给程序做注解来介绍相关的知识。</p>
<p>下面请看注册的程序 ：</p>
<p>这个程序分为两部分，前面是 MYSQL 部分，后面的是 HTML 部分（提交表单）。两部分连接起来的方式是在提交表单是在 &lt;input&gt; 标签设置 action=&quot;register.php&quot; 。把 MYSQL 放在前面是为了避免有的 PHP 函数不允许前面有 HTML 输出的缘故。</p>
<pre>
<code class="language-php">&lt;?
if(@$_POST["submit"])
{
if (empty ($name) || empty ($password)|| empty ($repassword))
//(empty () 函数是用来判断里面的字符是否为空的。
{
echo " 填写有错误，请 &lt;a href='register.php'&gt; 重新填写 &lt;/a&gt;";
}
if($password!=$repassword)
{
echo " 两次密码输入不同，请 &lt;a href='register.php'&gt; 重新填写 &lt;/a&gt;";
}
// 经上面的判断就可以去数据库进行操作了，这样做的目的是为了减轻服务器的负担。
$link=mysql_connect("localhost","root","");
mysql_select_db("yayu",$link);
$sql="SELECT id FROM users WHERE name='$name'";
$result=mysql_fetch_row(mysql_query($sql));
// mysql_fetch_row() 函数把得到的所有数据存到一个数组中去，这个数组是以数字为
// 引的。在这里，当返回有数据时， $result 相当于逻辑量 1 了。
// 检测用户提交的用户名是否被注册
if($result)
{
echo " 已经有相同的用户名存在，请 &lt;a href='register.php'&gt; 重新填写 &lt;/a&gt;";
}else{
// 如果一切正常，将数据加到数据库中
$sql="insert into users(name,password) values('$name','$password')";
// 检测用户注册是否成功
if(mysql_query($sql,$link))
{
echo " 注册成功，请立即 &lt;a href='admin.php'&gt; 登陆 &lt;/a&gt;";
}
else
{
echo " 注册失败，请 &lt;a href='register.php'&gt; 重试 &lt;/a&gt;";
}
}
}else{
?&gt;
&lt;center&gt;
&lt;h1 align="center"&gt; 注册 &lt;/h1&gt;
&lt;form action="register.php" method="OST"&gt;// 值传递的方式为 POST
&lt;p&gt; 代号 :
&lt;input name="name" type="text" value="" size="15"&gt;
&lt;br&gt;
&lt;br&gt;
密码 :
&lt;input type="password" name="password" size="15" maxlength="50"&gt;
&lt;/p&gt;
&lt;p&gt; 重新输入密码：
&lt;input type="password" name="repassword" size="15" maxlength="50"&gt;
&lt;br&gt;
&lt;br&gt;
&lt;input type="submit" name="submit" value=" 注册 "&gt;
&lt;input type="reset" value=" 重写 "&gt;
&lt;/p&gt;&lt;/form&gt;
&lt;/center&gt;
&lt;/body&gt;
&lt;/html&gt;
&lt;?
}
?&gt;</code></pre>
<p>再来看登陆和注销的程序</p>
<pre>
<code class="language-php">&lt;?
if(@$_POST["submit"])
{
if(empty ($_POST["username"]))
die (" 请填写用户名 ");
// 这里用了 die() 函数，作用是名字为空时向用户提出提示信息。
else
$username = $_POST["username"];
// 记录用户名。
if(empty ($_POST["password"]))
die (" 请填写密码 ");
else
$password = $_POST["password"];
$link=mysql_connect("localhost","root","");
$selectdb = mysql_select_db("yayu",$link);
$sql="select id,password,name from users where name='$username'";
$result=mysql_query($sql)or die (mysql_error ());
while($pa = mysql_fetch_assoc($result))
{ // mysql_fetch_assoc() 函数是把返回的数据以数组的方式保存，数组的下标与字段名 // 相对应
$pwd = $pa[password];
$userid = $pa[id];
// 检测用户名是否正确
if(!$result)
{
echo " 错误的用户名 ";
echo "&lt;br&gt;&lt;a href='login1.php'&gt; 重新登陆 &lt;/a&gt;";
mysql_close($link);
exit;
}
// 检测密码是否正确
if($pwd != $password )
{
echo " 亲爱的 ".$username."&lt;br&gt;";
echo " 您输入了错误的密码 ";
echo "&lt;br&gt; 请您 &lt;a href='admin.php'&gt; 重新登陆 &lt;/a&gt;";
mysql_close($link);
exit;
}
// 如果一切正常，则设置 Cookie
setcookie("username",$_POST["username"]);
header("Location:admin.php");
}
if(@$_GET["action"]=="logout")
{
setcookie("username","");
header("Location:index.php");
}
}
?&gt;</code></pre>
<p>在上面的程序中，有一个很重要的东西，那就是 Cookie 。</p>
<p>Cookie 是 Web 服务器存储在客户端的小型数据包，当用户再次连接放置 Cookie 的 Web 服务器时， Web 服务器可以再次读出它防止在 Cookie 的数据，再通过 Cookie ，服务器可以将特定的信息放在访问者的机器上。</p>
<p>偶们从程序中可以看见一个 Cookie 函数 setcookie() ，它用来存储用户的名字，语法为： setcookie(&quot; 自定义的用户名 &quot;,&quot; 用户的名字 &quot;);</p>
<p>在偶写的程序中&ldquo;自定义的用户名&rdquo;用的是&ldquo; username &rdquo;，当&ldquo;用户的名字&rdquo;为空时，</p>
<p>就相当于注销了。</p>
<p>当偶们的一些客户端操作需要管理员执行时，偶们就要用到 Cookie 了。偶们使用 if(@$_COOKIE[&quot;username&quot;]) （这个得到数据的方式是不是和 POST 的很像呀）</p>
<p>来做判断。如果 username 有值，那它就做为逻辑量中的 1 了。</p>

<p>注：关于php新闻发布系统的简单示例的内容就先介绍到这里，更多相关文章的可以留意</span>                                     
		    	</div>
		    	<div class="panel-title"><i class="fa fa fa-file-text fa-fw"></i>代码注释</div>
			    <div class="panel-content">
			    <span></span>                                     
		    	</div>

			</div>

			<!-- END ROW -->
			<div class="newsPage">
				<div class="newsPageTurn">
				    <span><a>上一篇</a><a href='/php/phpbiji/108605.html'>php求两个目录的相对路径的解决办法</a><a>下一篇</a><a href='/php/phpbiji/108632.html'>PHP错误和异长常处理的解决办法</a></span>
				</div>
			</div>
		</div>


<div id="author-box">
    <h3>作者：喵哥笔记</h3>
        <div class="author-info">
            <div class="author-avatar">
                <img src="/skin1/picture/01.jpg" alt="IDC笔记" class="avatar" width="64" height="64">
            </div>
        <div class="author-description">
            <p>学的不仅是技术，更是梦想！</p>
            <ul class="author-social follows nb">
            	<li>
                    <a target="_blank" href="/" title="IDC笔记">IDC笔记</a>
                </li>
            </ul>
        </div>
        <div class="clear"></div>
    </div>
</div>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
<!-- container-fluid -->
	</div>
<!-- content -->
	<footer class="footer">
	© 2020 IDC笔记 <i class="mdi mdi-heart text-danger"></i>. | 备案号：<a href="https://beian.miit.gov.cn/">辽ICP备18000516号</a>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?674585fbbd2294d3faf910f668ea91b4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

	</footer>
</div>

</div>
<!-- END wrapper -->
<!-- jQuery  -->
<script src="/skin1/js/jquery.min.js"></script>
<script src="/skin1/js/bootstrap.bundle.min.js"></script>
<script src="/skin1/js/metismenu.min.js"></script>
<script src="/skin1/js/jquery.slimscroll.js"></script>
<script src="/skin1/js/waves.min.js"></script>
<!--Morris Chart-->
<script src="/skin1/js/morris.min.js"></script>
<script src="/skin1/js/raphael.min.js"></script>
<script src="/skin1/js/dashboard.init.js"></script>
<script src="/skin1/js/app.js"></script>
<script src="/foot.js"></script>
</body>
</html>