<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title>宝塔面板之php参数及并发调整_IDC笔记</title>
    <meta name="keywords" content="宝塔使用教程" />
    <meta name="description" content="如何进入PHP参数的设置面板呢？<br />
<br />
如图（4-2-1）我们进入宝塔面板后台，找到软件商店，通过步1所示的应用搜索或直接找到要设置参数的php版本，我们以php7.2为例，点击步2所指向的 设置 菜" />
    <meta content="Responsive admin theme build on top of Bootstrap 4" name="description" />
    <meta content="Themesdesign" name="author" />
    <link rel="shortcut icon" href="/skin1/images/favicon.ico">
    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="/skin1/css/morris.css">
    <link href="/skin1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/metismenu.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/icons.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/style.css" rel="stylesheet" type="text/css">
<link href="/SyntaxHighlighter/shCoreDefault.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/SyntaxHighlighter/shCore.js"></script>
<script type="text/javascript">
 SyntaxHighlighter.all();
</script>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
</head>
<body>
<!-- Begin page -->
		<div id="wrapper">
			<!-- Top Bar Start -->
			<div class="topbar">
				<!-- LOGO -->
				<div class="topbar-left">
					<a href="/" class="logo">
						<span class="logo-light">
                            <i class="mdi mdi-camera-control"></i>IDC笔记
                        </span>
						<span class="logo-sm">
                            <i class="mdi mdi-camera-control"></i>
                        </span>
					</a>
				</div>
				<nav class="navbar-custom">
					<ul class="navbar-right list-inline float-right mb-0">
						<!--<li class="dropdown notification-list list-inline-item d-none d-md-inline-block">
							<a class="nav-link waves-effect" href="#" id="btn-fullscreen">
								<i class="mdi mdi-arrow-expand-all noti-icon"></i>
							</a>
						</li>
						<li class="dropdown notification-list list-inline-item">
							<div class="dropdown notification-list nav-pro-img">
								<a class="dropdown-toggle nav-link arrow-none nav-user" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
									<img src="/skin1/picture/user-4.jpg" alt="user" class="rounded-circle">
								</a>
								<div class="dropdown-menu dropdown-menu-right profile-dropdown ">
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-account-circle"></i> Profile</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-wallet"></i> Wallet</a>
									<a class="dropdown-item d-block" href="#">
										<span class="badge badge-success float-right">11</span>
										<i class="mdi mdi-settings"></i> Settings</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-lock-open-outline"></i> Lock screen</a>
									<div class="dropdown-divider"></div>
									<a class="dropdown-item text-danger" href="#">
										<i class="mdi mdi-power text-danger"></i> Logout</a>
								</div>
							</div>
						</li>
						-->
					</ul>
					<ul class="list-inline menu-left mb-0">
						<li class="float-left">
							<button class="button-menu-mobile open-left waves-effect">
                            <i class="mdi mdi-menu"></i>
                        </button>
						</li>
						<li class="d-none d-md-inline-block">
							<form role="search" class="app-search">
								<div class="form-group mb-0">
									<input type="text" class="form-control" placeholder="Search..">
									<button type="submit"><i class="fa fa-search"></i></button>
								</div>
							</form>
						</li>
					</ul>
				</nav>
			</div>
<div class="left side-menu">
<div class="slimscroll-menu" id="remove-scroll">
	<div id="sidebar-menu">
	    <ul class="metismenu" id="side-menu">
									<li>
				<a href="javascript:void(0);" class="waves-effect">
				<i class="icon-share"></i>
				<span> 系统简介				<span class="float-right menu-arrow">
				<i class="mdi mdi-chevron-right"></i>
				</span> 
				</span>
				</a>
				<ul class="submenu">
				 <li><a href="/bt/1.html">宝塔面板简介</a></li><li><a href="/bt/35.html">宝塔目录结构</a></li>				</ul>
			</li>
						<li>
				<a href="javascript:void(0);" class="waves-effect">
				<i class="icon-share"></i>
				<span> 系统版本				<span class="float-right menu-arrow">
				<i class="mdi mdi-chevron-right"></i>
				</span> 
				</span>
				</a>
				<ul class="submenu">
				 <li><a href="/bt/2.html">windows面板介绍</a></li><li><a href="/bt/3.html">Linux面板介绍</a></li>				</ul>
			</li>
						<li>
				<a href="javascript:void(0);" class="waves-effect">
				<i class="icon-share"></i>
				<span> 系统安装				<span class="float-right menu-arrow">
				<i class="mdi mdi-chevron-right"></i>
				</span> 
				</span>
				</a>
				<ul class="submenu">
				 <li><a href="/bt/4.html">1. SSH远程登录Linux系统</a></li><li><a href="/bt/5.html">2.1 放行阿里云服务器端口</a></li><li><a href="/bt/6.html">2.2 放行腾讯云服务器端口</a></li><li><a href="/bt/7.html">2.3 放行华为云服务器端口</a></li><li><a href="/bt/8.html">2.4 放行百度云服务器端口</a></li><li><a href="/bt/9.html">3. 安装Windows面板</a></li><li><a href="/bt/10.html">4. 安装Linux面板</a></li><li><a href="/bt/11.html">4.1 安装初始化环境</a></li><li><a href="/bt/12.html">5. 创建一个网站</a></li>				</ul>
			</li>
						<li>
				<a href="javascript:void(0);" class="waves-effect">
				<i class="icon-share"></i>
				<span> 使用教程				<span class="float-right menu-arrow">
				<i class="mdi mdi-chevron-right"></i>
				</span> 
				</span>
				</a>
				<ul class="submenu">
				 <li><a href="/bt/13.html">1. 网站基本配置操作</a></li><li><a href="/bt/14.html">2. 宝塔面板FTP端口设置</a></li><li><a href="/bt/15.html">3. 宝塔面板数据库设置</a></li><li><a href="/bt/16.html">4. 监控设置功能</a></li><li><a href="/bt/17.html">5. 安全管理</a></li><li><a href="/bt/18.html">6. 文件管理</a></li><li><a href="/bt/19.html">6.1. 计划任务之Shell脚本</a></li><li><a href="/bt/20.html">6.2. 计划任务之备份网站</a></li><li><a href="/bt/21.html">6.3. 计划任务之面板设置</a></li>				</ul>
			</li>
						<li>
				<a href="javascript:void(0);" class="waves-effect">
				<i class="icon-share"></i>
				<span> 提升性能				<span class="float-right menu-arrow">
				<i class="mdi mdi-chevron-right"></i>
				</span> 
				</span>
				</a>
				<ul class="submenu">
				 <li><a href="/bt/22.html">1. Swap交换分区</a></li><li><a href="/bt/23.html">2. PHP参数调整</a></li><li><a href="/bt/24.html">3. Mysql性能调整</a></li><li><a href="/bt/25.html">4. 定期释放缓存</a></li><li><a href="/bt/26.html">5. 启用禁ping</a></li>				</ul>
			</li>
						<li>
				<a href="javascript:void(0);" class="waves-effect">
				<i class="icon-share"></i>
				<span> 系统安全				<span class="float-right menu-arrow">
				<i class="mdi mdi-chevron-right"></i>
				</span> 
				</span>
				</a>
				<ul class="submenu">
				 <li><a href="/bt/27.html">服务器数据安全</a></li><li><a href="/bt/28.html">安全组及漏洞修补</a></li><li><a href="/bt/29.html">文件夹权限</a></li><li><a href="/bt/30.html">宝塔面板安全设置</a></li><li><a href="/bt/31.html">运行环境安全设置</a></li>				</ul>
			</li>
						<li>
				<a href="javascript:void(0);" class="waves-effect">
				<i class="icon-share"></i>
				<span> 实用收藏				<span class="float-right menu-arrow">
				<i class="mdi mdi-chevron-right"></i>
				</span> 
				</span>
				</a>
				<ul class="submenu">
				 <li><a href="/bt/32.html">常用Linux命令</a></li><li><a href="/bt/33.html">安装/升级/操作命令</a></li><li><a href="/bt/34.html">Linux常用命令大全</a></li><li><a href="/bt/36.html">忘记账户密码</a></li><li><a href="/bt/37.html">宝塔面板中网站页面出现403</a></li>				</ul>
			</li>
						<li>
				<a href="javascript:void(0);" class="waves-effect">
				<i class="icon-share"></i>
				<span> 宝塔笔记				<span class="float-right menu-arrow">
				<i class="mdi mdi-chevron-right"></i>
				</span> 
				</span>
				</a>
				<ul class="submenu">
				 <li><a href="/bt/biji/38.html"></a></li><li><a href="/bt/biji/39.html"></a></li><li><a href="/bt/biji/40.html"></a></li><li><a href="/bt/biji/41.html"></a></li><li><a href="/bt/biji/42.html"></a></li><li><a href="/bt/biji/43.html"></a></li><li><a href="/bt/biji/44.html"></a></li><li><a href="/bt/biji/45.html"></a></li><li><a href="/bt/biji/46.html"></a></li><li><a href="/bt/biji/47.html"></a></li>				</ul>
			</li>
						<li>
				<a href="/bt/biji/" class="waves-effect">
					<i class="icon-share"></i>
					<span>宝塔笔记
						<span class="float-right menu-arrow">
							<i class="mdi mdi-chevron-right"></i>
						</span>
					</span>
				</a>
			</li>
		</ul>
	</div>
	<div class="clearfix"></div>
</div>
</div>
<div class="content-page">
	<div class="content">
		<div class="container-fluid">
			<div class="page-title-box">
				<div class="row align-items-center">
					<div class="col-sm-6">
						<h1 class="page-title">宝塔面板之php参数及并发调整</h1>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-xl-12">
					<div class="card m-b-30">
						<div class="card-body">
							<div class="table-responsive">
								<table class="table table-hover">
									<tbody>
										<span style="font-size:16px;">如何进入PHP参数的设置面板呢？<br /><img alt="" src="/d/file/p/2020/06-14/984f22bec9f1f7fc310614f324dfe773.jpg" style="width: 800px; height: 398px;" /><br />如图（4-2-1）我们进入宝塔面板后台，找到软件商店，通过步1所示的应用搜索或直接找到要设置参数的php版本，我们以php7.2为例，点击步2所指向的&nbsp;<code>设置</code>&nbsp;菜单，进入php参数设置面板。<br />1、PHP扩展的几点建议<br /><img alt="" src="/d/file/p/2020/06-14/3d7d0e1d8236db5ffb10034f63310565.jpg" style="width: 800px; height: 540px;" /><br /><br />如上图（4-2-2）所示，我们可以通过点击安装扩展Tab来打开php扩展管理页，选定你要使用的扩展，直接点操作项的安装即可快速安装php扩展应用。<br /><br />PHP扩展即为PHP编程语言的应用库，安装常用扩展是PHP程序员的必备技能，不管你是不是从事服务器运维，基本的东西都得搞明白，宝塔已经将常用的扩展都集成了，我们可以通过面板很方便的安装并管理扩展。<br /><br />需要注意的是&mdash;&mdash;<br /><br />1-1、如果程序不需要，就卸载不用的扩展，装多了也会占内存、占用系统资源；<br /><br />1-2、宝塔只是将常用的扩展集成在面板PHP设置项里，不代表不支持其它扩展了，我们可以通过Linux系统连接到SSH登录，使用命令行安装其它的扩展。<br /><br />1-3、我们也可以通过PHP配置文件php.ini，下面没有开启的扩展前面都是有分号的，只要把分号删掉，重启Apache服务器或者Nginx服务器就可以了。我们就可以直接这样书写：<br /><br />extension=要开启的扩展名称<br /><br />2、宝塔面板PHP之必要参数设置<br /><img alt="" src="/d/file/p/2020/06-14/09eca9d1f60a12c0bc24ee0032411d8f.jpg" style="width: 800px; height: 540px;" /></span>
<p><span style="font-size:16px;">如上图（4-2-3）所示，我们点击配置修改进入到php的运行参数管理页面（图示上面的所有参数都可以通过修改php.ini即配置文件来修改，宝塔为了方便用户直接面板化，使用起来更简单快捷。）</span></p>
<p><span style="font-size:16px;">除了特殊应用外，建议使用官方推荐的参数。</span></p>
<p><span style="font-size:16px;">参考下表 我们给出了标签的分析：</span><br />&nbsp;</p>
<table>
	<thead>
		<tr>
			<th><span style="font-size:16px;">标签</span></th>
			<th><span style="font-size:16px;">功能</span></th>
			<th><span style="font-size:16px;">默认</span></th>
			<th><span style="font-size:16px;">详解</span></th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td><span style="font-size:16px;">short_open_tag</span></td>
			<td><span style="font-size:16px;">开启关闭,短标签支持</span></td>
			<td><span style="font-size:16px;">开启</span></td>
			<td><span style="font-size:16px;">php默认&nbsp;<code>&lt;?php ?&gt;</code>长标签，开启的后<code>&lt;? ?&gt;</code>短标签也支持</span></td>
		</tr>
		<tr>
			<td><span style="font-size:16px;">max_execution_time</span></td>
			<td><span style="font-size:16px;">最大脚本运行时间</span></td>
			<td><span style="font-size:16px;">300秒</span></td>
			<td><span style="font-size:16px;">php最长运行时间</span></td>
		</tr>
		<tr>
			<td><span style="font-size:16px;">max_input_time</span></td>
			<td><span style="font-size:16px;">最大输入时间</span></td>
			<td><span style="font-size:16px;">60秒</span></td>
			<td><span style="font-size:16px;">PHP脚本解析请求数据。这个参数是特别重要的，当你上传大文件，使用PHP的文件上传功能</span></td>
		</tr>
		<tr>
			<td><span style="font-size:16px;">memory_limit</span></td>
			<td><span style="font-size:16px;">脚本内存限制</span></td>
			<td><span style="font-size:16px;">128M</span></td>
			<td><span style="font-size:16px;">php运行时内存占用限制</span></td>
		</tr>
		<tr>
			<td><span style="font-size:16px;">post_max_size</span></td>
			<td><span style="font-size:16px;">POST数据最大尺寸</span></td>
			<td><span style="font-size:16px;">50M</span></td>
			<td><span style="font-size:16px;">通过post上传最大的文件尺寸</span></td>
		</tr>
		<tr>
			<td><span style="font-size:16px;">file_uploads</span></td>
			<td><span style="font-size:16px;">开启关闭,是否允许上传文件</span></td>
			<td><span style="font-size:16px;">开启</span></td>
			<td><span style="font-size:16px;">文件上传开关</span></td>
		</tr>
		<tr>
			<td><span style="font-size:16px;">upload_max_filesize</span></td>
			<td><span style="font-size:16px;">允许上传文件的最大尺寸</span></td>
			<td><span style="font-size:16px;">50M</span></td>
			<td><span style="font-size:16px;">上传单个文件的最大尺寸</span></td>
		</tr>
		<tr>
			<td><span style="font-size:16px;">max_file_uploads</span></td>
			<td><span style="font-size:16px;">允许同时上传文件的最大数量</span></td>
			<td><span style="font-size:16px;">20个</span></td>
			<td><span style="font-size:16px;">允许同时上传的进程数</span></td>
		</tr>
		<tr>
			<td><span style="font-size:16px;">default_socket_timeout</span></td>
			<td><span style="font-size:16px;">Socket超时时间</span></td>
			<td><span style="font-size:16px;">60秒</span></td>
			<td><span style="font-size:16px;">socket流从建立到传输再到关闭整个过程必须要在这个参数设置的时间以内完成</span></td>
		</tr>
		<tr>
			<td><span style="font-size:16px;">error_reporting</span></td>
			<td><span style="font-size:16px;">错误级别</span></td>
			<td><span style="font-size:16px;">E_ALL &amp; ~E_NOTICE</span></td>
			<td><span style="font-size:16px;">显示除去 E_NOTICE 之外的所有错误信息</span></td>
		</tr>
		<tr>
			<td><span style="font-size:16px;">display_errors</span></td>
			<td><span style="font-size:16px;">开启关闭,是否输出详细错误信息</span></td>
			<td><span style="font-size:16px;">开启</span></td>
			<td><span style="font-size:16px;">开启状态下，若出现错误，则报错，出现错误提示</span></td>
		</tr>
		<tr>
			<td><span style="font-size:16px;">cgi.fix_pathinfo</span></td>
			<td><span style="font-size:16px;">开启关闭,是否开启pathinfo</span></td>
			<td><span style="font-size:16px;">开启</span></td>
			<td><span style="font-size:16px;">开启后支持URI</span></td>
		</tr>
		<tr>
			<td><span style="font-size:16px;">date.timezone</span></td>
			<td><span style="font-size:16px;">时区</span></td>
			<td><span style="font-size:16px;">PRC</span></td>
			<td><span style="font-size:16px;">时区的选择</span></td>
		</tr>
	</tbody>
</table>
<p><span style="font-size:16px;">表（4-2-1）</span></p><span style="font-size:16px;">需要注意的事，调整参数有风险，一定要多加研究搞明白后再调整。<br /><br /><br />3、宝塔面板PHP并发调整<br /><img alt="" src="/d/file/p/2020/06-14/e7df66af3fba9ba2bf750f26b3ed9cc6.jpg" style="width: 800px; height: 543px;" /><br /><!--StartFragment --><br />如上图（4-2-4）所示，我们点击性能调整，打开性能调整面板，此处是重点，根据服务器的配置配比在步1指向的区域选择并发方案&nbsp;1GB内存2GB内存4GB内存8GB内存16GB内存32GB内存&nbsp;(根据您服务器的内存大小实际选择)，然后点击&nbsp;<img src="/d/file/p/2020/06-14/6c805009abb539b562045c1fc9f88806.jpg" />&nbsp;应用方案。需要说明的，不是并发方案越大越好，一定要实事求是，基于自己服务器的内存大小来合理调整。事实上，宝塔官方已经给大家提前预置了常用内存大小的方案，不需要我们再去太细化的修改参数策略。官方给出的注意事项&mdash;&mdash;<br />【最大子进程数量】越大，并发能力越强，但max_children最大不要超过5000<br />【内存】每个PHP子进程需要20MB左右内存，过大的max_children会导致服务器不稳定<br />【静态模式】下会始终维持设置的子进程数量，对内存开销较大，但并发能力较好<br />【动态模式】下会按设置最大空闲进程数来收回进程，内存开销小，建议小内存机器使用<br />【64GB内存推荐值】max_children&lt;=1000&nbsp;,&nbsp;start/min_spare=50&nbsp;,&nbsp;max_spare&lt;=200<br />【多PHP版本】若您安装了多个PHP版本，且都在使用，建议适当降低并发配置<br />【没有数据库】若没有安装mysql等数据库，建议设置2倍于推荐并发<br />【注意】以上为建议配置说明，线上项目复杂多样，请根据实际情况酌情调整<br /><br />4、PHP并发能力提升之Session配置<br /><img alt="" src="/d/file/p/2020/06-14/82c5805e91e608b3e76a20d9faf7f42c.jpg" style="width: 800px; height: 542px;" /></span>
<p><span style="font-size:16px;">若所布署代码允许的情况下，php版本强烈建议选择php7.0以上版本的， php缓存扩展推荐使用 Opcache 脚本缓存、Memcached、redis内容缓存。</span></p>
<blockquote>
<p><span style="font-size:16px;">注意：内容缓存和脚本缓存同时只允许安装1个。</span></p></blockquote>
<p><span style="font-size:16px;">Memcached或者redis这两个内容缓存我们可以同时安装，没有冲突。</span></p>
<p><span style="font-size:16px;"><strong>官方给出的说明&mdash;&mdash;</strong></span></p>
<ul>
	<li><span style="font-size:16px;">若你的站点并发比较高，使用Redis，Memcache能有效提升PHP并发能力</span></li>
	<li><span style="font-size:16px;">若调整Session模式后，网站访问异常，请切换回原来的模式</span></li>
	<li><span style="font-size:16px;">切换Session模式会使在线的用户会话丢失，请在流量小的时候切换</span></li>
</ul>
<p><span style="font-size:16px;">我们在布署项目时，一定要注意，不管如何设置都是为了一个最终目的，强化并发、增加稳定性，所以，本课节所讲述部分，一定要慎重修改，不要得到了性能变成了不稳定，您也可以在测试服务器来测试调整效果，提前多做些测试工作对后面项目正常运行更为重要！</span></p>									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<footer class="footer">
		© 2020 IDC笔记 <i class="mdi mdi-heart text-danger"></i>. | 备案号：<a href="https://beian.miit.gov.cn/">辽ICP备18000516号</a>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?674585fbbd2294d3faf910f668ea91b4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

	</footer>
</div>
</div>
<script src="/skin1/js/jquery.min.js"></script>
<script src="/skin1/js/bootstrap.bundle.min.js"></script>
<script src="/skin1/js/metismenu.min.js"></script>
<script src="/skin1/js/jquery.slimscroll.js"></script>
<script src="/skin1/js/waves.min.js"></script>
<script src="/skin1/js/morris.min.js"></script>
<script src="/skin1/js/raphael.min.js"></script>
<script src="/skin1/js/dashboard.init.js"></script>
<script src="/skin1/js/app.js"></script>
<script src="/foot.js"></script>
</body>
</html>