<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title>如何利用宝塔自动备份网站、数据库及文件目录等_IDC笔记</title>
    <meta name="keywords" content="宝塔使用教程" />
    <meta name="description" content="入宝塔面板后台，在左侧点击计划任务菜单，进入到计划任务管理面板，选择步1，2，3来分别备份网站、数据库以及文件目录等操作，因操作类似，我们来以网站备份来讲解下面的内容。<br />
<br />
<br />
<br />
接下" />
    <meta content="Responsive admin theme build on top of Bootstrap 4" name="description" />
    <meta content="Themesdesign" name="author" />
    <link rel="shortcut icon" href="/skin1/images/favicon.ico">
    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="/skin1/css/morris.css">
    <link href="/skin1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/metismenu.min.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/icons.css" rel="stylesheet" type="text/css">
    <link href="/skin1/css/style.css" rel="stylesheet" type="text/css">
<link href="/SyntaxHighlighter/shCoreDefault.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/SyntaxHighlighter/shCore.js"></script>
<script type="text/javascript">
 SyntaxHighlighter.all();
</script>
<script>
var paras = document.getElementsByTagName("pre");
for ( var i=0;i<paras.length;i++ ) {
    paras[i].setAttribute("class","brush:php;toolbar:false");     
}
</script>
</head>
<body>
<!-- Begin page -->
		<div id="wrapper">
			<!-- Top Bar Start -->
			<div class="topbar">
				<!-- LOGO -->
				<div class="topbar-left">
					<a href="/" class="logo">
						<span class="logo-light">
                            <i class="mdi mdi-camera-control"></i>IDC笔记
                        </span>
						<span class="logo-sm">
                            <i class="mdi mdi-camera-control"></i>
                        </span>
					</a>
				</div>
				<nav class="navbar-custom">
					<ul class="navbar-right list-inline float-right mb-0">
						<!--<li class="dropdown notification-list list-inline-item d-none d-md-inline-block">
							<a class="nav-link waves-effect" href="#" id="btn-fullscreen">
								<i class="mdi mdi-arrow-expand-all noti-icon"></i>
							</a>
						</li>
						<li class="dropdown notification-list list-inline-item">
							<div class="dropdown notification-list nav-pro-img">
								<a class="dropdown-toggle nav-link arrow-none nav-user" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
									<img src="/skin1/picture/user-4.jpg" alt="user" class="rounded-circle">
								</a>
								<div class="dropdown-menu dropdown-menu-right profile-dropdown ">
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-account-circle"></i> Profile</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-wallet"></i> Wallet</a>
									<a class="dropdown-item d-block" href="#">
										<span class="badge badge-success float-right">11</span>
										<i class="mdi mdi-settings"></i> Settings</a>
									<a class="dropdown-item" href="#">
										<i class="mdi mdi-lock-open-outline"></i> Lock screen</a>
									<div class="dropdown-divider"></div>
									<a class="dropdown-item text-danger" href="#">
										<i class="mdi mdi-power text-danger"></i> Logout</a>
								</div>
							</div>
						</li>
						-->
					</ul>
					<ul class="list-inline menu-left mb-0">
						<li class="float-left">
							<button class="button-menu-mobile open-left waves-effect">
                            <i class="mdi mdi-menu"></i>
                        </button>
						</li>
						<li class="d-none d-md-inline-block">
							<form role="search" class="app-search">
								<div class="form-group mb-0">
									<input type="text" class="form-control" placeholder="Search..">
									<button type="submit"><i class="fa fa-search"></i></button>
								</div>
							</form>
						</li>
					</ul>
				</nav>
			</div>
<div class="left side-menu">
<div class="slimscroll-menu" id="remove-scroll">
	<div id="sidebar-menu">
	    <ul class="metismenu" id="side-menu">
									<li>
				<a href="javascript:void(0);" class="waves-effect">
				<i class="icon-share"></i>
				<span> 系统简介				<span class="float-right menu-arrow">
				<i class="mdi mdi-chevron-right"></i>
				</span> 
				</span>
				</a>
				<ul class="submenu">
				 <li><a href="/bt/1.html">宝塔面板简介</a></li><li><a href="/bt/35.html">宝塔目录结构</a></li>				</ul>
			</li>
						<li>
				<a href="javascript:void(0);" class="waves-effect">
				<i class="icon-share"></i>
				<span> 系统版本				<span class="float-right menu-arrow">
				<i class="mdi mdi-chevron-right"></i>
				</span> 
				</span>
				</a>
				<ul class="submenu">
				 <li><a href="/bt/2.html">windows面板介绍</a></li><li><a href="/bt/3.html">Linux面板介绍</a></li>				</ul>
			</li>
						<li>
				<a href="javascript:void(0);" class="waves-effect">
				<i class="icon-share"></i>
				<span> 系统安装				<span class="float-right menu-arrow">
				<i class="mdi mdi-chevron-right"></i>
				</span> 
				</span>
				</a>
				<ul class="submenu">
				 <li><a href="/bt/4.html">1. SSH远程登录Linux系统</a></li><li><a href="/bt/5.html">2.1 放行阿里云服务器端口</a></li><li><a href="/bt/6.html">2.2 放行腾讯云服务器端口</a></li><li><a href="/bt/7.html">2.3 放行华为云服务器端口</a></li><li><a href="/bt/8.html">2.4 放行百度云服务器端口</a></li><li><a href="/bt/9.html">3. 安装Windows面板</a></li><li><a href="/bt/10.html">4. 安装Linux面板</a></li><li><a href="/bt/11.html">4.1 安装初始化环境</a></li><li><a href="/bt/12.html">5. 创建一个网站</a></li>				</ul>
			</li>
						<li>
				<a href="javascript:void(0);" class="waves-effect">
				<i class="icon-share"></i>
				<span> 使用教程				<span class="float-right menu-arrow">
				<i class="mdi mdi-chevron-right"></i>
				</span> 
				</span>
				</a>
				<ul class="submenu">
				 <li><a href="/bt/13.html">1. 网站基本配置操作</a></li><li><a href="/bt/14.html">2. 宝塔面板FTP端口设置</a></li><li><a href="/bt/15.html">3. 宝塔面板数据库设置</a></li><li><a href="/bt/16.html">4. 监控设置功能</a></li><li><a href="/bt/17.html">5. 安全管理</a></li><li><a href="/bt/18.html">6. 文件管理</a></li><li><a href="/bt/19.html">6.1. 计划任务之Shell脚本</a></li><li><a href="/bt/20.html">6.2. 计划任务之备份网站</a></li><li><a href="/bt/21.html">6.3. 计划任务之面板设置</a></li>				</ul>
			</li>
						<li>
				<a href="javascript:void(0);" class="waves-effect">
				<i class="icon-share"></i>
				<span> 提升性能				<span class="float-right menu-arrow">
				<i class="mdi mdi-chevron-right"></i>
				</span> 
				</span>
				</a>
				<ul class="submenu">
				 <li><a href="/bt/22.html">1. Swap交换分区</a></li><li><a href="/bt/23.html">2. PHP参数调整</a></li><li><a href="/bt/24.html">3. Mysql性能调整</a></li><li><a href="/bt/25.html">4. 定期释放缓存</a></li><li><a href="/bt/26.html">5. 启用禁ping</a></li>				</ul>
			</li>
						<li>
				<a href="javascript:void(0);" class="waves-effect">
				<i class="icon-share"></i>
				<span> 系统安全				<span class="float-right menu-arrow">
				<i class="mdi mdi-chevron-right"></i>
				</span> 
				</span>
				</a>
				<ul class="submenu">
				 <li><a href="/bt/27.html">服务器数据安全</a></li><li><a href="/bt/28.html">安全组及漏洞修补</a></li><li><a href="/bt/29.html">文件夹权限</a></li><li><a href="/bt/30.html">宝塔面板安全设置</a></li><li><a href="/bt/31.html">运行环境安全设置</a></li>				</ul>
			</li>
						<li>
				<a href="javascript:void(0);" class="waves-effect">
				<i class="icon-share"></i>
				<span> 实用收藏				<span class="float-right menu-arrow">
				<i class="mdi mdi-chevron-right"></i>
				</span> 
				</span>
				</a>
				<ul class="submenu">
				 <li><a href="/bt/32.html">常用Linux命令</a></li><li><a href="/bt/33.html">安装/升级/操作命令</a></li><li><a href="/bt/34.html">Linux常用命令大全</a></li><li><a href="/bt/36.html">忘记账户密码</a></li><li><a href="/bt/37.html">宝塔面板中网站页面出现403</a></li>				</ul>
			</li>
						<li>
				<a href="javascript:void(0);" class="waves-effect">
				<i class="icon-share"></i>
				<span> 宝塔笔记				<span class="float-right menu-arrow">
				<i class="mdi mdi-chevron-right"></i>
				</span> 
				</span>
				</a>
				<ul class="submenu">
				 <li><a href="/bt/biji/38.html"></a></li><li><a href="/bt/biji/39.html"></a></li><li><a href="/bt/biji/40.html"></a></li><li><a href="/bt/biji/41.html"></a></li><li><a href="/bt/biji/42.html"></a></li><li><a href="/bt/biji/43.html"></a></li><li><a href="/bt/biji/44.html"></a></li><li><a href="/bt/biji/45.html"></a></li><li><a href="/bt/biji/46.html"></a></li><li><a href="/bt/biji/47.html"></a></li>				</ul>
			</li>
						<li>
				<a href="/bt/biji/" class="waves-effect">
					<i class="icon-share"></i>
					<span>宝塔笔记
						<span class="float-right menu-arrow">
							<i class="mdi mdi-chevron-right"></i>
						</span>
					</span>
				</a>
			</li>
		</ul>
	</div>
	<div class="clearfix"></div>
</div>
</div>
<div class="content-page">
	<div class="content">
		<div class="container-fluid">
			<div class="page-title-box">
				<div class="row align-items-center">
					<div class="col-sm-6">
						<h1 class="page-title">如何利用宝塔自动备份网站、数据库及文件目录等</h1>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-xl-12">
					<div class="card m-b-30">
						<div class="card-body">
							<div class="table-responsive">
								<table class="table table-hover">
									<tbody>
										<span style="font-size:16px;">入宝塔面板后台，在左侧点击<code>计划任务</code>菜单，进入到计划任务管理面板，选择步<code>1</code>，<code>2</code>，<code>3</code>来分别备份网站、数据库以及文件目录等操作，因操作类似，我们来以<code>网站备份</code>来讲解下面的内容。<br /><br /><img alt="" src="/d/file/p/2020/06-13/6ebd741239a496e7e1c801967975e756.jpg" style="width: 800px; height: 520px;" /><br /><br />接下来，我们说一下，如何添加备份任务，如下图（3-7-2-2）：<br /><br /><img alt="" src="/d/file/p/2020/06-13/d4277c73cecba3b408d0b395eb0dfa87.jpg" style="width: 800px; height: 465px;" /></span><br />&nbsp;
<p><span style="font-size:16px;">如上图（3-7-2-2）所示：</span></p>
<p><span style="font-size:16px;">1、步1选择要备份的形式，我们演示选择备份网站；</span></p>
<p><span style="font-size:16px;">2、步2任务名称是不可输入状态，不需要改变；</span></p>
<p><span style="font-size:16px;">3、步3选择执行周期，比如：每星期 周一 01：30；</span></p>
<blockquote>
<p><span style="font-size:16px;">由于网站一般尺寸较大，建议时间选择在晚上12点以后，可以有效降低服务器负载。</span></p></blockquote>
<p><span style="font-size:16px;">4、步4选择要备份的网站（站点建立后会出现在这个列表里）；</span></p>
<p><span style="font-size:16px;">5、步5选择备份到的位置（宝塔默认）：<code>服务器磁盘</code>、<code>七牛云存储</code>、<code>阿里云OSS</code>、<code>FTP存储空间</code>，其中，除服务器磁盘外，其它的需要安装插件支持，后面的课程会讲到插件的安装与配置，这里就不多说了。</span></p>
<p><span style="font-size:16px;">6、步6保留最新的几份，考虑到磁盘空间及在压缩、备份过程中IO操作可能出现的问题，建议保留<code>3</code>份。</span></p>
<p><span style="font-size:16px;">7、步7排除规则，<strong>在网站备份、目录备份中</strong>，我们可以将要排除备份的诸如：缓存目录、上传图片、视频等大文件目录排除，这样可以极大的提高备份的可靠性，包越大问题的可能性就越多，占用的空间资源等也越大，朋友们，可以根据自己的源码文件结构来排除一些不必要的备份内容。</span></p>
<p><span style="font-size:16px;">8、最后，我们点击&nbsp;<img alt="" src="/d/file/p/2020/06-13/872350e7d73b6517b2ecb2b552cafd81.jpg" style="width: 140px; height: 34px;" tabindex="0" />&nbsp;完成备份任务的添加。</span></p><span style="font-size:16px;">1、计划任务之自动备份到本地服务器<br /><br />宝塔面板计划任务自动备份执行完后，备份文件在什么位置?<br /><br /><img alt="" src="/d/file/p/2020/06-13/bae650ae306c933562b83d44ac13bb04.jpg" style="width: 800px; height: 308px;" /></span><br />&nbsp;
<p><span style="font-size:16px;">如图（3-7-2-3）所示&mdash;&mdash;</span></p>
<p><span style="font-size:16px;">步1指向的备份到本地的位置为：<code>/www/backup</code>；<br />步2指向的为数据库的备份文件夹：<code>/www/backup/database</code>；<br />步3指向的为面板的备份文件夹：<code>/www/backup/panel</code>；<br />步4指向的为网站的备份文件夹：<code>/www/backup/site</code>；</span></p>
<p><span style="font-size:16px;">知道了数据备份的位置，若是备份对空间资源消耗太大，你可以根据备份内容的时间来删除多余的备份内容，以便节省空间的占用。</span></p>
<blockquote>
<p><span style="font-size:16px;">相比于其它备份方式，备份到本地速度更快，在站点较多设置任务执行周期时，可以密集一些设置。</span></p></blockquote><span style="font-size:16px;"><!--StartFragment --><br />2、计划任务之自动备份到云存储（七牛、阿里云OSS等）本节主要为大家讲一下，如何配置云存储执行自动备份任务，我们以七牛云为例来进行讲解，或您还未注册七牛云，请点击以下链接注册：ADS&mdash;&mdash;<br />平步云端，数据为先&nbsp;七牛云！现在注册&nbsp;&mdash;&mdash;就能领取：每月&nbsp;10GB&nbsp;下载流量、10&nbsp;GB&nbsp;存储空间、750&nbsp;小时/月免费自定义数据处理服务及&nbsp;20&nbsp;元/月音视频转码服务-&gt;&nbsp;https://www.qiniu.com/&nbsp;点击链接，马上享有！首先我们要先安装&nbsp;<img src="/d/file/p/2020/06-13/0da90a61336174f512d94a56140e2834.jpg" />&nbsp;插件，进入宝塔面板后台，点击&nbsp;软件商店&nbsp;，打开软件商店页面，如下图：<br /><img alt="" src="/d/file/p/2020/06-13/2d4268abf1c4cf99c5908e6ff96a53da.jpg" style="width: 800px; height: 414px;" /><br />我们在步1指向的应用搜索，搜索&rdquo;<code>七牛</code>&rdquo;，在搜索结果找到七牛云存储，在步2位置点击&ldquo;<code>安装</code>&rdquo;，弹出窗口点击确定开始安装七牛插件，安装完成后，点击&ldquo;<code>设置</code>&ldquo;，打开七牛云存储设置窗口。<br /><img alt="" src="/d/file/p/2020/06-13/452ed34776c49aae58d99b7f7c73e16c.jpg" style="width: 800px; height: 350px;" /></span>
<p><span style="font-size:16px;">如图（3-7-2-5）所示，我们注意到，需要先对步2，3，4，5进行配置，那么我们接下来看一下，这几个部分的信息在哪里，上文提到了先<a href="https://portal.qiniu.com/signup?code=1hafj85ywwg2a" target="_blank">注册账号</a>，然后我们登录七牛云。</span></p>
<p><span style="font-size:16px;">登录七牛云，点击&nbsp;<code>管理控制台</code>&mdash;&mdash;<br /><img alt="" src="/d/file/p/2020/06-13/c9a5b3b475211a54fc35bdb192c756c5.jpg" style="width: 800px; height: 42px;" /><br /><br />进入七牛控制面板：如下图（3-7-2-7）<br /><img alt="" src="/d/file/p/2020/06-13/6b80f28f20f525e34723b62c23ba3687.jpg" style="width: 800px; height: 524px;" /><br /><br />点击右上角头像，下拉里选择步1所示 密钥管理 ，若您还未创建密钥对，请先在步4点击 创建一套AK与SK。拿到步2、3的数据，直接粘到宝塔面板七牛配置项。<br />注意（不要搞混）：<br /><br />access_key = AK<br />secret_key = SK<br /><br />我们再在控制台左侧，找到 对象存储如图所示，点击立即添加，或是鼠标放在左侧菜单，找到对象存储进入到对象存储页面。<br /><img alt="" src="/d/file/p/2020/06-13/e874694c1bd89a2bcc14df19fd5ba3d7.jpg" style="width: 800px; height: 421px;" /><br /><br />如下图（3-7-2-9）：我们直接点击，新建空间：<br /><br /><img alt="" src="/d/file/p/2020/06-13/b945d9bc8c8a6caad3abeefccf0d6b33.jpg" style="width: 800px; height: 311px;" /></span><br /><br />&nbsp;</p>
<blockquote>
<p><span style="font-size:16px;">需要注意的是，创建空间时，访问控制请选择是私有和公开，不同的应用场景选择不同的访问控制。</span></p></blockquote>
<p><span style="font-size:16px;">创建完成将空间名称配置到宝塔面板七牛云存储设置里。</span></p>
<p><span style="font-size:16px;">最后，我们再给空间配置个加速域名，如下图（3-7-2-10）所示：<br /><img alt="" src="/d/file/p/2020/06-13/6eb29116a1070d768d365440b7c0f179.jpg" style="width: 800px; height: 286px;" /><br /><br />点击 域名 打开域名配置页面，使用自己已经备案过的二级域名，如：qiniu.xxx.com 再将域名配置到宝塔七牛云存储设置里面的加速域名。<br /><br />以上几步处理好后，我们就可以正常使用七牛了，回到计划任务面板，在网站、数据库及文件备份里，备份到选择七牛云存储即可。<br /><br />针对七牛云，后面还有专门的讲解所以在这里就一笔代过了。需要注意的是，使用云存储对网络环境有较高的要求，在设置执行周期时，一定要分隔开每个网站或其它备份项的时间，不要太密集，这样才不会出问题，不然可能你正备份到一半，另一个也开始执行了，几个重叠执行的就把进程占满了。。。这样会有什么结果，想想也知道吧。<br /><br /><br />3、计划任务之自动备份到FTP远程服务器<br />同样的，在使用此功能前要先安装，FTP存储空间插件，在上节中，如何安装插件已经大概描述过了，这节就不细讲了，安装完FTP存储空间插件后，点击插件设置 打开设置窗口如下图（3-7-2-11）：<br /><br /><img alt="" src="/d/file/p/2020/06-13/12c7b9098146a5e9f21b6eb4f2a9353f.jpg" style="width: 800px; height: 312px;" /></span><br /><br />&nbsp;</p>
<p><span style="font-size:16px;">如图（3-7-2-11）所示&mdash;&mdash;</span></p>
<p><span style="font-size:16px;">一般来说要连接FTP需要主机地址、用户名、密码等信息，我们可以通过FTP将一个服务器的网站、数据库、文件目录通过远程连接的方式备份到另一个服务器中或其它的FTP资源中，所以我们首先要明确这几项配置：</span></p>
<p><span style="font-size:16px;">（1）Host 即FTP主机地址，可以是IP或网址；<br />（2）用户名即指定的FTP用户名；<br />（3）密码为指定FTP的密码；<br />（4）存储位置是相对于FTP根目录的存储路径，这里是自定义的。</span></p>
<p><span style="font-size:16px;">如上步1，2，3，4设置好后，直接点击&nbsp;<img alt="" src="/d/file/p/2020/06-13/411e5ecdf5424f4fcfc02952bed06138.jpg" style="width: 46px; height: 30px;" tabindex="0" />&nbsp;即可完成FTP的设置；<br />自此，我们可以通过计划任务备份相关的资源到远程服务器了。</span></p>
<blockquote>
<p><span style="font-size:16px;">有很多三方的平台也提供FTP存储服务，若您不是备份到自己的其它服务器里，请谨慎筛选，以免造成不必要的损失。</span></p></blockquote>									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<footer class="footer">
		© 2020 IDC笔记 <i class="mdi mdi-heart text-danger"></i>. | 备案号：<a href="https://beian.miit.gov.cn/">辽ICP备18000516号</a>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?674585fbbd2294d3faf910f668ea91b4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

	</footer>
</div>
</div>
<script src="/skin1/js/jquery.min.js"></script>
<script src="/skin1/js/bootstrap.bundle.min.js"></script>
<script src="/skin1/js/metismenu.min.js"></script>
<script src="/skin1/js/jquery.slimscroll.js"></script>
<script src="/skin1/js/waves.min.js"></script>
<script src="/skin1/js/morris.min.js"></script>
<script src="/skin1/js/raphael.min.js"></script>
<script src="/skin1/js/dashboard.init.js"></script>
<script src="/skin1/js/app.js"></script>
<script src="/foot.js"></script>
</body>
</html>